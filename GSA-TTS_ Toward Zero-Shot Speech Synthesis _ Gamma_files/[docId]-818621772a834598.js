(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3930,4792],{12589:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/docs/[docId]",function(){return i(45905)}])},38095:function(e,t){"use strict";t.Z={src:"/_next/static/media/Sal-Spray.5abcbf19.svg",height:1657,width:2161,blurWidth:0,blurHeight:0}},71537:function(e,t,i){"use strict";i.d(t,{z:function(){return ex}});var n=i(52322);i(98248),i(61219);var r=i(55671),l=i(62202),s=i(18200),o=i(81674),a=i(94523),d=i(97729),c=i.n(d),u=i(5632),x=i(2784),h=i(43997),m=i(14274),p=i(93202),g=i(2013);let j=e=>{let t=["malformed","encoded","illegal"];return e.includes("URIError")&&e.split(" ").some(e=>t.includes(e))};class f extends x.Component{componentDidMount(){window.addEventListener("error",this.handleError),window.addEventListener("unhandledrejection",this.handleUnhandledRejection)}componentWillUnmount(){window.removeEventListener("error",this.handleError),window.removeEventListener("unhandledrejection",this.handleUnhandledRejection)}componentDidCatch(e,t){if("dev"===m.v.APPLICATION_ENVIRONMENT)throw e}static getDerivedStateFromError(e){return{hasError:!0,errMessage:e.message,shouldMountChildren:!1}}handleError(e){if("dev"===m.v.APPLICATION_ENVIRONMENT)throw Error("[ErrorBoundary]: ".concat(e.message))}handleUnhandledRejection(e){let t=this.props.unhandledRejectionFilter(e);if(t){var i;let t=(null===(i=e.reason)||void 0===i?void 0:i.message)||"";this.setState({hasError:!0,errMessage:t})}}render(){let e=!0===j(this.state.errMessage)?{opacity:"0.65",starOverlay:!1}:{};return(0,n.jsxs)(n.Fragment,{children:[this.state.hasError&&(0,n.jsx)(g.q,{pos:"absolute",top:0,...e,errMessage:""===this.state.errMessage?void 0:this.state.errMessage,showDisclosure:!0}),this.state.shouldMountChildren&&this.props.children]})}constructor(e){super(e),this.state={hasError:!1,errMessage:"",shouldMountChildren:!0},this.handleError=this.handleError.bind(this),this.handleUnhandledRejection=this.handleUnhandledRejection.bind(this)}}f.defaultProps={unhandledRejectionFilter:e=>{var t;return!!j((null===(t=e.reason)||void 0===t?void 0:t.message)||"")||e.reason instanceof p.YBv&&!1===document.hidden||e.reason instanceof p.R5s}},i(61036),i(62376),i(6991),i(76298),i(4466),i(43839),i(40917);var v=i(11050),C=i(42005);let b=()=>{let e=(0,x.useRef)(!1),t=(0,x.useRef)(new Map);(0,x.useEffect)(()=>{if("production"!==m.v.APPLICATION_ENVIRONMENT)return;let i=()=>{if(e.current)return;let i=t.current.get("total"),n=t.current.get("notTrusted"),r=n/i>.5;r&&i>5&&(e.current=!0,C.c.track(v.xW.NOT_TRUSTED_EVENTS_DETECTED,{totalEvents:i,notTrustedEvents:n}))},n=e=>{e.isTrusted||t.current.set("notTrusted",(t.current.get("notTrusted")||0)+1),t.current.set("total",(t.current.get("total")||0)+1),i()};return document.addEventListener("paste",n,{capture:!0}),document.addEventListener("mousedown",n,{capture:!0}),document.addEventListener("keydown",n,{capture:!0}),()=>{document.removeEventListener("paste",n,{capture:!0}),document.removeEventListener("mousedown",n,{capture:!0}),document.removeEventListener("keydown",n,{capture:!0})}},[])};var y=i(79254),k=i(27354),w=i(42111),E=i(32019),S=i(99092),I=i(36651);let _=(e,t)=>{S.H.init(m.v.HIGHLIGHT_PROJECT_ID,{environment:m.v.APPLICATION_ENVIRONMENT,sessionShortcut:!!t&&"shift+command+0",enableStrictPrivacy:e,enableSegmentIntegration:!0,networkRecording:{enabled:!0,recordHeadersAndBody:!0}}),v.co.loadSdkPromise.then(e=>{e&&e.addSourceMiddleware(S.LZ)})},A=e=>{let{children:t}=e,{user:i,anonymousUser:r,isGammaOrgUser:l,isUserLoading:s}=(0,I.SE)(),{enabled:o,enableStrictPrivacy:a}=(0,w.ye)("highlight");return(0,x.useEffect)(()=>{o&&!s&&i&&_(a,l)},[a,o,l,s,i]),(0,x.useEffect)(()=>{if(!s){if(i){let{id:e,displayName:t,email:n,profileImageUrl:r}=i;S.H.identify(e,{highlightDisplayName:t,email:n,avatar:r})}else if(null==r?void 0:r.id){let{id:e,displayName:t}=r;S.H.identify("",{anonDisplayName:t||"",anonId:e})}}},[i,r,s]),(0,n.jsx)(n.Fragment,{children:t})};var T=i(34881),O=i(87254),P=i(5879),D=i(44754);let R=e=>{let{children:t}=e;return(0,D.b)(),(0,n.jsx)(P.bd,{i18n:O.ag,children:t})};var N=i(18875),G=i(17292),z=i(55478),M=i(76332),L=i(6912),F=i(27902),U=i(21733),W=i(78462),H=i(72354),V=i(1163),B=i(2953);let K="get-gamma-pro",q=e=>{var t,i;let{children:r}=e,{currentWorkspace:l,isUserLoading:s}=(0,U.SE)(),[o,a]=(0,x.useState)(!1),d=(0,F.z$)(),c=(0,w.ye)("upsellUXEnabled_Pro"),{data:u,refetch:h}=(0,M.FaU)({variables:{workspaceId:null==l?void 0:l.id,includeExpired:!0},skip:!(null==l?void 0:l.id)}),m=null==u?void 0:u.subscription;(0,L.ET)({subscription:m,workspace:l,autoLaunch:!0});let{data:p}=(0,M.kNl)({variables:{workspaceId:null==l?void 0:l.id},skip:!l}),g=null==p?void 0:null===(t=p.products)||void 0===t?void 0:t.find(e=>"pro"===e.key),j=null==g?void 0:null===(i=g.prices)||void 0===i?void 0:i.find(e=>e.frequencyUnit===M.C_B.Year),f=(0,V.K9)(l),{isOpen:v,onOpen:C,onClose:b}=(0,z.q)({id:"upsell-modal"}),y=(0,x.useRef)(null),k=(0,x.useCallback)(e=>{let{onOpenCallback:t,onCloseCallback:i,insufficientCreditsWarning:n,segmentEvent:r}=e;c&&(a(!!n),null==t||t(),C(),null==d||d.track(r),y.current=i||null)},[d,C,c]),E=(0,x.useCallback)(()=>{var e;null==y||null===(e=y.current)||void 0===e||e.call(y),b(),y.current=null,a(!1)},[b]),[S,I]=(0,x.useState)({openUpsellModal:k,product:f,subscription:m,proYearlyProductPrice:j});return(0,x.useEffect)(()=>{let e="true"===(0,W.SJ)()[K];e&&!s&&l&&(C(),(0,T.lO)({query:{...(0,W.SJ)(),[K]:void 0},emitChange:!1}))},[C,l,s]),(0,x.useEffect)(()=>{I({openUpsellModal:k,refetchSubscription:h,product:f,subscription:m,proYearlyProductPrice:j})},[k,f,m,j,h]),(0,n.jsxs)(B.P.Provider,{value:S,children:[r,(0,n.jsx)(H.b,{insufficientCreditsWarning:o,isUpsellModalOpen:v,closeUpsellModal:E}),(0,n.jsx)(L.S1,{})]})};var Y=i(99268),Z=i(25944),J=i(19902);let X="no_org_id",Q=e=>{let{children:t}=e;(0,Z.iZ)();let{user:i,anonymousUser:r,currentWorkspace:l,isUserLoading:s}=(0,I.SE)();return(0,x.useEffect)(()=>{let e=(0,J.K)();(0,Y.$n)(e.get()),e.fetch().then(Y.$n).catch(()=>{})},[]),(0,x.useEffect)(()=>{let e;if(!s){if(i){let{id:t,email:n}=i,r=!!n&&n.endsWith("@gamma.app"),s=(null==l?void 0:l.id)||X;e={userId:t,isGammaUser:r,userOrgId:s,anonymousUser:!1,gammaUserFirstName:r?i.firstName:""}}else e={userId:"anonymous_user",isGammaUser:!1,userOrgId:X,anonymousUser:!0,gammaUserFirstName:""};(0,Y.$n)(e)}},[s,i,r,l]),(0,n.jsx)(n.Fragment,{children:t})};var $=i(54839),ee=i(91994),et=i(89311),ei=i(95426),en=i(1198),er=i(90221),el=i(60742),es=i(13265),eo=i(90383);o.vc.autoAddCss=!1;let ea=(0,ee.bh)(),ed=(0,p.RqP)(),ec=(0,p.PGq)(),eu=(0,l.B1)(a.qZ,{styles:{global:{".ProseMirror":{outline:"0 none"}}}});((e,t)=>{let i=(0,$.I)({theme:t});e.globalToast=i})(window,eu),(0,el.Lq)(),G.F7.initialize(),(0,T.lt)(),v.co.init(),(0,N.S1)(),(0,k.u7)(),(0,ei.a)("appMainBundleLoaded"),console.log("\uD83D\uDE80 GammaApp main wrapper imported"),w.VH.get("debugLogging")||(window.console.debug=()=>{});let ex=e=>function(t){return(0,n.jsx)(eh,{children:(0,n.jsx)(e,{...t})})},eh=e=>{let{children:t}=e;console.log("\uD83D\uDE80 GammaApp main wrapper rendered");let i=(0,u.useRouter)();(0,et.l)(),(0,es.k)(),b(),(0,x.useEffect)(()=>{let e=(e,t)=>{let{shallow:i}=t;console.debug("[GammaApp - handleRouteChange] App is changing to ".concat(e," ").concat(i?"with":"without"," shallow routing"))};return i.events.on("routeChangeStart",e),()=>{i.events.off("routeChangeStart",e)}},[i]);let l=(0,en.aY)();return(0,n.jsx)(h.zt,{store:ea,children:(0,n.jsx)(R,{children:(0,n.jsx)(s.x,{theme:eu,resetCSS:!0,children:(0,n.jsx)(f,{children:(0,n.jsx)(r.e,{client:ed,children:(0,n.jsxs)(p.mdV,{client:ec,children:[(0,n.jsx)(ep,{}),(0,n.jsx)(y.H6,{}),(0,n.jsx)(N.GQ,{}),(0,n.jsxs)(I.fS,{children:[(0,n.jsx)(F.qA,{children:(0,n.jsx)(w.dF,{children:(0,n.jsx)(q,{children:(0,n.jsx)(p.Imj,{children:(0,n.jsx)(Q,{children:(0,n.jsx)(A,{children:(0,n.jsx)(en.dv,{value:l,children:(0,n.jsx)(E.u,{children:t})})})})})})})}),(0,n.jsx)(w.MG,{})]})]})})})})})})},em="A new medium for presenting ideas, powered by AI. Beautiful, engaging content with none of the formatting and design work.",ep=()=>{let e=m.v.APPLICATION_ENVIRONMENT;return(0,n.jsxs)(c(),{children:[(0,n.jsx)("title",{children:"Gamma"}),(0,n.jsx)("meta",{name:"viewport",content:"width=device-width, initial-scale=1.0, viewport-fit=cover"}),(0,n.jsx)("link",{rel:"manifest",href:"/manifest.json"}),(0,n.jsx)("link",{rel:"shortcut icon",href:"production"===e?"/favicons/favicon-transparent-96x96.png":"staging"===e?"/favicons/favicon_staging.jpg":"/favicons/favicon_local.jpg"}),(0,n.jsx)("meta",{content:em,name:"description"},"description"),(0,n.jsx)("meta",{content:"Gamma",property:"og:title"},"og:title"),(0,n.jsx)("meta",{content:em,property:"og:description"},"og:description"),(0,n.jsx)("meta",{content:m.v.OG_IMAGE_URL,property:"og:image"},"og:image"),(0,n.jsx)("meta",{content:"Gamma",property:"twitter:title"},"twitter:title"),(0,n.jsx)("meta",{content:em,property:"twitter:description"},"twitter:description"),(0,n.jsx)("meta",{content:m.v.OG_IMAGE_URL,property:"twitter:image"},"twitter:image"),(0,n.jsx)("meta",{property:"og:type",content:"website"},"og:type"),(0,n.jsx)("meta",{content:"summary_large_image",name:"twitter:card"},"twitter:card"),(0,n.jsx)("link",{href:"https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900",rel:"stylesheet"}),(0,n.jsx)("link",{rel:"stylesheet",href:"https://use.typekit.net/tiw2cwq.css"}),!(0,er.l6)()&&!(0,eo.wg)()&&(0,n.jsx)("script",{async:!0,src:"https://cdn.optimizely.com/js/20579410255.js"}),(0,n.jsx)("script",{src:"//cdn.iframe.ly/embed.js",async:!0,charSet:"utf-8"})]})}},60510:function(e,t,i){"use strict";i.d(t,{r:function(){return N},h:function(){return G}});var n=i(52322),r=i(38035),l=i(17993),s=i(77533),o=i(62614),a=i(81672),d=i(42946),c=i(49929),u=i(2784),x=i(90221),h=i(90439),m=i(93441),p=i(89458),g=i(90383),j=i(18733),f=i(5879),v=i(42111),C=i(78462),b=i(94199),y=i(11082),k=i(64173),w=i(31807),E=i(6912),S=i(48832),I=i(11050),_=i(36651),A=i(81640),T=i(12265),O=i(11942),P=i(88640);let D=[{Component:()=>{let e=(0,v.ye)("outageButterbar");if(!e.enabled)return null;let{header:t,text:i,buttonLink:r,buttonText:l,key:s,pathnameRegexp:o}=e;return(0,n.jsx)(G,{definition:{key:s,header:t,text:i,buttonText:l,buttonLink:r,conditions:()=>!o||null!==window.location.pathname.match(new RegExp(o))}})},key:"outage-butterbar"},{Component:()=>{let e=(0,v.ye)("openAiStatus");return"NORMAL"===e?null:(0,n.jsx)(G,{definition:{key:"ai-service-status",header:(0,n.jsx)(f.cC,{id:"1Agl06"}),text:(0,n.jsx)(f.cC,{id:"cCl6WD"}),ttl:86400,conditions:()=>(0,C._r)(window.location.pathname)}})},key:"ai-service-status-butterbar"},{Component:()=>{var e,t,i;let{user:r,currentWorkspace:l}=(0,_.SE)(),{subscription:s,product:o}=(0,A.z)(),{launchFailedPaymentFlow:a,failedPaymentFlowEnabled:d}=(0,E.ET)({subscription:s,workspace:l,autoLaunch:!1});if(!s||!o)return null;let c=(0,T.K)(),{name:u,dontChurnMessage:x}=c[o],{status:h,expirationTime:m,id:p}=s,g=(0,S.p6)(m,"MMMM do, yyyy"),j=(null==s?void 0:null===(e=s.createdByUser)||void 0===e?void 0:e.id)===(null==r?void 0:r.id),v=(0,O._8)(),C=m>Date.now();if(!("unpaid"===h||"past_due"===h)&&!C)return null;let k=v&&(j||!(null==s?void 0:s.createdByUser))?(0,n.jsx)(f.cC,{id:"velw1T",values:{expirationFormatted:g,GAMMA_PROPER_NOUN:b.N6,productName:u},components:{0:(0,n.jsx)(y.r,{href:v,isExternal:!0,textDecoration:"underline"})}}):(0,n.jsx)(f.cC,{id:"9aBOfk",values:{expirationFormatted:g,GAMMA_PROPER_NOUN:b.N6,productName:u,0:null===(t=s.createdByUser)||void 0===t?void 0:t.displayName,1:null===(i=s.createdByUser)||void 0===i?void 0:i.email},components:{0:(0,n.jsx)("b",{}),1:(0,n.jsx)("b",{})}});return(0,n.jsx)(G,{definition:{key:"payment-overdue-".concat(p),header:(0,n.jsx)(f.cC,{id:"gosJne",values:{productName:u}}),text:(0,n.jsxs)(n.Fragment,{children:[x," ",k]}),buttonText:(0,n.jsx)(f.cC,{id:"WLvqZR"}),buttonLink:d?void 0:v,buttonOnClick:d?a:void 0}})},key:"payment-overdue-butterbar"},{Component:()=>{let{subscription:e,openUpsellModal:t}=(0,A.z)();if(!e)return null;let{status:i,expirationTime:r,id:l}=e,s=new Date>(0,w.Z)(r)&&new Date<(0,k.Z)((0,w.Z)(r),{days:10});if(!s)return null;let o=()=>t({segmentEvent:I.AA.GAMMA_PRO_UPSELL_SUBSCRIPTION_EXPIRED_BUTTERBAR}),a=(0,n.jsx)(y.r,{onClick:o,isExternal:!0,textDecoration:"underline",children:(0,n.jsx)(f.cC,{id:"mj68q/"})});return(0,n.jsx)(G,{definition:{key:"subscription-expired-".concat(l),header:(0,n.jsx)(f.cC,{id:"5nhH6A"}),text:(0,n.jsxs)(n.Fragment,{children:["unpaid"===i||"past_due"===i?(0,n.jsx)(f.cC,{id:"QdgXJv"}):""," ",a]}),buttonText:(0,n.jsx)(f.cC,{id:"kwkhPe"}),buttonOnClick:o}})},key:"subscription-expired-butterbar"},{Component:()=>{var e,t,i;let{user:r}=(0,_.SE)(),{subscription:l,product:s}=(0,A.z)();if(!l||!s)return null;let{status:o,expirationTime:a,id:d,cancellationRequestedTime:c}=l,u="canceled"!=o&&c&&new Date<(0,w.Z)(a)&&new Date>(0,k.Z)((0,w.Z)(a),{days:-7});if(!u)return null;let x=(null==l?void 0:null===(e=l.createdByUser)||void 0===e?void 0:e.id)===(null==r?void 0:r.id),h=(0,O._8)(),m=(0,S.p6)(a,"MMMM do, yyyy"),p=(0,T.K)(),{name:g,dontChurnMessage:j}=p[s],v=!x&&(null==l?void 0:l.createdByUser)?(0,n.jsx)(f.cC,{id:"z4DeyC",values:{expirationFormatted:m,GAMMA_PROPER_NOUN:b.N6,productName:g,0:null===(t=l.createdByUser)||void 0===t?void 0:t.displayName,1:null===(i=l.createdByUser)||void 0===i?void 0:i.email},components:{0:(0,n.jsx)("b",{}),1:(0,n.jsx)("b",{})}}):(0,n.jsx)(f.cC,{id:"qP91+f",values:{expirationFormatted:m,GAMMA_PROPER_NOUN:b.N6,productName:g},components:{0:(0,n.jsx)(y.r,{href:h,isExternal:!0,textDecoration:"underline"})}});return(0,n.jsx)(G,{definition:{key:"subscription-ending-soon-".concat(d),header:(0,n.jsx)(f.cC,{id:"THJAvC",values:{productName:g}}),text:(0,n.jsxs)(n.Fragment,{children:[j," ",v]}),buttonText:(0,n.jsx)(f.cC,{id:"3jHA5d"}),buttonLink:h}})},key:"upcoming-cancellation-butterbar"},{key:"tablet-browser-warning",header:(0,n.jsx)(f.cC,{id:"JAtlMu",values:{GAMMA_PROPER_NOUN:b.N6}}),text:(0,n.jsx)(f.cC,{id:"9JlCFS",values:{GAMMA_PROPER_NOUN:b.N6}}),conditions:()=>(0,x.dA)(),dismissKey:P.H.lastDismissedPreferredBrowserMessage},{key:"desktop-browser-warning",header:(0,n.jsx)(f.cC,{id:"3S0+Wy",values:{GAMMA_PROPER_NOUN:b.N6}}),text:(0,n.jsx)(f.cC,{id:"Tf7VpJ"}),conditions:()=>R()&&(0,x.ds)(),dismissKey:P.H.lastDismissedPreferredBrowserMessage}],R=()=>(0,x.jP)()||!(0,x.i7)()&&!(0,x.G6)()&&!(0,x.NA)(),N=e=>{let{isViewOnly:t}=e,i=(0,m.gF)();if(t||!i||(0,x.l6)()||h.cx||(0,g.wg)())return null;let l=D.map(e=>"Component"in e?(0,n.jsx)(e.Component,{},e.key):(0,n.jsx)(G,{definition:e},e.key));return(0,n.jsx)(r.k,{"data-testid":"butterbar",direction:"column",top:0,pos:"relative",zIndex:"banner",sx:{"> *:not(:first-child)":{display:"none"}},children:l})},G=e=>{let{definition:t}=e,{key:i,dismissKey:x="butterbar-dismiss-".concat(i),header:h,text:m,buttonText:g,buttonLink:f,buttonOnClick:v=f?()=>window.open(f,"_blank"):void 0,conditions:C,ttl:b}=t,[y,k]=(0,p.I)(x,!1);return((0,u.useEffect)(()=>{if(!(b&&y))return;let e=new Date().getTime(),t=new Date(y).getTime(),i=e-t>1e3*b;i&&j.W.removeItem(x)},[x,y,b]),C&&!C()||y)?null:(0,n.jsxs)(r.k,{direction:"row",bg:"indigo.500",color:"white",py:3,px:4,align:"center",fontSize:"sm",children:[(0,n.jsxs)(l.g,{flex:"1",align:"start",spacing:0,children:[(0,n.jsx)(s.x,{fontWeight:"bold",children:h}),(0,n.jsx)(s.x,{opacity:"0.7",fontSize:"xs",children:m})]}),g&&v&&(0,n.jsx)(o.z,{variant:"plain",size:"sm",mr:4,rightIcon:f?(0,n.jsx)(c.G,{icon:d.wlW}):void 0,onClick:v,children:g}),(0,n.jsx)(a.P,{onClick:()=>{k(String(new Date))}})]})}},2013:function(e,t,i){"use strict";i.d(t,{q:function(){return y}});var n=i(52322),r=i(38035),l=i(77533),s=i(49259),o=i(87436),a=i(95897),d=i(28535),c=i(89511),u=i(11121),x=i(44438),h=i(42822),m=i(62614),p=i(75009),g=i(94523),j=i(5879),f=i(3543),v=i(92981);let C=(0,n.jsx)(j.cC,{id:"HiX9QN"}),b={bgImage:"radial-gradient(1px 1px at 20px 30px, #eee, rgba(0,0,0,0)),\n    radial-gradient(1px 1px at 40px 70px, #fff, rgba(0,0,0,0)),\n    radial-gradient(1px 1px at 50px 160px, #ddd, rgba(0,0,0,0)),\n    radial-gradient(1px 1px at 90px 40px, #fff, rgba(0,0,0,0)),\n    radial-gradient(1px 1px at 130px 80px, #fff, rgba(0,0,0,0)),\n    radial-gradient(1px 1px at 160px 120px, #ddd, rgba(0,0,0,0))",bgRepeat:"repeat",bgSize:"200px 200px",transform:"translate(-50%,-50%)",borderRadius:{base:0,lg:"100px"},pos:"relative",maxW:"8xl",maxH:"5xl",minH:{base:0,lg:"5xl"}},y=e=>{let{errMessage:t=C,showDisclosure:i=!1,opacity:y=1,starOverlay:k=!0,backgroundColor:w=g.qZ.colors.trueblue[900],...E}=e,S=k?b:{};return(0,n.jsx)(r.k,{"data-error-component":!0,w:"100vw",h:"100vh",overflow:"hidden",zIndex:99999,backgroundColor:(0,f.tT)(w,y),...E,children:(0,n.jsx)(r.k,{...S,justifyContent:"center",alignItems:"center",flex:1,p:[4,16],left:"50%",top:"50%",children:(0,n.jsxs)(v.qX,{lede:"",title:(0,n.jsx)(j.cC,{id:"HbR60U"}),stackProps:{shadow:"lg-dark",position:"relative"},children:[(0,n.jsx)(l.x,{children:(0,n.jsx)(j.cC,{id:"1gm+lP"})}),i&&(0,n.jsx)(s.U,{allowToggle:!0,pt:4,children:(0,n.jsxs)(o.Q,{children:[(0,n.jsxs)(a.K,{px:0,_hover:{bgColor:"none"},borderStyle:"none",children:[(0,n.jsx)(d.xu,{flex:"1",textAlign:"left",children:(0,n.jsx)(j.cC,{id:"qug3k/"})}),(0,n.jsx)(c.X,{})]}),(0,n.jsx)(u.H,{pb:4,children:(0,n.jsx)(x.E,{colorScheme:"red",children:t})})]})}),(0,n.jsx)(h.M,{children:(0,n.jsx)(m.z,{variant:"solid",size:"lg",m:6,onClick:()=>{window.location.reload()},children:(0,n.jsx)(j.cC,{id:"C6f2hU"})})}),(0,n.jsx)(p.E,{pos:"absolute",w:36,bottom:"calc(-100% + 120px)",right:-12,src:"/_next/static/media/Sal-Asteroid-Parachute.ad317576.png",pointerEvents:"none",opacity:{base:0,md:1}})]})})})}},4661:function(e,t,i){"use strict";i.d(t,{o:function(){return o}});var n=i(52322),r=i(38035),l=i(60510);let s=e=>{let{children:t,withFooter:i,isViewOnly:s}=e;return(0,n.jsxs)(r.k,{direction:"column",width:"100%",height:"100%",minHeight:"var(--100vh)",bgColor:"gray.100",color:"gray.800",children:[(0,n.jsx)(l.r,{isViewOnly:s}),(0,n.jsx)(r.k,{zIndex:"1",id:"main",flex:"1",justifyContent:"center",alignItems:"center",direction:"column",position:"relative",children:t}),i&&(0,n.jsxs)(r.k,{fontSize:"12px",color:"gray.400",pb:8,id:"footer",justifyContent:"center",children:["\xa9 ",new Date().getFullYear()," Gamma Tech, Inc."]})]})};function o(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{withFooter:!1,isViewOnly:!1},{withFooter:i,isViewOnly:r}=t,l=t=>(0,n.jsx)(s,{withFooter:i,isViewOnly:r,children:(0,n.jsx)(e,{...t})});return"getInitialProps"in e&&(l.getInitialProps=e.getInitialProps),l}},79254:function(e,t,i){"use strict";i.d(t,{$C:function(){return x},H6:function(){return u},Uj:function(){return h}});var n=i(52322),r=i(5632),l=i(73534),s=i.n(l),o=i(14274),a=i(93441),d=i(34385);let c=["/signin","/signup","/invitations/workspaces/[workspaceId]"],u=()=>{let e=(0,r.useRouter)().pathname;return!(0,a.gF)()||c.includes(e)?null:(0,n.jsx)("style",{children:".grecaptcha-badge { visibility: hidden; }"})},x=()=>(0,n.jsx)(s(),{src:"https://www.google.com/recaptcha/enterprise.js?render=".concat(o.v.RECAPTCHA_SCORING_KEY),async:!0,defer:!0}),h=async e=>(await (0,d.X)(50,100)(()=>!!window.grecaptcha).catch(()=>{throw Error("Timed out waiting for grecaptcha")}),new Promise((t,i)=>{grecaptcha.enterprise.ready(async()=>{try{let i=await grecaptcha.enterprise.execute(o.v.RECAPTCHA_SCORING_KEY,{action:e});t(i)}catch(e){console.log(e),i(e)}})}))},45820:function(e,t,i){"use strict";i.d(t,{N:function(){return ej}});var n=i(52322),r=i(69251),l=i(30523),s=i(28535),o=i(42946),a=i(5879),d=i(97729),c=i.n(d),u=i(2784),x=i(704),h=i(13734),m=i(75816),p=i(45760),g=i(18153),j=i(91994),f=i(76282),v=i(17993),C=i(5740),b=i(43297),y=i(29117),k=i(77533),w=i(54933),E=i(49929),S=i(74153),I=i(75258);let _=(0,u.memo)(()=>{let[e]=(0,S.Ns)("editorMode");return(0,n.jsxs)(v.g,{spacing:3,align:"stretch",children:[(0,n.jsx)(s.xu,{fontSize:"sm",children:(0,n.jsx)(a.cC,{id:"x4f8pZ"})}),"freeform"===e?(0,n.jsx)(A,{title:I.D.freeform.label(),icon:I.D.freeform.icon,children:(0,n.jsx)(a.cC,{id:"ELg7Zs",values:{0:I.D.freeform.label()}})}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(A,{title:I.D.structured.label(),icon:I.D.structured.icon,children:(0,n.jsx)(a.cC,{id:"iKG7iK",values:{0:I.D.structured.label()}})}),(0,n.jsx)(A,{title:(0,n.jsx)(a.cC,{id:"+mgW41"}),icon:o.Yai,children:(0,n.jsx)(a.cC,{id:"oGNrqw",components:{0:(0,n.jsx)(C.T,{})}})}),(0,n.jsx)(A,{title:(0,n.jsx)(a.cC,{id:"1Nr9Bi"}),icon:w.BDt,children:(0,n.jsx)(a.cC,{id:"5cPTto",components:{0:(0,n.jsx)(C.T,{})}})})]})]})});_.displayName="AIGeneratorTips";let A=e=>{let{icon:t,title:i,children:r}=e;return(0,n.jsx)(s.xu,{p:4,borderRadius:"md",bg:"whiteAlpha.700",children:(0,n.jsxs)(b.K,{color:"gray.700",spacing:"1",children:[(0,n.jsxs)(y.U,{spacing:"1",fontSize:"sm",children:[null!==t&&(0,n.jsx)(E.G,{icon:t}),(0,n.jsx)(k.x,{fontWeight:"600",color:"gray.800",children:i})]}),(0,n.jsx)(k.x,{fontSize:"sm",children:r})]})})};var T=i(51874),O=i(93546),P=i(8484),D=i(87651),R=i(62614);let N=(0,u.memo)(()=>{let e=(0,j.TL)(),t=(0,j.qr)(),i=(0,j.CG)(f.Zm),r=(0,j.CG)(f.d_),l=(0,j.CG)(f.Vn),d=(0,S.o7)(),c=(0,u.useCallback)(()=>{let i=(0,f.jj)(t.getState()),n=i.find(e=>e.isDraft);n&&e((0,f.J7)({num:n.num}))},[e,t]);return(0,n.jsx)(s.xu,{children:i&&(0,n.jsx)(D.U,{in:l,children:(0,n.jsxs)(b.K,{direction:{base:"column",md:"row"},alignItems:{base:"stretch",md:"center"},spacing:4,bg:"white",p:"4",borderRadius:"lg",boxShadow:"sm",children:[(0,n.jsxs)(y.U,{flex:"1",children:[(0,n.jsx)(E.G,{icon:o.On6}),(0,n.jsxs)(b.K,{spacing:0,children:[(0,n.jsx)(k.x,{fontWeight:"600",fontSize:"lg",children:(0,n.jsx)(a.cC,{id:"YU/AK+",values:{0:null==r?void 0:r.num}})}),(0,n.jsx)(k.x,{children:(0,n.jsx)(a.cC,{id:"J4c0Rh"})})]})]}),(0,n.jsx)(R.z,{variant:"solid",colorScheme:"primary",onClick:d,children:(0,n.jsx)(a.cC,{id:"u52q7m"})}),(0,n.jsx)(R.z,{onClick:c,variant:"plain",children:(0,n.jsx)(a.cC,{id:"dEgA5A"})})]})})})});N.displayName="OverrideDraftWarning";var G=i(75768),z=i(32899),M=i(10625),L=i(67046),F=i(332),U=i(99058),W=i(44035),H=i(39237),V=i(27599),B=i(94523),K=i(18149),q=i.n(K);let Y={size:"sm",variant:"ghost",colorScheme:"gray",color:"gray.800"},Z=(0,u.memo)(()=>{let e=(0,j.qr)(),t=(0,j.TL)(),i=(0,S.vS)(),r=(0,j.CG)(f.jj,(e,t)=>q()(e,t)),{hideTooltips:l,GammaTooltipHiderContext:d}=(0,B.o5)(),c=(0,j.CG)(f.Zm),x=(0,u.useCallback)(()=>{t((0,f.ly)());let n=(0,f.au)(e.getState());i(n,!1)},[t,i,e]),h=(0,u.useCallback)(()=>{t((0,f.np)());let n=(0,f.au)(e.getState());i(n,!1)},[t,i,e]),m=(0,u.useCallback)(n=>{t((0,f.J7)({num:n}));let r=(0,f.au)(e.getState());i(r,!1)},[t,i,e]);if(0===r.length)return null;let p=r.findIndex(e=>e.isCurrent),g=r[p],v=p<r.length-1;return c?(0,n.jsxs)(G.h,{isAttached:!0,bg:"whiteAlpha.500",borderRadius:"md",children:[(0,n.jsx)(z.h,{display:{base:"none",md:"inline-flex"},isDisabled:!(p>0),"aria-label":"previous version",onClick:h,...Y,icon:(0,n.jsx)(E.G,{icon:o.A35,fixedWidth:!0})}),(0,n.jsxs)(M.v,{closeOnSelect:!0,children:[(0,n.jsx)(d,{children:(0,n.jsx)(B.kH,{label:"Version ".concat(g.num," ").concat(g.isDraft?"(current draft)":""),closeOnClick:!1,children:(0,n.jsx)(L.j,{colorScheme:"gray",minW:"10",size:"sm",as:R.z,variant:"ghost",onClick:()=>{l()},children:g.num})})}),(0,n.jsx)(F.h,{children:(0,n.jsxs)(U.q,{maxW:"260px",children:[(0,n.jsx)(W._,{title:"Version history",type:"radio",value:String(g.num),children:[...r].reverse().map((e,t)=>(0,n.jsx)(H.i,{value:String(e.num),onClick:()=>{m(e.num),setTimeout(()=>{l()},0)},children:(0,n.jsxs)(k.x,{children:["Version ",e.num," ",e.isDraft&&"(current draft)"]})},t))}),(0,n.jsx)(V.R,{}),(0,n.jsx)(s.xu,{py:1,px:2,children:(0,n.jsx)(k.x,{fontSize:"xs",children:(0,n.jsx)(a.cC,{id:"gdzgeC"})})})]})})]}),(0,n.jsx)(z.h,{display:{base:"none",md:"inline-flex"},isDisabled:!v,onClick:x,"aria-label":"next version",...Y,icon:(0,n.jsx)(E.G,{icon:o._tD,fixedWidth:!0})})]}):null});Z.displayName="VersionSwitcher";var J=i(67109),X=i(49259),Q=i(74008),$=i(90980),ee=i(1071),et=i(35183),ei=i(97166),en=i(29494),er=i(87254),el=i(97412),es=i(63304),eo=i(22902),ea=i(39092);let ed=(0,u.memo)(()=>{let[e,t]=(0,S.ip)(),[i,r]=(0,S.Ns)("cardDimensions");return(0,n.jsx)(ea.j,{label:(0,n.jsx)(a.cC,{id:"kI1qVD"}),colorScheme:"orchid",icon:w.Y$l,values:[eo._J[e].label()],children:(0,n.jsxs)(v.g,{spacing:4,align:"start",children:[(0,n.jsxs)(et.NI,{children:[(0,n.jsx)(eo.FQ,{selectedFormat:e,setSelectedFormat:e=>{t(e);let{cardDimensions:i}=(0,es.sJ)(e);i&&r(i)}}),(0,n.jsx)(ea.i,{children:(0,n.jsx)(a.cC,{id:"qJHyoI"})})]}),(0,n.jsxs)(et.NI,{children:[(0,n.jsx)(ei.l,{fontSize:"sm",fontWeight:"semibold",children:(0,n.jsx)(a.cC,{id:"jBvtuq"})}),(0,n.jsx)(el.Ft,{cardDimensions:i,updateCardDimensions:r}),(0,n.jsx)(ea.i,{children:(0,n.jsx)(k.x,{mt:2,children:(0,n.jsx)(a.cC,{id:"Q3Qdcd"})})})]}),(0,n.jsxs)(et.NI,{children:[(0,n.jsx)(ei.l,{fontSize:"sm",fontWeight:"semibold",children:(0,n.jsx)(a.cC,{id:"G57+qO"})}),(0,n.jsx)(ec,{})]})]})})});ed.displayName="FormatSettingsGroup";let ec=(0,u.memo)(()=>{let[e,t]=(0,S.Q_)(),i=(0,u.useCallback)(e=>t(e.target.value),[t]);return(0,n.jsx)(en.g,{value:e||"",onChange:i,bg:"white",placeholder:er.ag._({id:"LLAa/9"})})});ec.displayName="PromptInput";var eu=i(33872),ex=i(62141);let eh=(0,u.memo)(e=>{let{isLoading:t}=e,i=(0,j.CG)(f.Vn);return(0,n.jsxs)(v.g,{flex:"1",overflow:"hidden auto",spacing:3,align:"start",alignItems:"stretch",transition:"all 300ms ease",opacity:i?.75:1,pointerEvents:i?"none":"inherit",cursor:i?"not-allowed":"default",children:[(0,n.jsxs)(s.xu,{fontSize:"sm",children:[(0,n.jsx)(a.cC,{id:"Tz0i8g"})," ",(0,n.jsx)(B.Yq,{label:(0,n.jsx)(a.cC,{id:"FDel/s"})})]}),t?(0,n.jsxs)(b.K,{children:[(0,n.jsx)(J.O,{height:16}),(0,n.jsx)(J.O,{height:16}),(0,n.jsx)(J.O,{height:16})]}):(0,n.jsxs)(X.U,{allowMultiple:!0,defaultIndex:[0],allowToggle:!0,as:b.K,w:"100%",bg:"white",borderRadius:"lg",overflow:"hidden",spacing:0,divider:(0,n.jsx)(Q.i,{}),boxShadow:"sm",children:[(0,n.jsx)(ex.o,{}),(0,n.jsx)(eu.Td,{}),(0,n.jsx)(ed,{})]}),(0,n.jsx)(s.xu,{display:{base:"none",lg:"block"},children:(0,n.jsx)(em,{})})]})});eh.displayName="AIGeneratorSettings";let em=(0,u.memo)(()=>{let e=(0,j.CG)(f.mO),{maxTokens:t}=(0,ee.ml)();return(0,n.jsx)($.H,{charCount:e,max:t,shouldShow:!0})});em.displayName="AIGeneratorCharacterCount";var ep=i(43305),eg=i(4123);let ej=(0,u.memo)(()=>{let[e,t]=(0,u.useState)("outline"),{skipThemeStep:i}=(0,x.R)(),d=(0,j.TL)();(0,g.j)({queryKey:"ref"}),(0,u.useEffect)(()=>()=>{d((0,f.fB)())},[d]);let v=(0,u.useCallback)(()=>{t("outline")},[]),C="theme"===e?void 0:(0,n.jsx)(a.cC,{id:"opD9db"});return(0,n.jsx)(p.jX,{children:(0,n.jsxs)(T.v4,{children:[(0,n.jsx)(c(),{children:(0,n.jsx)("title",{children:"Generate | Gamma"})}),(0,n.jsx)(P.D,{navLabel:(0,n.jsx)(a.cC,{id:"iH8pgl"}),navIcon:o.acZ,onClick:"theme"===e?v:void 0,styleProps:"theme"===e?{position:"absolute"}:void 0,pageTitle:C,rightItem:"outline"===e?(0,n.jsx)(Z,{}):void 0}),"outline"===e?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(r.r,{templateAreas:{base:'"overrideWarning" \n                   "settings" \n                   "editor"\n                   "tips"',md:'"overrideWarning overrideWarning"\n                   "settings editor"\n                   "tips editor"',xl:'". overrideWarning ." \n                 "settings editor tips" \n                 "settings editor tips"'},gridTemplateColumns:{base:"1fr",md:"2fr 3fr",xl:"3fr 6fr 3fr"},gridTemplateRows:{base:"auto",md:"auto auto 1fr",xl:"auto"},gap:4,mx:"auto",alignItems:"flex-start",p:{base:4,lg:6},pt:{base:4,lg:4},maxW:"1800px",children:[(0,n.jsx)(l.P,{area:"overrideWarning",children:(0,n.jsx)(N,{})}),(0,n.jsx)(l.P,{area:"settings",alignSelf:"start",children:(0,n.jsx)(eh,{isLoading:!1})}),(0,n.jsx)(l.P,{area:"editor",h:"100%",children:(0,n.jsx)(O.e,{showTopbar:!0,showAddBreaks:!0,enableModes:!0,containerProps:{minH:{base:"40vh",lg:"60vh"}},showContentTip:!0})}),(0,n.jsx)(l.P,{area:"tips",children:(0,n.jsx)(_,{})})]}),(0,n.jsx)(s.xu,{height:"20vh"})," ",(0,n.jsx)(eg.U,{cta:i?(0,n.jsx)(m.j,{children:(0,n.jsx)(a.cC,{id:"ziAjHi"})}):(0,n.jsx)(ep.O,{onClick:()=>t("theme")})})]}):"theme"===e?(0,n.jsx)(h.O,{}):null]})})});ej.displayName="AIGeneratorPage"},24551:function(e,t,i){"use strict";i.d(t,{C:function(){return w},O:function(){return E}});var n=i(52322),r=i(38035),l=i(17993),s=i(62614),o=i(67109),a=i(42946),d=i(49929),c=i(5879),u=i(55388),x=i(2689),h=i.n(x),m=i(2784),p=i(91994),g=i(62040),j=i(90507),f=i(28858),v=i(46741),C=i(76282),b=i(74720),y=i(14874);let k={...f.I,...b.R,...v.dE},w="ai-card-editor",E=(0,m.memo)(e=>{let{...t}=e,i=(0,p.CG)(C.$X),o=(0,u.jE)({...t,extensions:y.XL});o&&(o.editorId=w);let x=(0,p.CG)(C.g8),f=(0,p.CG)(C.CC);(0,m.useEffect)(()=>{o&&o.setEditable(!i)},[i,o]);let v=(0,m.useCallback)(()=>{null==o||o.chain().insertContentAt(null==o?void 0:o.state.doc.content.size,{type:"card",content:[{type:"paragraph"}]}).selectInsertedNode().run()},[o]);return(0,g.n)(o),(0,n.jsxs)(r.k,{flex:"1",direction:"column",sx:k,p:{base:2,md:3},children:[(0,n.jsx)(j.kg,{editor:o,style:{wordBreak:"break-word",display:"flex",flexDirection:"column"}}),i&&(0,n.jsx)(l.g,{children:h()(x-f).map(e=>(0,n.jsx)(S,{},e))}),!i&&(0,n.jsx)(s.z,{boxShadow:"none",leftIcon:(0,n.jsx)(d.G,{icon:a.r8p,fixedWidth:!0}),onClick:v,children:(0,n.jsx)(c.cC,{id:"sFY+gw"})})]})});E.displayName="AICardEditor";let S=()=>(0,n.jsx)(o.O,{height:14,width:"100%",borderRadius:"md"})},93546:function(e,t,i){"use strict";i.d(t,{e:function(){return L}});var n=i(52322),r=i(17993),l=i(28535),s=i(38035),o=i(29117),a=i(75768),d=i(37417),c=i(62614),u=i(77533),x=i(5740),h=i(36474),m=i(43297),p=i(97143),g=i(42946),j=i(49929),f=i(94523),v=i(5879),C=i(2784),b=i(90980),y=i(45760),k=i(91994),w=i(86581),E=i(7208),S=i(74153),I=i(1071),_=i(76282),A=i(75258),T=i(24551),O=i(55388),P=i(62040),D=i(90507),R=i(46741),N=i(74720),G=i(14874);let z={...N.R,...R.dE},M=(0,C.memo)(e=>{let{...t}=e,i=(0,O.jE)({...t,extensions:G.uJ});return(0,P.n)(i),(0,n.jsx)(s.k,{flex:"1",direction:"column",sx:z,children:(0,n.jsx)(D.kg,{editor:i,style:{wordBreak:"break-word",flex:1,display:"flex",flexDirection:"column"}})})});M.displayName="AIFreeformEditor";let L=(0,C.memo)(e=>{let{showAddBreaks:t,showTopbar:i=!1,hideFooter:m=!1,containerProps:p,onEditorUpdate:O,showContentTip:P,onAddClick:D,isAdding:R}=e,N=(0,k.CG)(_.Vn),z=(0,k.CG)(_.$X),{setEditorInstance:L}=(0,y.vZ)(),U=(0,S.ex)({debounce:500}),W=(0,k.qr)(),[H]=(0,S.Ns)("editorMode"),V=(0,C.useRef)(!1),B=(0,C.useCallback)(e=>{let t,{editor:i,transaction:n}=e;if(V.current&&n.docChanged){if(null==O||O({editor:i}),"structured"===H){let e=[];i.state.doc.forEach(t=>{let i=(0,w.MF)(t);e.push(i)}),t=e.join("\n\n---\n\n")}else t=(0,w.MF)(i.state.doc);U({content:t})}},[O,U,H]),K=(0,k.CG)(_.mO),q=(0,C.useCallback)(e=>{let{editor:t}=e;L(t);let i=(0,_.au)(W.getState()),n=(0,w.c8)(i),r=(0,G.dW)(n,H).content.toJSON();t.commands.setContent(r),V.current=!0},[L,W,H]),{isAddingBreaks:Y,canAddBreaks:Z,canRemoveBreaks:J,removeSectionBreaks:X,addSectionBreaks:Q}=(0,E.N)(),$="structured"===H,ee=(0,k.CG)(_.au),et=0===ee.length,ei=(0,k.CG)(_.CC),{maxTokens:en}=(0,I.ml)();return(0,n.jsxs)(r.g,{borderRadius:"md",spacing:3,align:"start",opacity:N?.75:1,pointerEvents:N?"none":"inherit",cursor:N?"not-allowed":void 0,h:"100%",children:[P&&(0,n.jsxs)(l.xu,{fontSize:"sm",pos:"relative",w:"100%",children:[(0,n.jsx)(v.cC,{id:"4b3oEV"})," ",(0,n.jsx)(f.Yq,{label:(0,n.jsx)(v.cC,{id:"tztPjl"})})]}),(0,n.jsxs)(s.k,{flex:"1",w:"100%",bg:"white",borderRadius:"lg",boxShadow:"sm",direction:"column",children:[i&&(0,n.jsxs)(o.U,{position:"relative",py:2,px:4,borderBottom:"1px",borderColor:"var(--chakra-colors-chakra-border-color)",justifyContent:"center",children:[(0,n.jsx)(A.x,{}),t&&(0,n.jsx)(a.h,{position:"absolute",top:"2",right:"2",size:"sm",children:Z&&(0,n.jsx)(d.M,{in:!0,initialScale:.6,children:(0,n.jsx)(f.kH,{label:(0,n.jsx)(v.cC,{id:"SuUA6H"}),placement:"top",children:(0,n.jsx)(c.z,{boxShadow:"none",isLoading:Y,leftIcon:(0,n.jsx)(j.G,{icon:g.EQg,fixedWidth:!0}),onClick:()=>Q(ee),children:(0,n.jsx)(u.x,{display:{base:"none",sm:"block"},children:(0,n.jsx)(v.cC,{id:"I6SWEy"})})})})})})]}),(0,n.jsxs)(s.k,{fontSize:"sm",direction:"column",flex:"1",pos:"relative",sx:{".ProseMirror":{padding:"freeform"===H?6:0,fontSize:"16px"}},...p,children:["freeform"===H?(0,n.jsx)(M,{onUpdate:B,onCreate:q}):(0,n.jsx)(T.O,{onUpdate:B,onCreate:q}),et&&!z&&"freeform"===H&&(0,n.jsx)(l.xu,{pos:"absolute",top:6,left:6,pointerEvents:"none",color:"gray.500",fontSize:"md",children:(0,n.jsx)(v.cC,{id:"xafDnF"})})]}),!m&&(0,n.jsxs)(o.U,{fontSize:"sm",px:4,py:3,alignItems:"center",color:"gray.500",children:[$?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(s.k,{flex:"1",children:(0,n.jsx)(u.x,{children:(0,n.jsx)(v.cC,{id:"Psk6LY",values:{cardCount:ei}})})}),(0,n.jsx)(s.k,{flex:"2",justifyContent:"center",display:{base:"none",md:"flex"},children:(0,n.jsx)(u.x,{children:(0,n.jsx)(v.cC,{id:"c3ugvF",components:{0:(0,n.jsx)(x.T,{})}})})}),(0,n.jsx)(s.k,{flex:"1",justifyContent:"flex-end",children:(0,n.jsx)(b.H,{charCount:K,max:en,shouldShow:!0,bg:"white",borderColor:"white",fontFamily:"mono"})})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(h.L,{flex:"1"}),(0,n.jsx)(s.k,{flex:"2",justifyContent:"center",children:(0,n.jsx)(F,{})}),(0,n.jsx)(s.k,{flex:"1",justifyContent:"flex-end",children:(0,n.jsx)(b.H,{charCount:K,max:en,shouldShow:!0,bg:"white",borderColor:"white",fontFamily:"mono"})})]}),D&&(0,n.jsx)(c.z,{variant:"solid",size:"sm",onClick:D,isLoading:R,leftIcon:(0,n.jsx)(j.G,{icon:g.JyM}),children:(0,n.jsx)(v.cC,{id:"sFY+gw"})})]})]})]})});L.displayName="AIGeneratorContent";let F=(0,C.memo)(()=>(0,n.jsx)(f.kH,{placement:"top",bg:"gray.900",label:(0,n.jsxs)(m.K,{spacing:1,fontFamily:"mono",children:[(0,n.jsx)(u.x,{children:"# Heading 1"}),(0,n.jsx)(u.x,{children:"## Heading 1"}),(0,n.jsx)(u.x,{children:"### Heading 3"}),(0,n.jsx)(u.x,{children:"- Item 1"}),(0,n.jsx)(u.x,{children:"- Item 2"}),(0,n.jsx)(u.x,{children:"- Item 3"}),(0,n.jsx)(u.x,{children:"--- Divider"})]}),children:(0,n.jsxs)(u.x,{cursor:"help",children:[(0,n.jsx)(u.x,{as:"span",color:"gray.400",mr:1,children:(0,n.jsx)(j.G,{icon:p.cCZ})}),(0,n.jsx)(v.cC,{id:"u6Hp4N"})]})}));F.displayName="MarkdownTip"},74720:function(e,t,i){"use strict";i.d(t,{R:function(){return r}});var n=i(40212);let r={".ProseMirror":{flex:1,...n.U},".block":{my:"0.75rem",":first-child":{mt:"0px !important"},":last-child":{mb:"0px !important"}},".block-heading":{fontWeight:"bold",lineHeight:"1.25",_first:{mt:0}},h1:{fontSize:"1.5em"},h2:{fontSize:"1.25em"},h3:{fontSize:"1.125em"},"a[href]":{color:"var(--chakra-colors-trueblue-600)",textDecoration:"underline"}}},14874:function(e,t,i){"use strict";i.d(t,{XL:function(){return ef},uJ:function(){return ej},dW:function(){return ev}});var n=i(72338),r=i(86900),l=i(42626),s=i(74902),o=i(36518),a=i(71391),d=i(86509),c=i(9432),u=i(70675),x=i(38438),h=i(39615),m=i(39475),p=i(77381),g=i(6085),j=i(3402),f=i(17487),v=i(72762),C=i(73528),b=i(99173),y=i(41889),k=i(13653),w=i(59799),E=i(90507),S=i(47577),I=i(52322),_=i(28535);let A=e=>{let{selected:t}=e;return(0,I.jsx)(E.T5,{children:(0,I.jsx)(_.xu,{pos:"relative",draggable:"true","data-drag-handle":!0,cursor:"grab",contentEditable:"false",position:"relative",display:"flex",flexDirection:"column",justifyContent:"center",height:"1.25rem",color:t?"trueblue.400":"gray.400",lineHeight:"1rem",fontWeight:"800",children:"---"})})},T=/^(---|___|—-)/,O=n.NB.create({name:"sectionBreak",group:"block",atom:!0,selectable:!0,draggable:!0,parseHTML:()=>[{tag:"hr"}],renderHTML(e){let{HTMLAttributes:t}=e;return["hr",(0,n.P1)(t)]},addNodeView:()=>(0,E.fW)(A),addInputRules(){return[(0,S.ok)({find:T,type:this.type})]}});var P=i(60491),D=i(90062),R=i(91073),N=i(27191),G=i(52780);let z=new N.Sy({props:{decorations:e=>{let{doc:t}=e,i=[],n=1;return t.descendants((e,t)=>{"card"===e.type.name&&(i.push(G.p.node(t,t+e.nodeSize,{},{number:n,isSectionCardPluginDecoration:!0})),n++)}),0==i.length?G.EH.empty:G.EH.create(t,i)}}}),M=e=>{let t=e.find(e=>e.spec.isSectionCardPluginDecoration);return t?t.spec:{number:0,isSectionCardPluginDecoration:!0}};var L=i(29117),F=i(77533),U=i(38035),W=i(32899),H=i(10625),V=i(67046),B=i(332),K=i(99058),q=i(25481),Y=i(27599),Z=i(42946),J=i(49929),X=i(94523),Q=i(5879),$=i(87254),ee=i(2784),et=i(5026),ei=i(76282),en=i(91994),er=i(90221),el=i(3543);let es={r:235,g:248,b:255},eo={r:255,g:245,b:255},ea={r:107,g:70,b:193},ed={r:43,g:108,b:176},ec=(e,t,i,n)=>n?{bg:"gray.100",text:"gray.600"}:{bg:(0,el.Py)(es,eo,e/Math.min(i,t)),text:(0,el.Py)(ed,ea,e/Math.min(i,t))},eu=e=>{let{decorations:t,editor:i,getPos:n}=e,{number:r}=M(t),l=(0,en.CG)(ei.CC),{maxCards:s,canUpgrade:o}=(0,et.hw)(),a=r>s,d=r===l,c=ec(r,l,s,a),u=(0,ee.useCallback)(()=>{let e=n(),t=i.view.state.doc.nodeAt(e);if(!t){console.error("[SectionCardView] Cannot append card. Node unknown");return}let r=e+t.nodeSize;i.chain().insertContentAt(r,{type:"card",content:[{type:"paragraph"}]}).focus().selectInsertedNode().run()},[i,n]),x=(0,ee.useCallback)(()=>{i.commands.selectNodeAtPos(n())},[i,n]),h=(0,ee.useCallback)(()=>{let e=n(),t=i.view.state.doc.nodeAt(e);if(!t){console.error("[SectionCardView] Cannot delete card. Node unknown");return}i.chain().deleteRange({from:e,to:e+t.nodeSize}).selectInsideNodeAtPos(e).focus().run()},[i,n]),m=(0,ee.useCallback)(()=>{let e=n(),t=i.view.state.doc.nodeAt(e);if(!t){console.error("[SectionCardView] Cannot focus card. Node unknown");return}i.chain().selectInsideNodeAtPos(e).focus().run()},[i,n]),p=(0,k.Od)(t);return(0,I.jsxs)(E.T5,{role:"group",children:[(0,I.jsxs)(L.U,{className:"card",border:"1px solid",borderColor:p?"var(--chakra-ring-color)":"blackAlpha.100",shadow:"sm",_hover:{shadow:"md"},transitionProperty:"box-shadow",transitionDuration:"normal",bg:"white",borderRadius:"md",spacing:0,align:"stretch","data-selection-ring":!0,pos:"relative",my:3,mt:1===r?0:void 0,role:"group",children:[!(0,er.s2)()&&(0,I.jsx)(_.xu,{position:"absolute",color:c.text,zIndex:"1",top:"3.5",left:"0",pointerEvents:"none",opacity:"0",_groupHover:{opacity:.75},children:(0,I.jsx)(J.G,{icon:Z.Okg,fixedWidth:!0})}),a&&(0,I.jsx)(_.Cd,{size:"6px",position:"absolute",zIndex:"2",top:"1.5",left:"1.5",bg:"sunglow.400"}),(0,I.jsx)(X.kH,{label:a&&(0,I.jsxs)(I.Fragment,{children:[(0,I.jsxs)(F.x,{children:[(0,I.jsx)(Q.cC,{id:"rayOuP"})," "]}),(0,I.jsx)(F.x,{color:"gray.400",children:o?(0,I.jsx)(Q.cC,{id:"W8sobv",values:{MAX_CARDS_PRO:et.Fv}}):(0,I.jsx)(Q.cC,{id:"yLG7qf"})})]}),placement:"top",children:(0,I.jsx)(U.k,{dir:"column",align:"start",justify:"center",pr:1,pl:2,py:{base:3.5,md:4},w:12,cursor:a?"help":"grab","data-drag-handle":!0,contentEditable:!1,onClick:x,fontSize:r>=100?"xs":"sm",fontFamily:"mono",fontWeight:"600",borderLeftRadius:"inherit",userSelect:"none",transitionProperty:"filter",transitionDuration:"normal",_hover:{filter:"brightness(0.95)"},bg:c.bg,color:c.text,children:r})}),(0,I.jsx)(_.xu,{p:{base:3,md:4},flex:1,color:a?"gray.600":void 0,position:"relative",children:(0,I.jsx)(E.ms,{})}),(0,I.jsx)(eh,{addCard:u,focusCard:m,deleteCard:h})]}),!(0,er.s2)()&&!d&&(0,I.jsx)(ex,{addCard:u})]})},ex=(0,ee.memo)(e=>{let{addCard:t}=e;return(0,I.jsxs)(U.k,{w:"100%",h:1,borderRadius:"md",bg:"trueblue.200",transitionProperty:"opacity",transitionDuration:"slow",opacity:0,_hover:{opacity:1},_focusWithin:{opacity:1},contentEditable:!1,my:1,dir:"column",align:"center",justify:"center",pos:"absolute",transform:"translateY(-0.75rem)",zIndex:1,children:[(0,I.jsx)(_.xu,{pos:"absolute",top:-2,bottom:-2,left:0,right:0}),(0,I.jsx)(X.kH,{placement:"top",label:$.ag._({id:"sFY+gw"}),shortcut:"---",children:(0,I.jsx)(W.h,{pos:"absolute",variant:"solid",icon:(0,I.jsx)(J.G,{icon:Z.r8p}),"aria-label":"Add card",isRound:!0,size:"xs",onClick:t,tabIndex:-1})})]})});ex.displayName="CardDivider";let eh=(0,ee.memo)(e=>{let{addCard:t,deleteCard:i,focusCard:n}=e;return(0,I.jsx)(L.U,{pr:{base:2,md:2.5},pt:{base:2,md:3},alignSelf:"start",children:(0,er.s2)()?(0,I.jsx)(H.v,{children:e=>{let{onClose:r}=e;return(0,I.jsxs)(I.Fragment,{children:[(0,I.jsx)(V.j,{onClick:n,as:W.h,colorScheme:"gray",variant:"ghost",size:"sm",icon:(0,I.jsx)(J.G,{icon:Z.S6C,fixedWidth:!0})}),(0,I.jsx)(B.h,{children:(0,I.jsxs)(K.q,{zIndex:"tooltip",children:[(0,I.jsx)(q.s,{onClick:()=>{r(),t()},icon:(0,I.jsx)(J.G,{icon:Z.L26,fixedWidth:!0}),children:(0,I.jsx)(Q.cC,{id:"90n2YU"})}),(0,I.jsx)(Y.R,{}),(0,I.jsx)(q.s,{onClick:()=>{i(),r()},color:"red",icon:(0,I.jsx)(J.G,{icon:Z.Vui,fixedWidth:!0}),children:(0,I.jsx)(Q.cC,{id:"nabda1"})})]})})]})}}):(0,I.jsx)(X.kH,{label:(0,I.jsx)(Q.cC,{id:"nabda1"}),placement:"top",children:(0,I.jsx)(W.h,{colorScheme:"gray",variant:"ghost",opacity:"0",_groupHover:{opacity:1},_focus:{opacity:1},transitionProperty:"opacity",transitionDuration:"slow",size:"sm",onClick:i,"aria-label":$.ag._({id:"nabda1"}),icon:(0,I.jsx)(J.G,{icon:Z.Vui,fixedWidth:!0})})})})});eh.displayName="CardActions";let em=/^(---|___|—-)$/,ep=n.NB.create({name:"card",content:"block+",selectable:!0,draggable:!0,isolating:!0,parseHTML:()=>[{tag:"section"}],renderHTML(e){let{HTMLAttributes:t}=e;return["section",(0,n.P1)(t),0]},addNodeView:()=>(0,E.fW)(eu),addProseMirrorPlugins:()=>[z],addInputRules:()=>[new n.VK({find:em,handler:e=>{let{state:t,range:i}=e,{tr:n}=t;(0,P.X)({tr:n.deleteRange(i.from,i.to),dispatch:!0})}})],addKeyboardShortcuts(){return{Backspace:()=>this.editor.commands.mergeCardsOnDelete(!1),Delete:()=>this.editor.commands.mergeCardsOnDelete(!0),Tab:()=>this.editor.commands.selectNextCard(!0),"Shift-Tab":()=>this.editor.commands.selectNextCard(!1)}},addCommands:()=>({selectNextCard:e=>t=>{let{state:i,dispatch:r,commands:l}=t;if(!r)return!0;let{selection:s}=i,o=(0,n.Kk)(R.KH)(s);if(!o||!s.empty)return!1;let a=i.doc.resolve(o.pos),d=a.index();if(e){if(d===a.parent.childCount-1)return!1;l.selectInsideNodeAtPos(o.pos+o.node.nodeSize)}else{if(0===d)return!1;let e=a.posAtIndex(d-1);l.selectInsideNodeAtPos(e)}return!0},mergeCardsOnDelete:e=>t=>{let{tr:i,state:r,dispatch:l}=t;if(!l)return!0;let{selection:s}=r,o=(0,n.Kk)(R.KH)(s);if(!o||!s.empty)return!1;try{let t=(0,D.pt)(s,e);if(!t)return!1;return e?(0,D.Yh)(o.pos,i,r):(0,D.Gq)(o.pos,i)}catch(e){return console.debug("[CardCommands] mergeCardsOnDelete failed",e),!1}}})}),eg=[d.A,p.l,y.d,x.n,h.x,f.Hy,a.X,r.d8,m.v,c.Tx,u.Z.configure({openOnClick:!1}),C.aV,v.g,b.k,w.U,g.m,o.f,s.m.configure({color:"var(--chakra-colors-trueblue-200)",width:3,class:"ProseMirror-dropcursor"}),k.Jn],ej=[...eg,O,l.B.extend({content:"block+"})],ef=[...eg,ep,l.B.extend({content:"card+"})],ev=(e,t)=>{let i=(0,n.J1)("freeform"===t?ej:ef);return"structured"===t&&(e=e.split("<hr>").map(e=>"<section>".concat(e,"</section>")).join("\n")),(0,j.T)(e,i)}},23082:function(e,t,i){"use strict";i.d(t,{m:function(){return ef}});var n=i(52322),r=i(42946),l=i(5879),s=i(97729),o=i.n(s),a=i(5632),d=i(2784),c=i(51874),u=i(704),x=i(45760),h=i(76282),m=i(18153),p=i(91994),g=i(44754),j=i(74153),f=i(87651),v=i(43297),C=i(74409),b=i(17190),y=i(43305),k=i(75816),w=i(4123),E=i(28535),S=i(17993),I=i(93546),_=i(42822),A=i(62614),T=i(49929),O=i(33872),P=i(62141),D=i(47821);let R=(0,d.memo)(()=>{let e=(0,p.CG)(h.RB),t=(0,D.Ao)(),{goToScreen:i}=(0,u.R)(),s=(0,d.useCallback)(()=>{i("promptEditor",{generateId:e})},[e,i]);return(0,n.jsxs)(v.K,{w:"100%",position:"relative",spacing:2,children:[(0,n.jsx)(C.X,{size:"sm",fontWeight:"regular",color:"gray.800",children:(0,n.jsx)(l.cC,{id:"Tz0i8g"})}),(0,n.jsx)(E.xu,{p:"4",pb:6,border:"none",bg:"white",borderRadius:"md",boxShadow:"sm",children:(0,n.jsxs)(v.K,{spacing:4,children:[(0,n.jsx)(P.B,{}),t&&(0,n.jsx)(O.$3,{}),(0,n.jsx)(O.p3,{})]})}),e&&(0,n.jsx)(_.M,{children:(0,n.jsx)(A.z,{mt:2,size:"sm",colorScheme:"gray",variant:"link",onClick:s,rightIcon:(0,n.jsx)(T.G,{icon:r.gr5}),children:(0,n.jsx)(l.cC,{id:"02C6JB"})})})]})});R.displayName="SimpleAIGeneratorSettings";let N=(0,d.memo)(()=>{let e=(0,p.CG)(h.RB);return(0,n.jsx)(E.xu,{w:"100%",children:(0,n.jsx)(f.U,{in:"existing"==(e?"existing":"new"),children:(0,n.jsxs)(S.g,{w:"100%",spacing:4,children:[(0,n.jsxs)(v.K,{w:"100%",position:"relative",spacing:2,children:[(0,n.jsx)(C.X,{size:"sm",fontWeight:"regular",color:"gray.800",children:(0,n.jsx)(l.cC,{id:"dD7NPy"})}),(0,n.jsx)(I.e,{containerProps:{minH:{base:"30vh",lg:"30vh"},overflow:"auto",w:"100%"},showContentTip:!1})]}),(0,n.jsx)(R,{})]})})})});N.displayName="OutlineEditor";var G=i(70065),z=i(29117),M=i(74105),L=i(85573),F=i(92768),U=i(32899),W=i(75768),H=i(38035),V=i(74008),B=i(77533),K=i(20437),q=i(54933),Y=i(94523),Z=i(87254),J=i(46152),X=i.n(J);let Q=()=>({deck:[{prompt:Z.ag._({id:"qlwKtq"}),icon:q._C7,type:"fun"},{prompt:Z.ag._({id:"P4NNIM"}),icon:q.xEp,type:"fun"},{prompt:Z.ag._({id:"lxdJmZ"}),icon:q.SvR,type:"fun"},{prompt:Z.ag._({id:"M7U1p2"}),icon:q.nkk,type:"fun"},{prompt:Z.ag._({id:"J6sCsQ"}),icon:q.Poi,type:"fun"},{prompt:Z.ag._({id:"I2RSm2"}),icon:q.dyi,type:"work"},{prompt:Z.ag._({id:"eIHwsO"}),type:"fun",icon:q.dER},{prompt:Z.ag._({id:"2GuYO+"}),icon:q.FcG,type:"work"},{prompt:Z.ag._({id:"XZUS53"}),type:"fun",icon:q.QmK},{prompt:Z.ag._({id:"nn97aN"}),type:"fun",icon:q.Fli},{prompt:Z.ag._({id:"NOzvim"}),type:"work",icon:q.wWp},{prompt:Z.ag._({id:"QASHwu"}),type:"work",icon:q.SoD},{prompt:Z.ag._({id:"t/ny5a"}),type:"fun",icon:q.FVb},{prompt:Z.ag._({id:"4pkbqe"}),type:"fun",icon:q.ytF},{prompt:Z.ag._({id:"raFuzm"}),type:"fun",icon:q.xTf},{prompt:Z.ag._({id:"HPvhIn"}),type:"work",icon:q.Stf},{prompt:Z.ag._({id:"sXxsO8"}),type:"fun",icon:q.Elv},{prompt:Z.ag._({id:"oRQ3AS"}),type:"fun",icon:q.io7},{prompt:Z.ag._({id:"5mHzsl"}),type:"work",icon:q.IOb}],webpage:[{prompt:Z.ag._({id:"o8jXBg"}),icon:q.V3X,type:"work"},{prompt:Z.ag._({id:"0hgAA3"}),icon:q.J9Y,type:"work"},{prompt:Z.ag._({id:"h+l7+s"}),icon:q.wKO,type:"work"},{prompt:Z.ag._({id:"AItsa8"}),icon:q.d19,type:"fun"},{prompt:Z.ag._({id:"XrkZJq"}),type:"work",icon:q._jT},{prompt:Z.ag._({id:"gElU4S"}),type:"work",icon:q.fGT},{prompt:Z.ag._({id:"MfwlJs"}),type:"fun",icon:q.RcT},{prompt:Z.ag._({id:"dQYE0e"}),type:"work",icon:q.Zr4}],document:[{prompt:Z.ag._({id:"CoQWsB"}),icon:q.uqx,type:"work"},{prompt:Z.ag._({id:"P3ZE6a"}),type:"work",icon:q.GTN},{prompt:Z.ag._({id:"9HiZDb"}),type:"work",icon:q.cYw},{prompt:Z.ag._({id:"Jqvt0L"}),type:"work",icon:q.mNe},{prompt:Z.ag._({id:"pdW8CP"}),type:"work",icon:q.Wx7},{prompt:Z.ag._({id:"3cKebJ"}),type:"fun",icon:q.thV},{prompt:Z.ag._({id:"meKpPw"}),type:"work",icon:q.tq6},{prompt:Z.ag._({id:"ZQpymk"}),icon:q.N6K,type:"work"},{prompt:Z.ag._({id:"etsxle"}),type:"work",icon:q.lhK},{prompt:Z.ag._({id:"you5yT"}),icon:q.RRR,type:"fun"},{prompt:Z.ag._({id:"4yv77g"}),icon:q.S$C,type:"fun"},{prompt:Z.ag._({id:"bT0M+P"}),type:"fun",icon:q.LBu},{prompt:Z.ag._({id:"ww+l5h"}),type:"fun",icon:q.vWT}]});var $=i(22902),ee=i(63304),et=i(93202),ei=i(42111),en=i(21733);let er=()=>{let[e]=(0,et.JBp)(),t=(0,d.useCallback)(async t=>{var i;let{prompt:n,format:r,locale:l,editorMode:s}=t,o=await e({variables:{input:{workspaceId:(0,en.n_)(),generationType:et.FJd.Generate,input:{format:r,prompt:n,settings:{...ee.zJ,...(0,ee.sJ)(r),imageProvider:ei.VH.get("aiGeneratorDefaultImageProvider"),locale:l,editorMode:s}}}}});return null===(i=o.data)||void 0===i?void 0:i.createDocGeneration},[e]);return t};var el=i(5026),es=i(50634),eo=i(48525),ea=i(45302),ed=i(36651),ec=i(50896);let eu=e=>e.replace(/^- /gm,"").split("\n").join("\n\n---\n\n"),ex=(0,d.memo)(()=>{let e=(0,G.p)(),t=(0,p.TL)(),{onDocGenerationLoaded:i,webpageOnly:s}=(0,u.R)(),o=er(),a=(0,d.useRef)(null),[c,m]=(0,d.useState)(!1),g=(0,p.CG)(h.RB),y=g?"existing":"new",{canUpgrade:k}=(0,el.hw)(),[w,S]=(0,j.Q_)(),I=(0,d.useRef)(w),[_,O]=(0,j.Ns)("locale"),P=(0,p.CG)(h.g8),D=(0,p.CG)(h.$X),R=(0,ea.jw)(_),N=(0,j.vS)(),{getEditorInstance:Z}=(0,x.vZ)(),[J,et]=(0,d.useState)(s?"webpage":"deck"),{generate:ei}=(0,es.j)("GenerateOutlineSimple",{onStart(){t((0,h.tX)(!0)),N("",!1)},onContent(e){let t=eu(e);N(t,!1)},onComplete(e){var i;N(eu(e),!0),null===(i=Z())||void 0===i||i.commands.focus("start"),t((0,h.tX)(!1))},timeout:3e4}),en=(0,d.useCallback)(async()=>{let t=(0,ed.n_)();if(t)try{let{promise:e}=ei({variables:{topic:w,numBullets:P||ee.Qk,format:J,language:R.englishName||"English"},workspaceId:t});await e}catch(t){console.error("[PromptAndOutlineSettings] error generating outline: ".concat(t.message)),e({status:"error",title:(0,n.jsx)(l.cC,{id:"RVmL+P"}),description:(0,n.jsx)(l.cC,{id:"fuwKpE"}),duration:5e3,isClosable:!0,position:"top"})}finally{(0,h.tX)(!1)}},[ei,R.englishName,P,w,J,e]),ex=(0,d.useCallback)(async()=>{D||(en(),m(!1))},[D,en]),ep=(0,d.useCallback)(async()=>{if(!D){try{let r=await o({prompt:w,format:J,locale:_,editorMode:"structured"});if(!r){e({title:(0,n.jsx)(l.cC,{id:"SlfejT"}),description:(0,n.jsx)(l.cC,{id:"J/Ajhz"}),status:"error",duration:5e3,isClosable:!0}),console.error("[PromptAndOutlingSettings]: No docGeneration found. This is unexpected.");return}t((0,h.Gn)(r)),null==i||i(r.id),en()}catch(e){console.error("[PromptAndOutlineSettings]: Error creating doc generation: ".concat(e.message))}m(!1)}},[o,t,D,_,en,i,w,J,e]),eg=(0,d.useMemo)(()=>Q(),[]),ej=(0,d.useCallback)(e=>{var t,i;if("Enter"===e.key){if(e.preventDefault(),D)return;g?ex():ep(),m(!1),null==a||null===(t=a.current)||void 0===t||t.blur()}"Escape"===e.key&&c&&(m(!1),null===(i=a.current)||void 0===i||i.blur())},[g,D,ep,ex,c]),ef=(0,d.useCallback)(()=>{eC(X()(eg[J]))},[eg,J]),[ev,eC]=(0,d.useState)(X()(eg[J]));return(0,n.jsxs)(E.xu,{w:"100%",mt:{base:"2",md:"4"},children:[!1===s&&(0,n.jsx)(f.U,{in:"new"===y,children:(0,n.jsx)(b.W,{maxW:"sm",px:0,children:(0,n.jsx)($.FQ,{hideCheckbox:!0,setSelectedFormat:e=>{et(e),eC(X()(eg[e]))},selectedFormat:J})})}),(0,n.jsx)(v.K,{spacing:{base:2,md:4},w:"100%",children:(0,n.jsxs)(E.xu,{w:"100%",textAlign:"center",children:[(0,n.jsxs)(v.K,{direction:{base:"column",sm:"row"},alignItems:{base:"flex-start",sm:"center"},justifyContent:"space-between",mb:"2",children:["existing"===y&&(0,n.jsx)(C.X,{size:"sm",fontWeight:"regular",color:"gray.800",textAlign:"left",children:(0,n.jsx)(l.cC,{id:"W9uQXX"})}),(0,n.jsxs)(z.U,{maxW:"100%",overflowX:"hidden",children:[k?(0,n.jsx)(ec.J,{cardCount:P,onChange:e=>{t((0,h.Go)(Number(e)))},maxCards:el.ix}):(0,n.jsx)(ec.Y,{onIncrement:()=>{P!==el.Fv&&t((0,h.O_)())},onDecrement:()=>{t((0,h.Jr)())},maxCards:el.Fv,cardCount:P,size:"sm"}),(0,n.jsx)(eo.k,{locale:R,setLocale:O,buttonProps:{variant:"plain",size:"sm",textAlign:"left"}})]})]}),(0,n.jsxs)(M.B,{mb:"5",bg:"white",boxShadow:w?"sm":"lg",border:"none",borderRadius:"md",display:"flex",alignItems:"center",gap:"0",children:[(0,n.jsx)(L.I,{color:"gray.800",fontWeight:"500",borderColor:"transparent",fontSize:{base:"md",md:"lg"},height:{base:"14",md:"16"},placeholder:em(),value:w,ref:a,onKeyDown:ej,onChange:e=>{S(e.target.value)},maxLength:140,_focus:{boxShadow:"var(--chakra-shadows-lg), var(--chakra-shadows-outline)"},onFocus:()=>{I.current=w,m(!0)},onBlur:()=>{m(!1)}}),"existing"===y&&!c&&(0,n.jsx)(F.xW,{h:"100%",border:"none",bg:"none",p:{base:2,md:3},children:(0,n.jsx)(Y.kH,{label:(0,n.jsx)(l.cC,{id:"2b2I/9"}),placement:"top",children:(0,n.jsx)(U.h,{variant:"ghost",bg:"gray.50",color:"trueblue.400","aria-label":"Regenerate outline",isLoading:D,icon:(0,n.jsx)(T.G,{fixedWidth:!0,icon:q.SbL}),onClick:ex})})})]}),(0,n.jsx)(f.U,{in:!D&&"existing"===y&&c,children:(0,n.jsx)(v.K,{onFocusCapture:()=>{m(!0)},children:(0,n.jsxs)(W.h,{mx:"auto",size:"md",mb:"4",children:[(0,n.jsx)(A.z,{variant:"plain",onClick:()=>{m(!1),S(I.current)},children:(0,n.jsx)(l.cC,{id:"dEgA5A"})}),(0,n.jsx)(A.z,{variant:"solid",onClick:ex,children:(0,n.jsx)(l.cC,{id:"4tE6l+"})})]})})}),(0,n.jsx)(f.U,{in:!!("new"===y&&w),children:(0,n.jsx)(H.k,{w:"100%",justifyContent:"center",children:(0,n.jsx)(A.z,{isDisabled:!w||D,size:"lg",minW:{base:"100%",md:"16em"},onClick:ep,variant:"solid",rightIcon:(0,n.jsx)(T.G,{icon:q.eFW}),children:(0,n.jsx)(l.cC,{id:"4tE6l+"})})})})]})}),(0,n.jsx)(f.U,{in:"new"===y&&!w,children:(0,n.jsxs)(v.K,{width:"100%",spacing:4,children:[(0,n.jsxs)(z.U,{w:"100%",spacing:"3",alignItems:"center",h:"10",children:[(0,n.jsx)(V.i,{borderColor:"blackAlpha.400"}),(0,n.jsx)(B.x,{flexShrink:"0",color:"gray.600",children:(0,n.jsx)(l.cC,{id:"MxB2DA"})}),(0,n.jsx)(V.i,{borderColor:"blackAlpha.400"})]}),(0,n.jsx)(K.M,{columns:{base:1,md:3},spacing:{base:2,md:3},children:ev.slice(0,3).map((e,t)=>(0,n.jsx)(eh,{starterPrompt:e,setPrompt:S},t))}),(0,n.jsx)(H.k,{justify:"center",w:"100%",children:(0,n.jsx)(A.z,{variant:"plain",size:{base:"sm",md:"md"},leftIcon:(0,n.jsx)(T.G,{icon:r.a_u}),onClick:ef,children:(0,n.jsx)(l.cC,{id:"gH5Gbn"})})})]})})]})});ex.displayName="PromptAndOutlineSettings";let eh=e=>{let{setPrompt:t,starterPrompt:i}=e,l=(0,d.useCallback)(()=>{t("".concat(i.prompt))},[i,t]);return(0,n.jsxs)(v.K,{as:A.z,direction:"row",alignItems:"flex-start",whiteSpace:"normal",textAlign:"left",display:"inline-flex",boxShadow:"sm",variant:"unstyled",h:"auto",p:3,spacing:3,bg:"whiteAlpha.700",border:"2px solid",borderColor:"transparent",borderRadius:"md",cursor:"pointer",_hover:{borderColor:"purple.400"},onClick:l,role:"group",minH:{base:"44px",md:"16"},children:[(0,n.jsx)(B.x,{color:"purple.300",_groupHover:{color:"purple.500"},children:(0,n.jsx)(T.G,{icon:i.icon,fixedWidth:!0})}),(0,n.jsx)(B.x,{title:i.prompt,fontSize:"sm",color:"gray.800",fontWeight:"medium",noOfLines:{base:2,md:3},flex:"1",children:i.prompt}),(0,n.jsx)(B.x,{fontSize:"sm",color:"blackAlpha.400",_groupHover:{color:"purple.500"},children:(0,n.jsx)(T.G,{icon:r.r8p,fixedWidth:!0})})]})},em=()=>Z.ag._({id:"BiLwIi"}),ep=(0,d.memo)(e=>{let{goToThemeStep:t}=e,{skipThemeStep:i}=(0,u.R)(),r=(0,p.CG)(h.RB);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(f.U,{in:"new"==(r?"existing":"new"),children:(0,n.jsx)(v.K,{alignContent:"center",pt:{base:"9",md:"8vh"},w:"100%",children:(0,n.jsxs)(v.K,{spacing:{base:2,md:4},mb:{base:5,md:8},w:"100%",children:[(0,n.jsx)(C.X,{textAlign:"center",color:"gray.800",fontWeight:"600",fontFamily:"p22-mackinac-pro",w:"100%",size:{base:"xl",md:"2xl"},children:(0,n.jsx)(l.cC,{id:"ziAjHi"})}),(0,n.jsx)(C.X,{size:{base:"sm",md:"md"},textAlign:"center",fontWeight:"500",color:"blackAlpha.700",children:(0,n.jsx)(l.cC,{id:"yMWCRe"})})]})})}),(0,n.jsxs)(b.W,{maxW:"3xl",width:"100%",pb:"150px",children:[(0,n.jsx)(ex,{}),(0,n.jsx)(N,{})]}),r&&(0,n.jsx)(w.U,{cta:i?(0,n.jsx)(k.j,{children:(0,n.jsx)(l.cC,{id:"ziAjHi"})}):(0,n.jsx)(y.O,{onClick:t})})]})});ep.displayName="OutlineStep";var eg=i(13734),ej=i(8484);let ef=(0,d.memo)(e=>{let{autosetLocale:t}=e,[i,s]=(0,d.useState)("outline"),{webpageOnly:f,skipThemeStep:v,onGenerateSuccess:C}=(0,u.R)(),{query:b}=(0,a.useRouter)(),y=b.ref,k=(0,p.CG)(h.RB);(0,m.j)({queryKey:"ref"});let w=(0,p.TL)(),E=(0,p.qr)(),[S,I]=(0,j.Ns)("locale");(0,d.useEffect)(()=>{t&&I((0,g.K)())},[w,I,E]),(0,d.useEffect)(()=>()=>{w((0,h.mc)())},[]);let _=(0,d.useCallback)(()=>{s("outline")},[]),A=(0,d.useCallback)(()=>{v||s("theme")},[v]),T="new"==(k?"existing":"new")||"theme"===i?void 0:(0,n.jsx)(l.cC,{id:"ziAjHi"}),O=(0,d.useMemo)(()=>{let e;let t=("dashboard"===y||"sites-dashboard"==y)&&"outline"===i,s=t?(0,n.jsx)(l.cC,{id:"i0qMbr"}):(0,n.jsx)(l.cC,{id:"iH8pgl"}),o=t?r.J9Y:r.acZ,a={};return"theme"===i&&(a={position:"absolute"},e=_),{navLabel:s,navIcon:o,onClick:e,options:{ref:y},styleProps:a}},[_,y,i]);return(0,n.jsx)(x.jX,{children:(0,n.jsxs)(c.v4,{children:[(0,n.jsx)(o(),{children:(0,n.jsx)("title",{children:(0,n.jsx)(l.cC,{id:"EixifW"})})}),(0,n.jsx)(ej.D,{...O,pageTitle:T}),"outline"===i?(0,n.jsx)(ep,{goToThemeStep:A}):(0,n.jsx)(eg.O,{})]})})});ef.displayName="CreateGeneratePage"},49516:function(e,t,i){"use strict";i.d(t,{j:function(){return ee}});var n=i(52322),r=i(43297),l=i(28535),s=i(77533),o=i(11082),a=i(17993),d=i(74409),c=i(62614),u=i(54933),x=i(49929),h=i(5879),m=i(87254),p=i(2784),g=i(5632),j=i(76332),f=i(42111),v=i(91994),C=i(50260),b=i(21733),y=i(63304),k=i(39486),w=i(9449),E=i(31490),S=i(39122);let I=()=>{let{push:e}=(0,g.useRouter)(),t=(0,v.qr)(),[i]=(0,j.Kb4)(),[n,r]=(0,p.useState)(!1),[l]=(0,j.JBp)(),[s]=(0,j.VS0)(),[o]=(0,j.Mhm)(),a=(0,p.useCallback)(async()=>{var e,t,n;let r=(0,E.nZ)(),s=(0,b.n_)(),o=await l({variables:{input:{workspaceId:(0,b.n_)(),generationType:j.FJd.UploadPpt,input:{interactionId:(0,E.nZ)(),settings:{...y.zJ},format:"deck"}}}}),a=null===(t=o.data)||void 0===t?void 0:null===(e=t.createDocGeneration.draftInput)||void 0===e?void 0:e.id;if(!a)throw Error("No docGenerateInputId");let d=await i({variables:{docGenerateInputId:a,options:{themeId:C.C4,cardDimensions:"16x9"}}}),c=null===(n=d.data)||void 0===n?void 0:n.generateDoc;if(!c)throw Error("Could not create doc");return null==c||c.docGenerateInput.id,{docGenerateInputId:a,interactionId:r,workspaceId:s,docId:c.id}},[l,i]),[d]=(0,j.UoQ)(),c=(0,p.useCallback)(async e=>{var t;let{docId:i,themeId:n}=e,r=await d({variables:{id:i,themeId:n}});return null===(t=r.data)||void 0===t?void 0:t.updateDoc},[d]),u=(0,p.useCallback)(async e=>{var i,n;let r;let{file:l,docId:s,interactionId:a}=e;if(!l.thumbnails)throw Error("No thumbnails");let d=await o({variables:{input:{htmlUrl:l.htmlUrl,workspaceId:(0,b.n_)(),interactionId:a}}});if(!(null===(n=d.data)||void 0===n?void 0:null===(i=n.parsePptHtml)||void 0===i?void 0:i.slideHtml))throw Error("Could not parse ppt html");console.log("Got slides HTML",r=d.data.parsePptHtml.slideHtml);let{stream:c,cancel:u}=(0,w.ZE)({promptKey:"ImportPPT",interactionId:a,variables:{slidesHtml:r,thumbnails:l.thumbnails},workspaceId:(0,b.n_)()},{streamId:s,streamResumingEnabled:!0,retries:3});await (0,k.m3)({stream:c,onCancel:u,interactionId:a,options:{docFormatKey:"deck",imageOptions:{},lazyImages:!1,preserveLayouts:!0},bufferCards:1,store:t,docId:s}).promise},[o,t]),x=(0,p.useCallback)(async e=>{var t;let{interactionId:i,file:n,docId:r,docGenerateInputId:l}=e,o=await s({variables:{input:{interactionId:i,workspaceId:(0,b.n_)(),docId:r,docGenerateInputId:l,htmlUrl:n.htmlUrl,thumbnails:n.thumbnails}}}),a=null===(t=o.data)||void 0===t?void 0:t.generateImportPptThemes;if(!a)throw Error("Error generating theme");return a.themes},[s]),h=(0,p.useCallback)(async t=>{let{file:i}=t;console.log("[GENERATE] file",i),r(!0);try{let{docGenerateInputId:t,docId:n,interactionId:r,workspaceId:l}=await a();console.log("[GENERATE] createDoc",{docGenerateInputId:t,docId:n,interactionId:r,workspaceId:l});let s=u({file:i,docId:n,interactionId:r});if(f.VH.get("pptImportThemes")){let e=x({interactionId:r,file:i,docId:n,docGenerateInputId:t}),l=e.then(e=>(console.log("[GENERATE] themes",e),c({docId:n,themeId:e[0].id})));await Promise.all([l,s])}else await s;e("/docs/".concat(n,"?source=").concat(S.VY))}finally{r(!1)}},[a,u,x,e,c]);return{generate:h,isGenerating:n}};var _=i(93202),A=i(18153),T=i(26787),O=i(11050),P=i(86581),D=i(18455),R=i(17190),N=i(42946),G=i(82863),z=i(14274),M=i(51874),L=i(83633),F=i(8484);let U=e=>{let{children:t}=e,{query:i}=(0,g.useRouter)(),r="dashboard"===i.key?(0,n.jsx)(h.cC,{id:"i0qMbr"}):(0,n.jsx)(h.cC,{id:"iH8pgl"}),l="dashboard"===i.key?N.J9Y:N.acZ;return(0,n.jsx)(G.rg,{clientId:z.v.GOOGLE_DRIVE_IMPORT_CLIENT_ID,children:(0,n.jsxs)(M.v4,{children:[(0,n.jsx)(F.D,{navLabel:r,navIcon:l,options:{ref:i.ref}}),(0,n.jsx)(L.U,{title:(0,n.jsx)(h.cC,{id:"eumYBf"}),subtitle:(0,n.jsx)(h.cC,{id:"7aFH7x"}),icon:(0,n.jsx)(x.G,{icon:u.Vmj}),iconBoxProps:{color:"purple.300"},children:(0,n.jsx)(R.W,{maxW:"3xl",children:t})})]})})};var W=i(29117),H=i(36474),V=i(32899),B=i(94523);let K=e=>{let{importedFile:t,handleDelete:i,children:r}=e;return(0,n.jsxs)(a.g,{spacing:{base:8,md:10},maxW:"100%",w:"700px",alignSelf:"center",children:[(0,n.jsx)(a.g,{spacing:4,align:"stretch",w:"100%",children:(0,n.jsxs)(W.U,{justifyContent:"center",bg:"white",py:3,px:4,spacing:4,borderRadius:"md",shadow:"sm",children:[(0,n.jsx)(l.xu,{color:"green.500",fontSize:"lg",children:(0,n.jsx)(x.G,{icon:u.f8k})}),(0,n.jsx)(s.x,{noOfLines:1,children:null==t?void 0:t.filename}),(0,n.jsx)(H.L,{}),(0,n.jsx)(B.kH,{placement:"top",label:(0,n.jsx)(h.cC,{id:"cILfnJ"}),children:(0,n.jsx)(V.h,{onClick:i,variant:"ghost",colorScheme:"red","aria-label":m.ag._({id:"cILfnJ"}),icon:(0,n.jsx)(x.G,{icon:N.Vui})})})]})}),(0,n.jsx)(a.g,{spacing:4,w:"100%",children:r})]})};var q=i(82655),Y=i(22902);let Z=(0,p.memo)(e=>{let{value:t,onSelect:i}=e;return(0,n.jsxs)(r.K,{direction:"row",mb:4,w:"100%",justifyContent:"center",children:[(0,n.jsx)(B.kH,{placement:"top",label:(0,n.jsx)(h.cC,{id:"MZZYy8"}),children:(0,n.jsx)(l.xu,{flex:"1",children:(0,n.jsx)(Y.qe,{label:(0,n.jsx)(h.cC,{id:"3b7s4O"}),icon:q.qHV,selectedIcon:u.qHV,onClick:()=>{i("vision")},description:(0,n.jsx)(h.cC,{id:"m7XeHS",components:{0:(0,n.jsx)("strong",{})}}),isSelected:"vision"===t})})}),(0,n.jsx)(B.kH,{placement:"top",label:(0,n.jsx)(h.cC,{id:"7IsDMu"}),children:(0,n.jsx)(l.xu,{flex:"1",children:(0,n.jsx)(Y.qe,{label:(0,n.jsx)(h.cC,{id:"jZBpoi"}),icon:q.JyM,selectedIcon:u.JyM,onClick:()=>{i("text")},isSelected:"text"===t,description:(0,n.jsx)(h.cC,{id:"piZd2g",components:{0:(0,n.jsx)("strong",{})}})})})})]})});Z.displayName="PptImportTypeSelector";var J=i(704),X=i(96796),Q=i(76282);let $={GoogleDocs:_.FJd.ImportGoogleDoc,GoogleSlides:_.FJd.ImportGoogleSlides,PptxUpload:_.FJd.UploadPpt,DocxUpload:_.FJd.UploadWordFile},ee=(0,p.memo)(()=>{(0,A.j)({queryKey:"ref"});let e=(0,v.TL)(),t=(0,O.z$)(),{guessSettings:i,isLoading:g}=(0,X.d)(),{goToScreen:j}=(0,J.R)(),C=(0,f.ye)("pptImportV2"),[b,y]=(0,p.useState)("freeform"),k=(0,v.CG)(Q.$Q),w=(null==k?void 0:k.source)==="PptxUpload",[E,S]=(0,p.useState)("deck"),[_,R]=(0,p.useState)(C?"vision":"text"),N=(0,p.useCallback)(i=>{let{source:n,src:r}=i;e((0,Q.c_)(i)),"GoogleSlides"===n||"PptxUpload"===n?y("structured"):y("freeform"),null==t||t.track(O.AA.DOC_IMPORTED,{source:n,src:r,with_ai:!0})},[e,t]),{generate:G,isGenerating:z}=I(),M=(0,p.useCallback)(async()=>{if(!k)return;if(w&&C&&"vision"===_){await G({file:k});return}let e=$[k.source],t=(0,D.B)(k.html,!1),n=(0,P.c$)(t),r="GoogleDocs"===k.source||"DocxUpload"===k.source;await i(e,{format:E,content:n,settings:{textMode:r&&"deck"==E?"condense":r||"document"!==E?"preserve":"generate",editorMode:b}})},[k,w,C,_,E,b,i,G]),L=(0,p.useCallback)(()=>{e((0,Q.c_)(void 0))},[e]);return(0,n.jsxs)(U,{children:[!k&&(0,n.jsxs)(r.K,{direction:"column",spacing:{base:6,md:8},align:"center",w:"100%",children:[(0,n.jsx)(T.v,{onImportComplete:N}),(0,n.jsx)(l.xu,{w:"100%",children:(0,n.jsx)(s.x,{textAlign:"center",color:"blackAlpha.800",children:(0,n.jsx)(h.cC,{id:"HmmZUO",components:{0:(0,n.jsx)(o.r,{textDecoration:"underline",fontWeight:"600",href:"/create/paste?ref=import",onClick:e=>{e.preventDefault(),j("createPaste",{ref:"import"})}})}})})})]}),k&&(0,n.jsxs)(K,{importedFile:k,handleDelete:L,children:[!w&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(a.g,{spacing:4,w:"100%",py:2,children:[(0,n.jsx)(d.X,{size:{base:"sm",md:"md"},textAlign:"center",fontWeight:"500",color:"blackAlpha.700",px:4,children:(0,n.jsx)(h.cC,{id:"SjATqV"})}),(0,n.jsx)(Y.FQ,{setSelectedFormat:S,selectedFormat:E})]}),(0,n.jsx)(l.xu,{width:"100%",children:(0,n.jsx)(c.z,{size:"lg",variant:"solid",rightIcon:(0,n.jsx)(x.G,{icon:u.eFW}),onClick:M,isLoading:g,loadingText:m.ag._({id:"qgUvjm"}),w:"100%",children:(0,n.jsx)(h.cC,{id:"xGVfLh"})})})]}),w&&(0,n.jsxs)(n.Fragment,{children:[C&&(0,n.jsxs)(a.g,{spacing:4,w:"100%",py:2,children:[(0,n.jsx)(d.X,{size:{base:"sm",md:"md"},textAlign:"center",fontWeight:"500",color:"blackAlpha.700",px:4,children:(0,n.jsx)(h.cC,{id:"ETAPks"})}),(0,n.jsx)(Z,{value:_,onSelect:R})]}),"text"===_&&(0,n.jsxs)(a.g,{spacing:4,w:"100%",py:2,children:[(0,n.jsx)(d.X,{size:{base:"sm",md:"md"},textAlign:"center",fontWeight:"500",color:"blackAlpha.700",px:4,children:(0,n.jsx)(h.cC,{id:"SjATqV"})}),(0,n.jsx)(Y.FQ,{setSelectedFormat:S,selectedFormat:E})]}),(0,n.jsx)(l.xu,{width:"100%",children:(0,n.jsx)(c.z,{size:"lg",variant:"solid",rightIcon:(0,n.jsx)(x.G,{icon:u.eFW}),onClick:M,isLoading:g||z,loadingText:m.ag._({id:"qgUvjm"}),w:"100%",children:(0,n.jsx)(h.cC,{id:"xGVfLh"})})})]})]})]})});ee.displayName="CreateImportPage"},49197:function(e,t,i){"use strict";i.d(t,{L:function(){return D}});var n=i(52322),r=i(17190),l=i(17993),s=i(28535),o=i(87651),a=i(74409),d=i(62614),c=i(77533),u=i(11082),x=i(42946),h=i(54933),m=i(49929),p=i(94523),g=i(5879),j=i(87254),f=i(2784),v=i(51874),C=i(45760),b=i(28918),y=i(93202),k=i(18153),w=i(91994),E=i(93546),S=i(96796),I=i(76282),_=i(54012),A=i(22902),T=i(83633),O=i(704),P=i(8484);let D=(0,f.memo)(()=>{let{guessSettings:e,isLoading:t}=(0,S.d)(),i=(0,w.CG)(I.au),[D,R]=(0,f.useState)(!1),[N,G]=(0,f.useState)("deck"),{goToScreen:z}=(0,O.R)(),M=(0,f.useCallback)(async()=>{let t=(0,_.Yl)(i),n=(0,_.vE)(i),r=(0,b.J1)(i);await e(y.FJd.PasteText,{format:N,content:i,settings:{textMode:r>=1e3?"document"===N?"preserve":"condense":"generate",editorMode:n>2&&t>5?"structured":"freeform"}})},[e,N,i]);return(0,k.j)({queryKey:"ref"}),(0,n.jsx)(C.jX,{children:(0,n.jsxs)(v.v4,{children:[(0,n.jsx)(P.D,{navLabel:(0,n.jsx)(g.cC,{id:"iH8pgl"}),navIcon:x.acZ}),(0,n.jsx)(T.U,{title:(0,n.jsx)(g.cC,{id:"RG+JLG"}),subtitle:(0,n.jsx)(g.cC,{id:"v2ydVh"}),icon:(0,n.jsx)(m.G,{icon:h.OEL}),iconBoxProps:{color:"salmon.300"},children:(0,n.jsx)(r.W,{maxW:"2xl",children:(0,n.jsxs)(l.g,{spacing:4,w:"100%",children:[(0,n.jsx)(l.g,{spacing:3,align:"stretch",w:"100%",children:(0,n.jsx)(E.e,{containerProps:{minH:{base:"270px",sm:"300px",md:"50vh"},maxH:"50vh",overflow:"auto"},hideFooter:!0,onEditorUpdate:e=>{let{editor:t}=e;R(!t.isEmpty)}})}),(0,n.jsx)(s.xu,{w:"100%",children:(0,n.jsx)(o.U,{in:D,children:(0,n.jsxs)(l.g,{spacing:4,py:2,w:"100%",children:[(0,n.jsx)(a.X,{size:{base:"sm",md:"md"},textAlign:"center",fontWeight:"500",color:"blackAlpha.700",px:4,children:(0,n.jsx)(g.cC,{id:"SjATqV"})}),(0,n.jsx)(A.FQ,{setSelectedFormat:G,selectedFormat:N})]})})}),(0,n.jsx)(p.kH,{label:i?"":(0,n.jsx)(g.cC,{id:"9IxKHJ"}),isDisabled:!!i,placement:"top",children:(0,n.jsx)(s.xu,{width:"100%",children:(0,n.jsx)(d.z,{size:"lg",minW:"16em",width:"100%",onClick:M,variant:"solid",rightIcon:(0,n.jsx)(m.G,{icon:x.eFW}),isLoading:t,isDisabled:!i,loadingText:j.ag._({id:"qgUvjm"}),children:(0,n.jsx)(g.cC,{id:"xGVfLh"})})})}),(0,n.jsx)(s.xu,{w:"100%",children:(0,n.jsx)(o.U,{in:!D,children:(0,n.jsx)(c.x,{textAlign:"center",color:"blackAlpha.800",children:(0,n.jsx)(g.cC,{id:"LVQnRo",components:{0:(0,n.jsx)(u.r,{onClick:e=>{e.preventDefault(),z("createImport",{ref:"paste"})},textDecoration:"underline",fontWeight:"600"})}})})})})]})})})]})})});D.displayName="CreatePastePage"},22902:function(e,t,i){"use strict";i.d(t,{FQ:function(){return f},_J:function(){return g},qe:function(){return j}});var n=i(52322),r=i(43297),l=i(62614),s=i(28535),o=i(77533),a=i(82655),d=i(42946),c=i(54933),u=i(49929),x=i(94523),h=i(87254),m=i(2784),p=i(90221);let g={deck:{label:()=>h.ag._({id:"FOoDGS"}),selectedIcon:c.s2,icon:a.s2,description:()=>h.ag._({id:"EPYCou"})},document:{label:()=>h.ag._({id:"7Zdnlq"}),selectedIcon:c.OEL,icon:a.OEL,description:()=>h.ag._({id:"nM2WM0"})},webpage:{label:()=>h.ag._({id:"YVokw8"}),selectedIcon:c.tc$,icon:a.tc$,description:()=>h.ag._({id:"C90Qtf"})}},j=e=>{let{label:t,icon:i,description:a,selectedIcon:x,isSelected:h,onClick:m,hideCheckbox:g}=e,j="purple.500";return(0,n.jsxs)(r.K,{as:l.z,h:"auto",textShadow:"none",variant:"plain",p:{base:2.5,sm:3},minW:24,spacing:1,w:"100%",cursor:"pointer",textAlign:"center",transition:"all 300ms ease",border:"2px solid",bg:h?"white":"whiteAlpha.800",borderRadius:"md",boxShadow:"sm",borderColor:h?j:"whiteAlpha.400",color:h?"trueblue.700":"gray.800",onClick:m,_hover:(0,p.s2)()?{color:"gray.800"}:{bg:"trueblue.50",borderColor:"trueblue.400"},position:"relative",children:[!g&&(0,n.jsx)(s.xu,{fontSize:"md",position:"absolute",left:1.5,top:1.5,color:h?j:"gray.200",children:(0,n.jsx)(u.G,{icon:h?c.f8k:d.diR})}),(0,n.jsx)(s.xu,{fontSize:{base:"lg",sm:"xl"},color:h?"trueblue.600":"trueblue.300",children:(0,n.jsx)(u.G,{icon:h?x:i})}),(0,n.jsx)(o.x,{fontSize:"sm",fontWeight:"500",noOfLines:1,children:t}),a&&(0,n.jsx)(o.x,{mt:2,fontSize:"xs",fontWeight:"500",whiteSpace:"normal",children:a})]})},f=(0,m.memo)(e=>{let{setSelectedFormat:t,selectedFormat:i,hideCheckbox:l}=e;return(0,n.jsx)(r.K,{direction:"row",mb:4,w:"100%",justifyContent:"center",children:Object.entries(g).map(e=>{let[r,{label:o,icon:a,selectedIcon:d,description:c}]=e;return(0,n.jsx)(x.kH,{placement:"top",label:c(),children:(0,n.jsx)(s.xu,{flex:"1",children:(0,n.jsx)(j,{label:o(),icon:a,selectedIcon:d,hideCheckbox:l,onClick:()=>{t(r)},isSelected:r===i})})},r)})})});f.displayName="FormatPickerComponent"},21723:function(e,t,i){"use strict";i.d(t,{B:function(){return d}});var n=i(52322),r=i(38035),l=i(2784),s=i(71113),o=i(67496),a=i(51874);let d=(0,l.memo)(e=>{let{id:t,children:i}=e,{isLoading:l}=(0,o.HL)({id:t});return l?(0,n.jsx)(r.k,{...a.ZQ,w:"100%",h:"100%",flex:1,alignSelf:"center",children:(0,n.jsx)(s.AA,{})}):(0,n.jsx)(n.Fragment,{children:i})});d.displayName="LoadDocGenerationPage"},13734:function(e,t,i){"use strict";i.d(t,{O:function(){return Q}});var n=i(52322),r=i(38035),l=i(2784),s=i(91994),o=i(14324),a=i(67613),d=i(46409),c=i(90221),u=i(93441),x=i(28535),h=i(17993),m=i(62614),p=i(28165),g=i(54933),j=i(49929),f=i(5879),v=i(38045),C=i(4742),b=i.n(C),y=i(9850),k=i.n(y),w=i(86113),E=i(27333),S=i(52394),I=i(28664),_=i(31709),A=i(32186),T=i(96933),O=i(87205),P=i(74153),D=i(75816),R=i(50260),N=i(22569);let G=e=>{let{theme:t}=e,i=t||R.mU,{isLoadingThemes:r}=(0,o.a)(),l=(0,N.R5)(i),s=(0,R.wj)(i),a=(0,N.wh)(l,s),d=r?{}:a;return(0,n.jsx)(x.xu,{...d,w:"100vw",h:"100%",position:"fixed",zIndex:-1,opacity:1,"data-theme-picker-background":!0,transitionProperty:"background-color, background-image",transitionDuration:"1s",inset:"0px"})},z=(0,v.E)(x.xu),M=e=>{let{card:t,theme:i,...r}=e,s=(0,l.useMemo)(()=>{if(t)return(0,_.vL)({docFlags:{cardLayoutsEnabled:!0}},[t])},[t]);return(0,n.jsx)(z,{pointerEvents:"none",sx:{"*":{backdropFilter:"none !important",transitionProperty:"background-color, color, border-color, padding, margin, width, maxWidth, fontSize",transitionDuration:".15s",[".button .".concat(E.A8)]:{transitionProperty:"none"}},".doc-content-wrapper *[data-doc-background-element], .motion-present-mode-bg":{display:"none"},".card-wrapper,.card-body,.doc-content-wrapper":{padding:0,margin:0,minHeight:"auto"},"[data-card-body]":{"--card-color-transparent":"var(--card-color)","--card-width":"60rem"}},...r,children:s&&i&&(0,n.jsx)(A.m,{content:s,initialContent:s,theme:i})})},L=(e,t,i)=>{let n=0,r=e=>{var l;return null===(l=e.content)||void 0===l?void 0:l.map(e=>{var l,s,o,a,d,c,u;let x={...e,attrs:{...e.attrs}};if("image"===e.type){let e=t.shift();e&&(x.attrs.src=e.imageUrl,x.attrs.tempUrl=e.imageUrl)}if("cardAccentLayoutItem"===e.type&&(null===(o=e.attrs)||void 0===o?void 0:null===(s=o.background)||void 0===s?void 0:null===(l=s.image)||void 0===l?void 0:l.src)){let e=null==i?void 0:null===(u=i.config)||void 0===u?void 0:null===(c=u.accentBackgrounds)||void 0===c?void 0:c[n];e&&(n++,x.attrs.background=e)}if("smartLayoutCell"===e.type&&(null===(d=e.attrs)||void 0===d?void 0:null===(a=d.image)||void 0===a?void 0:a.src)==="custom"){let e=t.shift();e&&(x.attrs.image.src=e.imageUrl,x.attrs.image.tempUrl=e.imageUrl)}return e.content&&(x.content=r(x)),x})};return Object.assign({},e,{content:r(e)})},F=e=>{e&&requestAnimationFrame(()=>{var t;return null===(t=document.querySelector('[data-theme-id="'.concat(e,'"]')))||void 0===t?void 0:t.scrollIntoView({behavior:"smooth"})})},U=e=>{let{images:t}=e,i=(0,s.TL)(),o=(0,s.CG)(a.ez),d=(0,s.CG)(a.$b),[c,u]=(0,P.Ns)("themeId"),x=o.find(e=>c===e.id);(0,l.useEffect)(()=>{if(c||!(null==o?void 0:o.length))return;i((0,a.uG)({activeView:"standard"}));let e=b()(d);e&&(u(e.id),F(e.id))},[i,c,d,o,u]);let v=(0,l.useMemo)(()=>{let e=k()((0,w.s)()),i=L(e,k()(t),x);return i.content[0].content||[]},[x,t]),C=(0,l.useCallback)(()=>{if(!o)return;let e=b()(o);e&&(u(e.id),(null==e?void 0:e.workspaceId)?i((0,a.uG)({activeView:"custom"})):i((0,a.uG)({activeView:"standard"})),F(null==e?void 0:e.id))},[i,u,o]),y=(0,T.i)({base:0,"4xl":300})||0,E=(0,T.i)({base:600,xl:250,"4xl":0})||0,_=(0,T.i)({base:0,xl:1})||0,R=(0,T.i)({base:.5,lg:.6,xl:.7,"2xl":.85,"3xl":1,"4xl":1.125});return(0,l.useEffect)(function(){o&&0!==o.length&&Promise.all(o.map(e=>{var t,i,n,r,l,s,o,a,d,c;(null===(n=e.config.accentBackgrounds)||void 0===n?void 0:null===(i=n[0])||void 0===i?void 0:null===(t=i.image)||void 0===t?void 0:t.src)&&(0,O.GN)(null===(a=e.config.accentBackgrounds)||void 0===a?void 0:null===(o=a[0].image)||void 0===o?void 0:o.src),(null===(s=e.config.accentBackgrounds)||void 0===s?void 0:null===(l=s[1])||void 0===l?void 0:null===(r=l.image)||void 0===r?void 0:r.src)&&(0,O.GN)(null===(c=e.config.accentBackgrounds)||void 0===c?void 0:null===(d=c[1].image)||void 0===d?void 0:d.src)}))},[o]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(G,{theme:x}),(0,n.jsxs)(r.k,{zIndex:1,py:0,px:6,sx:A.n,"data-theme-desktop-root":!0,position:"relative",children:[(0,n.jsx)(p.xB,{styles:{html:{overflowX:"hidden",overflowY:"auto"}}}),(0,n.jsxs)(r.k,{direction:"column",pos:"relative",flex:1,h:"100%",transform:"scale(".concat(R,")"),justifyContent:"center",alignItems:"center",ml:[40,35,30,20,0],"data-id":"theme-picker-desktop-cards",children:[(0,n.jsx)(M,{pos:"absolute",theme:x,card:v[2],initial:{opacity:0},animate:{opacity:1,translateX:0,transition:{opacity:{duration:.5,delay:0,ease:"easeOut"},default:{duration:2,ease:"easeOut"}}},zIndex:1}),(0,n.jsx)(M,{pos:"absolute",theme:x,card:v[0],initial:{translateX:0,opacity:0},animate:{translateX:y,translateY:E,rotate:-_,opacity:1,transition:{default:{duration:2,delay:.5,ease:"easeOut"}}}}),(0,n.jsx)(M,{pos:"absolute",theme:x,card:v[1],initial:{translateX:0,opacity:0},transformOrigin:"center",animate:{translateX:-y,translateY:-E,rotate:_,opacity:1,transition:{default:{duration:2,delay:.5,ease:"easeOut"}}}})]}),(0,n.jsxs)(r.k,{w:"420px",p:6,direction:"column",justifyContent:"center",bg:"whiteAlpha.900",borderRadius:"lg",h:"calc(100vh - var(--chakra-sizes-20))",minH:"700px",mb:4,shadow:"md",pos:"relative",position:"sticky",mt:6,children:[(0,n.jsx)(I.v,{title:(0,n.jsx)(f.cC,{id:"cQGp8b"}),description:(0,n.jsxs)(h.g,{w:"100%",align:"center",justify:"center",children:[(0,n.jsx)(D.j,{w:"100%",children:(0,n.jsx)(f.cC,{id:"ziAjHi"})}),(0,n.jsx)(m.z,{w:"100%",leftIcon:(0,n.jsx)(j.G,{icon:g.a_u,color:"var(--chakra-colors-trueblue-800)"}),size:"md",onClick:C,children:(0,n.jsx)(f.cC,{id:"B8w15Q"})})]}),stackProps:{pb:4},currentTheme:x}),(0,n.jsx)(S.t,{shouldScrollToCurrent:!0,currentTheme:x,setTheme:e=>{u(null==e?void 0:e.id)},flexProps:{overflowY:"auto",mx:-6,px:3}})]})]})]})};var W=i(43297),H=i(74409),V=i(77533),B=i(75768),K=i(29117),q=i(42946),Y=i(43997),Z=i(8393),J=i(18438);let X=()=>{let e=(0,l.useRef)(!1),t=(0,s.CG)(a.Y3),i=(0,s.CG)(a.$b),[o,d]=(0,P.Ns)("themeId",{debounce:500}),[c,u]=(0,l.useState)(()=>t.find(e=>e.id===o)),h=(0,Y.I0)(),g=(0,s.CG)(a.C0),v=(0,s.CG)(a.FM),C=c?(0,R.wj)(c):void 0;(0,l.useEffect)(()=>{if(o||!(null==i?void 0:i.length)||e.current)return;let t=b()(i);if(t){var n;h((0,a.uG)({activeView:"standard"})),u(t),null===(n=document.querySelector('[data-theme-mobile-preview="'.concat(t.id,'"]')))||void 0===n||n.scrollIntoView(),e.current=!0}},[h,i,o]),(0,l.useEffect)(()=>{var t;!e.current&&o&&c&&(c.workspaceId?h((0,a.uG)({activeView:"custom"})):h((0,a.uG)({activeView:"standard"})),null===(t=document.querySelector('[data-theme-mobile-preview="'.concat(c.id,'"]')))||void 0===t||t.scrollIntoView(),e.current=!0)},[h,c,o]);let y=(0,l.useCallback)(e=>{let{scrollLeft:i,scrollWidth:n,clientWidth:r}=e.target,l=Math.round(i/(n-r)*(t.length-1)),s=t[l];s.id!==(null==c?void 0:c.id)&&u(s)},[t,null==c?void 0:c.id,u]),k=(0,l.useCallback)(()=>{(null==c?void 0:c.id)&&d(c.id)},[null==c?void 0:c.id,d]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(G,{theme:c}),(0,n.jsxs)(W.K,{spacing:0,h:"100%",w:"100vw",children:[(0,n.jsx)(p.xB,{styles:{html:{height:"100%"},body:{height:"100%"}}}),(0,n.jsxs)(W.K,{spacing:0,mx:"auto",zIndex:1,px:6,pt:20,sx:A.n,w:"100%",children:[(0,n.jsxs)(W.K,{align:"center",spacing:1,children:[(0,n.jsx)(H.X,{letterSpacing:"-0.04em",fontWeight:"700",fontFamily:"p22-mackinac-pro",color:C?"#FFFFFF":"#0a1629",w:"100%",size:"2xl",transitionProperty:"common",transitionDuration:"normal",children:(0,n.jsx)(f.cC,{id:"cQGp8b"})}),(0,n.jsx)(V.x,{fontSize:"lg",color:C?"#FFFFFF":"#0a1629",letterSpacing:"-0.04em",transitionProperty:"common",transitionDuration:"normal",children:(0,n.jsx)(f.cC,{id:"950yV9"})})]}),g&&(0,n.jsxs)(B.h,{variant:"ghost",size:"sm",borderRadius:"full",w:"100%",pt:2,justifyContent:"center",children:[(0,n.jsx)(m.z,{borderRadius:"full",leftIcon:(0,n.jsx)(j.G,{icon:q.D0h,fixedWidth:!0}),"data-theme-picker-active-view-button":"custom",colorScheme:"custom"===v?"trueblue":"gray",bg:"custom"===v?"trueblue.100":"gray.100",onClick:()=>h((0,a.uG)({activeView:"custom"})),children:(0,n.jsx)(f.cC,{id:"8Tg/JR"})}),(0,n.jsx)(m.z,{borderRadius:"full",leftIcon:(0,n.jsx)(x.xu,{w:3.5,children:(0,n.jsx)(Z.Y,{})}),"data-theme-picker-active-view-button":"standard",colorScheme:"standard"===v?"trueblue":"gray",bg:"standard"===v?"trueblue.100":"gray.100",onClick:()=>h((0,a.uG)({activeView:"standard"})),children:(0,n.jsx)(f.cC,{id:"TJBHlP"})})]})]}),(0,n.jsx)(r.k,{zIndex:1,pos:"relative",overflow:"auto",py:8,sx:{"scroll-snap-type":"x mandatory"},onScroll:y,children:(0,n.jsx)(K.U,{flex:1,spacing:6,px:12,pt:1,children:t.map(e=>(0,n.jsx)(J.L,{isSelected:e.id===(null==c?void 0:c.id),theme:e},e.id))})}),(0,n.jsx)(r.k,{px:6,py:4,mb:2,justify:"center",zIndex:9,w:"100%",children:(0,n.jsx)(D.j,{size:"lg",w:"100%",onClick:k,children:(0,n.jsx)(f.cC,{id:"ziAjHi"})})})]})]})},Q=(0,l.memo)(e=>{let{images:t=[]}=e;(0,o.a)();let i=(0,s.CG)(a.ez);return(0,u.gF)()&&(null==i?void 0:i.length)?(0,n.jsxs)(r.k,{direction:"column",justifyContent:"flex-start",flex:1,w:"100vw",h:"100%",children:[(0,n.jsx)(d.Y,{}),(0,c.s2)()?(0,n.jsx)(X,{}):(0,n.jsx)(U,{images:t})]}):null});Q.displayName="ThemeStep"},75258:function(e,t,i){"use strict";i.d(t,{D:function(){return g},x:function(){return j}});var n=i(52322),r=i(75768),l=i(62614),s=i(42946),o=i(49929),a=i(94523),d=i(87254),c=i(2784),u=i(76282),x=i(91994),h=i(7208),m=i(74153),p=i(96933);let g={freeform:{label:()=>d.ag._({id:"Jn5DbR"}),icon:s.elf,description:()=>d.ag._({id:"f15rRF"}),tip:()=>d.ag._({id:"y8DgoV"})},structured:{label:()=>d.ag._({id:"2PPaNm"}),icon:s.s2,description:()=>d.ag._({id:"on9ayD"}),tip:()=>d.ag._({id:"G7ngQL"})}},j=(0,c.memo)(()=>{let[e,t]=(0,m.Ns)("editorMode"),i=(0,x.CG)(u.Vn),{onChangeMode:s}=(0,h.N)(),d=(0,p.i)({base:!1,sm:!0});return(0,n.jsx)(r.h,{isAttached:!0,isDisabled:i,children:Object.entries(g).map(i=>{let[r,{label:c,description:u,icon:x}]=i,h=r===e;return(0,n.jsx)(a.kH,{label:u(),placement:"top",children:(0,n.jsx)(l.z,{size:"sm",leftIcon:d?(0,n.jsx)(o.G,{icon:x,fixedWidth:!0}):void 0,variant:h?"plainSelected":"plain",onClick:()=>{t(r),s()},boxShadow:"none",children:c()})},r)})})});j.displayName="ModeSwitcher"},33872:function(e,t,i){"use strict";i.d(t,{$3:function(){return N},Td:function(){return D},p3:function(){return G}});var n=i(52322),r=i(17993),l=i(10625),s=i(67046),o=i(62614),a=i(75009),d=i(332),c=i(99058),u=i(25481),x=i(28535),h=i(82554),m=i(77533),p=i(35183),g=i(97166),j=i(29494),f=i(42946),v=i(54933),C=i(49929),b=i(5879),y=i(87254),k=i(2784),w=i(42111),E=i(99787),S=i(47821),I=i(9883),_=i(68728),A=i(61185),T=i(67964),O=i(74153),P=i(39092);let D=(0,k.memo)(()=>{let[e]=(0,O.Ns)("imageProvider"),t=A.s[e]||E.QT,[i]=(0,O.Ns)("imageLicense"),l=(0,_.E)(i),[s]=(0,O.Ns)("imageStyle",{debounce:500});return(0,n.jsx)(P.j,{label:(0,n.jsx)(b.cC,{id:"an5hVd"}),colorScheme:"trueblue",icon:v.VmB,values:[null==t?void 0:t.label(),"web"===e&&l,"aiGenerated"===e&&s],children:(0,n.jsxs)(r.g,{spacing:4,children:[(0,n.jsx)(N,{}),(0,n.jsx)(G,{})]})})});D.displayName="ImageSettingsGroup";let R=(0,k.memo)(e=>{let{provider:t,setProvider:i}=e,r=(0,S.Ao)();return(0,n.jsxs)(l.v,{children:[(0,n.jsx)(s.j,{as:o.z,variant:"plain",boxShadow:"sm",w:"100%",textAlign:"left",rightIcon:(0,n.jsx)(C.G,{icon:f.ptq}),leftIcon:t.image?(0,n.jsx)(a.E,{h:"1em",w:"1em",objectFit:"cover",src:t.image.src}):t.icon?(0,n.jsx)(C.G,{icon:t.icon,color:"var(--chakra-colors-trueblue-600)",fixedWidth:!0}):void 0,size:"sm",children:t.label()||(0,n.jsx)(b.cC,{id:"wdxz7K"})}),(0,n.jsx)(d.h,{children:(0,n.jsx)(c.q,{zIndex:"tooltip",maxH:"60vh",overflowY:"auto",children:Object.entries(A.s).map(e=>{let[t,{label:l,icon:s,image:o,badge:d,description:c}]=e;return"aiGenerated"!==t||r?(0,n.jsxs)(u.s,{icon:o?(0,n.jsx)(a.E,{display:"inline",mr:2,h:"1em",w:"1em",objectFit:"contain",src:o.src}):s?(0,n.jsx)(x.xu,{display:"inline",mr:2,color:"trueblue.600",children:(0,n.jsx)(C.G,{icon:s})}):void 0,onClick:()=>i(t),children:[l(),d&&(0,n.jsx)(h.C,{ml:2,colorScheme:"green",children:d()}),c&&(0,n.jsx)(m.x,{fontSize:"xs",color:"gray.500",children:c()})]},t):null})})})]})});R.displayName="ImageProviderPicker";let N=()=>{let[e,t]=(0,O.Ns)("imageProvider"),i=A.s[e]||E.QT;return(0,n.jsxs)(p.NI,{children:[(0,n.jsx)(g.l,{fontSize:"sm",fontWeight:"semibold",children:(0,n.jsx)(b.cC,{id:"qA0pmh"})}),(0,n.jsx)(R,{provider:i,setProvider:t})]})},G=()=>{let[e]=(0,O.Ns)("imageProvider"),[t,i]=(0,O.Ns)("imageLicense"),[r,l]=(0,O.Ns)("imageStyle",{debounce:500}),s=(0,T.Y)("ai_premium_models"),o=(0,w.ye)("aiGeneratedImagesDefaultModel"),[a,d]=(0,O.Ns)("imageModel");return(0,n.jsxs)(n.Fragment,{children:["web"===e&&(0,n.jsxs)(p.NI,{children:[(0,n.jsx)(g.l,{fontSize:"sm",fontWeight:"semibold",children:(0,n.jsx)(b.cC,{id:"6TSHCF"})}),(0,n.jsx)(_.A,{value:t,onChange:i})]}),"aiGenerated"===e&&(0,n.jsxs)(p.NI,{children:[(0,n.jsx)(g.l,{fontSize:"sm",fontWeight:"semibold",children:(0,n.jsx)(b.cC,{id:"X2yiuT"})}),(0,n.jsx)(j.g,{value:r,onChange:e=>l(e.target.value),placeholder:y.ag._({id:"5x/foo"}),rows:2})]}),"aiGenerated"===e&&s&&(0,n.jsxs)(p.NI,{children:[(0,n.jsx)(g.l,{fontSize:"sm",fontWeight:"semibold",children:(0,n.jsx)(b.cC,{id:"emv9SK"})}),(0,n.jsx)(I.q,{value:a||o,setValue:d})]})]})}},39092:function(e,t,i){"use strict";i.d(t,{i:function(){return C},j:function(){return v}});var n=i(52322),r=i(87436),l=i(95897),s=i(29117),o=i(28535),a=i(43297),d=i(77533),c=i(36474),u=i(89511),x=i(11121),h=i(67109),m=i(49929),p=i(2784),g=i(76282),j=i(91994);let f={_groupHover:{color:"purple.600"}},v=(0,p.memo)(e=>{let{icon:t,colorScheme:i="gray",label:p,values:v=[],children:C}=e,b=(0,j.CG)(g.RB);return(0,n.jsx)(r.Q,{border:"none",children:e=>{let{isExpanded:r}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.K,{_focus:{boxShadow:"none",outline:"none"},py:2,p:3,outline:"none",transitionProperty:"common",transitionDuration:"normal",bg:"transparent",_hover:{bg:"".concat(i,".50")},children:(0,n.jsxs)(s.U,{width:"100%",spacing:"3",align:"start",children:[(0,n.jsx)(o.xu,{...f,display:"inline",fontSize:"sm",color:"".concat(i,".300"),children:(0,n.jsx)(m.G,{icon:t,fixedWidth:!0})}),(0,n.jsxs)(a.K,{spacing:0,align:"start",textAlign:"left",children:[(0,n.jsx)(d.x,{...f,fontWeight:"700",children:p}),!r&&(0,n.jsx)(d.x,{fontSize:"sm",fontWeight:"500",noOfLines:2,...f,children:v.filter(Boolean).join(" \xb7 ")})]}),(0,n.jsx)(c.L,{}),(0,n.jsx)(u.X,{...f})]})}),(0,n.jsxs)(x.H,{p:4,pt:3,pb:6,children:[b&&C,!b&&(0,n.jsxs)(a.K,{spacing:4,pt:2,align:"start",children:[(0,n.jsx)(h.O,{w:"100%",height:"30px"}),(0,n.jsx)(h.O,{w:"100%",height:"30px"}),(0,n.jsx)(h.O,{w:"100%",height:"30px"})]})]})]})}})});v.displayName="SettingsGroup";let C=e=>{let{children:t}=e;return(0,n.jsx)(d.x,{fontSize:"sm",color:"gray.500",children:t})}},62141:function(e,t,i){"use strict";i.d(t,{B:function(){return O},o:function(){return I}});var n=i(52322),r=i(17993),l=i(35183),s=i(97166),o=i(75768),a=i(62614),d=i(43297),c=i(29494),u=i(87651),x=i(54933),h=i(49929),m=i(94523),p=i(5879),g=i(87254),j=i(2784),f=i(48525),v=i(45302),C=i(63304),b=i(74153),y=i(54012),k=i(39092),w=i(89099),E=i(16556);let S=(0,j.memo)(e=>{let{tagsList:t,onClick:i}=e;return(0,n.jsx)(w.E,{pb:"2",align:"flex-start",w:"100%",children:t.map(e=>(0,n.jsx)(w.U,{children:(0,n.jsx)(E.Vp,{cursor:"pointer",colorScheme:"purple",boxShadow:"sm",_hover:{color:"white",bg:"purple.600"},onClick:()=>{i(e.value)},children:e.label})},e.label))})});S.displayName="SettingsTags";let I=(0,j.memo)(()=>{var e;let[t]=(0,b.Ns)("locale"),i=(0,v.jw)(t),[l]=(0,b.Ns)("textAmount"),[s]=(0,b.Ns)("textMode"),o=null===(e=A.find(e=>e.key===s))||void 0===e?void 0:e.label();return(0,n.jsx)(k.j,{label:(0,n.jsx)(p.cC,{id:"OuNFIM"}),colorScheme:"blue",icon:x.elf,values:[o,"preserve"!==s&&(0,y.XL)(l).label,"generate"===s&&i.displayName],children:(0,n.jsxs)(r.g,{spacing:4,children:[(0,n.jsx)(_,{}),"preserve"!==s&&(0,n.jsx)(O,{}),"generate"===s&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(P,{}),(0,n.jsx)(R,{})]}),(0,n.jsx)(T,{})]})})});I.displayName="TextSettingsGroup";let _=()=>{let[e,t]=(0,b.Ns)("textMode");return(0,n.jsxs)(l.NI,{children:[(0,n.jsx)(s.l,{fontSize:"sm",fontWeight:"semibold",children:(0,n.jsx)(p.cC,{id:"OuNFIM"})}),(0,n.jsx)(o.h,{size:"sm",isAttached:!0,width:"100%",children:A.map(i=>(0,n.jsx)(m.kH,{placement:"top",label:i.tip(),children:(0,n.jsx)(a.z,{variant:i.key===e?"plainSelected":"plain",boxShadow:"none",leftIcon:(0,n.jsx)(h.G,{icon:i.icon}),onClick:()=>t(i.key),width:"100%",children:i.label()})},i.label()))})]})},A=[{label:()=>g.ag._({id:"ziAjHi"}),key:"generate",icon:x.ddb,tip:()=>g.ag._({id:"8mt5hR"})},{label:()=>g.ag._({id:"NIvI2q"}),key:"condense",icon:x.G_A,tip:()=>g.ag._({id:"owZbal"})},{label:()=>g.ag._({id:"c0sF7y"}),key:"preserve",icon:x.byT,tip:()=>g.ag._({id:"RPSHJC"})}],T=()=>{let[e,t]=(0,b.Ns)("locale"),i=(0,v.jw)(e);return(0,n.jsxs)(l.NI,{children:[(0,n.jsx)(s.l,{fontSize:"sm",fontWeight:"semibold",children:(0,n.jsx)(p.cC,{id:"f6Pzgf"})}),(0,n.jsx)(f.k,{locale:i,setLocale:t,buttonProps:{variant:"plain",size:"sm",width:"100%",textAlign:"left"}})]})},O=()=>{let[e,t]=(0,b.Ns)("textAmount"),[i]=(0,b.Ns)("textMode"),r=(0,j.useMemo)(()=>(0,C.kq)(),[]);return(0,n.jsxs)(l.NI,{children:[(0,n.jsx)(s.l,{fontSize:"sm",fontWeight:"semibold",children:"condense"===i?(0,n.jsx)(p.cC,{id:"z7tEVo"}):(0,n.jsx)(p.cC,{id:"UmJg9q"})}),(0,n.jsx)(o.h,{size:"sm",isAttached:!0,width:"100%",children:Object.entries(r).map(i=>{let[r,{label:l,description:s,icon:o}]=i;return(0,n.jsx)(m.kH,{placement:"top",label:s,children:(0,n.jsx)(a.z,{variant:e===r?"plainSelected":"plain",boxShadow:"none",onClick:()=>t(r),leftIcon:(0,n.jsx)(h.G,{icon:o}),width:"100%",textAlign:"left",children:l})},r)})})]})},P=()=>{let[e,t]=(0,b.Ns)("audience",{debounce:500}),i=(0,j.useMemo)(()=>D(),[]);return(0,n.jsxs)(l.NI,{children:[(0,n.jsx)(s.l,{fontSize:"sm",fontWeight:"semibold",children:(0,n.jsx)(p.cC,{id:"CfNFS9"})}),(0,n.jsxs)(d.K,{spacing:3,children:[(0,n.jsx)(c.g,{size:"sm",minH:16,value:e,onChange:e=>t(e.target.value)}),(0,n.jsx)(u.U,{in:""===e||null===e,children:(0,n.jsx)(S,{tagsList:i,onClick:e=>{t(e)}})})]})]})},D=()=>[{label:g.ag._({id:"9N+p+g"}),value:g.ag._({id:"pCuan7"})},{label:g.ag._({id:"Y9OrUQ"}),value:g.ag._({id:"no1XFa"})},{label:g.ag._({id:"vINKFZ"}),value:g.ag._({id:"H13RWO"})},{label:g.ag._({id:"5AIqvu"}),value:g.ag._({id:"hqe36h"})},{label:g.ag._({id:"bNrMlq"}),value:g.ag._({id:"kImdWQ"})}],R=()=>{let[e,t]=(0,b.Ns)("tone",{debounce:500}),i=(0,j.useMemo)(()=>N(),[]);return(0,n.jsxs)(l.NI,{children:[(0,n.jsx)(s.l,{fontSize:"sm",fontWeight:"semibold",children:(0,n.jsx)(p.cC,{id:"uAQyzk"})}),(0,n.jsxs)(d.K,{spacing:"3",children:[(0,n.jsx)(c.g,{size:"sm",minH:16,value:e,onChange:e=>t(e.target.value)}),(0,n.jsx)(u.U,{in:""===e||null===e,children:(0,n.jsx)(S,{tagsList:i,onClick:e=>{t(e)}})})]})]})},N=()=>[{label:g.ag._({id:"Oojfbh"}),value:g.ag._({id:"L7fEtA"})},{label:g.ag._({id:"hzExWo"}),value:g.ag._({id:"F64cR2"})},{label:g.ag._({id:"wanXT9"}),value:"Precise and detailed writing suitable for technical documents, manuals, and guides. Emphasize accuracy and clarity"},{label:g.ag._({id:"ChasOQ"}),value:g.ag._({id:"lVYl+I"})},{label:g.ag._({id:"wTl0UK"}),value:g.ag._({id:"sFGQvg"})},{label:g.ag._({id:"4Nl9R0"}),value:g.ag._({id:"cspP/G"})}]},50896:function(e,t,i){"use strict";i.d(t,{J:function(){return S},Y:function(){return E}});var n=i(52322),r=i(75768),l=i(32899),s=i(62614),o=i(29117),a=i(77533),d=i(28535),c=i(10625),u=i(67046),x=i(332),h=i(99058),m=i(44035),p=i(39237),g=i(42946),j=i(49929),f=i(94523),v=i(5879),C=i(87254),b=i(2784),y=i(62131),k=i(81640),w=i(11050);let E=(0,b.memo)(e=>{let{onIncrement:t,onDecrement:i,maxCards:c,cardCount:u,...x}=e,h={boxShadow:"sm",bg:"white"};return(0,n.jsxs)(r.h,{isAttached:!0,flex:"1",...x,children:[null!=u&&(0,n.jsx)(l.h,{display:"flex",onClick:i,icon:(0,n.jsx)(j.G,{icon:g.Kl4}),"aria-label":C.ag._({id:"MrRUp2"}),width:2,...h}),(0,n.jsx)(s.z,{flex:"1",...h,_hover:{color:"inherit"},cursor:"default",children:(0,n.jsx)(f.kH,{label:(0,n.jsx)(v.cC,{id:"ukrE78"}),placement:"top",children:(0,n.jsx)(o.U,{spacing:1,cursor:"help",children:(0,n.jsxs)(a.x,{children:[(0,n.jsx)(d.xu,{as:"span",css:{fontVariantNumeric:"tabular-nums"},children:u})," ",(0,n.jsx)(v.cC,{id:"MU+gFM",values:{0:null!=u?u:0}})]})})})}),null!=u&&(0,n.jsx)(l.h,{display:"flex",onClick:t,icon:(0,n.jsx)(j.G,{icon:g.r8p}),"aria-label":C.ag._({id:"sFY+gw"}),width:2,isDisabled:u>=c,...h})]})});E.displayName="CardCountStepper";let S=(0,b.memo)(e=>{let{cardCount:t,maxCards:i,onChange:r}=e,{openUpsellModal:l}=(0,k.z)(),d=(0,b.useMemo)(()=>[...Array(i)],[i]),f=(0,b.useMemo)(()=>["15","20","25"],[]),C=()=>{l({segmentEvent:w.AA.GAMMA_UPSELL_CALLOUT_AI_GENERATE_LONGER})};return(0,n.jsxs)(c.v,{children:[(0,n.jsx)(u.j,{size:"sm",boxShadow:"none",minW:"32",textAlign:"left",as:s.z,rightIcon:(0,n.jsx)(j.G,{size:"xs",icon:g.ptq}),children:(0,n.jsx)(v.cC,{id:"fFAIng",values:{0:null!=t?t:0}})}),(0,n.jsx)(x.h,{children:(0,n.jsx)(h.q,{zIndex:"tooltip",children:(0,n.jsxs)(m._,{onChange:e=>{let t=Number(e);if(t>10){C();return}r(t)},value:"".concat(t),children:[d.map((e,t)=>{let i=t+1;return(0,n.jsx)(p.i,{value:"".concat(i),children:(0,n.jsx)(v.cC,{id:"bM4Wv5",values:{count:i}})},i)}),f.map(e=>{let t=Number(e);return(0,n.jsx)(p.i,{bg:"trueblue.50",border:"1px solid white",_hover:{bg:"trueblue.50",borderColor:"trueblue.200"},value:"".concat(t),children:(0,n.jsxs)(o.U,{spacing:"3",children:[(0,n.jsx)(a.x,{w:"100%",children:(0,n.jsx)(v.cC,{id:"bM4Wv5",values:{count:t}})}),(0,n.jsx)(y.ER,{product:"pro"})]})},t)})]})})})]})});S.displayName="CardCountDropdown"},43305:function(e,t,i){"use strict";i.d(t,{O:function(){return g}});var n=i(52322),r=i(62614),l=i(29117),s=i(54933),o=i(49929),a=i(94523),d=i(5879),c=i(2784),u=i(85420),x=i(97763),h=i(25566),m=i(74153);let p=()=>{let[e]=(0,m.Ns)("imageProvider");return"aiGenerated"===e?"generateV2WithImages":"generateV2"},g=(0,c.memo)(e=>{let{onClick:t}=e,i=p(),{hasEnoughCreditsToGenerateDeck:c}=(0,x.qO)(),m=(0,x.YO)(t,"generateV2",h.AA.GAMMA_UPSELL_CALLOUT_AI_CREDITS_GENERATE_V2);return(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(a.kH,{label:(0,n.jsx)(d.cC,{id:"mTJ1YV"}),isDisabled:c,shouldWrapChildren:!0,children:(0,n.jsx)(r.z,{variant:"solid",w:"100%",rightIcon:(0,n.jsxs)(l.U,{children:[(0,n.jsx)(u.J,{type:i}),(0,n.jsx)(o.G,{icon:s.eFW})]}),onClick:m,size:{base:"md",lg:"lg"},children:(0,n.jsx)(d.cC,{id:"xGVfLh"})})})})});g.displayName="ContinueToThemePickerButton"},75816:function(e,t,i){"use strict";i.d(t,{j:function(){return H}});var n=i(52322),r=i(62614),l=i(54933),s=i(49929),o=i(94523),a=i(87254),d=i(2784),c=i(704),u=i(97763),x=i(11050),h=i(5632),m=i(39486),p=i(9449),g=i(22537),j=i(39122),f=i(93202),v=i(42111),C=i(67964),b=i(91994),y=i(84405),k=i(31181),w=i(15041),E=i(50260),S=i(14027),I=i(36651),_=i(45302),A=i(76282);let T=e=>{let t=(0,C.Y)("ai_premium_models"),i=(0,v.ye)("generatorGPT4"),n=(0,v.ye)("anthropicGenerate"),r=(0,v.ye)("mistralGenerate"),l=r?"mistralai/Mistral-7B-Instruct-v0.2":n?"claude-3-haiku-20240307":"gpt-3.5-turbo-1106",s=r?"mistralai/Mixtral-8x7B-Instruct-v0.1":n?"claude-3-sonnet-20240229":"gpt-4-1106-preview",o=(0,d.useCallback)(n=>{if(!t&&!i)return l;let r="generate"!==n.textMode&&!n.parallel,o=e>=800&&!n.parallel,a=n.numCards&&n.numCards>=12&&!n.parallel;return r||a||o?s:l},[t,i,e,l,s]);return o};var O=i(43019),P=i(50634),D=i(57124),R=i(78462),N=i(96796);let G=()=>{let{push:e}=(0,h.useRouter)(),[t]=(0,f.V$$)(),i=(0,v.ye)("createSiteAi"),n=(0,D._O)(),{generate:r}=(0,P.j)("DetermineSiteMetadata",{}),[l]=(0,f.gVY)(),[s]=(0,f.Iyu)(),[o]=(0,f.D1_)(),c=(0,d.useCallback)(async i=>{let{workspaceId:n,docId:d,themeId:c,generateVars:u,firstCards:x}=i,h=x[0]?(0,O.getCardTitle)(x[0].content):void 0,{data:m}=await t({variables:{input:{workspaceId:n,name:h||a.ag._({id:"h3eRam"}),routes:[{docId:d,path:"/"}],themeId:c}}}),p=null==m?void 0:m.createSite;if(!p){console.error("[CreateSiteModal] Failed to create site, no site returned"),e("/docs/".concat(d,"?source=").concat(j.VY));return}try{let e=x.map(e=>e.raw).join("\n"),{language:t,instructions:i,input:a}=u,{promise:c}=r({workspaceId:n,variables:{topic:i||"",input:a,language:t,pageHtml:e}}),h=await c,{title:m,subdomain:g}=(0,N.R)(h),j="string"==typeof g&&g.length<=60&&/^[a-z0-9-]+$/.test(g.toLowerCase()),f=[];j&&f.push(l({variables:{input:{siteId:p.id,name:g.toLowerCase()}}})),m&&f.push(...[s({variables:{input:{siteId:p.id,name:m}}}),o({variables:{id:d,title:m}})]),await Promise.all(f)}catch(e){console.error("(caught) useGenerateSite error: ".concat(e))}let g=(0,R.yQ)({docId:d,params:{source:j.VY}});e(g)},[t,e,r,l,s,o]);return{canCreateSite:i&&n,createSiteWithAIAndRedirect:c}};var z=i(5026),M=i(1071),L=i(56920),F=i(37164);let U=()=>{let{push:e}=(0,h.useRouter)(),[t]=(0,f.qbt)(),{generate:i}=(0,P.j)("DeterminePageMetadata",{}),[n]=(0,f.D1_)(),r=(0,d.useCallback)(async r=>{let{site:l,docId:s,workspaceId:o,generateVars:a,firstCards:d}=r;try{let{language:e,instructions:r,input:c}=a,u=l.routes.map(e=>{var t;return{title:null===(t=e.doc)||void 0===t?void 0:t.title,path:e.path}}),x=d.map(e=>e.raw).join("\n"),h=d[0]?(0,O.getCardTitle)(d[0].content):void 0,m=!0,{promise:p}=i({workspaceId:o,variables:{topic:r||"",input:c,language:e,otherPages:u,pageHtml:x}}),g=await p,{path:j,title:f}=(0,N.R)(g);f||(f=h||"Untitled page",m=!1),j||(j=(0,L.IR)(f)),l.routes.some(e=>e.path===j)&&(j="".concat(j,"-").concat((0,F.x0)(6))),await Promise.all([t({variables:{input:{siteId:l.id,docId:s,path:(0,w.fJ)(j),offline:!1}},refetchQueries:["GetSite"]}),n({variables:{id:s,title:f,titleEdited:m}})])}catch(e){console.error("(caught) useSetPageMetadataWithAI error: ".concat(e))}let c=(0,R.yQ)({docId:s,params:{source:j.VY}});e(c)},[i,e,t,n]);return{setPageMetadataWithAIAndRedirect:r}},W=e=>{let{onSuccess:t}=e,{push:i}=(0,h.useRouter)(),n=(0,b.qr)(),r=(0,b.CG)(k.lH),{canCreateSite:l,createSiteWithAIAndRedirect:s}=G(),{setPageMetadataWithAIAndRedirect:o}=U(),[c]=(0,f.Kb4)(),u=(0,v.ye)("generatorLazyImages"),[x,O]=(0,d.useState)(!1),P=(0,v.ye)("streamResumingEnabled"),D=(0,b.CG)(A.mO),R=!0,N="",{maxTokens:L}=(0,M.ml)(),{maxCards:F}=(0,z.hw)();D>L&&(R=!1,N=a.ag._({id:"ZcJO3k",values:{maxTokens:L}}));let W=T(D),H=(0,f.jLg)(f.vGj),V=(0,d.useCallback)(async()=>{var e;let a=n.getState(),d=(0,A.RB)(a),x=(0,A.U6)(a);if(!x)throw Error("Cannot generate with no docGenerateInputId");O(!0);let h=(0,I.n_)(),b=(0,A.au)(a),k=(0,A.lb)(a),T=(0,_.jw)((0,A.Mn)("locale")(a)),R=(0,A.Mn)("textAmount")(a),N=(0,A.Mn)("audience")(a),G=(0,A.Mn)("tone")(a),z=(0,A.Lh)(a),M=(0,A.CC)(a),L=(0,A.Mn)("imageLicense")(a),U=(0,A.Mn)("imageProvider")(a),V=(0,A.Mn)("imageModel")(a)||v.VH.get("aiGeneratedImagesDefaultModel"),B=(0,A.Mn)("imageStyle")(a),K=(0,A.Mn)("textMode")(a),q=(0,A.Mn)("editorMode")(a),Y=(0,A.PB)(a),Z=(0,A.Mn)("cardDimensions")(a),J={instructions:k,input:b,language:T.englishName,numCards:Math.min(M,F),format:z,textAmount:R,audience:N,tone:G,textMode:K,editorMode:q,imageProvider:"aiGenerated"===U?"aiGenerated":"web"},X=(0,A.Mn)("themeId")(a),Q=X?(await H({id:X})).data.theme:void 0;"aiGenerated"===U&&!B&&Q&&(B=(0,E.A)(Q));let $=l&&"webpage"===z,ee=(0,w.Vr)(r)||$,et=await c({variables:{docGenerateInputId:x,options:{themeId:ee?void 0:X||S.g.id,orgAccess:ee?f.y3$.Manage:void 0,cardDimensions:Z}}}),ei=null===(e=et.data)||void 0===e?void 0:e.generateDoc,en=null==ei?void 0:ei.docGenerateInput.id;if(!en)throw Error("No docGenerateInput.id to use as interactionId");if(!ei)throw Error("Could not create doc");let er=v.VH.get("generateParallel"),el=er&&"structured"===q&&(J.numCards>=10||D>=2e3)&&(v.VH.get("generateParallelFree")||(0,C.uL)("ai_premium_models")),es=W({numCards:M,editorMode:q,textMode:K,parallel:el,textAmount:R}),eo={docFormatKey:z,imageOptions:{license:L,provider:U,generateStyle:B,model:V},lazyImages:"aiGenerated"===U||u,theme:Q},{input:ea,instructions:ed,...ec}=J;g.a.trackRequestSent(n,{interface:"wizard",streaming:!0,interactionId:en,inputContent:J.input,inputMessage:J.instructions,inputData:{options:eo,isGenerateV2:!0,isAdvancedMode:"generate"!==Y,isParallel:el,generationType:Y,...ec,textAmount:R,format:z,language:J.language,model:es},docId:ei.id,docGenerationId:d,docGenerateInputId:en});let{stream:eu,cancel:ex}=(0,p.ZE)({promptKey:el?"GenerateDeckParallel":"GenerateDeck",interactionId:en,variables:{...J,model:es},workspaceId:h},{streamId:ei.id,streamResumingEnabled:P,retries:3}),eh=await (0,m.m3)({stream:eu,onCancel:ex,interactionId:en,options:eo,bufferCards:1,store:n,docId:ei.id}).promise;(0,y.Q)({doc_id:ei.id,source:f.L17.AiGenerated,extra:"v2"}),!r&&$?await s({workspaceId:h,docId:ei.id,generateVars:J,themeId:X,firstCards:eh.cards}):r?(await o({docId:ei.id,site:r,workspaceId:h,generateVars:J,firstCards:eh.cards}),null==t||t()):i("/docs/".concat(ei.id,"?source=").concat(j.VY))},[l,W,s,o,c,H,u,F,t,i,r,n,P,D]);return{generate:V,isGenerating:x,canGenerate:R,cantGenerateReason:N}},H=(0,d.memo)(e=>{let{children:t,onClick:i,...h}=e,{onGenerateSuccess:m}=(0,c.R)(),{isGenerating:p,generate:g,canGenerate:j,cantGenerateReason:f}=W({onSuccess:m}),v=(0,d.useCallback)(async()=>{null==i||i(),await g()},[i,g]),C=(0,u.YO)(v,"generateV2",x.AA.GAMMA_UPSELL_CALLOUT_AI_CREDITS_GENERATE_V2);return(0,n.jsx)(o.kH,{label:f,shouldWrapChildren:!0,children:(0,n.jsx)(r.z,{leftIcon:(0,n.jsx)(s.G,{icon:l.JyM}),variant:"solid",isLoading:p,loadingText:a.ag._({id:"NOdFZR"}),isDisabled:p,onClick:C,size:{base:"md",lg:"lg"},...h,children:t})})});H.displayName="GenerateButton"},4123:function(e,t,i){"use strict";i.d(t,{U:function(){return N}});var n=i(52322),r=i(43297),l=i(38035),s=i(29117),o=i(76282),a=i(14764),d=i(91994),c=i(25566),u=i(77533),x=i(94523),h=i(5879),m=i(2784),p=i(50896),g=i(74153),j=i(5026);let f=(0,m.memo)(e=>{let{...t}=e,i=(0,d.CG)(o.CC),[l,s]=(0,g.Ns)("numCards"),{maxCards:a}=(0,j.hw)(),c=(0,m.useCallback)(()=>{i&&s(Math.min(i+1,a))},[i,s,a]),f=(0,m.useCallback)(()=>{i&&1!==i&&s(i-1)},[i,s]),[v]=(0,g.Ns)("editorMode"),C=i>a,b=Math.min(i,a);return"structured"===v?(0,n.jsx)(x.kH,{label:(0,n.jsx)(h.cC,{id:"Zne1Sw"}),placement:"top",children:(0,n.jsxs)(r.K,{spacing:{base:.5,sm:2},flex:"1",justifyContent:"center",alignItems:"center",direction:{base:"column-reverse",sm:"row"},children:[(0,n.jsx)(u.x,{cursor:"help",fontSize:C?"xs":"lg",fontWeight:C?void 0:"600",textDecoration:C?"line-through":void 0,color:C?"gray.500":void 0,css:{textWrap:"nowrap"},textAlign:"center",children:(0,n.jsx)(h.cC,{id:"AZLIlg",values:{cardCount:i}})}),C&&(0,n.jsx)(u.x,{fontSize:{base:"md",sm:"lg"},fontWeight:"600",lineHeight:"1",children:(0,n.jsx)(h.cC,{id:"gcpsjO",values:{adjustedCardCount:b}})})]})}):(0,n.jsx)(p.Y,{maxCards:a,cardCount:i,onIncrement:c,onDecrement:f,...t})});f.displayName="CardCountSettings";var v=i(62614),C=i(28535),b=i(54933),y=i(49929),k=i(97763),w=i(62131),E=i(2953),S=i(11050),I=i(1071);let _=e=>{let{product:t,title:i,subtitle:r,isWarning:l=!1,onClick:o,cta:a}=e;return(0,n.jsxs)(s.U,{borderRadius:"md",bg:l?"sunglow.100":"trueblue.100",px:{base:2,md:3},pl:4,py:2,children:[t&&(0,n.jsx)(w.ER,{product:t}),(0,n.jsxs)(u.x,{py:1,fontSize:{base:"xs",sm:"sm"},noOfLines:2,lineHeight:"1.3",flex:"1",children:[(0,n.jsx)("strong",{children:i})," ",r]}),a&&o&&(0,n.jsx)(v.z,{onClick:o,variant:"ghost",color:"trueblue.500",bg:"trueblue.50",size:"sm",leftIcon:(0,n.jsx)(C.xu,{display:{base:"none",sm:"block"},children:(0,n.jsx)(y.G,{icon:b.JyM,fixedWidth:!0})}),children:a})]})},A=(0,m.memo)(()=>{let{hasEnoughCreditsToGenerateDeck:e}=(0,k.qO)(),{openUpsellModal:t}=(0,E.z)();return e?null:(0,n.jsx)(_,{product:"pro",isWarning:!0,onClick:()=>t({segmentEvent:S.AA.GAMMA_UPSELL_CALLOUT_AI_CREDITS_GENERATE_V2}),title:(0,n.jsx)(h.cC,{id:"Lhlq0w"}),subtitle:(0,n.jsx)(h.cC,{id:"cl2O0R"}),cta:(0,n.jsx)(h.cC,{id:"kwkhPe"})})});A.displayName="NotEnoughCreditsUpsellWarning";let T=(0,m.memo)(()=>{let e=(0,d.CG)(o.mO),{maxTokens:t,canUpgrade:i}=(0,I.ml)(),{openUpsellModal:r}=(0,E.z)();return!e||e<t?null:e>=t&&i?(0,n.jsx)(_,{product:"pro",isWarning:!0,onClick:()=>r({segmentEvent:S.AA.GAMMA_UPSELL_CALLOUT_AI_GENERATE_LONGER}),title:(0,n.jsx)(h.cC,{id:"265FwR"}),subtitle:(0,n.jsx)(h.cC,{id:"kaOsNu",values:{0:I.Jv.toLocaleString()}}),cta:(0,n.jsx)(h.cC,{id:"kwkhPe"})}):(0,n.jsx)(_,{isWarning:!0,title:(0,n.jsx)(h.cC,{id:"mWVxkj"}),subtitle:(0,n.jsx)(h.cC,{id:"qTSTz6",values:{0:I.Jv.toLocaleString()}})})});T.displayName="MaxTokensUpsellWarning";let O=(0,m.memo)(()=>{let e=(0,d.CG)(o.CC),[t]=(0,g.Ns)("editorMode"),{maxCards:i,canUpgrade:r}=(0,j.hw)(),{openUpsellModal:l}=(0,E.z)();return!e||e<i||e===i&&"structured"===t?null:"freeform"===t&&e>=i&&r?(0,n.jsx)(_,{product:"pro",onClick:()=>l({segmentEvent:S.AA.GAMMA_UPSELL_CALLOUT_AI_GENERATE_LONGER}),title:(0,n.jsx)(h.cC,{id:"6/00Zu",values:{MAX_CARDS_PRO:j.Fv}}),cta:(0,n.jsx)(h.cC,{id:"kwkhPe"})}):"freeform"===t?null:r?(0,n.jsx)(_,{product:"pro",isWarning:!0,onClick:()=>l({segmentEvent:S.AA.GAMMA_UPSELL_CALLOUT_AI_GENERATE_LONGER}),title:(0,n.jsx)(h.cC,{id:"dHdJAv",values:{maxCards:i}}),subtitle:(0,n.jsx)(h.cC,{id:"c4NYWT",values:{MAX_CARDS_PRO:j.Fv}}),cta:(0,n.jsx)(h.cC,{id:"kwkhPe"})}):(0,n.jsx)(_,{isWarning:!0,title:(0,n.jsx)(h.cC,{id:"dHdJAv",values:{maxCards:i}}),subtitle:(0,n.jsx)(h.cC,{id:"yLG7qf"})})});O.displayName="CardCountUpsellWarning";var P=i(38045);let D=(0,P.E)(l.k),R=(0,m.memo)(e=>{let{children:t}=e;return(0,n.jsx)(D,{bg:"white",py:3,position:"fixed",zIndex:"10",initial:{opacity:0,bottom:-10},animate:{opacity:1,bottom:0},exit:{opacity:0,bottom:0},borderTop:"1px solid",borderColor:"blackAlpha.200",px:{base:3,md:4},direction:"column",align:"center",w:"100%",children:t})});R.displayName="StickyBottomBar";let N=e=>{let{cta:t}=e,i=(0,d.CG)(o.Vn),u=(0,d.CG)(o.$X);if(u)return null;let x=(0,n.jsx)(a.r,{modalId:"ai-credits-modal-generate-v2",variant:"ghost",justify:"flex-end",segmentEvent:c.AA.GAMMA_UPSELL_CALLOUT_AI_CREDITS_GENERATE_V2,alignSelf:"center"});return(0,n.jsx)(R,{children:(0,n.jsxs)(r.K,{w:"100%",direction:{base:"column-reverse",md:"row"},spacing:{base:2,md:4},alignItems:{base:"center",md:"flex-end"},children:[(0,n.jsx)(l.k,{flex:"1",children:x}),(0,n.jsxs)(r.K,{w:"2xl",maxW:"100%",overflow:"hidden",children:[(0,n.jsx)(A,{}),(0,n.jsx)(O,{}),(0,n.jsx)(T,{}),(0,n.jsxs)(s.U,{spacing:{base:2,md:3},opacity:i?.75:1,pointerEvents:i?"none":"inherit",cursor:i?"not-allowed":"default",children:[(0,n.jsx)(f,{size:{base:"md",lg:"lg"}}),(0,n.jsx)(l.k,{flex:"1",alignItems:"stretch",flexDirection:"column",children:t})]})]}),(0,n.jsx)(l.k,{flex:"1",display:{base:"none",md:"flex"}})]})})}},45760:function(e,t,i){"use strict";i.d(t,{jX:function(){return o},vZ:function(){return s}});var n=i(52322),r=i(2784);let l=r.createContext({});function s(){let e=(0,r.useContext)(l);return e}let o=e=>{let{children:t}=e,i=r.useRef();return(0,n.jsx)(l.Provider,{value:{setEditorInstance:e=>{i.current=e},getEditorInstance:()=>i.current},children:t})}},7208:function(e,t,i){"use strict";i.d(t,{N:function(){return S}});var n=i(52322),r=i(70065),l=i(43297),s=i(28535),o=i(77533),a=i(75768),d=i(62614),c=i(54933),u=i(49929),x=i(87254),h=i(2784),m=i(36528),p=i(54691),g=i(31490),j=i(91994),f=i(6997);let v="\n{{input}}\n\n###\n\nThe text above contains the outline for my presentation. Find the lines that should be slide breaks.\n\nIf the text I give you contains clear slide numbering, always use that to split it up.\nOtherwise, if there are clear section headings, use those.\nIf there is no obvious break, use your best judgement to split the content into slides by subject matter.\n\nRespond with a list of line numbers that represent the start of a new slide. Each line number should be on its own line without the ".concat(">>>"," symbol. For example,\n1\n4\n18\n").trim(),C=new f.u({params:{temperature:.5,model:"gpt-3.5-turbo"},variables:["input"],systemPrompt:"\nI am a slide designer who will be turning a presentation outline into a slide deck. I need your help identifying where the slide boundaries are in the presentation. Respond only with line numbers, each number on its own line.\n".trim(),userPrompt:v});var b=i(76282),y=i(74153);let k=e=>{let t=e.split("\n"),i=1;return t.map(e=>""===e.trim()?e:"".concat(i++).concat(">>>").concat(e)).join("\n")},w=(e,t)=>(t.forEach(t=>{e=e.replace("".concat(t).concat(">>>"),"---\n\n".concat(t).concat(">>>"))}),e),E=e=>{let t=e.split("\n");return t.map(e=>{let t=e.split(">>>");return t.length>1?t[1]:e}).join("\n")},S=()=>{let[e,t]=(0,h.useState)(!1),[i,f]=(0,y.Ns)("editorMode"),v=(0,y.vS)(),S=(0,j.CG)(b.Kd),I=(0,j.CG)(b.MH),_=(0,r.p)(),A=(0,h.useRef)(null),T=(0,j.CG)(b.Vn);(0,h.useEffect)(()=>{T&&A.current&&(_.close(A.current),A.current=null)},[_,T]);let O=(0,h.useCallback)(()=>{let e=(0,j.bh)().getState(),t=(0,b.au)(e),i=t.replace(/\n\n---\n\n/g,"\n\n");v(i);let r=x.ag._({id:"a7V4Kp"}),h=x.ag._({id:"jpA4hO"}),m=x.ag._({id:"9uI/rE"}),p=x.ag._({id:"DPfwMq"}),g=_({render:()=>(0,n.jsxs)(l.K,{p:4,shadow:"lg",borderRadius:"lg",bg:"green.100",spacing:4,direction:{base:"column",md:"row"},children:[(0,n.jsx)(s.xu,{color:"green.600",fontSize:"xl",children:(0,n.jsx)(u.G,{icon:c.fV7})}),(0,n.jsxs)(s.xu,{children:[(0,n.jsx)(o.x,{noOfLines:1,fontWeight:"600",children:r}),(0,n.jsx)(o.x,{fontSize:"xs",noOfLines:1,color:"blackAlpha.800",children:h})]}),(0,n.jsxs)(a.h,{children:[(0,n.jsx)(d.z,{size:"md",variant:"solid",onClick:()=>_.close(g),rightIcon:(0,n.jsx)(u.G,{icon:c.LEp}),children:p}),(0,n.jsx)(d.z,{size:"md",colorScheme:"gray",variant:"ghost",onClick:()=>{v(t),_.close(g)},children:m})]})]}),status:"success",duration:5e3,position:"top",containerStyle:{maxW:"none"}})},[v,_]),P=(0,h.useCallback)(async e=>{let r=(0,g.nZ)(),h=k(e),j=C.prepare({variables:{input:h},interactionId:r}),b=x.ag._({id:"P0CwEw"}),y=_({title:b,status:"loading",duration:1e4,position:"top"}),S=await (0,m.oO)(j),I=await (0,p.I)(S,r,{retries:0});if(!I)throw Error("Response is undefined");let A=I.split("\n").map(e=>parseInt(e)),T=E(w(h,A));console.debug("Splitting cards",{numberedContent:h,resp:I,lineBreaks:A,newContent:T}),_.close(y),v(T),f("structured"),t(!1);let O=x.ag._({id:"0+Fg4H"}),P=x.ag._({id:"YbORTh"}),D=x.ag._({id:"9uI/rE"}),R=x.ag._({id:"DPfwMq"}),N=_({render:()=>(0,n.jsxs)(l.K,{p:4,shadow:"lg",borderRadius:"lg",bg:"green.100",spacing:4,direction:{base:"column",md:"row"},children:[(0,n.jsx)(s.xu,{color:"green.600",fontSize:"xl",children:(0,n.jsx)(u.G,{icon:c.fV7})}),(0,n.jsxs)(s.xu,{children:[(0,n.jsx)(o.x,{noOfLines:1,fontWeight:"600",children:O}),(0,n.jsx)(o.x,{fontSize:"xs",noOfLines:1,color:"blackAlpha.800",children:P})]}),(0,n.jsxs)(a.h,{children:[(0,n.jsx)(d.z,{size:"md",variant:"solid",onClick:()=>_.close(N),rightIcon:(0,n.jsx)(u.G,{icon:c.LEp}),children:R}),(0,n.jsx)(d.z,{size:"md",colorScheme:"gray",variant:"ghost",onClick:()=>{v(e),f(i),_.close(N)},children:D})]})]}),status:"success",duration:5e3,position:"top",containerStyle:{maxW:"none"}})},[i,v,f,_]),D=(0,h.useCallback)(()=>{let e=(0,j.bh)().getState();A.current&&(_.close(A.current),A.current=null);let i=(0,b.Kd)(e);if(!i)return;let r=(0,b.au)(e),c=x.ag._({id:"CObmXw"}),u=x.ag._({id:"+JxrYy"}),h=x.ag._({id:"goXuxS"}),m=x.ag._({id:"6Uau97"});A.current=_({render:()=>(0,n.jsxs)(l.K,{p:4,shadow:"lg",borderRadius:"lg",bg:"trueblue.100",spacing:4,direction:{base:"column",md:"row"},children:[(0,n.jsxs)(s.xu,{children:[(0,n.jsx)(o.x,{noOfLines:1,fontWeight:"600",children:c}),(0,n.jsx)(o.x,{fontSize:"xs",noOfLines:1,color:"blackAlpha.800",children:u})]}),(0,n.jsxs)(a.h,{children:[(0,n.jsx)(d.z,{variant:"solid",size:"md",onClick:()=>{P(r),t(!0),_.close(A.current)},children:h}),(0,n.jsx)(d.z,{variant:"plain",size:"md",onClick:()=>{_.close(A.current)},children:m})]})]}),status:"info",duration:8e3,position:"top"})},[P,_]);return(0,h.useEffect)(()=>()=>{A.current&&(_.close(A.current),A.current=null)},[_]),{addSectionBreaks:P,isAddingBreaks:e,canAddBreaks:S,canRemoveBreaks:I,removeSectionBreaks:O,onChangeMode:D}}},74153:function(e,t,i){"use strict";i.d(t,{Ns:function(){return g},Q_:function(){return p},ex:function(){return h},ip:function(){return m},o7:function(){return x},vS:function(){return j}});var n=i(2784),r=i(45760),l=i(93202),s=i(91994),o=i(86581),a=i(33522),d=i(24551),c=i(14874),u=i(76282);let x=()=>{let e=(0,s.qr)(),t=(0,s.TL)(),[i]=(0,l.NCT)(),r=(0,n.useCallback)(async()=>{var n;let r=(0,u.d_)(e.getState()),l=r.id,s=await i({variables:{docGenerateInputId:l,input:{}}}),o=null===(n=s.data)||void 0===n?void 0:n.updateDocGenerationDraftInput;o&&o.draftInput&&l!==o.draftInput.id&&t((0,u.Gn)(o))},[t,e,i]);return r},h=e=>{var t;let i=(0,s.qr)(),r=(0,s.TL)(),[o]=(0,l.NCT)(),d=(0,n.useCallback)(async e=>{var t;let n=(0,u.RB)(i.getState()),l=(0,u.U6)(i.getState());if(!n||!l)return;let{format:s,...a}=e,d={format:s,...a},c=(0,u.br)(i.getState());d.settings&&(d.settings={...c,...d.settings});let x=(0,u.U6)(i.getState()),h=await o({variables:{docGenerateInputId:l,input:d}}),m=null===(t=h.data)||void 0===t?void 0:t.updateDocGenerationDraftInput;m&&m.draftInput&&x!==m.draftInput.id&&r((0,u.Gn)(m))},[r,i,o]),c=(0,a.Kt)(d,null!==(t=null==e?void 0:e.debounce)&&void 0!==t?t:0),x=(0,n.useCallback)(function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];r((0,u.Zx)(e)),t&&c(e)},[c,r]);return x},m=()=>{let e=h(),t=(0,n.useCallback)(function(t){let i=!(arguments.length>1)||void 0===arguments[1]||arguments[1];e({format:t},i)},[e]),i=(0,s.CG)(u.Lh);return[i,t]},p=()=>{let e=h({debounce:500}),t=(0,n.useCallback)(function(t){let i=!(arguments.length>1)||void 0===arguments[1]||arguments[1];e({prompt:t},i)},[e]),i=(0,s.CG)(u.lb);return[i,t]},g=(e,t)=>{let i=h(t),r=(0,n.useCallback)(function(t){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1];i({settings:{[e]:t}},n)},[e,i]),l=(0,s.CG)((0,u.Mn)(e));return[l,r]},j=e=>{let t=h(e),{getEditorInstance:i}=(0,r.vZ)(),l=(0,n.useCallback)(function(e){let n=!(arguments.length>1)||void 0===arguments[1]||arguments[1],r=i();if(r){let t=r.editorId===d.C,i=(0,o.c8)(e),n=(0,c.dW)(i,t?"structured":"freeform").content.toJSON();r.commands.setContent(n)}t({content:e},n)},[t,i]);return l}},96796:function(e,t,i){"use strict";i.d(t,{R:function(){return v},d:function(){return f}});var n=i(5632),r=i(2784),l=i(63304),s=i(67496),o=i(28918),a=i(31490),d=i(39122),c=i(93202),u=i(42111),x=i(21733),h=i(50634),m=i(45302);let p=e=>{if(!e)throw Error("Response is undefined");let t=v(e),i=(0,m.jw)(t.locale);return{settings:{tone:t.tone,audience:t.audience,locale:i.key,textAmount:g(t.text_amount,["sm","md","lg"],"md")}}},g=(e,t,i)=>e?t&&!t.includes(e)?i:e:void 0,j=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=new URLSearchParams("");return t.generateOutline&&i.append(s.nx,"1"),t.generateSettings&&i.append(s.Cb,"1"),"/generate/".concat(e,"?").concat(i.toString())},f=()=>{let{push:e}=(0,n.useRouter)(),[t,i]=(0,r.useState)(!1),[s]=(0,c.JBp)(),{generate:m}=(0,h.j)("DetermineGenerateSettings",{}),g=(0,r.useCallback)(async(t,n)=>{var r;let c=(0,a.nZ)();i(!0);let h=(0,o.d)(n.content,d.VN),g=await m({variables:{input:h},workspaceId:(0,x.n_)(),interactionId:c}).promise,f=p(g),{settings:v,format:C,...b}=n,y=await s({variables:{input:{workspaceId:(0,x.n_)(),generationType:t,input:{interactionId:c,settings:{...l.zJ,imageProvider:u.VH.get("aiGeneratorDefaultImageProvider"),...f.settings,...v},...b,format:C}}}});i(!1),e(j(null===(r=y.data)||void 0===r?void 0:r.createDocGeneration.id))},[s,e]);return{guessSettings:g,isLoading:t}},v=e=>{let t=e.split("\n"),i={};return t.forEach(e=>{let[t,n]=e.split(": ");t&&n&&(i[t.trim().toLowerCase()]=n.trim())}),i}},67496:function(e,t,i){"use strict";i.d(t,{Cb:function(){return x},HL:function(){return h},nx:function(){return u}});var n=i(9850),r=i.n(n),l=i(5632),s=i(2784),o=i(76282),a=i(93202),d=i(91994),c=i(704);let u="generateOutline",x="generateSettings",h=e=>{let{id:t}=e,i=(0,l.useRouter)(),n=(0,d.TL)(),r=(0,d.qr)(),{goToScreen:u}=(0,c.R)(),[x,h]=(0,s.useState)(!0),[p]=(0,a.UCC)({variables:{id:t}});return(0,s.useEffect)(()=>{i&&r&&p&&p().then(e=>{let{data:t}=e;if(null==t?void 0:t.docGeneration)return t.docGeneration;throw Error("Could not load docGeneration")}).then(e=>{n((0,o.Gn)(m(e))),h(!1)}).catch(()=>{u("createWithAI")})},[n,p,u,i,r]),{isLoading:x}},m=e=>({...e,docGenerateInputs:e.docGenerateInputs.map(p),draftInput:e.draftInput?p(e.draftInput):void 0}),p=e=>{let t=r()(e);return t.settings.textMode||(t.settings.preserveText?t.settings.textMode="preserve":t.settings.textMode="generate",delete t.settings.preserveText),t}},1071:function(e,t,i){"use strict";i.d(t,{Jv:function(){return r},ml:function(){return l}});var n=i(57124);let r=1e4,l=()=>{let e=(0,n.Y)("ai_premium_models");return{maxTokens:e?r:5e3,canUpgrade:!e}}},49165:function(e,t,i){"use strict";i.d(t,{R:function(){return p},c:function(){return g}});var n=i(52322),r=i(70065),l=i(5879),s=i(5632),o=i(2784),a=i(93202),d=i(42111),c=i(84405),u=i(56356),x=i(41425),h=i(23147),m=i(36651);let p={example_deck_clone_toast:a.L17.DuplicateInspiration,import_google_doc:a.L17.ImportGoogleDoc,import_google_slides:a.L17.ImportGoogleSlides,import_docx:a.L17.ImportDocx,import_pptx:a.L17.ImportPptx,blank:a.L17.Blank,template_browser:a.L17.DuplicateTemplate,get_started_modal:a.L17.Blank,template_modal_griditem:a.L17.DuplicateTemplate,template_dashboard_griditem:a.L17.DuplicateTemplate,template_modal_preview:a.L17.DuplicateTemplate,template_modal_preview_create_theme:a.L17.DuplicateTemplate,"slash-new":a.L17.SlashNew,editor_toolbar_doc_menu_duplicate:a.L17.DuplicateDoc,dashboard_docs_view_duplicate:a.L17.DuplicateDoc,ai_generated:a.L17.AiGenerated,ai_generated_advanced:a.L17.AiGenerated,sites_add_page:a.L17.SitesAddPage,sites_copy_to_site:a.L17.SitesCopyToSite},g=()=>{let{user:e,currentWorkspace:t}=(0,m.SE)(),i=(0,d.ye)("cardLayoutsEnabled"),[g,{data:j,loading:f}]=(0,a.CsQ)(),{push:v,replace:C}=(0,s.useRouter)(),b=(0,r.p)(),y=(0,o.useCallback)(r=>{var s;let o=null==e?void 0:null===(s=e.settings)||void 0===s?void 0:s.needsEditorOnboarding,a=r.source,d=null==r?void 0:r.channelId,m=(null==r?void 0:r.historyFn)==="replace"?C:v,j=o?"quickstart":"empty";if(!(null==t?void 0:t.id)){console.error("[createDocAndNavigate] No currentWorkspace found");return}let f={cardLayoutsEnabled:i},y=(null==r?void 0:r.document)?r.document:"empty"===j?(0,u.bx)(e,{docFlags:f}):(0,u.VK)(e,{docFlags:f}),k=(0,h.qI)(y);return console.debug("[createDocAndNavigate] Creating doc",{document:y,encodedDocument:k}),g({variables:{workspaceId:null==t?void 0:t.id,title:(null==r?void 0:r.title)||"",source:p[r.source],initialContent:{ydoc:k,schemaVersion:x.bI,editors:[null==e?void 0:e.id]},...d?{channels:[{channelId:d}]}:{}}}).then(async e=>{let{data:t}=e;(0,c.Q)({doc_id:null==t?void 0:t.createDoc.id,source:a,channel:d||null}),console.debug("[createDocAndNavigate] Doc created. Navigating to Editor",null==t?void 0:t.createDoc.id),m("/docs/".concat(null==t?void 0:t.createDoc.id).concat(o?"?tour=true":""))}).catch(e=>{console.error("[createDocAndNavigate]",e),b({title:(0,n.jsx)(l.cC,{id:"0jT1fA"}),description:e.message,position:"top",status:"error",isClosable:!0,duration:null})})},[i,g,null==t?void 0:t.id,v,C,b,e]);return[y,{data:j,loading:f}]}},6912:function(e,t,i){"use strict";i.d(t,{S1:function(){return C},B_:function(){return k},ET:function(){return b}});var n=i(2784),r=i(14274),l=i(88232),s=i(42111),o=i(49152),a=i(44663),d=i(1163),c=i(11050),u=i(90221),x=i(23284),h=i(90383),m=i(87254),p=i(82108),g=i.n(p),j=i(94199);let f=(e,t)=>{let i=g()(t);return{[e]:{next:m.ag._({id:"hXzOVo"}),back:m.ag._({id:"iH8pgl"}),nevermind:m.ag._({id:"CKyk7Q"}),goToAccount:m.ag._({id:"C9yTHG",values:{GAMMA_PROPER_NOUN:j.N6}}),getHelp:m.ag._({id:"pWsyuL"}),declineOffer:m.ag._({id:"aIFikE"}),confirmAndCancel:m.ag._({id:"G9nPRC"}),pauseSubscription:m.ag._({id:"2RgEmU"}),cancelSubscription:m.ag._({id:"dEgA5A"}),discountSubscription:m.ag._({id:"qG4Wa/"}),claimOffer:m.ag._({id:"/Gl/RK"}),discountOff:m.ag._({id:"Bdtwnw"}),discountFor:m.ag._({id:"sQv06Y"}),discountForever:m.ag._({id:"FsOOWf"}),discountOneTime:m.ag._({id:"HpXCa4"}),day:m.ag._({id:"5YWExy"}),month:m.ag._({id:"obrMay"}),year:m.ag._({id:"/Tw548"}),error:m.ag._({id:"wTrpxV"}),genericErrorDescription:m.ag._({id:"PUjJ3A"}),cancelNow:m.ag._({id:"EiakwV"}),applyingDiscount:m.ag._({id:"8kSYjw"}),applyingCancel:m.ag._({id:"VpuvNv"}),applyingResume:m.ag._({id:"eIoGiX"}),applyingPause:m.ag._({id:"UD7gOq"}),discountApplied:m.ag._({id:"jdYyiz"}),discountAppliedMessage:m.ag._({id:"DhHX6G"}),pauseApplied:m.ag._({id:"eeITvj"}),pauseAppliedMessage:m.ag._({id:"nm0VaE"}),pauseAppliedResumeMessage:m.ag._({id:"qOe0SS"}),pauseScheduledMessage:m.ag._({id:"mqRc6d"}),until:m.ag._({id:"C51N+0"}),cancelApplied:m.ag._({id:"Wcg6zu"}),cancelAppliedMessage:m.ag._({id:"8vN97Y"}),cancelAppliedDateMessage:m.ag._({id:"BS/SGu"}),howLongToPausePrompt:m.ag._({id:"HLyJ9n"}),whatCouldWeHaveDone:m.ag._({id:"fcbm8H"}),weReadEveryAnswer:m.ag._({id:"nkuKRd"}),applyingCustomerAction:m.ag._({id:"PXwF+s"}),loading:m.ag._({id:"Z3FXyt"}),pauseWallCardPunch:m.ag._({id:"iL2TQ6"}),pauseWallCta:m.ag._({id:"TvXj47"}),pauseWallCardHeading:m.ag._({id:"kHm8Fg"}),scheduledToReactivate:m.ag._({id:"aH7vi8"}),resumeApplied:m.ag._({id:"diOgYK"}),resumeAppliedMessage:m.ag._({id:"YqFvUY"}),resumeNextChargeMessage:m.ag._({id:"VDqPUf"}),resumeNextChargeMessageWithoutAmount:m.ag._({id:"RrvVAn"}),resumeAccountDataInfo:m.ag._({id:"dJCJXA"}),subscriptionPauseNotice:m.ag._({id:"fpxliT"}),failedPaymentNotice:m.ag._({id:"Vxg5vO"}),chargedMultipleTimeNotice:m.ag._({id:"lAlv46"}),failedPaymentCardPunch:m.ag._({id:"KEZrHg",values:{GAMMA_PROPER_NOUN:j.N6,productName:i}}),resumeHey:m.ag._({id:"hdOctW"}),invoicePaidTitle:m.ag._({id:"aJGfDL"}),logout:m.ag._({id:"W+3RJN"}),note:m.ag._({id:"ycCSuD"}),discount:m.ag._({id:"HmpVeZ"}),discountNoticeHeadline:m.ag._({id:"5P1dmt"}),discountNoticePrepend:m.ag._({id:"yjadEY"}),discountOverride:m.ag._({id:"JfBDWL"}),discountValidUntil:m.ag._({id:"uXxNua"}),updateBilling:m.ag._({id:"tQilrI"}),extendTrialCTA:m.ag._({id:"m3l7VI"}),extendTrialPunch:m.ag._({id:"s5pINo"}),extendTrialOfferTitle:m.ag._({id:"SyzXYh"}),trialExtended:m.ag._({id:"fezME2"}),trialExtendedMessage:m.ag._({id:"QE4mUs"}),applyingTrialExtension:m.ag._({id:"vI2q9R"}),switchPlanCTA:m.ag._({id:"P2mx2L"}),changePlanHighlights:m.ag._({id:"qbgW+C"}),changePlanOfferPunch:m.ag._({id:"MRkiFP"}),planChanged:m.ag._({id:"ByFtyh"}),planChangedMessage:m.ag._({id:"Pf5z1G"}),applyingPlanChange:m.ag._({id:"9vKKLI"}),surveyStepTag:m.ag._({id:"cSUBI1"}),freeFormStepTag:m.ag._({id:"cSUBI1"}),finalConfirmation:m.ag._({id:"1/oP/N"}),offerDiscountTag:m.ag._({id:"LTgtxG"}),offerChangePlanTag:m.ag._({id:"ENMJv2"}),offerExtendTrialTag:m.ag._({id:"MWKntz"}),offerRedirectTag:m.ag._({id:"cvpAvL"}),offerContactTag:m.ag._({id:"cvpAvL"}),offerPauseTag:m.ag._({id:"+T6DGl"}),completeTag:m.ag._({id:"K5c1e7"}),errorTag:m.ag._({id:"EuvbIW"}),offerAccepted:m.ag._({id:"ZU0opP"})}}},v="\n!function(){  \n    if (!window.churnkey || !window.churnkey.created) {\n      window.churnkey = { created: true };\n      const a = document.createElement('script');\n      a.src = 'https://assets.churnkey.co/js/app.js?appId=".concat(r.v.CHURNKEY_APP_ID,"';\n      a.async = true;\n      const b = document.getElementsByTagName('script')[0];\n      b.parentNode.insertBefore(a, b);\n    }\n  }();\n"),C=()=>{let e=!(0,u.l6)()&&!(0,h.wg)();return(0,x.G)(e,v),null},b=e=>{let{subscription:t,workspace:i,autoLaunch:c=!0}=e,u=(0,s.ye)("churnkeyFailedPaymentWallEnabled"),x=(0,o.l)(),h=(0,d.K9)(i),m=(0,a.G)(),p=(0,n.useCallback)(async()=>{if(t&&h&&u)return(0,l.d6)("churnkey").then(e=>{var i,n;if(!e||!t.billingSubscriptionId||!(null===(i=t.createdByUser)||void 0===i?void 0:i.billingCustomerId)){console.error("[Churnkey] launchFailedPayment Missing hmac or subscription data",{hmac:e,subscription:t});return}console.debug("[Churnkey] launchFailedPayment - launching churnkey with:",{hmac:e,appId:r.v.CHURNKEY_APP_ID,subscriptionId:t.billingSubscriptionId,customerId:null===(n=t.createdByUser)||void 0===n?void 0:n.billingCustomerId}),y({authHash:e,subscription:t,localeKey:x,productKey:h,launchIntercomUI:m})})},[t,h,u,x,m]);return(0,n.useEffect)(()=>{c&&p()},[p,c]),{launchFailedPaymentFlow:p,failedPaymentFlowEnabled:u}},y=async e=>{var t,i;let{authHash:n,subscription:l,localeKey:s,productKey:o,launchIntercomUI:a}=e;null===(i=window.churnkey)||void 0===i||i.check("failed-payment",{subscriptionId:l.billingSubscriptionId,customerId:null===(t=l.createdByUser)||void 0===t?void 0:t.billingCustomerId,authHash:n,customerAttributes:{language:s},i18n:{lang:s,messages:f(s,o)},appId:r.v.CHURNKEY_APP_ID,mode:r.v.CHURNKEY_MODE,provider:"stripe",softWall:!0,forceCheck:!1,gracePeriodDays:3,ignoreInvoicesWithoutAttempt:!1,handleSupportRequest(){var e;a(),c.co.track(c.AA.CHURNKEY_HANDLE_SUPPORT_CLICK,{source:"failed-payment-wall",subscriptionId:l.billingSubscriptionId,customerId:null===(e=l.createdByUser)||void 0===e?void 0:e.billingCustomerId})},async handleCancel(e){var t,i;return c.co.track(c.AA.CANCEL_SUBSCRIPTION_CLICK,{source:"failed-payment-wall",subscriptionId:l.billingSubscriptionId,customerId:null===(t=l.createdByUser)||void 0===t?void 0:t.billingCustomerId}),console.debug("[launchChurnkeyFailedPayment.handleCancel]",{subscriptionId:l.billingSubscriptionId,customerId:null===(i=l.createdByUser)||void 0===i?void 0:i.billingCustomerId,customer:e}),w({authHash:n,subscription:l,localeKey:s,productKey:o,launchIntercomUI:a,customerAttributes:{viaFailedPayment:!0}}).catch(e=>y({authHash:n,subscription:l,localeKey:s,productKey:o,launchIntercomUI:a}))},onFailedPaymentWallActivated(){var e;c.co.track(c.AA.CHURNKEY_FAILED_PAYMENT_WALL_SHOWN,{subscriptionId:l.billingSubscriptionId,customerId:null===(e=l.createdByUser)||void 0===e?void 0:e.billingCustomerId})},onUpdatePaymentInformation(){var e;c.co.track(c.AA.CHURNKEY_PAYMENT_METHOD_UPDATED,{source:"failed-payment-wall",subscriptionId:l.billingSubscriptionId,customerId:null===(e=l.createdByUser)||void 0===e?void 0:e.billingCustomerId})},onFailedPaymentWallClose(){var e;c.co.track(c.AA.CHURNKEY_FAILED_PAYMENT_WALL_CLOSED,{subscriptionId:l.billingSubscriptionId,customerId:null===(e=l.createdByUser)||void 0===e?void 0:e.billingCustomerId})},onCancel(){var e;c.co.track(c.AA.CHURNKEY_CANCEL_SUBSCRIPTION_COMPLETE,{source:"failed-payment-wall",subscriptionId:l.billingSubscriptionId,customerId:null===(e=l.createdByUser)||void 0===e?void 0:e.billingCustomerId})},onError(e,t){console.warn('Churnkey check("failed-payment", ...) error',e,t)}})},k=(e,t)=>{let i=(0,s.ye)("churnkeyCancelFlowEnabled"),r=(0,o.l)(),c=(0,d.K9)(t),u=(0,a.G)(),x=(0,n.useCallback)(()=>{if(e&&c&&i)return(0,l.d6)("churnkey").then(t=>{var i;if(!t||!e.billingSubscriptionId||!(null===(i=e.createdByUser)||void 0===i?void 0:i.billingCustomerId)){console.debug("[Churnkey] handleCancel - Missing hmac or subscription data",{hmac:t,subscription:e});return}return w({authHash:t,subscription:e,localeKey:r,productKey:c,launchIntercomUI:u})})},[i,r,c,e,u]);return{launchCancelFlow:x,cancelFlowEnabled:i}},w=async e=>{let{authHash:t,subscription:i,localeKey:n,productKey:l,customerAttributes:s={},launchIntercomUI:o}=e;return new Promise((e,a)=>{var u,x,h;null===(h=window.churnkey)||void 0===h||h.init("show",{subscriptionId:i.billingSubscriptionId,customerId:null===(u=i.createdByUser)||void 0===u?void 0:u.billingCustomerId,authHash:t,customerAttributes:{language:n,frequency:null===(x=(0,d.OJ)(i))||void 0===x?void 0:x.frequencyUnit,productKey:l,...s},i18n:{lang:n,messages:f(n,l)},appId:r.v.CHURNKEY_APP_ID,mode:r.v.CHURNKEY_MODE,provider:"stripe",record:!0,handleSupportRequest(){var e;o(),c.co.track(c.AA.CHURNKEY_HANDLE_SUPPORT_CLICK,{source:"cancel-flow",subscriptionId:i.billingSubscriptionId,customerId:null===(e=i.createdByUser)||void 0===e?void 0:e.billingCustomerId})},onCancel(e,t,n){var r;c.co.track(c.AA.CHURNKEY_CANCEL_SUBSCRIPTION_COMPLETE,{source:"cancel-flow",subscriptionId:i.billingSubscriptionId,customerId:null===(r=i.createdByUser)||void 0===r?void 0:r.billingCustomerId,surveyResponse:t,freeformFeedback:n}),console.debug("[launchChurnkeyCancelFlow.onCancel]",{surveyResponse:t,freeformFeedback:n})},onGoToAccount(t){console.debug("[launchChurnkeyCancelFlow.onGoToAccount]",{sessionResults:t}),e({sessionResults:t})},onClose(t){if(console.debug("[launchChurnkeyCancelFlow.onClose]",{sessionResults:t}),!t||t.aborted){a("Churnkey cancel flow aborted");return}e({sessionResults:t})},onError(e){console.warn("[launchChurnkeyCancelFlow.onError]",{message:e}),a({message:e})}})})}},12985:function(e,t,i){"use strict";i.d(t,{B:function(){return r}});var n=i(2784);let r=n.lazy(()=>Promise.all([i.e(8917),i.e(7120),i.e(4100),i.e(3421)]).then(i.bind(i,23421)).then(e=>({default:e.default})))},85747:function(e,t,i){"use strict";i.d(t,{E:function(){return o}});var n=i(52322),r=i(2784),l=i(99787);let s={width:"0.1px",height:"0.1px",opacity:0,overflow:"hidden",position:"absolute",zIndex:-1},o=e=>{let{handleFilesCallback:t,multiple:i=!1,accept:o=l.pK.join(",")}=e,a=(0,r.useRef)(null),d=(0,r.useMemo)(()=>(0,n.jsx)("input",{ref:a,className:"gamma-FileInput-input",style:s,type:"file",name:"gamma-file-input",multiple:i,accept:o,onChange:e=>{let i=e.target;if(!i||!i.files)return;let n=Array.from(i.files);t(n),i.value=null}}),[o,t,i]),c=(0,r.useCallback)(()=>{var e;null===(e=a.current)||void 0===e||e.click()},[]);return{inputElement:d,onClick:c}}},62700:function(e,t,i){"use strict";i.d(t,{d:function(){return l}});var n=i(52322),r=i(5879);let l=()=>({100:(0,n.jsx)(r.cC,{id:"RGjFMI"}),200:(0,n.jsx)(r.cC,{id:"GMGHcE"}),300:(0,n.jsx)(r.cC,{id:"1njn7W"}),400:(0,n.jsx)(r.cC,{id:"xfqlmg"}),500:(0,n.jsx)(r.cC,{id:"agPptk"}),600:(0,n.jsx)(r.cC,{id:"KVGfPY"}),700:(0,n.jsx)(r.cC,{id:"KmydK6"}),800:(0,n.jsx)(r.cC,{id:"NV46Ki"}),900:(0,n.jsx)(r.cC,{id:"THokF3"})})},30423:function(e,t,i){"use strict";i.d(t,{Av:function(){return g},B_:function(){return f},CZ:function(){return x},QP:function(){return v},Sd:function(){return C},UK:function(){return h},ZN:function(){return j},cC:function(){return p},x_:function(){return m},zn:function(){return c}});var n=i(18149),r=i.n(n),l=i(53553),s=i(93202);let o=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=["italic","oblique"];for(let i of e)for(let e of t)if(-1!==i.toLowerCase().indexOf(e))return!0;return!1},a=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];for(let t of e){if(d(t,["thin"]))return 100;if(d(t,["light","lite"],["extra","ultra","x"]))return 200;if(d(t,["light"]))return 300;if(d(t,["medium"]))return 500;if(d(t,["bold"],["demi","semi"]))return 600;if(d(t,["bold"],["extra","x"]))return 800;if(d(t,["bold"]))return 700;if(d(t,["black","heavy","ultra"]))return 900}return 400},d=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];for(let n of t)if(0===i.length){if(-1!==e.toLowerCase().indexOf(n.toLowerCase()))return!0}else for(let t of i)if(-1!==e.toLowerCase().indexOf(n.toLowerCase())&&-1!==e.toLowerCase().indexOf(t.toLowerCase()))return!0;return!1},c=async e=>new Promise((t,i)=>{let n=new FileReader;n.onload=e=>{var n,r,s,d,c,u,x,h,m,p,g,j,f,v,C,b,y,k,w;let E=null===(n=e.target)||void 0===n?void 0:n.result;try{let e=l.ZP.parse(E),i=null!==(b=null===(r=Object.values(null!==(C=null===(d=e.tables)||void 0===d?void 0:null===(s=d.name)||void 0===s?void 0:s.preferredSubfamily)&&void 0!==C?C:null===(u=e.tables)||void 0===u?void 0:null===(c=u.name)||void 0===c?void 0:c.fontSubfamily))||void 0===r?void 0:r[0])&&void 0!==b?b:"",n=null!==(y=null===(x=Object.values(null===(m=e.tables)||void 0===m?void 0:null===(h=m.name)||void 0===h?void 0:h.fullName))||void 0===x?void 0:x[0])&&void 0!==y?y:"",S=null!==(w=null===(p=Object.values(null!==(k=null===(j=e.tables)||void 0===j?void 0:null===(g=j.name)||void 0===g?void 0:g.preferredFamily)&&void 0!==k?k:null===(v=e.tables)||void 0===v?void 0:null===(f=v.name)||void 0===f?void 0:f.fontFamily))||void 0===p?void 0:p[0])&&void 0!==w?w:"";t({familyName:S,isItalic:o([i,n]),weight:a([i,n])})}catch(e){i(e)}},n.onerror=e=>{console.error("[parseFontFile] unable to read the font file, providing defaults",e),t({familyName:"",isItalic:!1,weight:400})},n.readAsArrayBuffer(e)}),u=e=>{let t=e.lastIndexOf(".");return -1===t||t===e.length-1?{name:e,extension:void 0}:{name:e.slice(0,t),extension:e.slice(t+1)}},x=e=>{let{extension:t}=u(e);return t===s.sA6.Otf||t===s.sA6.Ttf?t:s.sA6.Ttf},h=e=>{let{existingFont:t}=e;if(!t)return!0;let i={fontName:t.name,fontId:t.id,fontFiles:t.fontFiles.map(e=>({id:e.id,name:e.name,weight:e.weight,isItalic:e.isItalic,fileType:e.fileType,sourceUrl:e.sourceUrl}))},n={fontName:e.fontName,fontId:e.fontId,fontFiles:e.uploadFontFiles.map(e=>({id:e.fontFile.id,name:e.fontFile.name,weight:e.fontFile.weight,isItalic:e.fontFile.isItalic,fileType:e.fontFile.fileType,sourceUrl:e.fontFile.sourceUrl}))};return!r()(i,n)},m=e=>{let t=e.reduce((e,t)=>{let i=[t.weight,t.isItalic].join("__");return{...e,[i]:!0}},{});return Object.keys(t).length},p=e=>{let t=Object.values(e.reduce((e,t)=>{let i=t.fontFile,n=[i.weight,i.isItalic,i.fileType].join("__");return e[n]=e[n]||[],e[n].push(t),e},{})).reduce((e,t)=>{if(t.length>1)for(let i of t)e[i.uploadId]=!0;return e},{});return t},g=e=>e.reduce((e,t)=>{let i=t.fontFile.weight;return{...e,[i]:[...e[i]||[],t]}},{}),j=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return e.sort((e,i)=>t?Number(e)-Number(i):Number(i)-Number(e))},f=e=>j(Array.from(new Set(e.map(e=>e.weight)))),v=(e,t)=>{if(void 0===t)return;if(t>e[e.length-1])return e[e.length-1];let i=1/0,n=-1;for(let r=0;r<e.length;r++){let l=Math.abs(t-e[r]);if(l<i)i=l,n=r;else break}return e[n]},C=e=>!!e&&0!==e.length&&-1===e.findIndex(e=>!e.isItalic)},33022:function(e,t,i){"use strict";i.d(t,{C:function(){return f}});var n=i(52322),r=i(29117),l=i(5740),s=i(77533),o=i(28535),a=i(43297),d=i(74409),c=i(20437),u=i(74008),x=i(62614),h=i(42946),m=i(54933),p=i(49929),g=i(5879);i(2784);let j=e=>{let{label:t,shortcuts:i}=e;return(0,n.jsxs)(r.U,{children:[i.map((e,t)=>(0,n.jsx)(l.T,{padding:1,children:e},t)),(0,n.jsx)(s.x,{fontSize:"sm",fontWeight:"medium",whiteSpace:"nowrap",children:t})]})},f=e=>{let{onClose:t,showExitPresentMode:i=!0}=e;return(0,n.jsx)(o.xu,{children:(0,n.jsxs)(a.K,{spacing:6,children:[(0,n.jsxs)(a.K,{spacing:1,children:[(0,n.jsxs)(r.U,{color:"gray.500",children:[(0,n.jsx)(p.G,{icon:h.UFh})," ",(0,n.jsx)(d.X,{size:"xs",fontWeight:"normal",children:(0,n.jsx)(g.cC,{id:"h7MgpO"})})]}),(0,n.jsx)(d.X,{size:"md",children:(0,n.jsx)(g.cC,{id:"UodEcE"})})]}),(0,n.jsxs)(c.M,{spacing:3,columns:1,children:[(0,n.jsx)(j,{label:(0,n.jsx)(g.cC,{id:"9xCxY6"}),shortcuts:[(0,n.jsx)(p.G,{icon:m.acZ},"left"),(0,n.jsx)(p.G,{icon:m.eFW},"right")]}),i&&(0,n.jsx)(j,{label:(0,n.jsx)(g.cC,{id:"IkakN2"}),shortcuts:["Esc"]}),(0,n.jsx)(j,{label:(0,n.jsx)(g.cC,{id:"K0Oq/D"}),shortcuts:["R"]}),(0,n.jsx)(u.i,{borderColor:"gray.300"}),(0,n.jsx)(j,{label:(0,n.jsx)(g.cC,{id:"CgmvBu"}),shortcuts:["S"]}),(0,n.jsx)(j,{label:(0,n.jsx)(g.cC,{id:"/5i2oX"}),shortcuts:[(0,n.jsx)(p.G,{icon:m.FPD},"up"),(0,n.jsx)(p.G,{icon:m.r5q},"down")]}),(0,n.jsx)(j,{label:(0,n.jsx)(g.cC,{id:"rEj/lx"}),shortcuts:["Enter"]})]}),(0,n.jsx)(x.z,{size:"sm",variant:"solid",onClick:t,children:(0,n.jsx)(g.cC,{id:"76gPWk"})})]})},"coach-bar")}},26787:function(e,t,i){"use strict";i.d(t,{v:function(){return A}});var n=i(52322),r=i(43297),l=i(28535),s=i(77533),o=i(87651),a=i(29117),d=i(81540),c=i(42946),u=i(54933),x=i(49929),h=i(5879),m=i(16983),p=i(70065),g=i(82863),j=i(2784),f=i(14274),v=i(42111),C=i(36651),b=i(93441),y=i(23405),k=i(2090),w=i(85747);let E=e=>{let t=(0,p.p)(),{currentWorkspace:i}=(0,C.SE)(),[r,l]=(0,j.useState)(!1),[s,o]=(0,j.useState)(!1),a=(0,y.y)("pptImportV2"),d=(0,j.useCallback)(async(r,s)=>{let{isPPT:a,toastId:d}=s;(0,k.cT)(r,null==i?void 0:i.id,{onUploadComplete:async i=>{let{src:r,name:s}=i,c=await fetch(r).then(e=>e.text()),u=s.replace(/[.]html$/,"");e.onUploadComplete({html:c,filename:u,source:a?"PptxUpload":"DocxUpload",src:r}),t.update(d,{status:"success",title:(0,n.jsx)(h.cC,{id:"oMgC5V"}),duration:5e3,isClosable:!0}),o(!0),l(!1)},onUploadFailed(i){var r;t.update(d,{status:"error",title:(0,n.jsx)(h.cC,{id:"SlfejT"}),description:(0,n.jsx)(h.cC,{id:"lIW942"}),duration:5e3,isClosable:!0}),null===(r=e.onUploadFailed)||void 0===r||r.call(e,i),l(!1),o(!1)}},void 0,"importDoc",f.v.TRANSLOADIT_DOC_IMPORT_TEMPLATE_ID)},[null==i?void 0:i.id,e,t]),c=(0,j.useCallback)((r,s)=>{let{toastId:a}=s;(0,k.cT)(r,null==i?void 0:i.id,{onUploadComplete:async i=>{let{name:r,fullResults:s,src:d}=i,{convert_to_html:c,convert_to_pdf:u,pdf_to_images:x}=s,m=x.map(e=>({index:e.meta.thumb_index,width:e.meta.width,height:e.meta.height,url:e.ssl_url})),p=u[0].ssl_url,g=u[0].original_name||r.replace(/[.]x?html$/,""),j=c[0].ssl_url,f=await fetch(j).then(e=>e.text());e.onUploadComplete({html:f,filename:g,htmlUrl:j,src:d,source:"PptxUpload",thumbnails:m,pdfUrl:p,fileUrl:d}),t.update(a,{status:"success",title:(0,n.jsx)(h.cC,{id:"oMgC5V"}),duration:5e3,isClosable:!0}),o(!0),l(!1)},onUploadFailed(i){var r;t.update(a,{status:"error",title:(0,n.jsx)(h.cC,{id:"SlfejT"}),description:(0,n.jsx)(h.cC,{id:"lIW942"}),duration:5e3,isClosable:!0}),null===(r=e.onUploadFailed)||void 0===r||r.call(e,i),l(!1),o(!1)}},void 0,"importPpt",f.v.TRANSLOADIT_PPT_IMPORT_TEMPLATE_ID)},[null==i?void 0:i.id,e,t]),u=(0,j.useCallback)(async i=>{var r;null===(r=e.onUploadStarted)||void 0===r||r.call(e),l(!0);let s=i[0],o=k.eb.includes(s.type),u=t({id:"load-doc-toast-".concat(s.name),position:"top",duration:null,status:"loading",variant:"subtle",title:(0,n.jsx)(h.cC,{id:"hdsaJo"}),description:(0,n.jsx)(h.cC,{id:"HOoZAi"}),isClosable:!1});o&&a?c(s,{toastId:u}):d(s,{isPPT:o,toastId:u})},[e,a,t,d,c]),{onClick:x,inputElement:m}=(0,w.E)({handleFilesCallback:u,multiple:!1,accept:[...k.u0,...k.eb].join(",")});return{initiateDocUpload:x,hiddenInputElement:m,isUploading:r,handleDocUpload:u,isSuccess:s}},S="https://www.googleapis.com/auth/drive.file",I=e=>{let[t,i]=(0,j.useState)(!1),[r,l]=(0,j.useState)(),s=(0,p.p)(),{user:o}=(0,C.SE)(),[a,d]=(0,j.useState)(!1),[c,u]=(0,j.useState)(!1),{handleDocUpload:x}=E({onUploadComplete:e.onImportComplete}),m=(0,j.useCallback)((e,t,i,r)=>{let l="https://www.googleapis.com/drive/v3/files/".concat(t,"?fields=exportLinks");d(!0);let o=s({id:"load-doc-toast-".concat(t),position:"top",duration:null,status:"loading",variant:"subtle",title:(0,n.jsx)(h.cC,{id:"hdsaJo"}),description:(0,n.jsx)(h.cC,{id:"5VLwXq"}),isClosable:!1});fetch(l,{headers:{Authorization:"Bearer ".concat(e)}}).then(async e=>{if(200!==e.status){var t;let i=await e.json(),n=null==i?void 0:null===(t=i.error)||void 0===t?void 0:t.message;return Promise.reject(n?"Google Drive error ".concat(e.status,": ").concat(n):"Google Drive error ".concat(e.status))}return e.json()}).then(async t=>{let n=t.exportLinks[i],r=await fetch(n,{headers:{Authorization:"Bearer ".concat(e)}});return r.blob()}).then(e=>{let t=new File([e],"".concat(r,".pptx"),{type:i});x([t]),d(!1),s.close(o)}).catch(e=>{console.error("Error importing doc ".concat(t," from google"),e),d(!1),s.update(o,{status:"error",title:(0,n.jsx)(h.cC,{id:"SlfejT"}),description:e.message||e||(0,n.jsx)(h.cC,{id:"lIW942"}),duration:5e3,isClosable:!0})})},[s,x]),y=(0,j.useCallback)((t,i,r,l)=>{let o="https://www.googleapis.com/drive/v3/files/".concat(i,"/export?mimeType=").concat(r);d(!0);let a=s({id:"load-doc-toast-".concat(i),position:"top",duration:null,status:"loading",variant:"subtle",title:(0,n.jsx)(h.cC,{id:"hdsaJo"}),description:(0,n.jsx)(h.cC,{id:"gmwDJx"}),isClosable:!1});fetch(o,{headers:{Authorization:"Bearer ".concat(t)}}).then(e=>e.text()).then(t=>{e.onImportComplete({html:t,filename:l,source:"GoogleDocs",src:o}),s.update(a,{status:"success",title:(0,n.jsx)(h.cC,{id:"oMgC5V"}),duration:5e3,isClosable:!0}),u(!0),d(!1)}).catch(e=>{console.error("Error importing doc ".concat(i," from google"),e),u(!1),d(!1)})},[e,s]),k=(0,j.useCallback)((e,t)=>{if("picked"!==t.action)return;let[i]=t.docs;"application/vnd.google-apps.document"===i.mimeType?y(e,i.id,"text/html",i.name):"application/vnd.google-apps.presentation"===i.mimeType&&m(e,i.id,"application/vnd.openxmlformats-officedocument.presentationml.presentation",i.name)},[y,m]),w=(0,j.useCallback)(e=>{l(e);let t=window.google,i=v.VH.get("pptImport"),n=["application/vnd.google-apps.document",i&&"application/vnd.google-apps.presentation"].filter(e=>!!e),r=new t.picker.DocsView(t.picker.ViewId.DOCS).setMimeTypes(n.join(",")),s=new t.picker.PickerBuilder().addView(r).addView(t.picker.ViewId.FOLDERS).setOAuthToken(e).setAppId(f.v.GOOGLE_PROJECT_ID).setDeveloperKey(f.v.GOOGLE_API_KEY).setCallback(t=>{k(e,t)});i&&s.addView(t.picker.ViewId.DOCUMENTS).addView(t.picker.ViewId.PRESENTATIONS),s.build().setVisible(!0),Array.from(document.getElementsByClassName("picker-dialog")).forEach(e=>{e.style.zIndex="2000"})},[k]),I=(0,j.useCallback)(e=>{console.error("Google auth failed:",e),s({title:(0,n.jsx)(h.cC,{id:"FL/pCd",values:{error:e}}),status:"error",duration:3e3,position:"top",isClosable:!1})},[s]),_=(0,g.Nq)({scope:S,hint:null==o?void 0:o.email,prompt:"",onSuccess:e=>{(0,g.FX)(e,S)?w(e.access_token):I("Could not get requested scopes")},onError:I}),A=(0,j.useCallback)(()=>{window.gapi.load("picker",()=>{i(!0)})},[]);(0,b.Gq)("https://apis.google.com/js/api.js",{onload:A});let T=(0,j.useCallback)(()=>{t&&(r?w(r):_())},[r,_,t,w]);return{initiateGoogleImport:T,isImporting:a,isSuccess:c}},_=e=>{let{text:t}=e;return(0,n.jsxs)(r.K,{direction:"row",spacing:1.5,w:"100%",children:[(0,n.jsx)(l.xu,{color:"green.400",children:(0,n.jsx)(x.G,{icon:u.LEp})}),(0,n.jsx)(s.x,{children:t})]})},A=e=>{let{onImportComplete:t}=e,{initiateDocUpload:i,hiddenInputElement:u,isUploading:p,isSuccess:g}=E({onUploadComplete:t}),{initiateGoogleImport:j,isImporting:f,isSuccess:v}=I({onImportComplete:t}),C=p||f,b=v||g;return(0,n.jsxs)(l.xu,{w:"100%",children:[(0,n.jsx)(o.U,{in:b,children:(0,n.jsx)(a.U,{w:"100%",p:12,justifyContent:"center",spacing:4,border:"none",boxShadow:"none",bg:"whiteAlpha.700",backdropFilter:"blur(10px)",borderRadius:"md",children:(0,n.jsx)(s.x,{fontSize:"xl",children:(0,n.jsx)(h.cC,{id:"oMgC5V"})})})}),(0,n.jsx)(o.U,{in:C,children:(0,n.jsxs)(a.U,{w:"100%",p:12,justifyContent:"center",spacing:4,border:"none",boxShadow:"none",bg:"whiteAlpha.700",backdropFilter:"blur(10px)",borderRadius:"md",children:[(0,n.jsx)(d.$,{}),(0,n.jsx)(s.x,{fontSize:"xl",children:(0,n.jsx)(h.cC,{id:"fxZ/WE"})})]})}),(0,n.jsx)(o.U,{in:!C&&!b,children:(0,n.jsxs)(r.K,{w:"100%",direction:{base:"column",md:"row"},justifyContent:"center",spacing:{base:3,md:4},children:[(0,n.jsx)(m.X,{label:(0,n.jsx)(h.cC,{id:"RMmFZu"}),description:(0,n.jsxs)(r.K,{spacing:1,children:[(0,n.jsx)(_,{text:(0,n.jsx)(h.cC,{id:"W/x3L4"})}),(0,n.jsx)(_,{text:(0,n.jsx)(h.cC,{id:"cuyHFX"})})]}),isPopular:!1,colorScheme:"blue",imageUrl:"/_next/static/media/Thumbnail-drive.beda1526.svg",onClick:j,ctaIcon:(0,n.jsx)(x.G,{icon:c.A$k}),ctaLabel:(0,n.jsx)(h.cC,{id:"iSLIjg"})}),(0,n.jsx)(m.X,{label:(0,n.jsx)(h.cC,{id:"RNxrCU"}),description:(0,n.jsxs)(r.K,{spacing:1,children:[(0,n.jsx)(_,{text:(0,n.jsx)(h.cC,{id:"GwfEs/"})}),(0,n.jsx)(_,{text:(0,n.jsx)(h.cC,{id:"g8oIJP"})})]}),isPopular:!1,colorScheme:"purple",imageUrl:"/_next/static/media/Thumbnail-upload.175964bf.svg",onClick:i,ctaIcon:(0,n.jsx)(x.G,{icon:c.A$k}),ctaLabel:(0,n.jsx)(h.cC,{id:"JYj5R2"})}),u]})})]})}},23312:function(e,t,i){"use strict";i.d(t,{C:function(){return p}});var n=i(52322),r=i(92850),l=i(26468),s=i(22226),o=i(54326),a=i(2338),d=i(97217),c=i(77533),u=i(50250),x=i(43297),h=i(62614),m=i(5879);let p=e=>{let{invitationCount:t,isOpen:i,onClose:p,onSendInvitationsClick:g,onDiscardClick:j}=e;return i?(0,n.jsxs)(r.u_,{returnFocusOnClose:!1,onClose:p,closeOnOverlayClick:!0,isOpen:!0,isCentered:!0,children:[(0,n.jsx)(l.Z,{}),(0,n.jsxs)(s.h,{children:[(0,n.jsx)(o.x,{children:(0,n.jsx)(m.cC,{id:"tW/kB6",values:{invitationCount:t}})}),(0,n.jsx)(a.o,{}),(0,n.jsx)(d.f,{children:(0,n.jsx)(c.x,{children:(0,n.jsx)(m.cC,{id:"qxNK2k",values:{invitationCount:t}})})}),(0,n.jsx)(u.m,{children:(0,n.jsxs)(x.K,{spacing:2,direction:"row",align:"center",children:[(0,n.jsx)(h.z,{onClick:j,children:(0,n.jsx)(m.cC,{id:"bzSI52"})}),(0,n.jsx)(h.z,{variant:"solid",onClick:g,children:(0,n.jsx)(m.cC,{id:"6dWGPZ",values:{invitationCount:t}})})]})})]})]}):null}},25944:function(e,t,i){"use strict";i.d(t,{bf:function(){return p},iZ:function(){return h},lh:function(){return x},wK:function(){return m}});var n=i(2784),r=i(42111),l=i(91994),s=i(47968),o=i(90604),a=i(56400),d=i(99268);let c=e=>Math.random()<=1/e;class u{setupProvider(){this.t1SetupProvider||(this.t1SetupProvider=performance.now())}downloadDoc(){this.t2DownloadDoc||(this.t2DownloadDoc=performance.now())}onCreate(){this.t3OnCreate||(this.t3OnCreate=performance.now())}report(){return null===this.t1SetupProvider||null===this.t2DownloadDoc||null===this.t3OnCreate?null:{downloadDoc:this.t2DownloadDoc-this.t1SetupProvider,onCreate:this.t3OnCreate-this.t2DownloadDoc}}constructor(){this.t1SetupProvider=null,this.t2DownloadDoc=null,this.t3OnCreate=null}}let x=(e,t)=>{let i=(0,l.CG)(s.Pw),r=(0,n.useRef)(i);(0,n.useEffect)(()=>{r.current=i},[i]),(0,n.useEffect)(()=>{if(e)return window.addEventListener("keydown",i,!0),()=>{window.removeEventListener("keydown",i,!0)};function i(e){let i=e.target.closest(".ProseMirror");if(!i||!r.current||!c(t))return;let n=performance.now();requestAnimationFrame(()=>{let t=e.key;" "===t&&(t="Space");let i=performance.now()-n;(0,d.EF)({...(0,a.H)(),key:t,duration:i})})}},[e,r,t])},h=()=>{let e=(0,r.ye)("rumSampleRate");(0,n.useEffect)(()=>{(0,d._k)(e)},[e])},m=e=>{let t=(0,n.useCallback)(t=>{let{isFullscreen:i=!1}=t;if(!e)return;let n=performance.now();requestAnimationFrame(()=>{requestAnimationFrame(()=>{let e=performance.now()-n;(0,d.gG)({...(0,a.H)(),toMode:o.q.SLIDE_VIEW,duration:e,isFullscreen:i})})})},[e]),i=(0,n.useCallback)(t=>{let{isFullscreen:i=!1}=t;if(!e)return;let n=performance.now();requestAnimationFrame(()=>{requestAnimationFrame(()=>{let e=performance.now()-n;(0,d.gG)({...(0,a.H)(),toMode:o.q.DOC_VIEW,duration:e,isFullscreen:i})})})},[e]);return{recordExitSlideModePerformance:i,recordEnterSlideModePerformance:t}},p=()=>{let[e]=(0,n.useState)(()=>new u),t=(0,n.useCallback)(()=>{e.setupProvider()},[e]),i=(0,n.useCallback)(()=>{e.downloadDoc()},[e]),r=(0,n.useCallback)(()=>{e.onCreate();let t=e.report();if(null===t){console.warn("[HoneycombDocLoadTimer] failed to generate doc timings");return}(0,d.Py)({...(0,a.H)(),duration:t.onCreate}),(0,d.aZ)({...(0,a.H)(),duration:t.downloadDoc})},[e]);return{timeOnCreate:r,timeOnSetupProvider:t,timeOnDownloadDoc:i}}},89311:function(e,t,i){"use strict";i.d(t,{l:function(){return o}});var n=i(5632),r=i(2784),l=i(7e4),s=i(88640);let o=()=>{let{pathname:e,isReady:t}=(0,n.useRouter)(),i=(0,r.useRef)(!1),[o,a]=(0,l.X)(s.H.lastHomeUrl,"/");(0,r.useEffect)(()=>{if(i.current||!t)return;let n="/inspiration"===e||"/templates"===e?e:"/";a(n),i.current=!0},[a,t,e])}},60536:function(e,t,i){"use strict";i.d(t,{V:function(){return j}});var n=i(52322),r=i(50019),l=i(38035),s=i(74008),o=i(29117),a=i(77533),d=i(82554),c=i(36474),u=i(41098),x=i(5879),h=i(23405),m=i(94199),p=i(67964),g=i(81640);let j=e=>{let{onClose:t,onOpen:i,segmentEvent:j,doc:f,label:v}=e,C=(0,h.y)("upsellUXEnabled_Pro"),b=(0,p.dU)(null==f?void 0:f.organization),{openUpsellModal:y}=(0,g.z)(),k=(0,r.ff)("gray.200","gray.700");return!1===b&&C?(0,n.jsxs)(l.k,{direction:"column",w:"100%",children:[(0,n.jsx)(s.i,{borderColor:k}),(0,n.jsxs)(o.U,{mt:4,mb:2,children:[(0,n.jsxs)(o.U,{children:[(0,n.jsx)(a.x,{children:v||(0,n.jsx)(x.cC,{id:"kuLK2H",values:{GAMMA_PROPER_NOUN:m.N6}})}),(0,n.jsx)(d.C,{colorScheme:"trueblue",variant:"solid",children:m.k3})]}),(0,n.jsx)(c.L,{}),(0,n.jsx)(u.r,{onClickCapture:e=>{e.preventDefault(),y({onOpenCallback:t,onCloseCallback:i,segmentEvent:j})},isChecked:!0})]})]}):null}},4758:function(e,t,i){"use strict";i.d(t,{L:function(){return p}});var n=i(52322),r=i(38035),l=i(16556),s=i(29117),o=i(109),a=i(77533),d=i(28535),c=i(42946),u=i(49929),x=i(94523),h=i(5879),m=i(7985);i(30579);let p=e=>{let{selectedCollaborator:t,idx:i,handleRemoveClick:p}=e,g=t&&(0,m.G)((null==t?void 0:t.email)||""),j=0===i?170:300;return(0,n.jsx)(r.k,{width:0===i?"calc(100% - 100px)":"",className:"searchbartag","data-testid":"searchbartag-collaborator-".concat(t.email),children:(0,n.jsxs)(l.Vp,{size:"md",minW:110,...g?{}:{colorScheme:"red",bg:"red",color:"white"},children:["id"in t?(0,n.jsx)(x.kH,{label:t.email,"aria-label":t.email,children:(0,n.jsxs)(s.U,{children:[(0,n.jsx)(o.q,{size:"2xs",m:0,name:t.displayName,src:t.profileImageUrl}),(0,n.jsx)(a.x,{textTransform:"capitalize",wordBreak:"break-word",noOfLines:1,maxW:j,lineHeight:"1.5",children:t.displayName})]})}):(0,n.jsx)(x.kH,{label:g?t.email:(0,n.jsx)(h.cC,{id:"XILg0L"}),"aria-label":t.email,children:(0,n.jsxs)(s.U,{flex:1,children:[(0,n.jsx)(d.Cd,{bg:g?"trueblue.100":"none",size:6,children:(0,n.jsx)(u.G,{icon:g?c.FU$:c.WV2})}),(0,n.jsx)(a.x,{wordBreak:"break-all",display:"block",height:"100%",width:"100%",noOfLines:1,maxW:j,lineHeight:"1.5",children:t.email})]})}),(0,n.jsx)(l.SD,{onClick:p})]})},"id"in t?t.id:t.email)}},60740:function(e,t,i){"use strict";i.d(t,{y:function(){return l}});var n=i(55478),r=i(2784);let l=()=>{let{isOpen:e,onOpen:t,onClose:i}=(0,n.q)({id:"sharePanelDisclosure"}),[l,s]=(0,r.useState)("invite");return{isSharePanelOpen:e,onSharePanelOpen:t,onSharePanelClose:i,view:l,setView:s}}},8347:function(e,t,i){"use strict";i.d(t,{XG:function(){return n},Nj:function(){return e_},t9:function(){return eA},o$:function(){return eN},aA:function(){return tm},WQ:function(){return tp}});var n,r=i(52322),l=i(92850),s=i(26468),o=i(22226),a=i(54326),d=i(28535),c=i(2338),u=i(74008),x=i(97217),h=i(43297),m=i(67109),p=i(89099),g=i(62614),j=i(82554),f=i(36474),v=i(50250),C=i(38035),b=i(42946),y=i(49929),k=i(94523),w=i(5879),E=i(2784),S=i(93202),I=i(11550),_=i(67964),A=i(30579),T=i(16710),O=i(46759),P=i(15041),D=i(29318),R=i(36651),N=i(55274),G=i(70065),z=i(77533),M=i(87651),L=(i(81672),i(74409)),F=i(47443),U=i(52929),W=i(109),H=(i(82655),i(87254)),V=i(1842),B=i.n(V),K=i(94199),q=i(20336),Y=i(93441),Z=i(89458),J=i(88640),X=i(29117),Q=i(11082),$=i(8174),ee=i(78462);let et=e=>{let{icon:t,showDisabled:i=!1}=e;return(0,r.jsx)(d.Cd,{color:"gray.800",textAlign:"center",bg:"gray.200",size:8,opacity:i?.5:1,children:i?(0,r.jsxs)("span",{className:"fa-stack",children:[(0,r.jsx)(y.G,{icon:b.u6k,className:"fa-stack-1x"}),(0,r.jsx)(y.G,{icon:t,className:"fa-stack-1x"})]}):(0,r.jsx)(y.G,{size:"1x",icon:t})})},ei=e=>{let{channel:t,doc:i,isDisabled:n,showDisabledIcon:l=!1}=e,{removeDocChannel:s}=(0,$.Z)(),o=(0,E.useCallback)(()=>{i&&s(i,t.id)},[t.id,i,s]),a=(0,ee.j)({slug:t.slug,id:t.id});return(0,r.jsxs)(X.U,{py:2,w:"100%",justify:"space-between","data-testid":"workspace-row-".concat(t.id),children:[(0,r.jsx)(d.xu,{children:(0,r.jsxs)(C.k,{alignItems:"center",children:[(0,r.jsx)(et,{icon:A.Ty,showDisabled:l}),(0,r.jsx)(d.xu,{ml:3,opacity:l?.5:1,children:(0,r.jsx)(Q.r,{href:a,target:"_blank",children:t.name})})]})}),(0,r.jsx)(g.z,{size:"sm",variant:"ghost",colorScheme:"red",onClick:o,isDisabled:n,children:(0,r.jsx)(w.cC,{id:"t/YqKh"})})]},t.id)};var en=i(46949),er=i(50019),el=i(75768),es=i(74105),eo=i(81540),ea=i(20816),ed=i(46028),ec=i(38421),eu=i.n(ec);let ex=e=>{let{workspaceId:t,docId:i,existingChannels:n,isDisabled:l}=e,s=(0,E.useRef)(null),[o,a]=(0,E.useState)(""),[c,u]=(0,E.useState)([]),[x,m]=(0,E.useState)(!1),{addDocChannel:p}=(0,$.Z)(),{data:g,loading:j}=(0,S.Kce)({variables:{query:o,workspaceId:t},skip:!o});(0,E.useEffect)(()=>{if(j||!g)return;let e=g.search.filter(Boolean);u(e),m(0===e.length)},[g,j]);let f=(0,E.useMemo)(()=>o?c.filter(e=>!n.find(t=>t.id===e.id)):[],[n,o,c]),v=(0,E.useCallback)(e=>{let t=f.find(t=>t.id===e);if(!t){console.error("[ChannelSearchBar.addSelectedChannel] No matching channel found");return}p({docId:i,channel:t,existingChannels:n})},[p,i,n,f]),b=(0,er.ff)("gray.100","gray.700"),I=(0,er.ff)("light","dark"),_=(0,er.ff)("trueblue.50","whiteAlpha.100");(0,er.ff)("trueblue.100","whiteAlpha.200");let T=(0,er.ff)("gray.200","gray.600");return(0,r.jsx)(el.h,{w:"100%",mb:2,alignItems:"flex-start","data-testid":"sharepanel-channel-search-bar",children:(0,r.jsx)(d.xu,{flex:1,children:(0,r.jsxs)(es.B,{w:"100%",justifyContent:"center",zIndex:1,children:[(0,r.jsx)(C.k,{display:"none",position:"absolute",h:"100%",w:"100%",alignItems:"center",justifyContent:"center",bg:b,zIndex:"overlay",opacity:.4,children:(0,r.jsx)(eo.$,{})}),(0,r.jsxs)(ed.Qc,{rollNavigation:!0,multiple:!0,emptyState:()=>!!x&&(0,r.jsxs)(C.k,{direction:"column",justify:"center",align:"center",w:"100%",my:6,children:[(0,r.jsx)(d.xu,{w:"80%",maxW:"200px",mb:6,alignContent:"center",children:(0,r.jsx)(eu(),{src:"/images/Sal-Fishing-2x.png",width:"640",height:"361",alt:"Sal, the Gamma mascot, fishing extraterrestrially"})}),(0,r.jsx)(L.X,{size:"xs",mb:2,textAlign:"center",children:(0,r.jsx)(w.cC,{id:"NmfOr+"})}),(0,r.jsx)(z.x,{fontSize:"sm",color:"gray.400",textAlign:"center",children:(0,r.jsx)(w.cC,{id:"kXnLEt"})})]}),suggestWhenEmpty:!1,openOnFocus:!0,filter:()=>!0,onSelectOption:e=>{let{item:t}=e;v(t.value),a("")},children:[(0,r.jsxs)(ea.Z,{pointerEvents:"none",color:(0,er.ff)("gray.300","gray.600"),h:"100%",flexDirection:"column",children:[(0,r.jsx)(C.k,{flex:1}),(0,r.jsx)(C.k,{h:10,py:4,alignItems:"center",children:(0,r.jsx)(en.W,{w:10})})]}),(0,r.jsx)(ed.Vp,{ref:s,"data-testid":"autocomplete-channels-input",cursor:l?"not-allowed":void 0,disabled:l,w:"100%",pl:5,wrapStyles:{px:2},fontSize:"md",placeholder:H.ag._({id:"KmCmUJ"}),transition:"width 1s ease-in-out",value:o,borderColor:T,onChange:e=>{let{target:t}=e,{value:i}=t;a(i),i||u([])}}),(0,r.jsx)(ed.Jm,{w:"100%",mt:0,display:o.length>0?"flex":"none","data-theme":I,children:f.length>0&&f.map(e=>{let{id:t,name:i,memberCount:n,isMember:l,members:s}=e;return(0,r.jsx)(ed.Gb,{"data-testid":"autocomplete-item-channel-".concat(t),value:{id:e.id},getValue:e=>e.id,align:"center",_focus:{bg:_},children:(0,r.jsxs)(X.U,{spacing:4,p:0,flex:1,children:[(0,r.jsx)(d.xu,{color:"gray.700",children:(0,r.jsx)(y.G,{icon:A.Ty})}),(0,r.jsxs)(h.K,{spacing:0,flex:"1",children:[(0,r.jsx)(z.x,{children:i}),(0,r.jsx)(z.x,{fontSize:"sm",color:"gray.400",children:l?(0,r.jsx)(w.cC,{id:"tWPlLK",values:{0:n||0}}):(0,r.jsx)(w.cC,{id:"pkIIls",values:{0:n||0}})})]}),(0,r.jsx)(k.NL,{size:"xs",overflowTooltipLabel:H.ag._({id:"25VyZX"}),avatars:s||[],max:3,onClick:e=>{e.preventDefault(),e.stopPropagation()}})]})},t)})})]})]})})})};var eh=i(55478),em=i(78071),ep=i(7985),eg=i(38045),ej=i(99016),ef=i(23312),ev=i(80498),eC=i(62549),eb=i(10625),ey=i(67046),ek=i(99058),ew=i(44035),eE=i(39237),eS=i(27599),eI=i(25481);(n||(n={})).NoAccess="no_access";let e_={[S.y3$.Manage]:{title:()=>H.ag._({id:"DZfDCl"}),description:()=>H.ag._({id:"r59J7Q"})},[S.y3$.Edit]:{title:()=>H.ag._({id:"ePK91l"}),description:()=>H.ag._({id:"kuZsYI"})},[S.y3$.Comment]:{title:()=>H.ag._({id:"NBdIgR"}),description:()=>H.ag._({id:"IwFh5+"})},[S.y3$.View]:{title:()=>H.ag._({id:"jpctdh"}),description:()=>H.ag._({id:"yzFEXd"})},[n.NoAccess]:{title:()=>H.ag._({id:"oPoLg+"}),description:()=>H.ag._({id:"Vcif8/"})}},eA=e=>{let{isDisabled:t,options:i,disabledOptions:l=[],selected:s,variant:o="ghost",onClick:a=()=>{},onRemove:c}=e;return(0,r.jsxs)(eb.v,{closeOnSelect:!0,children:[(0,r.jsx)(ey.j,{"data-testid":"permission-menu-value-".concat(s),as:g.z,display:"flex",size:"sm",isDisabled:t,variant:o,rightIcon:(0,r.jsx)(y.G,{icon:b.ptq}),children:e_[s||n.NoAccess].title()}),(0,r.jsx)(ek.q,{textAlign:"left",zIndex:"overlay",children:(0,r.jsxs)(ew._,{defaultValue:s,value:s,title:H.ag._({id:"9cDpsw"}),type:"radio",onChange:e=>{a(e)},children:[i.map(e=>{let t=l.find(t=>t.permission===e),i=t&&t.reason;return(0,r.jsx)(eE.i,{isDisabled:!!t,value:e,alignItems:"start",pt:3,children:(0,r.jsx)(k.kH,{label:i,"aria-label":i,isDisabled:!t,placement:"top",children:(0,r.jsxs)(d.xu,{children:[(0,r.jsx)(z.x,{mt:-1,children:e_[e].title()}),(0,r.jsx)(z.x,{fontSize:"sm",color:"gray.500",mt:1,children:e_[e].description()})]})},e)},e)}),c&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eS.R,{}),(0,r.jsx)(eI.s,{color:"red.500",onClick:c,icon:(0,r.jsx)(y.G,{icon:b.XAH,fixedWidth:!0}),children:(0,r.jsx)(w.cC,{id:"t/YqKh"})})]})]})})]})};var eT=i(4758);let eO=(0,eg.E)(d.xu),eP=(e,t,i)=>{if(!i)return e;let n=[...e],r=e.findIndex(e=>"email"in e&&e.email===i),l=t.find(e=>e.email===i);return -1!==r&&n.splice(r,1),[...n,l||{email:i}]},eD=(e,t)=>{let i=(0,eC.Hs)(t.map(e=>"displayName"in e?e.displayName:e.email),3);return e===S.y3$.Manage?H.ag._({id:"4bKxWq",values:{userNames:i,GAMMA_ARTIFACT_PROPER_NOUN:K.Yc,0:t.length}}):e===S.y3$.Edit?H.ag._({id:"3rbi6Y",values:{userNames:i,GAMMA_ARTIFACT_PROPER_NOUN:K.Yc,0:t.length}}):e===S.y3$.Comment?H.ag._({id:"uGWY40",values:{userNames:i,GAMMA_ARTIFACT_PROPER_NOUN:K.Yc,0:t.length}}):e===S.y3$.View?H.ag._({id:"p5IG6F",values:{userNames:i,GAMMA_ARTIFACT_PROPER_NOUN:K.Yc,0:t.length}}):H.ag._({id:"Ai1TAT",values:{userNames:i,GAMMA_ARTIFACT_PROPER_NOUN:K.Yc,0:t.length}})},eR=e=>{let{workspaceId:t,docId:i,user:n,existingDocCollaborators:l,existingInvitations:s,registerDoneFn:o,isDisabled:a}=e,c=(0,G.p)(),[u,x]=(0,E.useState)(!1),h=(0,E.useRef)(),m=(0,E.useRef)(null),[p,j]=(0,E.useState)(""),[f,v]=(0,E.useState)([]),[I,_]=(0,E.useState)(S.y3$.Manage),[A,T]=(0,E.useState)(new ev.B),[O,P]=(0,E.useState)([]),D=O.filter(e=>"email"in e),R=l.map(e=>e.user),{isOpen:N,onOpen:M,onClose:L}=(0,eh.q)({id:"unsentInvitationsModalDisclosure"}),[F,{loading:U,error:V}]=(0,S.qVw)();(0,Y.GJ)("Error inviting collaborators.",V);let B=(0,ej.j)(S.aAR),{data:K,loading:q}=(0,S.PGi)({variables:{query:p,workspaceId:t},skip:!p});(0,E.useEffect)(()=>{if(q||!K)return;let e=K.search.filter(Boolean);v(e)},[K,q]);let Z=(0,E.useMemo)(()=>p?f.filter(e=>"User"===e.__typename&&e.id!==n.id&&!D.concat(R).find(t=>t.email===e.email)):[],[f,R,p,D,n.id]),J=!!p&&!Z.find(e=>e.email===p),Q=I===S.y3$.Manage&&D.some(e=>!("__typename"in e&&"User"===e.__typename)),$=O.concat({email:p}).filter(e=>!("email"in e)||(0,ep.G)(e.email||"")),ee=!!O.length,et=!!$.length;(0,E.useEffect)(()=>{o(()=>()=>(et?M():A.resolve(),A.promise))},[o,A,et,M]);let ei=(0,E.useCallback)(async e=>{x(!0),P(t=>e.reduce((e,t)=>eP(e,Z,t.trim()),t));let i=(await Promise.all(e.map(e=>B({workspaceId:t,query:e}).then(t=>{var i;return null===(i=t.data)||void 0===i?void 0:i.search.find(t=>"User"===t.__typename&&t.email===e)})))).filter(Boolean);P(t=>e.reduce((e,t)=>eP(e,i,t.trim()),t)),x(!1)},[Z,B,t]),ec=(0,E.useCallback)(async()=>{if(0===D.length)return;let e=eP(D,Z,p.trim()).filter(e=>"email"in e&&(0,ep.G)(e.email||"")),t=[...l,...e.map(e=>{if("id"in e)return{docId:i,user:e,guest:!1,permission:I,__typename:"DocCollaborator"}})].filter(e=>!!e),r=[...s,...e.map(e=>{if("id"in e)return;let t={id:"temp",docTitle:"temp-title",invitedBy:n,docId:i,email:e.email,permission:I,__typename:"DocInvitation"};return t})].filter(e=>!!e);return F({variables:{docId:i,collaborators:e.map(e=>{let t="id"in e?{userId:e.id}:{email:e.email};return{...t,permission:I}})},update:(e,t)=>{let{data:n}=t;e.writeFragment({id:"Doc:".concat(i),fragment:S.yAO,data:null==n?void 0:n.addCollaborators})},optimisticResponse:{addCollaborators:{id:i,collaborators:t,invitations:r}}}).then(()=>{let t=H.ag._({id:"Ka86rB",values:{0:e.length}}),i=eD(I,e);c({title:t,description:i,status:"success",duration:5e3,isClosable:!0,position:"top"})})},[F,i,p,I,Z,D,l,s,c,n]),eu=(0,E.useCallback)(async()=>Promise.all([ec()]).then(()=>{var e;P([]),j(""),null===(e=h.current)||void 0===e||e.resetItems(!0),A.resolve(),T(new ev.B)}).catch(e=>{console.warn(e)}),[ec,A]),ex=a||U||u,eg=(0,er.ff)("gray.100","gray.700"),eC=(0,er.ff)("light","dark"),eb=(0,er.ff)("trueblue.50","whiteAlpha.100"),ey=(0,er.ff)("trueblue.100","whiteAlpha.200"),ek=(0,er.ff)("gray.200","gray.600");return(0,r.jsxs)(el.h,{w:"100%",mb:2,alignItems:"flex-start","data-testid":"sharepanel-search-bar",children:[(0,r.jsx)(d.xu,{flex:1,children:(0,r.jsxs)(es.B,{w:"100%",justifyContent:"center",zIndex:2,children:[(0,r.jsx)(C.k,{display:u?"flex":"none",position:"absolute",h:"100%",w:"100%",alignItems:"center",justifyContent:"center",bg:eg,zIndex:"overlay",opacity:.4,children:(0,r.jsx)(eo.$,{})}),(0,r.jsxs)(ed.Qc,{ref:h,values:O,maxSelections:100,maxSuggestions:20,creatable:!0,multiple:!0,freeSolo:!0,suggestWhenEmpty:!1,openOnFocus:!0,filter:(e,t)=>!D.find(e=>e.email===t),onSelectOption:e=>{let{item:t}=e,{type:i}=t.originalValue;"collaborator"===i&&P(e=>eP(e,Z,t.value)),j("")},onTagRemoved:e=>{P(t=>[...t].filter(t=>"email"in t?t.email!==e:!("id"in t)||t.id!==e))},children:[(0,r.jsxs)(ea.Z,{pointerEvents:"none",color:(0,er.ff)("gray.300","gray.600"),h:"100%",flexDirection:"column",children:[(0,r.jsx)(C.k,{flex:1}),(0,r.jsx)(C.k,{h:10,py:4,alignItems:"center",children:(0,r.jsx)(en.W,{w:10})})]}),(0,r.jsx)(ed.Vp,{ref:m,"data-testid":"autocomplete-collaborators-input",cursor:ex?"not-allowed":void 0,disabled:ex,w:"100%",pl:5,wrapStyles:{px:2},fontSize:"md",placeholder:H.ag._({id:"P8H57Z"}),transition:"width 1s ease-in-out",value:p,borderColor:ek,onKeyDown:e=>{let{key:t}=e;if("Backspace"===t&&0===p.length&&O.length>0){let e=O.slice(-1).pop();if(e){var i;null===(i=h.current)||void 0===i||i.removeItem("email"in e?e.email:e.id)}}},onPaste:e=>{e.preventDefault(),e.stopPropagation();let t=e.clipboardData.getData("Text"),i=t.trim().split(/[,|;\s]+/);ei(i),j(""),v([])},onChange:e=>{let{target:t}=e,{value:i}=t;j(i),i||v([])},children:O.map((e,t)=>(0,r.jsx)(eT.L,{idx:t,selectedCollaborator:e,handleRemoveClick:()=>{var t;null===(t=h.current)||void 0===t||t.removeItem(e.email)}},"id"in e?e.id:e.email))}),(0,r.jsx)(ed.Jm,{w:"100%",mt:0,display:p.length>0?"flex":"none","data-theme":eC,children:Z.map(e=>{let{id:t,email:i,displayName:n,profileImageUrl:l}=e;return(0,r.jsx)(ed.Gb,{fixed:!0,"data-testid":"autocomplete-item-user-".concat(t),value:{email:i,type:"collaborator"},getValue:e=>e.email,align:"center",_focus:{bg:eb},children:(0,r.jsxs)(X.U,{children:[(0,r.jsx)(W.q,{size:"sm",name:n,src:l}),(0,r.jsxs)(d.xu,{children:[(0,r.jsx)(z.x,{textTransform:"capitalize",children:n}),(0,r.jsx)(z.x,{fontSize:"xs",color:"gray.500",children:null==i?void 0:i.toLowerCase()})]})]})},t)}).concat((0,r.jsx)(ed.Gb,{value:{email:p,type:"collaborator"},align:"center",display:J?"flex":"none",_focus:{bg:eb},children:(0,r.jsxs)(X.U,{children:[(0,r.jsx)(d.Cd,{bg:ey,size:8,children:(0,r.jsx)(y.G,{icon:b.FU$})}),(0,r.jsx)(z.x,{size:"md",children:p})]})},p))})]}),(0,r.jsx)(em.p,{in:ee,unmountOnExit:!0,children:(0,r.jsx)(ea.x,{w:"auto",justifyContent:"flex-end",pr:1,children:(0,r.jsx)(eA,{isDisabled:U,options:[S.y3$.Manage,S.y3$.Edit,S.y3$.Comment,S.y3$.View],variant:"ghost",selected:I,onClick:e=>_(e)})})})]})}),(0,r.jsx)(eO,{overflowX:"hidden",mr:-2,transition:"slow",animate:{maxWidth:ee?"200px":"0px"},children:(0,r.jsx)(k.kH,{label:(0,r.jsx)(w.cC,{id:"Rxin92"}),"aria-label":H.ag._({id:"Rxin92"}),isDisabled:!Q,placement:"top",children:(0,r.jsx)(d.xu,{children:(0,r.jsx)(g.z,{variant:"solid",onClick:eu,isDisabled:!et||Q,isLoading:U,"data-testid":"add-selected-items",children:(0,r.jsx)(w.cC,{id:"m16xKo"})})})})}),(0,r.jsx)(ef.C,{invitationCount:$.length,onDiscardClick:()=>{L(),A.resolve(),T(new ev.B)},onSendInvitationsClick:()=>{L(),eu()},onClose:()=>{L(),A.reject(),T(new ev.B)},isOpen:N})]})},eN=e=>{let{title:t,subtitle:i,img:n,isDisabled:l=!1,disabledText:s,tooltipText:o,testId:a,infoIcon:c,permissionsControl:u,workspaceGuestInvite:x}=e,h="string"==typeof i?(0,r.jsx)(z.x,{fontSize:"xs",color:"gray.500",children:i}):i,m=(0,r.jsx)(k.kH,{isDisabled:!o,label:o,placement:"top",children:(0,r.jsx)(d.xu,{children:u})});return(0,r.jsxs)(X.U,{w:"100%",justify:"space-between",py:2,"data-testid":"permission-settings-row".concat(a?"-"+a:""),children:[(0,r.jsx)(d.xu,{children:(0,r.jsxs)(C.k,{alignItems:"center",children:[n,(0,r.jsxs)(d.xu,{ml:3,children:[(0,r.jsx)(z.x,{children:t}),(0,r.jsxs)(C.k,{align:"center",children:[x&&x,h&&h]})]})]})}),(0,r.jsx)(d.xu,{children:(0,r.jsx)(k.kH,{isDisabled:!o,label:(0,r.jsx)(z.x,{children:o}),placement:"top",children:l?(0,r.jsx)(z.x,{size:"sm",color:"gray.500","data-testid":"permission-controls-disabled-".concat(a),children:s}):c?(0,r.jsxs)(X.U,{children:[c,m]}):m})})]})};var eG=i(17993);let ez=e=>{let{children:t,showDivider:i=!0,isDark:n=!1,...l}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eG.g,{spacing:1,align:"stretch",py:4,...l,children:t}),i&&(0,r.jsx)(u.i,{borderColor:n?"gray.700":"gray.200"})]})};var eM=i(43679),eL=i(34071),eF=i(39429),eU=i(46164),eW=i(47154),eH=i(48394);let eV=e=>{let{email:t,name:i,workspaceName:n,workspaceId:l}=e,[s]=(0,S.f4M)(),[o,a]=(0,E.useState)(!1),d=(0,G.p)();return(0,r.jsx)(eM.J,{closeOnBlur:!0,children:e=>{let{onClose:c}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(eL.x,{children:(0,r.jsx)(g.z,{leftIcon:(0,r.jsx)(y.G,{icon:b.Gg}),size:"xs",colorScheme:"gray",mr:1,px:2,h:"auto",py:1,children:(0,r.jsx)(w.cC,{id:"O1wAlQ"})})}),(0,r.jsxs)(eF.y,{bg:"white",children:[(0,r.jsx)(eU.Q,{}),(0,r.jsx)(eW.Y,{fontWeight:"bold",children:(0,r.jsx)(w.cC,{id:"XYV7FR"})}),(0,r.jsxs)(eH.b,{children:[(0,r.jsx)(z.x,{fontSize:"sm",children:(0,r.jsx)(w.cC,{id:"hJZ5XP",values:{name:i,workspaceName:n,GAMMA_ARTIFACT_PROPER_NOUN_PLURAL:K.aq}})}),(0,r.jsx)(g.z,{isDisabled:o,w:"100%",mt:2,onClick:()=>{l&&t&&(a(!0),s({variables:{workspaceId:l,invitees:[{email:t}]}}).then(()=>{d({title:H.ag._({id:"oNCcm2"}),status:"success",duration:5e3,isClosable:!0,position:"top"})}).catch(e=>{console.error(e),d({title:H.ag._({id:"h37zlR",values:{0:e.message}}),status:"error",isClosable:!0,position:"top"})}).finally(()=>{a(!1),c()}))},children:(0,r.jsx)(w.cC,{id:"qVqqmP"})})]})]})]})}})},eB=(e,t)=>{var i,n;let r="DocCollaborator"===e.__typename?null===(i=e.user.displayName)||void 0===i?void 0:i.toUpperCase():"DocInvitation"===e.__typename?e.email.toUpperCase():"",l="DocCollaborator"===t.__typename?null===(n=t.user.displayName)||void 0===n?void 0:n.toUpperCase():"DocInvitation"===t.__typename?t.email.toUpperCase():"";return!l||r&&r<l?-1:!r||l&&r>l?1:0},eK=(e,t)=>{if(e.permission!==t.permission){if("manage"===e.permission)return -1;if("manage"===t.permission)return 1}return eB(e,t)},eq=e=>{var t,i;let{workspaceId:l,isFromOtherOrg:s,doc:o,user:a,setVerifySearchDone:c,canManage:u,isDark:x=!1}=e,h=(0,G.p)(),[m,p]=(0,Z.I)(J.H.hasDismissedDocWorkspaceNotice,!1),{isConnected:g}=(0,S.$gs)(),[j,{error:f}]=(0,S.qVw)(),[v,{error:C}]=(0,S.mrc)();(0,Y.GJ)("Error updating collaborator.",f),(0,Y.GJ)("Error removing collaborator.",C);let[E]=(0,S.rIg)(),I=u&&g,_=!s,A=(_&&(m||!o||o.orgAccess),!!(!(null==o?void 0:o.orgAccess)&&(null==o?void 0:o.channels)&&(null==o?void 0:o.channels.length)>0&&(null==o?void 0:o.channels.every(e=>B()(e.permission))))),O=(null==o?void 0:o.orgAccess)==null&&(null==o?void 0:o.publicAccess)==S.y3$.View,P=(0,T.qw)(o),D=(null==o?void 0:o.collaborators)||[],R=(null==o?void 0:o.invitations)||[],N=D.filter(e=>e.permission===S.y3$.Manage).length,L=[...D,...R].sort(eK),V=e=>()=>{let t="updated"===e?H.ag._({id:"Xpw8aE"}):H.ag._({id:"jwO7L7"});h({title:t,status:"success",duration:5e3,isClosable:!0,position:"top"})},X=o.orgAccess?o.orgAccess:n.NoAccess,Q=X!==n.NoAccess;return(0,r.jsxs)(r.Fragment,{children:[I&&(0,r.jsx)(eR,{workspaceId:l,docId:o.id,user:a,existingDocCollaborators:D,existingInvitations:R,registerDoneFn:c,isDisabled:!u}),(0,r.jsx)(q.V,{label:(0,r.jsx)(w.cC,{id:"i5bpoc"}),isConnected:g,mb:4}),(0,r.jsx)(z.x,{fontSize:"sm",color:"gray.600",pt:2,children:P}),(0,r.jsxs)(ez,{isDark:x,children:[!1,(0,r.jsx)(eN,{testId:"workspace",title:(0,r.jsx)(w.cC,{id:"wtxjAY"}),subtitle:Q?H.ag._({id:"aC87LX",values:{0:null==o?void 0:null===(t=o.organization)||void 0===t?void 0:t.name}}):"",img:(0,r.jsx)(et,{icon:b.P88,showDisabled:!Q}),isDisabled:!I,disabledText:e_[X].title(),infoIcon:O?(0,r.jsx)(k.kH,{label:(0,r.jsx)(w.cC,{id:"paaewf",values:{GAMMA_ARTIFACT_PROPER_NOUN:K.Yc}}),placement:"top",children:(0,r.jsx)(d.xu,{color:"yellow.500",children:(0,r.jsx)(y.G,{icon:b.DBf})})}):void 0,permissionsControl:(0,r.jsx)(eA,{isDisabled:!I,selected:X,options:[S.y3$.Manage,S.y3$.Edit,S.y3$.Comment,S.y3$.View,n.NoAccess],onClick:e=>{let t={id:o.id,orgAccess:e===n.NoAccess?null:e};E({variables:t,optimisticResponse:{updateDoc:{...t,__typename:"Doc"}},refetchQueries:["GetDocs"]}).then(V(e===n.NoAccess?"removed":"updated"))}})}),_&&(null===(i=o.channels)||void 0===i?void 0:i.map(e=>(0,r.jsx)(ei,{channel:e,doc:o,isDisabled:!g,showDisabledIcon:A},e.id))),!!o.orgAccess&&_&&!o.site&&!A&&(0,r.jsx)(d.xu,{w:"100%",mt:2,children:(0,r.jsx)(ex,{existingChannels:o.channels,workspaceId:l,docId:o.id,isDisabled:!g})}),(0,r.jsx)(M.U,{in:_&&A,children:(0,r.jsxs)(F.b,{status:"warning",children:[(0,r.jsx)(U.z,{}),(0,r.jsx)(w.cC,{id:"RZRM4l",values:{GAMMA_ARTIFACT_PROPER_NOUN:K.Yc}})]})})]}),L&&(0,r.jsx)(ez,{showDivider:!1,isDark:x,children:L.map(e=>{let t=e.permission===S.y3$.Manage&&N<2,i=!I||t,n=t?H.ag._({id:"0q0LJR"}):void 0,s=e_[e.permission].title();if("DocCollaborator"===e.__typename){var c;let t=e.user;return(0,r.jsx)(eN,{testId:t.email,title:"".concat(t.displayName," ").concat(t.id===a.id?H.ag._({id:"dDUgzP"}):""),img:(0,r.jsx)(W.q,{name:t.displayName,src:t.profileImageUrl,size:"sm"}),subtitle:i?void 0:t.email,isDisabled:i,disabledText:s,tooltipText:n,workspaceGuestInvite:!i&&e.guest?(0,r.jsx)(eV,{name:t.displayName,workspaceName:null===(c=o.organization)||void 0===c?void 0:c.name,workspaceId:l,email:e.user.email}):void 0,permissionsControl:(0,r.jsx)(eA,{isDisabled:i,selected:e.permission,options:[S.y3$.Manage,S.y3$.Edit,S.y3$.Comment,S.y3$.View],disabledOptions:e.guest?[{permission:S.y3$.Manage,reason:H.ag._({id:"Rxin92"})}]:[],onClick:e=>{let i={docId:o.id,collaborators:[{userId:t.id,permission:e}]};j({variables:i,optimisticResponse:{addCollaborators:{id:i.docId,collaborators:D.map(i=>({...i,permission:i.user.id===t.id?e:i.permission})),invitations:R,__typename:"Doc"}}}).then(V("updated")).catch(()=>{})},onRemove:()=>{let e={docId:o.id,collaborators:[{userId:t.id}]};v({variables:e,optimisticResponse:{removeCollaborators:{id:e.docId,collaborators:D.filter(e=>e.user.id!==t.id),invitations:R,__typename:"Doc"}}}).then(V("removed"))}})},t.id)}return"DocInvitation"===e.__typename?(0,r.jsx)(eN,{testId:e.email,title:e.email,subtitle:H.ag._({id:"MActeE"}),img:(0,r.jsx)(d.Cd,{bg:"trueblue.50",size:8,children:(0,r.jsx)(y.G,{icon:b.FU$,size:"sm"})}),isDisabled:i,disabledText:s,permissionsControl:(0,r.jsx)(eA,{selected:e.permission,options:[S.y3$.Manage,S.y3$.Edit,S.y3$.Comment,S.y3$.View],disabledOptions:[{permission:S.y3$.Manage,reason:H.ag._({id:"Rxin92"})}],onClick:t=>{let i={docId:o.id,collaborators:[{email:e.email,permission:t}]};j({variables:i,optimisticResponse:{addCollaborators:{id:i.docId,invitations:R.map(i=>({...i,permission:i.email===e.email?t:i.permission})),collaborators:D,__typename:"Doc"}}}).then(V("updated")).catch(()=>{console.warn("Error updating permission")})},onRemove:()=>{let t={docId:o.id,collaborators:[{email:e.email}]};v({variables:t,optimisticResponse:{removeCollaborators:{id:t.docId,invitations:R.filter(t=>t.email!==e.email),collaborators:D,__typename:"Doc"}}}).then(V("removed"))}})},e.email):null})})]})};var eY=i(11050),eZ=i(26284),eJ=i(29494),eX=i(84405);let eQ="embed-copied-toast",e$=e=>{let{embedCode:t,isDisabled:i,docId:n}=e,l=(0,G.p)(),[s,o]=(0,E.useState)(!1),{hasCopied:a,onCopy:d}=(0,eZ.V)(t),c=(0,E.useRef)(null);(0,E.useEffect)(()=>{c.current&&s&&(c.current.focus(),c.current.select())},[s]);let u=(0,E.useCallback)(()=>o(!0),[]),x=(0,E.useCallback)(()=>o(!1),[]),h=(0,E.useCallback)(()=>{d(),l.isActive(eQ)||l({id:eQ,title:(0,r.jsx)(w.cC,{id:"ETv+Uw"}),status:"success",duration:5e3}),(0,eX.J)({docId:n,source:"sharePanel",type:"embed"})},[n,d,l]);return(0,r.jsxs)(eG.g,{spacing:4,align:"stretch",children:[(0,r.jsx)(eJ.g,{ref:c,rows:5,variant:"filled",fontFamily:"mono",colorScheme:"gray",disabled:i,onClick:u,onBlur:x,isReadOnly:!0,resize:"none",pointerEvents:i?"none":void 0,children:t}),(0,r.jsx)(g.z,{alignSelf:"flex-end",onClick:h,isDisabled:i,size:"sm",...i?{opacity:"1 !important",color:"gray.400",_hover:{opacity:"1"},_active:{boxShadow:"0 none"}}:{},children:a?(0,r.jsx)(w.cC,{id:"6V3Ea3"}):(0,r.jsx)(w.cC,{id:"Sx4kHi"})})]})};var e0=i(60536);let e1=e=>{let{doc:t,onSharePanelOpen:i,onSharePanelClose:n}=e,l=(0,E.useMemo)(()=>(0,ee.lT)({docId:t.id,docTitle:t.title}),[t.id,t.title]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(z.x,{fontSize:"sm",color:"gray.600",pt:2,pb:2,children:(0,r.jsx)(w.cC,{id:"2QJhbq",values:{GAMMA_ARTIFACT_PROPER_NOUN:K.Yc}})}),(0,r.jsx)(d.xu,{pb:4,children:(0,r.jsx)(e$,{embedCode:l,docId:t.id,isDisabled:!1})}),(0,r.jsx)(e0.V,{onClose:n,onOpen:i,segmentEvent:eY.AA.GAMMA_PRO_UPSELL_SHARE_SETTINGS_REMOVE_WATERMARK,doc:t})]})};var e2=i(91994),e5=i(25566),e4=i(75652),e3=i.n(e4),e9=i(14274),e6=i(47968);let e7=(e,t)=>"".concat(e9.v.API_HOST||"","/export/docs/").concat(e,"/").concat(t),e8=async(e,t,i)=>{let n=e7(e,i);return fetch(n,{method:"POST",credentials:"include",headers:{"Content-Type":"application/json","share-token":e9.v.SHARE_TOKEN||""},body:JSON.stringify({docContent:t})})},te=function(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"pdf",l=(0,G.p)(),s=(0,E.useRef)(null),o=(0,eY.z$)(),[a,d]=(0,E.useState)(!1),c=(0,E.useCallback)(()=>{s.current=l({id:"export-toast-".concat(e.id,"-").concat(n),isClosable:!1,position:"top",duration:null,status:"loading",variant:"light",title:(0,r.jsx)(w.cC,{id:"N/fNtX",values:{format:n}})})},[null==e?void 0:e.id,l,n]),u=(0,E.useCallback)(()=>{s.current&&l.update(s.current,{status:"loading",variant:"light",title:(0,r.jsx)(w.cC,{id:"eJOEBy"}),description:(0,r.jsx)(w.cC,{id:"vMANwD"}),isClosable:!0})},[l,n]),x=(0,E.useCallback)(()=>{s.current&&l.update(s.current,{title:(0,r.jsx)(w.cC,{id:"walT1X"}),status:"error",duration:null,isClosable:!0})},[l]),h=(0,E.useCallback)(e=>{s.current&&l.update(s.current,{status:"success",title:(0,r.jsx)(w.cC,{id:"pK8dQg"}),description:(0,r.jsx)(z.x,{children:(0,r.jsx)(w.cC,{id:"MTtTC2",components:{0:(0,r.jsx)(Q.r,{textDecoration:"underline",target:"_blank",href:e||void 0,onClick:()=>s.current&&l.close(s.current)})}})}),isClosable:!0})},[l,n]),m=(0,E.useCallback)(()=>{let r=null==i?void 0:i.getJSON();d(!0),c();let l=setTimeout(u,3e4);e8(e.id,r,n).then(async i=>{var r;let l=await i.blob();if(!i.ok)throw Error("Export failed.");let s="pdf"===n?eY.AA.PDF_EXPORTED:eY.AA.PPTX_EXPORTED;null==o||o.track(s,{doc_id:e.id,source:t}),h(decodeURIComponent(i.headers.get("x-gamma-download-url")||"")||void 0);let a=window.URL.createObjectURL(l),d=document.createElement("a"),c=decodeURIComponent((null===(r=(i.headers.get("Content-Disposition")||"").split(";").find(e=>e.includes("filename=")))||void 0===r?void 0:r.replace("filename=","").trim())||"".concat(e.id,".").concat(n));d.download=c,d.href=a,d.style.display="none",document.body.appendChild(d),d.click(),d.remove()}).catch(()=>{x()}).finally(()=>{d(!1),clearTimeout(l)})},[o,null==e?void 0:e.id,i,t,n,x,c,u,h]);return{handleExport:m,exportInProgress:a}},tt=e=>{let t=(0,e2.CG)(e6.Pu),i=e.theme||t,n=(0,E.useMemo)(()=>{let e=i.fonts?[...i.fonts]:[];return e.length<2&&e.push({id:"Inter",name:"Inter",url:"https://fonts.googleapis.com/css2?family=Inter"}),e3()(e).map(e=>{var t;return(null===(t=e.url)||void 0===t?void 0:t.includes("fonts.googleapis.com"))?{name:e.name,url:"https://fonts.google.com/specimen/".concat(e.name)}:{name:e.name}}).filter(e=>!!e)},[i]);return n};var ti=i(69747),tn=i(68727);let tr=e=>{let{doc:t,editor:i,onSharePanelOpen:n,onSharePanelClose:l,isMultipage:s=!1}=e,o=(0,e2.CG)(e6.Pu),a=o.config.headingGradient,d=(0,R.py)("edit",t);return(0,r.jsxs)(eG.g,{spacing:4,align:"start",pt:2,children:[(0,r.jsx)(z.x,{fontSize:"sm",color:"gray.600",children:s?(0,r.jsx)(w.cC,{id:"QI+Cf0",values:{0:t.title},components:{0:(0,r.jsx)("strong",{})}}):(0,r.jsx)(w.cC,{id:"qwhOQ/",values:{GAMMA_ARTIFACT_PROPER_NOUN:K.Yc}})}),(0,r.jsxs)(h.K,{spacing:2,width:"100%",children:[(0,r.jsx)(to,{format:"pdf",label:"PDF",icon:b.gSj,accentColor:"red",doc:t,editor:i}),(0,r.jsx)(to,{format:"pptx",label:"PowerPoint",icon:b.WOY,accentColor:"orange",doc:t,editor:i})]}),(0,r.jsxs)(h.K,{spacing:"2",w:"100%",children:[a&&(0,r.jsx)(tl,{}),(0,r.jsx)(ts,{doc:t})]}),i&&d&&(0,r.jsx)(z.x,{fontSize:"sm",color:"gray.600",children:(0,r.jsx)(w.cC,{id:"8LhjM/",components:{0:(0,r.jsx)(g.z,{variant:"link",as:"span",size:"sm",cursor:"pointer",onClick:()=>{l(),ti.pw.emit(ti.TI.OPEN_PAGE_SETUP,"cards")}})}})}),(0,r.jsx)(e0.V,{onClose:l,onOpen:n,segmentEvent:e5.AA.GAMMA_PRO_UPSELL_EXPORT_SETTINGS_REMOVE_WATERMARK,doc:t})]})},tl=()=>{let e=(0,er.ff)("gray.100","gray.800");return(0,r.jsxs)(F.b,{status:"info",bg:e,children:[(0,r.jsx)(U.z,{color:"gray.400",boxSize:"4",mt:"1",mr:"2.5"}),(0,r.jsx)(w.cC,{id:"lgULOV",values:{GAMMA_ARTIFACT_PROPER_NOUN:K.Yc}})]})},ts=e=>{let{doc:t}=e,i=tt(t),n=(0,er.ff)("gray.200","gray.700"),l=(0,er.ff)("gray.100","gray.800"),s=(0,er.ff)("white","gray.800"),o=(0,er.ff)("trueblue.400","trueblue.200"),a=(0,er.ff)("trueblue.300","trueblue.200");return i.length?(0,r.jsxs)(F.b,{status:"info",bg:l,children:[(0,r.jsx)(U.z,{color:"gray.400",boxSize:"4",mt:"1",mr:"2.5"}),(0,r.jsxs)(h.K,{children:[(0,r.jsx)(z.x,{fontSize:"sm",children:(0,r.jsx)(w.cC,{id:"5qYpE7"})}),(0,r.jsx)(X.U,{children:i.map(e=>{let{name:t,url:i}=e;return(0,r.jsx)(d.xu,{border:"1px",borderColor:n,borderRadius:"md",bg:s,h:"auto",_hover:i?{boxShadow:"var(--chakra-shadows-md)",borderColor:a,color:o}:{},transitionProperty:"common",transitionDuration:"normal",onClick:i?()=>window.open(i,"_blank"):void 0,cursor:i?"pointer":void 0,children:(0,r.jsxs)(X.U,{p:3,paddingRight:4,spacing:4,children:[(0,r.jsx)(z.x,{fontWeight:"medium",children:t}),i&&(0,r.jsx)(y.G,{icon:b.wlW,size:"1x"})]})},"name")})})]})]}):null},to=e=>{let{format:t,doc:i,editor:n,icon:l,accentColor:s,label:o,badge:a}=e,{handleExport:d,exportInProgress:c}=te(i,"share_panel",n,t);return(0,r.jsx)(tn.j,{onClick:d,icon:l,formatLabel:o,accentColor:s,exportInProgress:c,exportInProgressNote:(0,r.jsx)(w.cC,{id:"57bp6s"}),badge:a})};var ta=i(54933),td=i(21979),tc=i(16893);let tu=e=>{let{subtitle:t,tooltipLabel:i,ariaLabel:n,icon:l}=e;return(0,r.jsxs)(X.U,{spacing:1,align:"center",children:[(0,r.jsx)(z.x,{fontSize:"xs",color:"gray.500",children:t}),(0,r.jsx)(k.kH,{label:i,placement:"top","aria-label":n,children:(0,r.jsx)(d.xu,{color:"gray.500",lineHeight:"1",children:(0,r.jsx)(y.G,{size:"xs",icon:l})})})]})},tx=()=>({view:{subtitle:H.ag._({id:"ihPQra"}),tooltip:(0,A.tN)()},comment:{subtitle:H.ag._({id:"qPZYdC"}),tooltip:H.ag._({id:"oKPro/",values:{0:(0,A.tN)()}})},edit:{subtitle:H.ag._({id:"TVFcVE"}),tooltip:H.ag._({id:"2gPY9r",values:{0:(0,A.tN)()}})}}),th=e=>{var t;let{doc:i,isConnected:l,onSharePanelOpen:s,onSharePanelClose:o,canManage:a}=e,c=(0,G.p)(),u=(0,tc.A)(tx),x=null==i?void 0:null===(t=i.accessLinks)||void 0===t?void 0:t[0],[h,m]=(0,E.useState)(!1),[p]=(0,S.kTH)(),g=(null==x?void 0:x.permission)?null==x?void 0:x.permission:n.NoAccess,j=g===n.NoAccess,f=(null==x?void 0:x.token)==="",v=x&&x.permission!==S.y3$.View,k=e=>()=>{let t="updated"===e?H.ag._({id:"Xpw8aE"}):H.ag._({id:"jwO7L7"});c({title:t,status:"success",duration:5e3,isClosable:!0,position:"top"})},I=(0,E.useMemo)(()=>(0,ee.Gn)({docTitle:null==i?void 0:i.title,docId:null==i?void 0:i.id,token:null==x?void 0:x.token,absolute:!0}),[i,null==x?void 0:x.token]);return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(ez,{showDivider:!1,children:a&&(0,r.jsxs)(ez,{showDivider:!1,children:[(0,r.jsx)(eN,{title:(0,r.jsx)(w.cC,{id:"qZu20V"}),subtitle:j?H.ag._({id:"vMZPZT"}):(0,r.jsx)(tu,{subtitle:u[g].subtitle,tooltipLabel:u[g].tooltip,ariaLabel:u[g].subtitle,icon:b.DBf}),img:(0,r.jsx)(et,{icon:b.nNP,showDisabled:j}),isDisabled:!(a&&l),disabledText:e_[n.NoAccess].title(),permissionsControl:(0,r.jsx)(eA,{selected:g,options:[S.y3$.Edit,S.y3$.Comment,S.y3$.View,n.NoAccess],onClick:e=>{let t=null==x?void 0:x.id,r={id:i.id,accessLinks:e===n.NoAccess?[{permission:null}]:[{permission:e}]};p({variables:r,optimisticResponse:{updateDoc:{...r,accessLinks:[{__typename:"AccessLink",id:t||"temp-id",permission:e===n.NoAccess?null:e}],__typename:"Doc"}}}).then(k(e===n.NoAccess?"removed":"updated"))}})}),(0,r.jsxs)(M.U,{animateOpacity:!0,in:!!(null==x?void 0:x.permission),children:[(0,r.jsx)(td.I,{url:I,customLabel:H.ag._({id:"y1eoq1"}),onClick:()=>{(0,eX.J)({docId:i.id,source:"sharePanel",type:"tokenUrl"})}}),!f&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(M.U,{in:h,unmountOnExit:!0,children:(0,r.jsxs)(eG.g,{mt:3,align:"stretch",spacing:4,bg:"gray.50",p:6,borderRadius:"md",children:[(0,r.jsxs)(X.U,{spacing:4,align:"center",children:[(0,r.jsx)(d.xu,{color:"purple.600",children:(0,r.jsx)(y.G,{fixedWidth:!0,icon:ta._1N})}),(0,r.jsx)(z.x,{fontSize:"sm",children:(0,r.jsx)(w.cC,{id:"asiJbp"})})]}),(0,r.jsxs)(X.U,{spacing:4,align:"center",children:[(0,r.jsx)(d.xu,{color:"purple.600",children:(0,r.jsx)(y.G,{fixedWidth:!0,icon:ta.Mdf})}),(0,r.jsx)(z.x,{fontSize:"sm",display:"inline-block",children:(0,r.jsx)(w.cC,{id:"+g8rkW",values:{GAMMA_ARTIFACT_PROPER_NOUN:K.Yc,GAMMA_PROPER_NOUN:K.N6}})})]}),v&&(0,r.jsxs)(X.U,{spacing:4,align:"center",children:[(0,r.jsx)(d.xu,{color:"purple.600",children:(0,r.jsx)(y.G,{fixedWidth:!0,icon:ta.FKd})}),(0,r.jsx)(z.x,{fontSize:"sm",children:(0,r.jsx)(w.cC,{id:"NSCwrX",values:{GAMMA_PROPER_NOUN:K.N6,selectedAccessLinkPermission:g},components:{0:(0,r.jsx)(z.x,{as:"span",fontWeight:"bold"})}})})]})]})}),(0,r.jsx)(C.k,{justify:"center",alignItems:"center",my:3,children:(0,r.jsxs)(X.U,{spacing:1,as:"button",onClick:()=>m(!h),children:[h?(0,r.jsx)(y.G,{fixedWidth:!0,size:"xs",icon:b.onQ}):(0,r.jsx)(y.G,{fixedWidth:!0,size:"xs",icon:b.r8p}),(0,r.jsx)(z.x,{lineHeight:"normal",marginLeft:"auto",marginRight:"auto",fontSize:"xs",fontWeight:"medium",children:h?(0,r.jsx)(w.cC,{id:"BRvU04"}):(0,r.jsx)(w.cC,{id:"l0Ck42"})})]})})]})]})]})}),(0,r.jsx)(e0.V,{onClose:o,onOpen:s,segmentEvent:eY.AA.GAMMA_PRO_UPSELL_SHARE_SETTINGS_REMOVE_WATERMARK,doc:i})]})},tm=e=>{let{visibility:t,isFromOtherOrg:i}=e,n=(0,er.ff)("white","var(--chakra-colors-gray-900)");return(0,r.jsxs)(r.Fragment,{children:[i&&(0,r.jsx)(y.G,{icon:b.Gg}),(0,r.jsxs)(d.xu,{as:"span",className:"fa-layers fa-fw",children:[(0,r.jsx)(y.G,{icon:t.primaryIcon}),t.secondaryIcon&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(y.G,{icon:ta.diR,color:n,transform:"down-6 right-6"}),(0,r.jsx)(y.G,{icon:t.secondaryIcon,transform:"shrink-7 right-6 down-6"})]})]})]})},tp=e=>{var t;let{doc:i,editor:n,isSharePanelOpen:G,onSharePanelClose:z,onSharePanelOpen:M,onAnalyticsPanelOpen:L,view:F,setView:U,showAnalytics:W=!0,showSharePublic:H=!0,showEmbed:V=!0,showSiteSettings:B=!0}=e,K=(0,D.Yy)(),q=(0,_._O)(),{openSiteSettings:Y}=(0,N.AA)(),Z=(0,E.useRef)(!1),{user:J,currentWorkspace:X}=(0,R.SE)(),{isConnected:Q}=(0,S.$gs)(),$=(0,R.py)("manage",i),ee=(0,R.py)("comment",i),{isOpen:et,onClose:ei}=(0,I.M)({id:"create-site-modal"}),en=i&&i.site&&i.site.routes.length>1,er=i&&(0,P.Vr)(i.site),el=(0,A.ei)({showSharePublic:H&&$&&!er,showEmbed:V&&$&&!er}),es=$&&L&&i&&!er,[eo,ea]=(0,E.useState)(()=>()=>Promise.resolve()),ed=(0,E.useCallback)(()=>{z(),ei()},[z,ei]),ec=i?en?i.site.name:i.title:null,eu=(0,E.useCallback)(()=>{eo().then(()=>{U("invite"),z()},()=>{console.debug("[handleSharePanelClose] CollaboratorSearchBar rejected \uD83D\uDC4E\uD83C\uDFFC")})},[U,z,eo]),ex=(0,E.useCallback)(()=>{L&&(z(),L())},[L,z]),eh=(0,E.useCallback)(()=>{Y("domains"),z()},[z,Y]);if(!J)return null;let em=(0,T.h_)(i,J),ep=em?(0,T.Xp)()[em]:null,eg=(0,T.Gi)(i,X);if(i&&null===ep)return console.error("[SharePanel] Unknown VisibilityValue for doc",i),null;let ej=null==i?void 0:null===(t=i.organization)||void 0===t?void 0:t.id;!i||ej||Z.current||(console.error("[SharePanelModal] Doc unexpectedly doesnt have a workspaceId",{docId:i.id,organization:i.organization}),Z.current=!0);let ef=K?"gray.400":"gray.600",ev=K?"whiteAlpha.200":"trueblue.50",eC=K?"trueblue.200":"trueblue.500";return(0,r.jsxs)(k.Wk,{isDark:K,children:[(0,r.jsxs)(l.u_,{onEsc:eu,isOpen:G,onClose:z,trapFocus:!1,size:"3xl",returnFocusOnClose:!1,children:[(0,r.jsx)(s.Z,{}),(0,r.jsxs)(o.h,{color:K?"white":"gray.800",bg:K?"gray.900":"white","data-share-panel-modal-content":!0,mx:2,borderColor:K?"gray.700":"gray.200",children:[(0,r.jsxs)(a.x,{children:[ep&&(0,r.jsx)(d.xu,{as:"span",mr:3,children:(0,r.jsx)(tm,{visibility:ep,isFromOtherOrg:eg})}),ec?(0,r.jsx)(w.cC,{id:"sit2to",values:{displayName:ec}}):(0,r.jsx)(w.cC,{id:"Z8lGw6"})]}),(0,r.jsx)(c.o,{"data-share-panel-close-button":!0,onClick:e=>{e.preventDefault(),eu()}}),(0,r.jsx)(u.i,{}),i?(0,r.jsx)(x.f,{"data-testid":"share-panel-modal-body",children:i&&ej&&(0,r.jsxs)(r.Fragment,{children:[$&&(0,r.jsxs)(h.K,{direction:"row",children:[(0,r.jsx)(p.E,{my:4,children:el.map(e=>{let{viewKey:t,icon:i,ariaLabel:n,label:l,isBeta:s}=e,o=F===t;return(0,r.jsx)(p.U,{children:(0,r.jsx)(g.z,{leftIcon:(0,r.jsx)(y.G,{icon:i,"aria-label":n}),variant:"ghost",size:"sm",fontWeight:"600",bg:o?ev:"transparent",color:o?eC:ef,onClick:()=>U(t),rightIcon:s?(0,r.jsx)(j.C,{colorScheme:"green",children:(0,r.jsx)(w.cC,{id:"YBt9YP"})}):void 0,children:l})},t)})}),B&&!(null==i?void 0:i.site)&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(f.L,{}),(0,r.jsx)(g.z,{onClick:eh,variant:"plain",size:"sm",my:4,children:(0,r.jsx)(w.cC,{id:"wzvDe1"})})]})]}),(!ee||"invite"==F)&&(0,r.jsx)(eq,{workspaceId:ej,doc:i,user:J,setVerifySearchDone:ea,canManage:$,isFromOtherOrg:eg,isMultipage:en,isDark:K}),$&&"public"===F&&(0,r.jsx)(th,{doc:i,isConnected:Q,onSharePanelOpen:M,onSharePanelClose:z,canManage:$}),$&&"embed"===F&&(0,r.jsx)(e1,{doc:i,onSharePanelOpen:M,onSharePanelClose:z}),ee&&"export"===F&&(0,r.jsx)(tr,{doc:i,editor:n,onSharePanelOpen:M,onSharePanelClose:z,isMultipage:en})]})}):(0,r.jsx)(x.f,{pb:6,"data-testid":"share-panel-modal-body",children:(0,r.jsxs)(h.K,{children:[(0,r.jsx)(m.O,{height:"55px"}),(0,r.jsx)(m.O,{height:"55px"}),(0,r.jsx)(m.O,{height:"55px"}),(0,r.jsx)(m.O,{height:"55px"})]})}),(0,r.jsx)(u.i,{}),(0,r.jsx)(v.m,{children:(0,r.jsxs)(C.k,{justifyContent:"space-between",flex:1,children:[W&&es&&(0,r.jsx)(g.z,{isDisabled:!Q,leftIcon:(0,r.jsx)(y.G,{icon:b.Ma4}),variant:"ghost",onClick:ex,children:(0,r.jsx)(w.cC,{id:"YaUqUV"})}),(0,r.jsx)(f.L,{}),(0,r.jsx)(g.z,{onClick:e=>{e.preventDefault(),eu()},variant:"solid",children:(0,r.jsx)(w.cC,{id:"DPfwMq"})})]})})]})]}),(null==i?void 0:i.id)&&q&&$&&(0,r.jsx)(O.M,{isOpen:et,onClose:ed,existingDoc:i})]})}},8174:function(e,t,i){"use strict";i.d(t,{Z:function(){return d}});var n=i(52322),r=i(70065),l=i(5879),s=i(2784),o=i(93202),a=i(94199);let d=()=>{let e=(0,r.p)(),[t]=(0,o.yx3)({refetchQueries:["GetChannelDocActivity","GetChannels"]}),i=(0,s.useCallback)(i=>{let{docId:r,doc:s,channel:d,existingChannels:c=[]}=i,u=r||(null==s?void 0:s.id);if(!u){console.error("Invalid docid");return}let x={input:{docId:u,sharing:[{op:o.Bdm.Add,path:"/channels",value:[{channelId:d.id}]}]}},h=(null==s?void 0:s.title)||a.Yc,m=[...c,{id:d.id,slug:d.slug,name:d.name,permission:o.y3$.Comment}].sort((e,t)=>e.slug.localeCompare(t.slug,"en"));t({variables:x,update:(e,t)=>{let{data:i}=t;e.writeFragment({id:"Doc:".concat(u),fragment:o.IiT,data:null==i?void 0:i.updatePublicChannels})},optimisticResponse:{updatePublicChannels:{id:x.input.docId,channels:m}}}).then(()=>{e({title:(0,n.jsx)(l.cC,{id:"7hDHpt",values:{title:h}}),description:(0,n.jsx)(l.cC,{id:"A2xcFn",values:{GAMMA_ARTIFACT_PROPER_NOUN:a.Yc,0:d.name}}),status:"success",duration:5e3,isClosable:!0,position:"top"})},t=>{e({title:(0,n.jsx)(l.cC,{id:"bLdU0Q",values:{title:h,0:d.name}}),description:t.message,duration:null,status:"error",isClosable:!0,position:"top"})})},[t,e]),d=(0,s.useCallback)((i,r)=>{var s;if(!r)return;let d={input:{docId:i.id,sharing:[{op:o.Bdm.Remove,path:"/channels",value:[{channelId:r}]}]}};t({variables:d,update:(e,t)=>{let{data:n}=t;e.writeFragment({id:"Doc:".concat(i.id),fragment:o.P6u,data:null==n?void 0:n.updatePublicChannels})},optimisticResponse:{updatePublicChannels:{id:d.input.docId,channels:null===(s=i.channels)||void 0===s?void 0:s.filter(e=>e.id!==r)}}}).then(()=>{e({title:(0,n.jsx)(l.cC,{id:"qsnpV6",values:{GAMMA_ARTIFACT_PROPER_NOUN:a.Yc}}),status:"success",duration:1e4,position:"top"})}).catch(t=>{e({title:(0,n.jsx)(l.cC,{id:"+yMzgs"}),description:t.message,status:"error",duration:3e3,isClosable:!0,position:"top"}),console.error("[addRemoveDocChannel] Error removing channel:",t.message)})},[t,e]);return{addDocChannel:i,removeDocChannel:d}}},16710:function(e,t,i){"use strict";i.d(t,{Gi:function(){return c},Xp:function(){return h},h_:function(){return m},nZ:function(){return j},qw:function(){return p},uG:function(){return f}});var n=i(52322),r=i(42946),l=i(5879),s=i(87254),o=i(94199),a=i(30579),d=i(78462);let c=(e,t)=>{var i;return(null==e?void 0:null===(i=e.organization)||void 0===i?void 0:i.id)!==(null==t?void 0:t.id)},u={PRIVATE:"private",LINK_VIEW:"link-view",LINK_COMMENT:"link-comment",LINK_EDIT:"link-edit",INDIVIDUAL:"individual",ORG_VIEW:"org-view",ORG_COMMENT:"org-comment",ORG_EDIT:"org-edit",ORG_MANAGE:"org-manage",CHANNEL_PRIVATE:"channel-private",PUBLIC:"public"},x=[u.ORG_VIEW,u.ORG_COMMENT,u.ORG_EDIT,u.ORG_MANAGE],h=()=>({[u.PRIVATE]:{title:()=>s.ag._({id:"IZiYjM",values:{GAMMA_ARTIFACT_PROPER_NOUN:o.Yc}}),subtitle:()=>s.ag._({id:"nHujJB",values:{GAMMA_ARTIFACT_PROPER_NOUN:o.Yc}}),primaryIcon:r.byT},[u.LINK_VIEW]:{title:()=>s.ag._({id:"Pb5t/X",values:{GAMMA_ARTIFACT_PROPER_NOUN:o.Yc}}),primaryIcon:r.nNP},[u.LINK_COMMENT]:{title:()=>s.ag._({id:"FUtIA5",values:{GAMMA_ARTIFACT_PROPER_NOUN:o.Yc}}),primaryIcon:r.nNP},[u.LINK_EDIT]:{title:()=>s.ag._({id:"tNOSZi",values:{GAMMA_ARTIFACT_PROPER_NOUN:o.Yc}}),primaryIcon:r.nNP},[u.INDIVIDUAL]:{title:()=>s.ag._({id:"IB6oAl",values:{GAMMA_ARTIFACT_PROPER_NOUN:o.Yc}}),subtitle:e=>"".concat(e," can access this ").concat(o.Yc,"."),primaryIcon:r.ILF},[u.ORG_VIEW]:{title:e=>s.ag._({id:"S+losC",values:{GAMMA_ARTIFACT_PROPER_NOUN:o.Yc,org:e}}),primaryIcon:r.P88,secondaryIcon:r.Mdf},[u.ORG_COMMENT]:{title:e=>s.ag._({id:"acq2w5",values:{GAMMA_ARTIFACT_PROPER_NOUN:o.Yc,org:e}}),primaryIcon:r.P88,secondaryIcon:r.Mzg},[u.ORG_EDIT]:{title:e=>s.ag._({id:"FFdz7p",values:{GAMMA_ARTIFACT_PROPER_NOUN:o.Yc,org:e}}),primaryIcon:r.P88,secondaryIcon:r.TzT},[u.ORG_MANAGE]:{title:e=>s.ag._({id:"3yNlmN",values:{GAMMA_ARTIFACT_PROPER_NOUN:o.Yc,org:e}}),primaryIcon:r.P88},[u.CHANNEL_PRIVATE]:{title:()=>s.ag._({id:"Tw6Jzi"}),primaryIcon:a.Ty},[u.PUBLIC]:{title:()=>s.ag._({id:"NMHF69",values:{GAMMA_ARTIFACT_PROPER_NOUN:o.Yc}}),primaryIcon:r.Xj}}),m=(e,t)=>{var i;if(!e)return null;let n=(null==e?void 0:e.publicAccess)?u.PUBLIC:(null==e?void 0:e.orgAccess)==="manage"?u.ORG_MANAGE:(null==e?void 0:e.orgAccess)==="edit"?u.ORG_EDIT:(null==e?void 0:e.orgAccess)==="comment"?u.ORG_COMMENT:(null==e?void 0:e.orgAccess)==="view"?u.ORG_VIEW:(null==e?void 0:e.channels)&&e.channels.some(e=>null!==e.permission)?u.CHANNEL_PRIVATE:(null==e?void 0:e.collaborators)&&(null==e?void 0:null===(i=e.collaborators)||void 0===i?void 0:i.length)>1?u.INDIVIDUAL:(null==e?void 0:e.accessLinks)&&e.accessLinks.some(e=>"view"===e.permission&&""===e.token)?u.LINK_VIEW:(null==e?void 0:e.accessLinks)&&e.accessLinks.some(e=>"comment"===e.permission&&""===e.token)?u.LINK_COMMENT:(null==e?void 0:e.accessLinks)&&e.accessLinks.some(e=>"edit"===e.permission&&""===e.token)?u.LINK_EDIT:f(e,t)?u.PRIVATE:u.INDIVIDUAL;return n},p=e=>(null==e?void 0:e.publicAccess)?s.ag._({id:"gJUdlS",values:{GAMMA_ARTIFACT_PROPER_NOUN:o.Yc}}):(null==e?void 0:e.orgAccess)?s.ag._({id:"5Ma3Lv",values:{GAMMA_ARTIFACT_PROPER_NOUN:o.Yc}}):s.ag._({id:"QbKKqw",values:{GAMMA_ARTIFACT_PROPER_NOUN:o.Yc}}),g=(e,t,i)=>{var s,o;if(!t)return[];let h=(null==e?void 0:null===(s=e.channels)||void 0===s?void 0:s.map(e=>{let{id:t,name:i,slug:n}=e;return{id:t,label:i,href:(0,d.j)({id:t,slug:n}),icon:a.Ty}}))||[],p=m(e,t),g=c(e,i),j=g?[{id:"shared-from-external-org",label:(null==e?void 0:null===(o=e.organization)||void 0===o?void 0:o.name)?(0,n.jsx)(l.cC,{id:"lFZJ+N",values:{0:e.organization.name}}):(0,n.jsx)(l.cC,{id:"qn35Ez"}),icon:r.Gg,color:"gray.500"}]:[];if(p===u.PUBLIC)return[{id:"public",label:(0,n.jsx)(l.cC,{id:"7d1a0d"}),icon:r.Xj,color:"gray.500"},...j,...h];if(p===u.PRIVATE)return[{id:"private",label:(0,n.jsx)(l.cC,{id:"zwBp5t"}),icon:r.byT,color:"gray.500"},...j];if(p===u.INDIVIDUAL){let i=(e.collaborators||[]).filter(e=>e.user.id!==t.id).length;return[{id:"collaborators",label:(0,n.jsx)(l.cC,{id:"o2NxSP",values:{numCollaborators:i}}),icon:r.ILF,color:"gray.500"},...j]}return g?j:p&&x.includes(p)?[{id:"workspace",label:(0,n.jsx)(l.cC,{id:"0Gd0NU"}),icon:r.P88,color:"gray.500"},...j,...h]:h},j=e=>{let{doc:t,user:i,currentWorkspace:n,channelToExclude:r}=e;return g(t,i,n).filter(e=>e.id!==r)},f=(e,t)=>{var i;return e&&t&&!e.orgAccess&&!e.publicAccess&&(null===(i=e.createdBy)||void 0===i?void 0:i.id)===t.id}},46759:function(e,t,i){"use strict";i.d(t,{M:function(){return _}});var n=i(52322),r=i(70065),l=i(92850),s=i(26468),o=i(22226),a=i(54326),d=i(2338),c=i(97217),u=i(43297),x=i(35183),h=i(97166),m=i(85573),p=i(50250),g=i(75768),j=i(62614),f=i(94523),v=i(5879),C=i(87254),b=i(5632),y=i(2784),k=i(93202),w=i(83669),E=i(15041),S=i(36651),I=i(78462);let _=e=>{var t;let{isOpen:i,onClose:_,existingDoc:A}=e,T=(0,r.p)(),O=(0,y.useRef)(null),[P,D]=(0,y.useState)(!1),{currentWorkspace:R}=(0,S.SE)(),[N,G]=(0,y.useState)(""),[z]=(0,k.V$$)(),[M]=(0,k.So6)(),L=(0,w.b)(),{push:F}=(0,b.useRouter)(),U=(0,y.useCallback)(async()=>{if(null==A?void 0:A.id){await (0,E.iL)(A.id),D(!0);try{var e,t;let{data:i}=await M({variables:{duplicateDocInput:{sourceDocId:A.id,source:k.L17.SitesCopyToSite,title:(null==A?void 0:A.title)||C.ag._({id:"wja8aL"}),orgId:null==R?void 0:R.id,orgAccess:k.y3$.Manage,themeId:null}}}),n=null==i?void 0:null===(e=i.duplicateDoc)||void 0===e?void 0:e.id;if(!n){console.error("[CreateSiteModal] Failed to duplicate doc with id",A.id);return}let{data:r}=await z({variables:{input:{workspaceId:null==R?void 0:R.id,name:N,routes:[{docId:n,path:"/"}],themeId:null==A?void 0:null===(t=A.theme)||void 0===t?void 0:t.id}}}),l=null==r?void 0:r.createSite;if(!l){console.error("[CreateSiteModal] Failed to create site, no site returned");return}let s=(0,I.yQ)({docId:n});F(s),_()}catch(e){T({status:"error",title:(0,n.jsx)(v.cC,{id:"Pdboh4"}),description:(0,n.jsx)(v.cC,{id:"c6YG3V"})}),console.error(e)}D(!1)}},[z,null==R?void 0:R.id,M,null==A?void 0:A.id,null==A?void 0:null===(t=A.theme)||void 0===t?void 0:t.id,null==A?void 0:A.title,N,F,T]),W=(0,y.useCallback)(async()=>{D(!0);let{data:e}=await z({variables:{input:{workspaceId:null==R?void 0:R.id,name:N,routes:[]}}}),t=null==e?void 0:e.createSite;if(!t){console.error("[CreateSiteModal] Failed to create site, no site returned");return}L({siteId:null==t?void 0:t.id,routes:null==t?void 0:t.routes,title:"Home",path:"/"})},[L,z,null==R?void 0:R.id,N]),H=(0,y.useCallback)(async()=>(null==A?void 0:A.id)?U():W(),[null==A?void 0:A.id,U,W]),V=N.length>0;return(0,n.jsx)(f.Wk,{isDark:!1,children:(0,n.jsxs)(l.u_,{isOpen:i,onClose:_,initialFocusRef:O,size:"2xl",children:[(0,n.jsx)(s.Z,{}),(0,n.jsxs)(o.h,{children:[(0,n.jsx)(a.x,{children:(0,n.jsx)(v.cC,{id:"JHMOcq"})}),(0,n.jsx)(d.o,{}),(0,n.jsx)(c.f,{children:(0,n.jsx)(u.K,{spacing:4,children:(0,n.jsxs)(x.NI,{children:[(0,n.jsx)(h.l,{children:(0,n.jsx)(v.cC,{id:"Lve3H6"})}),(0,n.jsx)(m.I,{ref:O,placeholder:C.ag._({id:"tlD7N3"}),onChange:e=>{G(e.target.value)},onKeyDown:e=>{V&&"Enter"===e.key&&H()}})]})})}),(0,n.jsx)(p.m,{children:(0,n.jsxs)(g.h,{children:[(0,n.jsx)(j.z,{variant:"ghost",onClick:_,children:(0,n.jsx)(v.cC,{id:"dEgA5A"})}),(0,n.jsx)(j.z,{variant:"solid",onClick:H,isDisabled:!V,isLoading:P,children:(0,n.jsx)(v.cC,{id:"JHMOcq"})})]})})]})]})})}},83669:function(e,t,i){"use strict";i.d(t,{b:function(){return x}});var n=i(5632),r=i(2784),l=i(93202),s=i(84405),o=i(56356),a=i(41425),d=i(23147),c=i(21733),u=i(78462);let x=()=>{let{user:e,currentWorkspace:t}=(0,c.SE)(),[i]=(0,l.CsQ)(),[x]=(0,l.qbt)(),{push:h}=(0,n.useRouter)(),m=(0,r.useCallback)(async n=>{let{title:r,path:c,siteId:m,routes:p}=n;if(!c.startsWith("/")){console.error("[AddNewPageToSite] Path must start with /. Aborting.",c);return}if(!(null==t?void 0:t.id)||!m||!p)return;let g=(0,o.R$)({settings:{defaultFullBleed:"full"},docFlags:{cardLayoutsEnabled:!0}}),j=(0,d.qI)(g),{data:f}=await i({variables:{workspaceId:null==t?void 0:t.id,title:r,source:l.L17.SitesAddPage,initialContent:{ydoc:j,schemaVersion:a.bI,editors:[null==e?void 0:e.id]},orgAccess:l.y3$.Manage,mainPage:"/"===c}}),v=null==f?void 0:f.createDoc.id;if((0,s.Q)({doc_id:v,source:l.L17.SitesAddPage,channel:null}),!m||!v){console.error("[AddPageModal] Site or doc id is undefined. Cannot add route.");return}await x({variables:{input:{siteId:m,docId:v,path:c,offline:!1}},refetchQueries:["GetSite"]});let C=(0,u.yQ)({docId:v});return console.debug("[AddPageModal] Doc created. Adding route then navigating to editor",v),await h(C),v},[null==t?void 0:t.id,e,i,x,h]);return m}},56745:function(e,t,i){"use strict";i.d(t,{z:function(){return t_}});var n=i(52322),r=i(70065),l=i(32981),s=i(26468),o=i(73751),a=i(54326),d=i(38035),c=i(77533),u=i(28535),x=i(75768),h=i(62614),m=i(97217),p=i(2338),g=i(42822),j=i(81540),f=i(94523),v=i(5879),C=i(87254),b=i(18149),y=i.n(b),k=i(2784),w=i(43997),E=i(93202),S=i(11050),I=i(47968),_=i(36651),A=i(93441),T=i(47749),O=i(36371),P=i(73582),D=i(2969),R=i(29117),N=i(3181),G=i(13272),z=i(84010),M=i(42946),L=i(54933),F=i(49929),U=i(66625),W=i(94199),H=i(91994),V=i(56356),B=i(46409),K=i(49354),q=i(96933),Y=i(20678),Z=i(29318),J=i(887),X=i(66479),Q=i(20437),$=i(30233),ee=i(26838);let et=(0,k.memo)(e=>{let{theme:t,onThemeClick:i,onSelectClick:r}=e,{data:l,loading:s}=(0,E.BCl)({variables:{workspaceId:null,archived:!1},fetchPolicy:"cache-first",nextFetchPolicy:"cache-only"}),o=(null==l?void 0:l.themes)||[];return(0,n.jsxs)(n.Fragment,{children:[s?(0,n.jsx)($.S,{size:4}):(0,n.jsx)(u.xu,{flex:1,p:6,children:(0,n.jsx)(Q.M,{columns:{base:1,lg:2},spacing:1,children:[...o].sort(X.qb).map(e=>(0,n.jsx)(ee.o,{type:"standard",theme:e,isChecked:e.id===t.id,onThemeClicked:i,variant:"ghost"},e.id))})}),(0,n.jsx)(d.k,{pos:"sticky",bottom:0,px:6,py:4,alignItems:"center",bg:"white",children:(0,n.jsx)(h.z,{"data-testid":"select-this-theme",flex:1,variant:"solid",leftIcon:(0,n.jsx)(F.G,{icon:M.JyM}),onClick:r,children:(0,n.jsx)(v.cC,{id:"UJfhAS"})})})]})});var ei=i(5200),en=i(38045),er=i(25925),el=i(50521);let es=(0,en.E)(u.xu),eo={enter:e=>({position:"absolute",width:"100%",x:"push"===e?"100%":"-100%",opacity:0}),center:{width:"100%",position:"static",x:0,opacity:1},exit:e=>({width:"100%",position:"absolute",x:"push"===e?"-100%":"100%",opacity:0})},ea=e=>{let{containerProps:t,motionProps:i,InitialComponent:r}=e,[l,s]=(0,k.useState)(r?[r]:[]),o=(0,k.useRef)("push"),a=(0,k.useCallback)(()=>{o.current="pop",s([...l.slice(0,-1)])},[l]),d=(0,k.useCallback)(e=>{o.current="push",s([...l,e])},[l]),c=l[l.length-1];return((0,k.useEffect)(()=>{0===l.length&&r&&d(r)},[r,d,l]),c)?(0,n.jsx)(el.m.Provider,{value:{push:d,pop:a},children:(0,n.jsx)(u.xu,{...t||{},position:"relative",children:(0,n.jsx)(er.M,{initial:!1,custom:o.current,children:(0,n.jsx)(es,{variants:eo,custom:o.current,initial:"enter",animate:"center",exit:"exit",transition:{default:{duration:.2}},...i||{},children:(0,n.jsx)(c,{})},l.length)})})}):null};var ed=i(25585),ec=i(97010),eu=i(82655),ex=i(42111),eh=i(43297),em=i(35183),ep=i(97166),eg=i(82713),ej=i(24213),ef=i(71272);let ev=e=>e.replace(/^\d+\.\s*/,"").replaceAll(/\s/g,"-").toLowerCase(),eC={width:"100%",variant:"unstyled",borderRadius:"revert",height:"revert",justifyContent:"flex-start"},eb=(0,k.memo)(e=>{let{icon:t,label:i,onClick:r,...l}=e;return(0,n.jsxs)(d.k,{"data-testid":"theme-config-menu-button-".concat(ev(i)),as:h.z,...eC,onClick:r,p:4,borderBottomWidth:"1px",_hover:{bg:"trueblue.50"},...l,children:[(0,n.jsx)(u.xu,{color:"trueblue.500",children:(0,n.jsx)(F.G,{icon:t,fixedWidth:!0})}),(0,n.jsx)(u.xu,{fontWeight:"600",ml:2,mr:"auto",children:i}),(0,n.jsx)(u.xu,{color:"gray.600",children:(0,n.jsx)(F.G,{icon:M._tD})})]})});eb.displayName="ThemeConfigNavigationMenuButton";let ey=e=>{let{label:t,onBackClick:i,children:r}=e;return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(d.k,{"data-testid":"theme-config-back-button",as:h.z,...eC,p:4,borderBottomWidth:"1px",bg:"gray.50",_hover:{bg:"gray.200"},onClick:i,children:[(0,n.jsx)(u.xu,{color:"gray.600",mr:2,children:(0,n.jsx)(F.G,{icon:M.A35})}),(0,n.jsx)(u.xu,{fontWeight:"600",children:t})]}),(0,n.jsx)(u.xu,{children:r})]})};var ek=i(47443),ew=i(52929),eE=i(37164),eS=i(99787),eI=i(16494),e_=i(29596),eA=i(40520),eT=i(64743);let eO=e=>(0,eT.bH)(e)&&(0,eT.Rr)(e),eP=e=>{let{setBackground:t,background:i,defaultMessage:r,isDark:l,isValidSource:s}=e,[o,a]=(0,k.useState)(eS.hq.key),d=e_.ah[o],c=(0,k.useCallback)(e=>s?s(e)&&eO(e):eO(e),[s]),u=(0,k.useCallback)(e=>{t({...i,...e})},[i,t]);return(0,n.jsx)(eA.O,{isDark:l,isValidSource:c,defaultMessage:r,currentBackground:i,currentSource:d,updateCurrentBackground:u,setCurrentSourceKey:a,currentSourceKey:o,editType:"themeBackground"})};var eD=i(13793);i(38095);var eR=i(17993),eN=i(75009),eG=i(32899),ez=i(91710),eM=i(97253),eL=i(87205);i(65331),i(41779);let eF=e=>{let{uploadedImages:t,setUploadedImages:i,setIsLoading:l}=e,s=(0,H.CG)(I.KV),{currentWorkspace:o}=(0,_.SE)(),{orgId:a,templateId:d}=(0,Z.Ds)(s||(null==o?void 0:o.id),"themeBackground"),u=(0,r.p)(),[x,h]=(0,k.useState)(0),[m,p]=(0,k.useState)(!1),g=(0,k.useCallback)(e=>{let{file:t,tempUrl:n}=e;l(!0);let r=n;if(t.type&&(0,eL.Ns)(t.type)){let e="HEIC_tempId_".concat((0,eE.x0)());r=e}i(e=>[...e,{tempUrl:r,name:t.name,src:null,showPlaceholder:!0,uploadStatus:eI.D.Uploading}])},[l,i]),j=(0,k.useCallback)(e=>{i(t=>{let i=t.map(t=>t.name===e.name?{...t,...(0,eM.gM)({result:e,isError:!1})}:t);return i}),h(e=>e+1)},[i]);(0,k.useEffect)(()=>{l(!t.every(e=>"optimized"===e.uploadResultStep))},[l,t]);let b=(0,k.useCallback)(()=>{u({title:"Error uploading images, please try again",status:"error",duration:3e3,isClosable:!0}),h(e=>e+1)},[u]),y=(0,k.useMemo)(()=>{if(!a)throw Error("Tried uploading an image with no orgId");return eS.ND.createUppyInstance(a,{onUploadStart:g,onUploadComplete:j,onUploadFailed:b},"themeBackground",50,"image",d)},[x,a,g,j,b,d]),w=()=>(0,n.jsx)(n.Fragment,{children:a&&(0,n.jsx)(ez.v0,{width:"100%",height:"100%",note:C.ag._({id:"x4Ts51"}),uppy:y,locale:{strings:{browse:C.ag._({id:"wZ9s+A"})}}})});return t.length>0?(0,n.jsxs)(eR.g,{align:"flex-start",spacing:4,onDragEnter:e=>{e.preventDefault(),e.stopPropagation(),p(!0)},children:[m&&(0,n.jsx)(w,{}),(0,n.jsx)(Q.M,{gap:2,columns:{base:2,"2xl":3},children:t.map(e=>{let{src:t,meta:r,name:l,tempUrl:s}=e||{},o=t?(0,eL.aN)(t,{width:500}):void 0;return(0,n.jsxs)(eh.K,{spacing:1,position:"relative",role:"group",children:[(0,n.jsx)(eN.E,{src:o||s||"",alt:"",ignoreFallback:!0,borderRadius:"md"}),(0,n.jsx)(f.kH,{label:(0,n.jsx)(v.cC,{id:"ZTnXof"}),placement:"top",children:(0,n.jsx)(eG.h,{"aria-label":C.ag._({id:"Rz0Yis"}),icon:(0,n.jsx)(F.G,{icon:M.XAH}),onClick:()=>{i(t=>{let i=t.filter(t=>t.name!==e.name);return i})},isRound:!0,position:"absolute",top:1,right:1,size:"sm",color:"red.600",opacity:0,_hover:{color:"red.600"},_groupHover:{opacity:1}})}),r&&r.width&&r.height&&(0,n.jsxs)(c.x,{fontSize:"xs",children:[r.width,"\xd7",r.height,"px"]}),l&&(0,n.jsx)(c.x,{fontSize:"xs",lineHeight:4,children:l})]},e.tempUrl)})})]}):(0,n.jsx)(w,{})};var eU=i(53701);let eW=e=>e.backgroundType===eD.E.IMAGE,eH={...K.Gx,accentId:void 0},eV=e=>{let{theme:t,updateTheme:i}=e,[r,l]=(0,k.useState)(!1),[s,o]=(0,k.useState)(null),[a,d]=(0,k.useState)(null),u=s&&!!s.accentId,m=t.config.accentBackgrounds,p=(0,ex.ye)("bulkUploadAccentImages"),g=(0,k.useCallback)(()=>{d(eH),o(eH)},[]),j=(0,k.useCallback)(()=>{o(null),d(null)},[]),f=(0,k.useCallback)(e=>{let t=e||s;if(!t)return;let n={...t,source:T.cx,originalSource:t.source,accentId:(0,eE.x0)()},r=m||[];if(u){let e=r.findIndex(e=>e.accentId===s.accentId);if(-1===e){console.warn("[AccentImagePicker] Could not find accent image to edit");return}i({accentBackgrounds:[...r.slice(0,e),n,...r.slice(e+1)]})}else i({accentBackgrounds:[...r,n]});j()},[m,s,u,j,i]),b=(0,k.useCallback)(e=>{let t=(m||[]).filter(t=>t.accentId!==e.accentId);i({accentBackgrounds:t})},[m,i]),w=(0,k.useCallback)(e=>{let t={...e,source:e.originalSource};d(t),o({...e,source:e.originalSource})},[]),E=(0,k.useCallback)(e=>{if(e.source===eS.hq.key||e.source===eS.$5.key){f(e);return}if(e.source===eS.in.key){var t,i,n,r;(null===(t=e.image)||void 0===t?void 0:t.uploadStatus)===eI.D.Uploading?l(!0):(null===(i=e.image)||void 0===i?void 0:i.uploadStatus)===eI.D.Done&&(null===(n=e.image)||void 0===n?void 0:n.uploadResultStep)==="optimized"?l(!1):(null===(r=e.image)||void 0===r?void 0:r.uploadStatus)===eI.D.Error&&l(!1)}o(e)},[f]),S=(0,k.useMemo)(()=>!y()(s,a),[s,a]),I=(0,X.wj)(t),[_,A]=(0,k.useState)([]),[O,P]=(0,k.useState)(!1),D=(0,k.useCallback)(()=>{A([]),P(!1)},[]),R=(0,k.useCallback)(()=>{let e=_.map(e=>({type:eD.E.IMAGE,source:T.cx,originalSource:"image.custom",image:e,accentId:(0,eE.x0)()})),t=m||[];i({accentBackgrounds:[...e,...t]}),D()},[_,m,i,D]);return s?(0,n.jsxs)(eh.K,{p:6,children:[(0,n.jsx)(eP,{setBackground:E,background:s,isValidSource:eW,defaultMessage:(0,n.jsxs)(ek.b,{children:[(0,n.jsx)(ew.z,{}),(0,n.jsx)(v.cC,{id:"VPwqDS"})]}),isDark:I}),(0,n.jsxs)(x.h,{pt:6,display:"flex",children:[(0,n.jsx)(h.z,{variant:"ghost",onClick:j,children:(0,n.jsx)(v.cC,{id:"dEgA5A"})}),(0,n.jsx)(h.z,{variant:"solid",onClick:()=>f(),isLoading:r,isDisabled:!S,flex:1,children:u?(0,n.jsx)(v.cC,{id:"tfDRzk"}):(0,n.jsx)(v.cC,{id:"B6vyEa"})})]})]}):(0,n.jsxs)(eh.K,{spacing:6,children:[(0,n.jsxs)(eh.K,{spacing:3,p:6,children:[(0,n.jsx)(h.z,{leftIcon:(0,n.jsx)(F.G,{icon:M.r8p}),alignSelf:"flex-start",onClick:g,children:(0,n.jsx)(v.cC,{id:"5phU36"})}),(0,n.jsxs)(ek.b,{fontSize:"xs",children:[(0,n.jsx)(ew.z,{}),(0,n.jsx)(c.x,{children:(0,n.jsx)(v.cC,{id:"M6esHH"})})]}),p&&(0,n.jsx)(eF,{uploadedImages:_,setUploadedImages:A,setIsLoading:P}),m&&0!=m.length&&(0,n.jsx)(eU.U,{accentImages:m,isDark:I,handleDelete:b,handleItemClick:w,editType:"themeBackground"})]}),_.length>0&&(0,n.jsxs)(x.h,{display:"flex",w:"100%",position:"sticky",bottom:0,left:0,bg:"white",py:3,px:6,borderTop:"1px",borderColor:"gray.300",children:[(0,n.jsx)(h.z,{variant:"ghost",onClick:D,children:(0,n.jsx)(v.cC,{id:"dEgA5A"})}),(0,n.jsx)(h.z,{variant:"solid",onClick:R,isLoading:O,flex:1,children:(0,n.jsx)(v.cC,{id:"1rLekk",values:{0:_.length,1:C.ag._({id:"BZPFHo",values:{0:_.length}})}})})]})]})};var eB=i(85573),eK=i(29494),eq=i(63176),eY=i(99793),eZ=i(12985);let eJ=async(e,t,n)=>{try{let n=(await Promise.all([i.e(5489),i.e(4751)]).then(i.bind(i,89089))).default,r=(await Promise.all([i.e(5489),i.e(9224)]).then(i.bind(i,30058))).default,l=n.parse(e),s=r.objectify(l);t(s)}catch(e){n(e.message)}},eX=async(e,t,n)=>{try{let n=(await Promise.all([i.e(5489),i.e(4751)]).then(i.bind(i,89089))).default,r=(await Promise.all([i.e(5489),i.e(9224)]).then(i.bind(i,30058))).default;n().process(e,{parser:r}).then(e=>{let{css:i}=e;t(i)})}catch(e){n(e.message)}},eQ=e=>{let{label:t,initialValue:r,updateValue:l,helperText:s}=e,[o,a]=(0,k.useState)(""),[d,c]=(0,k.useState)(null),[x,h]=(0,k.useState)(),m=(0,A.Kt)(eJ,100);return((0,k.useEffect)(()=>{Promise.all([i.e(8917),i.e(7120),i.e(6214)]).then(i.bind(i,65284)).then(e=>{h(e.css())})},[]),(0,A.vm)(()=>{c(null),r&&eX(r,a,c)},[r],[]),(0,A.vm)(()=>{c(null),m(o,l,c)},[o,l,m],[o]),x)?(0,n.jsxs)(em.NI,{isInvalid:!!d,children:[(0,n.jsx)(ep.l,{children:t}),d&&(0,n.jsx)(eY.J1,{children:d}),s&&(0,n.jsx)(em.Q6,{children:s}),(0,n.jsx)(u.xu,{border:"1px solid",borderColor:"gray.200",fontSize:"md",children:(0,n.jsx)(k.Suspense,{fallback:(0,n.jsx)("span",{}),children:(0,n.jsx)(eZ.B,{value:o,height:"300px",extensions:[x],onChange:a})})})]}):null};var e$=i(8624),e0=i(10625),e1=i(67046),e2=i(99058),e5=i(39237),e4=i(89098);let e3=e=>{let{theme:t,dispatch:i}=e,r=(0,e4.c)(t);return(0,n.jsxs)(em.NI,{children:[(0,n.jsx)(ep.l,{children:(0,n.jsx)(v.cC,{id:"x5htAS"})}),(0,n.jsxs)(e0.v,{matchWidth:!0,children:[(0,n.jsx)(e1.j,{size:"lg",as:h.z,borderRadius:"md",rightIcon:(0,n.jsx)(F.G,{icon:M.ptq,transform:"shrink-6"}),variant:"toolbar",px:4,h:10,w:"100%",border:"1px solid",borderColor:"gray.200",children:(0,n.jsx)(c.x,{textAlign:"left",fontWeight:"400",children:r.name()})}),(0,n.jsx)(e2.q,{maxH:"320px",maxW:"100%",overflow:"auto",children:e4.N.map(e=>(0,n.jsx)(e5.i,{isChecked:r.key===e.key,value:e.key,onClick:()=>i({type:"THEME_UPDATE_THEME_CONFIG",data:{themeConfig:{themeBase:e.key}}}),children:(0,n.jsxs)(R.U,{maxW:"100%",children:[(0,n.jsx)(e9,{base:e}),(0,n.jsxs)(u.xu,{flex:"1",minW:"0",children:[e.name(),e.description&&(0,n.jsx)(c.x,{color:"gray.400",fontSize:"sm",children:e.description()})]})]})},e.key))})]})]})},e9=e=>{let{base:t}=e,i={"--card-color":"#FFF",...t.getCSSVars({cardColor:"#FFF",accentColor:"#F00",accentPalette:["#F00"]})};return(0,n.jsx)(u.xu,{backgroundColor:"gray.200",p:4,css:i,children:(0,n.jsx)(u.xu,{sx:t.cardSx,h:"3em",w:"5em"})})},e6=(0,k.memo)(()=>{var e;let{state:t,pop:i,dispatch:r,label:l}=(0,ed.n)(),{theme:s}=t,o=(null===(e=s.config.cardBackground)||void 0===e?void 0:e.type)===eD.E.COLOR?s.config.cardBackground.color:null;return(0,n.jsx)(ey,{onBackClick:i,label:l,children:(0,n.jsxs)(eh.K,{p:6,children:[(0,n.jsxs)(em.NI,{"data-testid":"custom-theme-card-color-picker",children:[(0,n.jsx)(ep.l,{children:(0,n.jsx)(v.cC,{id:"9d2iLQ"})}),(0,n.jsx)(em.Q6,{mb:4,children:(0,n.jsx)(v.cC,{id:"7wiFpy"})}),(0,n.jsx)(e$.T,{value:(null==o?void 0:o.hex)||null,updateValue:e=>r({type:"THEME_UPDATE_THEME_CONFIG",data:{themeConfig:{cardBackground:e?{type:eD.E.COLOR,color:{hex:e}}:void 0}}}),defaultValue:"#FFFFFF"})]}),(0,n.jsx)(e3,{theme:s,dispatch:r})]})})});e6.displayName="ThemeConfigCardStylesPanel";var e7=i(30423),e8=i(52099),te=i(78462),tt=i(44035),ti=i(27599);let tn=e=>{let{label:t,description:i,labelColor:r="black",fontFamily:l,fontStyle:s="normal",fontWeight:o=400}=e,a=(0,n.jsxs)(R.U,{alignItems:"baseline",children:[(0,n.jsx)(u.xu,{color:"yellow.400",children:(0,n.jsx)(F.G,{icon:L.e7M})}),(0,n.jsx)(c.x,{textAlign:"left",color:r,fontWeight:o,fontSize:"lg",fontFamily:l,fontStyle:s,children:t})]});return i?(0,n.jsxs)(u.xu,{children:[a,(0,n.jsx)(c.x,{fontSize:"xs",color:"gray.500",children:i})]}):a},tr=e=>{let{value:t,updateValue:i,onFontUploadClick:r,weight:l="regular",defaultFont:s,fonts:o,customFontsEnabled:a,...d}=e,{workspaceFonts:u,globalFonts:x}=o,[m,p,g]=(0,k.useMemo)(()=>{let e=[...u,...x],i=e.find(e=>e.id===t),n=(0,e8.Yw)(e,t),r=(0,e8.Yw)(e,t,!1);return[i,n,r]},[x,u,t]),j=a&&u.filter(e=>!e.archived||e.id===(null==m?void 0:m.id)).length>0,C=!1,b="normal",y="bold"===l?700:400;if(m&&null!==m.workspaceId){C=!0===m.archived;let e=[...m.fontFiles||[]];b=(0,e7.Sd)(e)?"italic":"normal";let t=(0,e7.B_)(e);y=(0,e7.QP)(t,"bold"===l?700:400)||400}return(0,n.jsxs)(e0.v,{matchWidth:!0,isLazy:!0,children:[(0,n.jsx)(e1.j,{size:"lg",as:h.z,borderRadius:"md",rightIcon:(0,n.jsx)(F.G,{icon:M.ptq,transform:"shrink-6"}),variant:"toolbar",px:4,h:10,w:"100%",border:"1px solid",borderColor:"gray.200",...d,children:a&&C?(0,n.jsx)(tn,{label:g||"",fontFamily:'"'.concat(p,'"'),labelColor:t?"gray.800":"gray.400",fontStyle:b,fontWeight:y}):(0,n.jsx)(c.x,{textAlign:"left",fontFamily:'"'.concat(p||s,'"'),fontWeight:y,color:t?"gray.800":"gray.400",fontStyle:b,children:g||(0,n.jsx)(v.cC,{id:"Ff/YaY",values:{defaultFont:s,GAMMA_PROPER_NOUN:W.N6}})})}),(0,n.jsxs)(e2.q,{maxH:"320px",overflow:"auto",zIndex:"dropdown",children:[(0,n.jsxs)(tt._,{type:"radio",value:t||"",onChange:e=>i(e||void 0),children:[j&&(0,n.jsx)(f.NZ,{m:2,children:(0,n.jsx)(v.cC,{id:"syCKVA"})}),j&&u.map(e=>{var i;let r=e.id!==t,s=e.archived&&r,o=(null===(i=e.fontFiles)||void 0===i?void 0:i.length)===0&&r;if(!e.fontFiles||o||s)return null;let a=(0,e7.Sd)(e.fontFiles)?"italic":"normal";return C&&e.id===t?(0,n.jsx)(e5.i,{value:e.id,disabled:!0,children:(0,n.jsx)(tn,{fontFamily:e.name,label:e.name,fontStyle:a,description:(0,n.jsx)(v.cC,{id:"FZBl16"})})},e.id):(0,n.jsx)(e5.i,{value:e.id,children:(0,n.jsx)(c.x,{fontFamily:'"'.concat(e.name,'"'),fontSize:"lg",fontWeight:l,fontStyle:a,children:e.name})},e.id)}),j&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ti.R,{}),(0,n.jsx)(f.NZ,{m:2,children:(0,n.jsx)(v.cC,{id:"Z/0bkt"})})]}),(0,n.jsx)(e5.i,{value:"",children:(0,n.jsx)(c.x,{fontFamily:s,fontSize:"lg",fontWeight:l,color:"gray.400",children:(0,n.jsx)(v.cC,{id:"fuNYg+"})})}),x&&x.map(e=>(0,n.jsx)(e5.i,{value:e.id,children:(0,n.jsx)(c.x,{fontFamily:(0,e8.eu)(e.id)?'"'.concat(e.id,'"'):'"'.concat(e.name,'"'),fontSize:"lg",fontWeight:l,children:e.name})},e.id))]}),a&&(0,n.jsx)(h.z,{width:"calc(100% + var(--chakra-space-4))",variant:"plain",position:"sticky",bottom:-2,m:-2,mt:2,p:2,borderX:"none",borderBottom:"none",fontSize:"sm",borderRadius:"none",onClick:r,leftIcon:(0,n.jsx)(F.G,{icon:M.A$k}),children:(0,n.jsx)(v.cC,{id:"vNYIdl"})})]})]})};var tl=i(29705),ts=i(11082),to=i(62700);let ta=e=>{var t,i,r;let{font:l,value:s,defaultWeight:o,updateValue:a,...d}=e,u=(0,k.useCallback)(e=>{let t=Number(e);Number.isNaN(t)||a(t)},[a]),x=(null==s?void 0:s.toString())||"",m=(0,to.d)()[o],{weightOptions:p,isDeletedFontWeight:g}=(0,k.useMemo)(()=>{let e=(0,e8.W9)(l),t=void 0!==s&&!e.includes(s);if(!t||!s)return{isDeletedFontWeight:t,weightOptions:e};let i=[...e,s].sort((e,t)=>e-t);return{isDeletedFontWeight:t,weightOptions:i}},[l,s]),j=l&&(null==l?void 0:l.workspaceId)!==null,f=j&&(null===(t=l.fontFiles)||void 0===t?void 0:t.length)===0,C=g&&j,b=(0,te.p6)();return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(e0.v,{matchWidth:!0,isLazy:!0,children:[(0,n.jsx)(e1.j,{size:"lg",as:h.z,borderRadius:"md",rightIcon:(0,n.jsx)(F.G,{icon:M.ptq,transform:"shrink-6"}),variant:"toolbar",px:4,h:10,w:"100%",border:"1px solid",borderColor:"gray.200",isDisabled:p.length<=1,...d,children:g?(0,n.jsx)(tn,{label:f?(0,n.jsx)(v.cC,{id:"EqUVJs"}):null!==(i=(0,to.d)()[x])&&void 0!==i?i:m,labelColor:s?"gray.800":"gray.400"}):(0,n.jsx)(c.x,{textAlign:"left",color:s?"gray.800":"gray.400",fontWeight:400,children:null!==(r=(0,to.d)()[x])&&void 0!==r?r:m})}),(0,n.jsx)(e2.q,{maxH:"320px",overflow:"auto",zIndex:"dropdown",children:(0,n.jsx)(tt._,{type:"radio",value:x,onChange:u,children:p.map(e=>{var t,i;return g&&s===e?(0,n.jsx)(e5.i,{value:e.toString(),disabled:!0,children:(0,n.jsx)(tn,{label:null!==(t=(0,to.d)()[e])&&void 0!==t?t:m,description:C?(0,n.jsx)(v.cC,{id:"KFmni+"}):(0,n.jsx)(v.cC,{id:"mGTUJj"})})},e):(0,n.jsx)(e5.i,{value:e.toString(),children:(0,n.jsx)(c.x,{fontSize:"lg",children:null!==(i=(0,to.d)()[e])&&void 0!==i?i:m})},e)})})})]}),C&&(0,n.jsx)(c.x,{fontSize:"xs",mt:1.5,children:(0,n.jsxs)(ts.r,{href:b,textDecoration:"underline",isExternal:!0,children:[(0,n.jsx)(v.cC,{id:"RUO69p"}),(0,n.jsx)(tl.h,{ml:1})]})})]})},td=e=>{let{label:t,helperText:i,value:r,defaultValue:l,updateValue:s,...o}=e;return(0,n.jsxs)(em.NI,{...o,children:[(0,n.jsx)(ep.l,{children:(0,n.jsx)(c.x,{children:t})}),(0,n.jsx)(e$.T,{value:r,updateValue:s,defaultValue:l}),i&&(0,n.jsx)(em.Q6,{children:i})]})};var tc=i(84286),tu=i(66028);let tx=e=>{let{value:t,updateValue:i,onLogoUploadStart:r,onLogoUploadFail:l}=e,[s,o]=(0,k.useState)(null),[a,d]=(0,k.useState)(null),c=(0,H.CG)(I.KV),{currentWorkspace:x}=(0,_.SE)(),m=c||(null==x?void 0:x.id);return m?t||a?(0,n.jsxs)(eR.g,{align:"flex-start",spacing:4,children:[(0,n.jsxs)(u.xu,{position:"relative",w:"100%",background:"gray.50",children:["placeholder"==a?(0,n.jsx)(tc.k3,{w:"100%"}):(0,n.jsx)(eN.E,{w:"100%",src:t||a||void 0,alt:"",onMouseDown:tu.br}),s==eI.D.Uploading&&(0,n.jsx)(tc.HI,{}),s==eI.D.Error&&(0,n.jsx)(tc.s7,{})]}),(0,n.jsx)(h.z,{onClick:()=>{i(null),o(null)},mt:2,w:"100%",children:(0,n.jsx)(v.cC,{id:"VlT9ID"})})]}):(0,n.jsx)(eS.un,{orgId:m,uploadType:"image",editType:"icon",dropHereText:C.ag._({id:"cmRkd1",values:{0:"%{browse}"}}),customHeight:"250px",customFontSize:"sm",showTip:!1,onUploadStart:e=>{let{file:t,tempUrl:i}=e;o(eI.D.Uploading),r&&r(),t.type&&(0,eL.Ns)(t.type)?d("placeholder"):d(i)},onUploadSuccess:e=>{let{src:t}=e;o(eI.D.Done),i(t),d(null)},onUploadFailed:e=>{o(eI.D.Error),l&&l()}}):null},th=[{label:()=>C.ag._({id:"uIeorD"}),icon:eu.AVo,Component:()=>{let{dispatch:e,state:t,pop:i,label:r}=(0,ed.n)(),l=(0,X.E7)(t.theme),s=(0,X.wj)(t.theme),o=(0,k.useCallback)(t=>{var i,n;(null==t?void 0:t.type)===eD.E.IMAGE&&(null===(i=t.image)||void 0===i?void 0:i.uploadStatus)===eI.D.Uploading?e({type:"THEME_BACKGROUND_IMAGE_UPLOAD_STARTED",data:{background:t}}):(null==t?void 0:t.type)===eD.E.IMAGE&&(null===(n=t.image)||void 0===n?void 0:n.uploadStatus)===eI.D.Error?e({type:"THEME_BACKGROUND_IMAGE_UPLOAD_FAIL"}):e({type:"THEME_BACKGROUND_UPDATE_SUCCESS",data:{background:t}})},[e]);return(0,n.jsx)(ey,{onBackClick:i,label:r,children:(0,n.jsx)(eh.K,{p:6,children:(0,n.jsx)(eP,{setBackground:o,background:l,defaultMessage:(0,n.jsxs)(ek.b,{fontSize:"xs",children:[(0,n.jsx)(ew.z,{}),(0,n.jsx)(c.x,{children:(0,n.jsx)(v.cC,{id:"j+PsQe"})})]}),isDark:s})})})}},{label:()=>C.ag._({id:"Roi1AL"}),icon:eu.lCX,Component:e6},{label:()=>C.ag._({id:"TzJ8ZI"}),icon:eu.Zkk,Component:()=>{var e,t;let{label:i,state:r,dispatch:l,pop:s}=(0,ed.n)(),{theme:o}=r,a=(0,k.useCallback)(e=>l({type:"THEME_UPDATE_THEME_PROPS",data:{themeProps:{accentColor:null!=e?e:void 0}}}),[l]);return(0,n.jsx)(ey,{onBackClick:s,label:i,children:(0,n.jsxs)(eh.K,{spacing:2,p:6,children:[(0,n.jsxs)(em.NI,{"data-testid":"custom-theme-accent-color-picker",children:[(0,n.jsx)(ep.l,{children:(0,n.jsx)(v.cC,{id:"Udsgl4"})}),(0,n.jsx)(em.Q6,{mb:4,children:(0,n.jsx)(v.cC,{id:"7ldaTf"})}),(0,n.jsx)(ej.U,{color:o.accentColor,defaultColor:T.uP,updateColor:a,gradient:o.config.accentGradient,updateGradient:e=>l({type:"THEME_UPDATE_THEME_CONFIG",data:{themeConfig:{accentGradient:e}}})})]}),(0,n.jsxs)(em.NI,{children:[(0,n.jsx)(ep.l,{children:(0,n.jsx)(v.cC,{id:"NEXUdn"})}),(0,n.jsx)(em.Q6,{mb:2,children:(0,n.jsx)(v.cC,{id:"+50OB4"})}),(0,n.jsx)(ef.Y,{value:(null===(e=o.config)||void 0===e?void 0:e.secondaryAccentColors)||[],updateValue:e=>l({type:"THEME_UPDATE_THEME_CONFIG",data:{themeConfig:{secondaryAccentColors:e}}}),maxColors:4})]}),(0,n.jsxs)(em.NI,{children:[(0,n.jsx)(ep.l,{mt:4,children:(0,n.jsx)(v.cC,{id:"g/cMXH"})}),(0,n.jsx)(eg.X,{isChecked:!(null===(t=o.config)||void 0===t?void 0:t.disableReadabilityAdjustment),onChange:()=>{var e;return l({type:"THEME_UPDATE_THEME_CONFIG",data:{themeConfig:{disableReadabilityAdjustment:!(null===(e=o.config)||void 0===e?void 0:e.disableReadabilityAdjustment)}}})},children:(0,n.jsx)(v.cC,{id:"fflXAI"})}),(0,n.jsx)(em.Q6,{mb:2,children:(0,n.jsx)(v.cC,{id:"QjwqJE"})})]})]})})}},{label:()=>C.ag._({id:"COXEr5"}),icon:eu.l9f,Component:()=>{let{pop:e,state:t,dispatch:i,label:r}=(0,ed.n)(),{theme:l}=t;return(0,n.jsx)(ey,{onBackClick:e,label:r,children:(0,n.jsx)(eV,{theme:l,updateTheme:e=>i({type:"THEME_UPDATE_THEME_CONFIG",data:{themeConfig:{...e}}})})})}},{label:()=>C.ag._({id:"I0oBSl"}),icon:eu.yGG,Component:()=>{var e;let t=(0,ex.ye)("customFonts"),{label:i,dispatch:r,state:l,pop:s}=(0,ed.n)(),{theme:o,fontState:a}=l,{fonts:d,fontsMap:u}=a,x=(0,k.useCallback)(e=>{let t=u[e],i=(0,e8.W9)(t),n=(0,e7.QP)(i,o.headingFontWeight||T.ZT.heading)||T.ZT.heading,l=(0,e8.s8)({fontsMap:u,headingFontId:e,bodyFontId:o.bodyFont});r({type:"THEME_UPDATE_THEME_PROPS",data:{themeProps:{headingFont:e,headingFontWeight:n,fonts:l}}})},[r,u,o.bodyFont,o.headingFontWeight]),h=(0,k.useCallback)(e=>{let t=u[e],i=(0,e8.W9)(t),n=(0,e7.QP)(i,o.bodyFontWeight||T.ZT.body)||T.ZT.body,l=(0,e8.s8)({fontsMap:u,bodyFontId:e,headingFontId:o.headingFont});r({type:"THEME_UPDATE_THEME_PROPS",data:{themeProps:{bodyFont:e,bodyFontWeight:n,fonts:l}}})},[r,u,o.headingFont,o.bodyFontWeight]),m=(0,k.useCallback)(e=>r({type:"THEME_UPDATE_THEME_PROPS",data:{themeProps:{headingFontWeight:e}}}),[r]),p=(0,k.useCallback)(e=>r({type:"THEME_UPDATE_THEME_PROPS",data:{themeProps:{bodyFontWeight:e}}}),[r]),g=(0,k.useCallback)(e=>r({type:"THEME_UPDATE_THEME_CONFIG",data:{themeConfig:{headingColor:null!=e?e:void 0}}}),[r]),j=(0,k.useCallback)(e=>r({type:"THEME_UPDATE_THEME_CONFIG",data:{themeConfig:{headingGradient:null!=e?e:void 0}}}),[r]),f=(0,k.useCallback)(e=>r({type:"THEME_UPDATE_THEME_CONFIG",data:{themeConfig:{bodyColor:null!=e?e:void 0}}}),[r]),b=(0,k.useCallback)(()=>{let e=(0,te.p6)();window.open(e,"_blank")},[]),y=u[o.headingFont||T.ke.headingFont]||u[T.ke.headingFont],w=u[o.bodyFont||T.ke.bodyFont]||u[T.ke.bodyFont],E=o.headingFontWeight||T.ZT.heading,S=o.bodyFontWeight||T.ZT.body,I=(0,X.wj)(o);return(0,n.jsx)(ey,{onBackClick:s,label:i,children:(0,n.jsxs)(eh.K,{p:6,children:[(0,n.jsxs)(em.NI,{mb:"2",children:[(0,n.jsx)(ep.l,{children:(0,n.jsx)(c.x,{children:(0,n.jsx)(v.cC,{id:"7OvVwW"})})}),(0,n.jsx)(tr,{fonts:d,value:o.headingFont,customFontsEnabled:t,updateValue:x,onFontUploadClick:b,weight:"bold",defaultFont:T.ke.headingFont,"data-testid":"custom-theme-heading-font-picker"}),t&&(0,n.jsx)(ta,{font:y,value:E,defaultWeight:700,updateValue:m})]}),(0,n.jsxs)(em.NI,{mb:"2","data-testid":"custom-theme-heading-color-picker",children:[(0,n.jsx)(ep.l,{children:(0,n.jsx)(c.x,{children:(0,n.jsx)(v.cC,{id:"v9mrgh"})})}),(0,n.jsx)(ej.U,{color:o.config.headingColor,updateColor:g,defaultColor:I?T.Qw:T.l0,gradient:o.config.headingGradient,updateGradient:j})]}),(0,n.jsxs)(em.NI,{children:[(0,n.jsx)(ep.l,{children:(0,n.jsx)(c.x,{children:(0,n.jsx)(v.cC,{id:"B4QCf7"})})}),(0,n.jsx)(tr,{fonts:d,value:o.bodyFont,customFontsEnabled:t,updateValue:h,onFontUploadClick:b,weight:"normal",defaultFont:T.ke.bodyFont,"data-testid":"custom-theme-body-font-picker"}),t&&(0,n.jsx)(ta,{font:w,value:S,defaultWeight:400,updateValue:p})]}),(0,n.jsx)(td,{label:C.ag._({id:"jx8uni"}),value:(null===(e=o.config)||void 0===e?void 0:e.bodyColor)||null,defaultValue:I?T.Z_:T.zL,updateValue:f}),(0,n.jsxs)(ek.b,{fontSize:"xs",mt:"6",children:[(0,n.jsx)(ew.z,{}),(0,n.jsx)(c.x,{children:(0,n.jsx)(v.cC,{id:"3L+fCN"})})]})]})})}},{label:()=>C.ag._({id:"iG7KNr"}),icon:e=>e.logoUrl?eu.Hh4:eu.thV,Component:()=>{let{pop:e,state:t,dispatch:i,label:r}=(0,ed.n)(),{theme:l}=t;return(0,n.jsx)(ey,{onBackClick:e,label:r,children:(0,n.jsx)(eh.K,{p:6,children:(0,n.jsx)(em.NI,{children:(0,n.jsx)(tx,{value:l.logoUrl||null,onLogoUploadStart:()=>{i({type:"THEME_LOGO_UPLOAD_STARTED"})},updateValue:e=>i({type:"THEME_LOGO_UPLOAD_SUCCESS",data:{logoUrl:null!=e?e:void 0}}),onLogoUploadFail:()=>{i({type:"THEME_LOGO_UPLOAD_FAIL"})}})})})})}},{label:()=>C.ag._({id:"sxkWRg"}),icon:eu.gr5,Component:()=>{var e,t,i,r,l,s,o;let{pop:a,state:d,dispatch:c,label:u}=(0,ed.n)(),{theme:x}=d;return(0,n.jsx)(ey,{onBackClick:a,label:u,children:(0,n.jsxs)(eh.K,{spacing:4,p:6,children:[(0,n.jsxs)(em.NI,{children:[(0,n.jsx)(ep.l,{children:(0,n.jsx)(v.cC,{id:"S0kLOH"})}),(0,n.jsx)(eB.I,{defaultValue:x.id,readOnly:!0})]}),(0,n.jsxs)(em.NI,{children:[(0,n.jsx)(ep.l,{children:(0,n.jsx)(v.cC,{id:"PPYsiY"})}),(0,n.jsx)(eK.g,{defaultValue:null===(t=x.config.keywords)||void 0===t?void 0:null===(e=t.color)||void 0===e?void 0:e.join(", "),onChange:e=>{c({type:"THEME_UPDATE_THEME_KEYWORDS",data:{keywords:{color:e.target.value.split(",").map(e=>e.trim()).filter(Boolean)}}})}}),(0,n.jsx)(em.Q6,{children:"Should be separated with commas"})]}),(0,n.jsxs)(em.NI,{children:[(0,n.jsx)(ep.l,{children:(0,n.jsx)(v.cC,{id:"valYIJ"})}),(0,n.jsx)(eK.g,{defaultValue:null===(r=x.config.keywords)||void 0===r?void 0:null===(i=r.tone)||void 0===i?void 0:i.join(", "),onChange:e=>{c({type:"THEME_UPDATE_THEME_KEYWORDS",data:{keywords:{tone:e.target.value.split(",").map(e=>e.trim()).filter(Boolean)}}})}}),(0,n.jsx)(em.Q6,{children:"Should be separated with commas"})]}),(0,n.jsxs)(em.NI,{children:[(0,n.jsx)(ep.l,{children:(0,n.jsx)(v.cC,{id:"1hKEom"})}),(0,n.jsx)(eq.Y2,{defaultValue:x.priority,onChange:(e,t)=>{c({type:"THEME_UPDATE_THEME_PROPS",data:{themeProps:{priority:Number.isNaN(t)?void 0:t}}})},children:(0,n.jsx)(eq.zu,{})}),(0,n.jsx)(em.Q6,{children:"Higher priority themes show up first in the themes list"})]}),(0,n.jsxs)(em.NI,{children:[(0,n.jsx)(ep.l,{children:(0,n.jsx)(v.cC,{id:"q3il6U"})}),(0,n.jsx)(eq.Y2,{defaultValue:null===(l=x.config)||void 0===l?void 0:l.fontSize,onChange:(e,t)=>{c({type:"THEME_UPDATE_THEME_CONFIG",data:{themeConfig:{fontSize:Number.isNaN(t)?void 0:t}}})},children:(0,n.jsx)(eq.zu,{})})]}),(0,n.jsx)(eQ,{label:(0,n.jsx)(v.cC,{id:"3loch2"}),initialValue:null===(s=x.config)||void 0===s?void 0:s.contentStyles,updateValue:e=>c({type:"THEME_UPDATE_THEME_CONFIG",data:{themeConfig:{contentStyles:e}}})}),(0,n.jsx)(eQ,{label:(0,n.jsx)(v.cC,{id:"r0cjYF"}),initialValue:null===(o=x.config)||void 0===o?void 0:o.containerStyles,updateValue:e=>c({type:"THEME_UPDATE_THEME_CONFIG",data:{themeConfig:{containerStyles:e}}}),helperText:C.ag._({id:"W5hi5t"})})]})})},isForGammaOnly:!0}],tm=(e,t)=>!!e.featureFlag&&!ex.VH.get(e.featureFlag)||!!e.isForGammaOnly&&!t,tp={outline:"3px dashed var(--chakra-colors-sunglow-500)",outlineOffset:"0"},tg=()=>{let{push:e,state:t,setLabel:i}=(0,ed.n)(),{theme:r}=t,{isGammaOrgUser:l}=(0,_.SE)(),s=(0,k.useMemo)(()=>th.filter(e=>!tm(e,l)),[l]);return(0,n.jsx)(ec.GS,{listStyleType:"none",marginStart:0,children:s.map((t,s)=>{let{label:o,icon:a,Component:d}=t,c="".concat(s+1,". ").concat(o());return(0,n.jsx)(ec.HC,{children:(0,n.jsx)(eb,{icon:"function"==typeof a?a(r):a,label:c,onClick:()=>{i(c),e(d)},...t.isForGammaOnly&&l&&tp})},o())})})},tj=e=>{let{theme:t,dispatch:i,fonts:r,fontsMap:l}=e,[s,o]=(0,k.useState)("");return(0,n.jsx)(ed.O.Provider,{value:{state:{theme:t,fontState:{fonts:r,fontsMap:l}},dispatch:i,label:s,setLabel:o},children:(0,n.jsx)(ea,{InitialComponent:tg})})};var tf=i(58905),tv=i(75230),tC=i(64951),tb=i(29264);let ty=e=>{let{value:t,onSave:i,themeValidationError:r}=e;return(0,n.jsxs)(em.NI,{isInvalid:!!r,children:[(0,n.jsx)(tf.C,{defaultValue:t,placeholder:(0,T.F)(),onSubmit:i,submitOnBlur:!0,isPreviewFocusable:!0,fontSize:"3xl",children:(0,n.jsxs)(R.U,{minHeight:14,children:[(0,n.jsx)(tv.w,{"data-testid":"custom-theme-name-preview",noOfLines:1}),(0,n.jsx)(eB.I,{as:tC.V,w:{sm:"50%",lg:"40%",xl:"30%","2xl":"20%"},"data-testid":"custom-theme-name-input"}),(0,n.jsx)(tk,{})]})}),r&&(0,n.jsx)(eY.J1,{fontWeight:"500",pb:2,children:r})]})},tk=()=>{let{isEditing:e,getSubmitButtonProps:t,getCancelButtonProps:i,getEditButtonProps:r}=(0,tb.Z)();return e?(0,n.jsxs)(x.h,{justifyContent:"center",size:"sm",spacing:0,children:[(0,n.jsx)(f.kH,{label:(0,n.jsx)(v.cC,{id:"dEgA5A"}),children:(0,n.jsx)(eG.h,{variant:"ghost","aria-label":C.ag._({id:"dEgA5A"}),icon:(0,n.jsx)(F.G,{icon:M.YIN}),...i()})}),(0,n.jsx)(f.kH,{label:(0,n.jsx)(v.cC,{id:"fNzdjk"}),children:(0,n.jsx)(eG.h,{variant:"ghost","aria-label":C.ag._({id:"fNzdjk"}),icon:(0,n.jsx)(F.G,{icon:M.LEp}),...t(),"data-testid":"save-theme-name-button"})})]}):(0,n.jsx)(d.k,{justifyContent:"center",children:(0,n.jsx)(f.kH,{label:(0,n.jsx)(v.cC,{id:"+MxT3Q"}),children:(0,n.jsx)(u.xu,{children:(0,n.jsx)(eG.h,{variant:"ghost","aria-label":C.ag._({id:"+MxT3Q"}),size:"sm",icon:(0,n.jsx)(F.G,{icon:M.Yai}),...r(),ref:null})})})})},tw="theme-editor-root",tE=e=>{var t;let{state:i,dispatch:r,docContent:l,doc:s,workspaceId:o}=e,{theme:a,customizationStep:u}=i,[x,h]=(0,k.useState)(),[m,p]=(0,k.useState)(null),j=(0,A.Kt)(h,300);(0,k.useEffect)(()=>{j(a)},[a,j]);let{globalFonts:f,workspaceFonts:C,fontsMap:b,allThemeFonts:y}=(0,Z.TY)(o);(null==l?void 0:l.content)&&(null===(t=l.content[0].attrs)||void 0===t?void 0:t.background)&&(l.content[0].attrs.background=K.jg);let w=(0,H.CG)(U.mT),E=(0,q.i)({base:"var(--chakra-sizes-xs)",lg:"var(--chakra-sizes-md)","2xl":"var(--chakra-sizes-xl)"})||"var(--chakra-sizes-md)",S=(0,k.useMemo)(()=>(0,J.y)(),[]);(0,k.useEffect)(()=>{let e=null==x?void 0:x.config.accentBackgrounds;if(e){if(m&&0===e.length){m.commands.setContent(S);return}null==m||m.commands.updateThemeAccentImages(e,!0)}},[m,null==x?void 0:x.config.accentBackgrounds,S]);let I=(0,k.useCallback)(e=>{r({type:"SET_NEW_THEME_FOR_SELECTING",data:{theme:(0,X.mg)(e)}})},[r]),_=(0,k.useCallback)(()=>{r({type:"SET_NEW_THEME_FOR_CUSTOMIZING",data:{theme:(0,X.mg)(a,!0)}})},[r,a]);return(0,n.jsxs)(d.k,{direction:"row-reverse",h:"100%",children:[(0,n.jsx)(d.k,{direction:"column",overflowY:"auto",w:E,borderLeft:"1px solid",borderColor:"gray.200",children:(0,n.jsx)(d.k,{flex:"1",direction:"column",position:"relative",children:"selection"===u?(0,n.jsx)(et,{theme:a,onThemeClick:I,onSelectClick:_}):(0,n.jsx)(tj,{theme:a,dispatch:r,fonts:{globalFonts:f,workspaceFonts:C},fontsMap:b})})}),(0,n.jsx)(d.k,{flex:1,bg:"gray.100",position:"relative",maxW:"calc(100vw - ".concat(E,")"),children:(0,n.jsxs)(d.k,{className:tw,overflowY:"scroll",width:"100%",height:"100%",direction:"column",position:"relative",css:{"--editor-width":"100%"},children:[(0,n.jsx)(B.Y,{}),(0,n.jsx)(ei.J,{fonts:y}),(0,n.jsxs)(O.m,{variant:"soft-rounded",size:"sm","data-testid":"custom-theme-tabs",children:[l&&(0,n.jsx)(g.M,{position:"sticky",top:0,zIndex:2,background:"white",children:(0,n.jsxs)(P.t,{p:2,position:"absolute",top:"1rem",background:"white",borderRadius:"full",shadow:"md",children:[(0,n.jsx)(D.O,{"data-testid":"custom-theme-tester-deck-tab",children:(0,n.jsxs)(R.U,{children:[(0,n.jsx)(F.G,{icon:L.Mdf}),(0,n.jsx)(c.x,{children:(0,n.jsx)(v.cC,{id:"vat9WD"})})]})}),(0,n.jsx)(D.O,{"data-testid":"custom-theme-current-deck-tab",children:(0,n.jsxs)(R.U,{children:[(0,n.jsx)(F.G,{icon:M.s2}),(0,n.jsx)(c.x,{children:(0,n.jsx)(v.cC,{id:"VJUm9p"})})]})})]})}),(0,n.jsxs)(N.n,{"data-testid":"custom-theme-tab-panels",children:[(0,n.jsx)(G.x,{p:0,"data-testid":"custom-theme-preview-editor",children:(0,n.jsx)(V.fb,{onCreate:e=>{let{editor:t}=e;return p(t)},initialContent:S,theme:x,scrollingParentSelector:".".concat(tw),isInsideDrawer:!0})}),l&&(0,n.jsx)(G.x,{p:0,"data-testid":"custom-theme-preview-editor",children:(0,n.jsx)(V.fb,{reduxData:{cards:w},initialContent:l,theme:x,scrollingParentSelector:".".concat(tw),doc:s,isInsideDrawer:!0})})]})]})]})})]})},tS=e=>{var t;let{name:i,doc:r,theme:l,themeValidationError:s,dispatch:o}=e,[a,d]=(0,k.useState)(),{data:u,loading:x}=(0,E.gec)({variables:{id:null==l?void 0:l.id},skip:!l||"new"===l.id}),h=(0,Y.$)(null==r?void 0:r.title);(0,k.useEffect)(()=>{!x&&u&&u.theme&&d(u.theme)},[x,u,d]);let m=(0,k.useCallback)(e=>{let t=e||(0,T.F)();o({type:"THEME_UPDATE_THEME_NAME",data:{name:t}})},[o]);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(ty,{value:i||(0,T.F)(),onSave:m,themeValidationError:s}),x?(0,n.jsx)(z.N,{noOfLines:1,fontSize:"sm",maxW:"300px"}):(0,n.jsxs)(c.x,{color:"gray.700",fontSize:"sm",fontWeight:"normal",letterSpacing:"normal",children:[(null==a?void 0:a.createdBy)&&(0,n.jsx)(v.cC,{id:"qeNU2j",values:{0:a.createdBy.displayName}})," ",(null==a?void 0:a.docCount)&&(null==a?void 0:a.docCount)===1&&(null==a?void 0:a.id)===(null==r?void 0:null===(t=r.theme)||void 0===t?void 0:t.id)?(0,n.jsx)(v.cC,{id:"On+kRG",values:{docTitle:h,GAMMA_ARTIFACT_PROPER_NOUN:W.Yc},components:{0:(0,n.jsx)("strong",{})}}):(0,n.jsx)(n.Fragment,{children:(0,n.jsx)(v.cC,{id:"eVRfvp",values:{GAMMA_ARTIFACT_PROPER_NOUN:W.Yc,GAMMA_ARTIFACT_PROPER_NOUN_PLURAL:W.aq,0:(null==a?void 0:a.docCount)||0},components:{0:(0,n.jsx)("strong",{}),1:(0,n.jsx)("strong",{})}})})]})]})},tI=["headingFont","bodyFont","accentColor","logoUrl"],t_=(0,k.memo)(e=>{var t;let{isOpen:i,onClose:g,state:j,dispatch:b,docContent:O,onThemeCreated:P,disableDrawerTransition:D=!1}=e,R=(0,S.z$)(),N=(0,r.p)(),G=(0,w.v9)(I.yx),z=(0,A.NE)(i,500),{user:M,currentWorkspace:L}=(0,_.SE)(),F=(0,k.useRef)(null),U=D?i:z,[W,{loading:H}]=(0,E.Wu6)(),[V,{loading:B}]=(0,E.suk)(),K="loading"===j.themeBackgroundImgStatus||"loading"===j.themeLogoImgStatus,q=(0,k.useCallback)(()=>{b({type:"THEME_RESET"}),g()},[b,g]),Y=(0,k.useCallback)(()=>{if(M&&L&&j.theme){if(!j.theme.name){b({type:"THEME_VALIDATION_ERROR",data:{errorMessage:"Theme name is required."}});return}if("new"===j.theme.id){let e={...j.theme,workspaceId:L.id},{id:t,archived:i,fonts:n,...r}=e;W({variables:{input:r},update:(t,i)=>{let{data:n}=i;(null==n?void 0:n.createTheme)&&t.writeQuery({query:E.$LR,variables:{workspaceId:e.workspaceId,archived:!1},data:{themes:[n.createTheme]}})},optimisticResponse:{createTheme:{__typename:"Theme",...e,createdTime:new Date().toISOString(),updatedTime:new Date().toISOString()}}}).then(t=>{let{data:i}=t;if(null==i?void 0:i.createTheme){var n;null==R||R.track(S.AA.THEME_CREATED,{theme_id:null==i?void 0:null===(n=i.createTheme)||void 0===n?void 0:n.id,type:"new"}),null==P||P(i.createTheme)}N({title:C.ag._({id:"NE6T/k",values:{0:e.name}}),status:"success",duration:3e3,position:"top",isClosable:!0}),q()}).catch(t=>{t.graphQLErrors&&t.graphQLErrors.length>0&&"duplicate_theme_name"===t.graphQLErrors[0].code?b({type:"THEME_VALIDATION_ERROR",data:{errorMessage:t.message}}):(console.error("Couldn't create theme ".concat(e.name," error: ").concat(t)),N({title:C.ag._({id:"FcSGqc",values:{e:t}}),status:"error",duration:3e3,position:"top",isClosable:!1}))})}else{let{__typename:e,archived:t,createdTime:i,updatedTime:n,createdBy:r,fonts:l,...s}=j.theme;for(let e of tI)e in s&&void 0===s[e]&&(s[e]=null);V({variables:{input:s},update:(e,t)=>{let{data:i}=t;(null==i?void 0:i.updateTheme)&&e.writeQuery({query:E.$LR,variables:{workspaceId:j.theme.workspaceId,archived:!1},data:{themes:[i.updateTheme]}})},optimisticResponse:{updateTheme:{__typename:"Theme",...j.theme,createdTime:new Date().toISOString(),updatedTime:new Date().toISOString()}}}).then(()=>{null==R||R.track(S.AA.THEME_UPDATED,{theme_id:j.theme.id}),N({title:C.ag._({id:"WODDpW",values:{0:j.theme.name}}),status:"success",duration:3e3,position:"top",isClosable:!0}),q()}).catch(e=>{e.graphQLErrors&&"duplicate_theme_name"===e.graphQLErrors[0].code?b({type:"THEME_VALIDATION_ERROR",data:{errorMessage:e.message}}):(console.error("Couldn't update theme ".concat(j.theme.name," error: ").concat(e)),N({title:C.ag._({id:"hSYiXl",values:{e:e}}),status:"error",duration:3e3,position:"top",isClosable:!1}))})}}},[M,L,b,null==j?void 0:j.theme,W,N,q,R,P,V]),Z="new"===j.theme.id||!y()(j.theme,j.originalTheme);return(0,n.jsx)(f.Wk,{isDark:!1,children:(0,n.jsxs)(l.d,{placement:"bottom",onClose:q,isOpen:i,isFullHeight:!0,initialFocusRef:F,children:[(0,n.jsx)(s.Z,{}),(0,n.jsxs)(o.s,{borderTopRadius:"xl",h:"calc(var(--100vh) - 24px)",transform:D?"none !important":void 0,children:[(0,n.jsx)(a.x,{borderBottom:"1px solid #000",borderColor:"gray.200",children:"selection"===j.customizationStep?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(d.k,{"align-items":"center",letterSpacing:"normal",fontSize:"3xl",minH:14,py:1,children:(0,n.jsx)(c.x,{children:(0,n.jsx)(v.cC,{id:"ytpdnC"})})}),(0,n.jsx)(c.x,{color:"gray.700",fontSize:"sm",fontWeight:"normal",letterSpacing:"normal",children:(0,n.jsx)(v.cC,{id:"d9p6AC"})})]}):(0,n.jsxs)(d.k,{"justify-content":"space-between",alignItems:"flex-end",children:[(0,n.jsx)(u.xu,{flex:1,children:(0,n.jsx)(tS,{name:(null===(t=j.theme)||void 0===t?void 0:t.name)||(0,T.F)(),doc:G,theme:j.theme,dispatch:b,themeValidationError:j.themeValidationError})}),(0,n.jsxs)(x.h,{children:[(0,n.jsx)(h.z,{variant:"ghost",onClick:q,children:(0,n.jsx)(v.cC,{id:"dEgA5A"})}),(0,n.jsx)(f.kH,{isDisabled:!K,label:(0,n.jsx)(v.cC,{id:"yz1qqg"}),children:(0,n.jsx)(u.xu,{display:"inline-flex",children:(0,n.jsx)(h.z,{variant:"solid",isLoading:H||B||K,isDisabled:!Z,onClick:Y,"data-testid":"custom-theme-save",children:(0,n.jsx)(v.cC,{id:"EsJdRp"})})})})]})]})}),(0,n.jsx)(m.f,{p:0,h:"100%",children:U?(0,n.jsx)(tE,{state:j,workspaceId:null==L?void 0:L.id,dispatch:b,docContent:O,doc:G}):(0,n.jsx)(tA,{})}),(0,n.jsx)(p.o,{ref:F})]})]})})});t_.displayName="ThemeEditorDrawer";let tA=()=>(0,n.jsx)(u.xu,{flexDirection:"column",flex:"1",w:"100%",h:"100%",bg:"gray.100",inset:0,children:(0,n.jsx)(g.M,{h:"100%",children:(0,n.jsx)(j.$,{})})})},30233:function(e,t,i){"use strict";i.d(t,{S:function(){return s}});var n=i(52322),r=i(69251),l=i(67109);let s=e=>{let{size:t}=e;return(0,n.jsx)(r.r,{gap:4,flex:1,my:2,templateColumns:{base:"repeat(2, minmax(0, 1fr))"},children:Array(t).fill(!0).map((e,t)=>(0,n.jsx)(l.O,{h:"9em",borderRadius:"base"},t))})}},26838:function(e,t,i){"use strict";i.d(t,{o:function(){return eo}});var n=i(52322),r=i(56581),l=i(29117),s=i(77533),o=i(70065),a=i(55478),d=i(28535),c=i(38035),u=i(36474),x=i(5879),h=i(87254),m=i(2784),p=i(90763),g=i(93202),j=i(48832),f=i(11050),v=i(50260),C=i(10625),b=i(67046),y=i(32899),k=i(332),w=i(99058),E=i(27599),S=i(25481),I=i(42946),_=i(54933),A=i(49929),T=i(94523),O=i(82282),P=i(31807),D=i(47749),R=i(29318);let N=(0,m.memo)(e=>{let{theme:t}=e,i=(0,R.eo)({theme:t}),r=t.name.replace(D.Qk,"");return(0,n.jsxs)(C.v,{isLazy:!0,children:[(0,n.jsx)(b.j,{as:y.h,isRound:!0,size:"xs",variant:"ghost",colorScheme:"blackAlpha",icon:(0,n.jsx)(A.G,{icon:I.S6C}),onClick:e=>e.stopPropagation(),children:(0,n.jsx)(x.cC,{id:"7L01XJ"})}),(0,n.jsx)(k.h,{children:(0,n.jsxs)(w.q,{zIndex:"modal",onClick:e=>e.stopPropagation(),children:[(0,n.jsxs)(d.xu,{px:4,py:0,maxWidth:"300px",children:[(0,n.jsx)(s.x,{noOfLines:3,children:r}),t.createdTime&&(0,n.jsx)(s.x,{fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,n.jsx)(x.cC,{id:"MXSt4t",values:{0:(0,O.Z)((0,P.Z)(t.createdTime),"PPP")}})}),t.createdBy&&(0,n.jsx)(T.kH,{label:t.createdBy.email,children:(0,n.jsx)(s.x,{display:"inline-block",fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,n.jsx)(x.cC,{id:"t490IT",values:{0:t.createdBy.displayName}})})})]}),(0,n.jsx)(E.R,{}),(0,n.jsx)(S.s,{icon:(0,n.jsx)(A.G,{icon:_.XnX,fixedWidth:!0}),onClick:i,children:(0,n.jsx)(x.cC,{id:"yKu/3Y"})})]})})]})});var G=i(53596),z=i(36651),M=i(14274),L=i(8393),F=i(21733);let U=(0,m.memo)(e=>{let{onCustomizeThemeClick:t,onEditThemeClick:i}=e,{isGammaOrgUser:r}=(0,F.SE)(),l=r&&"production"!==M.v.APPLICATION_ENVIRONMENT;return(0,n.jsxs)(C.v,{isLazy:!0,children:[(0,n.jsx)(b.j,{as:y.h,isRound:!0,size:"xs",variant:"ghost",colorScheme:"blackAlpha",icon:(0,n.jsx)(A.G,{icon:I.S6C}),onClick:e=>e.stopPropagation(),children:(0,n.jsx)(x.cC,{id:"7L01XJ"})}),(0,n.jsx)(k.h,{children:(0,n.jsxs)(w.q,{zIndex:"modal",onClick:e=>e.stopPropagation(),children:[(0,n.jsx)(S.s,{icon:(0,n.jsx)(A.G,{icon:I.Mw$,fixedWidth:!0}),onClick:t,children:(0,n.jsx)(x.cC,{id:"XZd6AM"})}),l&&(0,n.jsx)(S.s,{color:"orange.500",icon:(0,n.jsx)(d.xu,{boxSize:"4",children:(0,n.jsx)(L.Y,{})}),onClick:i,children:"Edit theme"}),(0,n.jsx)(E.R,{}),(0,n.jsx)(d.xu,{px:4,py:0,maxW:56,children:(0,n.jsx)(s.x,{fontSize:"sm",color:"gray.600",children:(0,n.jsx)(x.cC,{id:"FV8ABd"})})})]})})]})});var W=i(29705),H=i(92850),V=i(26468),B=i(22226),K=i(54326),q=i(97217),Y=i(11082),Z=i(67109),J=i(50250),X=i(75768),Q=i(62614),$=i(2338),ee=i(5632),et=i(94199),ei=i(91994),en=i(47968);let er=e=>{let{theme:t,isOpen:i,onClose:r}=e,{asPath:l}=(0,ee.useRouter)(),[o,a]=(0,m.useState)(),[d,c]=(0,m.useState)(),u=(0,ei.CG)(en.yx),h=(0,R.EW)({theme:t,showLinkToDashboard:!!u}),{data:p,loading:j}=(0,g.gec)({variables:{id:null==t?void 0:t.id},skip:!t||"new"===t.id});(0,m.useEffect)(()=>{var e,t;!j&&p&&((null===(e=p.theme)||void 0===e?void 0:e.docCount)&&a(p.theme.docCount),(null===(t=p.theme)||void 0===t?void 0:t.siteCount)&&c(p.theme.siteCount))},[j,p,a,c]);let f=(0,m.useMemo)(()=>{let e=0;return o&&o>0&&(e+=o),d&&d>0&&(e+=d),e},[o,d]);return(0,n.jsxs)(H.u_,{closeOnOverlayClick:!1,isOpen:i,onClose:r,size:"lg",children:[(0,n.jsx)(V.Z,{}),(0,n.jsxs)(B.h,{children:[(0,n.jsx)(K.x,{children:(0,n.jsx)(x.cC,{id:"oh7Knm",values:{0:t.name}})}),(0,n.jsx)(q.f,{children:f>0?(0,n.jsxs)(s.x,{mb:2,children:[(0,n.jsx)(x.cC,{id:"uSopl9",values:{totalCount:f,GAMMA_ARTIFACT_PROPER_NOUN:et.Yc,GAMMA_ARTIFACT_PROPER_NOUN_PLURAL:et.aq}})," ",(0,n.jsx)(x.cC,{id:"c+lbSJ",values:{GAMMA_ARTIFACT_PROPER_NOUN_PLURAL:et.aq}})," ","/#themes"!==l&&(0,n.jsx)(x.cC,{id:"kLomb7",components:{0:(0,n.jsx)(Y.r,{color:"trueblue.500",colorScheme:"trueblue",href:v.oH,textDecoration:"underline",isExternal:!0}),1:(0,n.jsx)(W.h,{mx:"2px"})}})]}):j?(0,n.jsx)(Z.O,{h:"1em",mb:2}):(0,n.jsx)(s.x,{mb:2,children:(0,n.jsx)(x.cC,{id:"KNTN0L",values:{GAMMA_ARTIFACT_PROPER_NOUN_PLURAL:et.aq}})})}),(0,n.jsx)(J.m,{children:(0,n.jsxs)(X.h,{children:[(0,n.jsx)(Q.z,{variant:"ghost",onClick:r,children:(0,n.jsx)(x.cC,{id:"dEgA5A"})}),(0,n.jsx)(Q.z,{variant:"ghost",colorScheme:"red",onClick:()=>{h(),r()},children:(0,n.jsx)(x.cC,{id:"zck3yw"})})]})}),(0,n.jsx)($.o,{})]})]})},el=(0,m.memo)(e=>{let{theme:t,openThemeEditorWithThisTheme:i,onDuplicate:r,onArchiveThemeModalOpen:l,isArchiveThemeModalOpen:o,onArchiveThemeModalClose:a}=e,{canMakeStandard:c,convertToStandard:u}=(0,R.Xm)(t);return(0,n.jsxs)(C.v,{isLazy:!0,children:[(0,n.jsx)(b.j,{as:y.h,isRound:!0,size:"xs",variant:"ghost",colorScheme:"blackAlpha",icon:(0,n.jsx)(A.G,{icon:I.S6C}),onClick:e=>e.stopPropagation(),children:(0,n.jsx)(x.cC,{id:"7L01XJ"})}),(0,n.jsx)(k.h,{children:(0,n.jsxs)(w.q,{zIndex:"modal",onClick:e=>e.stopPropagation(),children:[(0,n.jsxs)(d.xu,{px:4,py:0,maxWidth:"300px",children:[(0,n.jsx)(s.x,{noOfLines:3,children:t.name}),t.createdTime&&(0,n.jsx)(s.x,{fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,n.jsx)(x.cC,{id:"MXSt4t",values:{0:(0,O.Z)((0,P.Z)(t.createdTime),"PPP")}})}),t.createdBy&&(0,n.jsx)(T.kH,{label:t.createdBy.email,children:(0,n.jsx)(s.x,{display:"inline-block",fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,n.jsx)(x.cC,{id:"t490IT",values:{0:t.createdBy.displayName}})})})]}),(0,n.jsx)(E.R,{}),(0,n.jsx)(S.s,{icon:(0,n.jsx)(A.G,{icon:I.q2v,fixedWidth:!0}),onClick:i,children:(0,n.jsx)(x.cC,{id:"ePK91l"})}),(0,n.jsx)(S.s,{icon:(0,n.jsx)(A.G,{icon:I.WM4,fixedWidth:!0}),onClick:r,children:(0,n.jsx)(x.cC,{id:"euc6Ns"})}),(0,n.jsx)(E.R,{}),c&&(0,n.jsx)(S.s,{color:"orange.500",icon:(0,n.jsx)(d.xu,{boxSize:"4",children:(0,n.jsx)(L.Y,{})}),onClick:u,children:(0,n.jsx)(x.cC,{id:"thLYdn"})}),(0,n.jsx)(S.s,{color:"red.500",icon:(0,n.jsx)(A.G,{icon:I.N2j,fixedWidth:!0}),onClick:l,children:(0,n.jsx)(x.cC,{id:"B495Gs"})})]})}),o&&(0,n.jsx)(k.h,{children:(0,n.jsx)(er,{theme:t,isOpen:!0,onClose:a})})]})}),es=e=>{let{isChecked:t,name:i}=e;return(0,n.jsxs)(l.U,{spacing:1,alignItems:"flex-start",children:[t&&(0,n.jsx)(r.n,{w:3,h:"auto",mr:1,mt:1,color:"trueblue.700"}),(0,n.jsx)(s.x,{fontSize:"sm",noOfLines:1,"data-testid":"theme-name",color:t?"trueblue.700":void 0,children:i})]})},eo=(0,m.memo)(e=>{var t,i,r,s;let{theme:C,onThemeClicked:b,isChecked:y=!1,onEditClick:k,variant:w="outline"}=e,E=(0,f.z$)(),S=(0,o.p)(),I="ghost"===w,_=(0,m.useRef)(null),A=(0,m.useCallback)(e=>()=>{k&&(e?k((0,v.mg)(C,!0)):k(C))},[k,C]),{isOpen:T,onOpen:O,onClose:P}=(0,a.q)({id:"ArchiveThemeModalDisclosure"}),{user:D,currentWorkspace:R}=(0,z.SE)(),[M]=(0,g.gFs)(),L=C.name.replace(v.Qk,""),F=(0,m.useCallback)(()=>{if(!D||!R)return;let{id:e,...t}=C;M({variables:{id:e},update:(e,t)=>{let{data:i}=t;(null==i?void 0:i.duplicateTheme)&&e.writeQuery({query:g.$LR,variables:{workspaceId:C.workspaceId,archived:!1},data:{themes:[i.duplicateTheme]}})},optimisticResponse:{duplicateTheme:{id:"temp",__typename:"Theme",...t,name:"".concat(L," (copy)"),archived:!1,createdTime:new Date().toISOString(),updatedTime:new Date().toISOString()}}}).then(t=>{let{data:i}=t;i&&(null==E||E.track(f.AA.THEME_DUPLICATED,{theme_id:i.duplicateTheme.id,source_theme_id:e,name:L}),null==E||E.track(f.AA.THEME_CREATED,{theme_id:i.duplicateTheme.id,name:i.duplicateTheme.name,type:"duplicate"}),S({title:h.ag._({id:"DvRoa4",values:{0:i.duplicateTheme.name}}),status:"success",duration:3e3,position:"top",isClosable:!0}))}).catch(e=>{console.error("Couldn't duplicate theme ".concat(C.name," error: ").concat(e)),S({title:h.ag._({id:"aOi88n",values:{err:e}}),status:"error",duration:3e3,position:"top",isClosable:!1})})},[D,R,C,M,L,E,S]),W=C.workspaceId&&!!(null===(t=C.createdBy)||void 0===t?void 0:t.displayName),H=!!b,V=!k;return(0,n.jsxs)(d.xu,{ref:_,bgColor:y?"trueblue.100":I?void 0:"linen.50",textAlign:"left",tabIndex:H?0:void 0,borderRadius:"md",transitionProperty:I?"common":"none",transitionDuration:"normal",outline:"none",onClick:()=>null==b?void 0:b(C),onKeyPress:e=>{H&&"Enter"===e.key&&(null==b||b(C))},_hover:H?{shadow:I||y?void 0:"lg",bgColor:y?"trueblue.100":I?"trueblue.50":"gray.100"}:void 0,_focus:{boxShadow:y||!H?void 0:"outline"},shadow:I?void 0:"md",p:I?2:0,"data-theme-id":C.id,"data-testid":y?"current-theme-preview":void 0,cursor:H?"pointer":void 0,children:[(0,n.jsx)(G.n,{theme:C,minH:"9em",maxH:"9em"}),(0,n.jsxs)(c.k,{align:"baseline",mt:1,direction:"column",p:I?0:2,children:[W&&(0,n.jsx)(c.k,{my:2,children:(0,n.jsx)(es,{name:L,isChecked:y})}),(0,n.jsxs)(l.U,{alignItems:"flex-start",w:"100%",children:[W?(0,n.jsx)(p.l,{createdByYou:(null===(i=C.createdBy)||void 0===i?void 0:i.id)===(null==D?void 0:D.id),createdByName:null===(r=C.createdBy)||void 0===r?void 0:r.displayName,createdByProfileImageUrl:null===(s=C.createdBy)||void 0===s?void 0:s.profileImageUrl,timestampDescription:C.updatedTime&&(0,n.jsx)(x.cC,{id:"E1dtM3",values:{0:(0,j.Dw)(C.updatedTime)}})}):(0,n.jsx)(es,{name:L,isChecked:y}),(0,n.jsx)(u.L,{}),V?null:C.workspaceId&&!C.archived?(0,n.jsx)(el,{theme:C,openThemeEditorWithThisTheme:A(!1),onDuplicate:F,onArchiveThemeModalOpen:O,isArchiveThemeModalOpen:T,onArchiveThemeModalClose:P}):C.workspaceId&&!0===C.archived?(0,n.jsx)(N,{theme:C}):(0,n.jsx)(U,{onCustomizeThemeClick:A(!0),onEditThemeClick:A(!1)})]})]})]})});eo.displayName="ThemePreview"},52394:function(e,t,i){"use strict";i.d(t,{t:function(){return D}});var n=i(52322),r=i(38035),l=i(36474),s=i(43297),o=i(42822),a=i(77533),d=i(62614),c=i(42946),u=i(49929),x=i(5879),h=i(2784),m=i(91994),p=i(30233),g=i(29705),j=i(47443),f=i(52929),v=i(28535),C=i(80877),b=i(74444),y=i(11082),k=i(94199),w=i(50260);let E=e=>{let{openThemeEditor:t}=e;return(0,n.jsxs)(s.K,{bg:"gray.100",p:4,textAlign:"left",spacing:4,borderRadius:"md",my:2,children:[(0,n.jsx)(a.x,{textAlign:"center",fontWeight:"700",children:(0,n.jsx)(x.cC,{id:"yNvg2Q"})}),(0,n.jsx)(a.x,{fontSize:"sm",color:"gray.700",children:(0,n.jsx)(x.cC,{id:"qYwzxB"})}),(0,n.jsx)(d.z,{onClick:t,variant:"solid",leftIcon:(0,n.jsx)(u.G,{icon:c.JyM}),"data-testid":"new-theme-button",children:(0,n.jsx)(x.cC,{id:"srRMnJ"})})]})};var S=i(67613),I=i(69251),_=i(26838);let A=e=>{let{themes:t,currentThemeId:i,setTheme:r,openThemeEditor:l}=e;return(0,n.jsx)(I.r,{gap:1,flex:1,my:2,templateColumns:{base:"repeat(2, minmax(0, 1fr))"},children:[...t].map(e=>(0,n.jsx)(_.o,{theme:e,isChecked:!!(i&&e.id===i),onEditClick:l,onThemeClicked:r,variant:"ghost"},e.id))})},T=(0,h.memo)(e=>{let{currentTheme:t,setTheme:i,openThemeEditor:r,openThemeEditorWithDefaultTheme:l}=e,o=(0,m.CG)(S.Y3),a=(0,m.CG)(S.C0);return!a&&r?(0,n.jsxs)(s.K,{spacing:8,children:[l&&(0,n.jsx)(E,{openThemeEditor:l}),(0,n.jsx)(A,{themes:o,currentThemeId:null==t?void 0:t.id,setTheme:i,openThemeEditor:r})]}):(0,n.jsxs)(n.Fragment,{children:[(null==t?void 0:t.archived)?(0,n.jsxs)(j.b,{status:"warning",mb:4,children:[(0,n.jsx)(f.z,{}),(0,n.jsxs)(v.xu,{children:[(0,n.jsx)(C.C,{children:(0,n.jsx)(x.cC,{id:"i7yZxh",values:{GAMMA_ARTIFACT_PROPER_NOUN:k.Yc}})}),(0,n.jsx)(b.X,{children:(0,n.jsx)(x.cC,{id:"jH2g5C",components:{0:(0,n.jsx)(y.r,{textDecoration:"underline",isExternal:!0,href:w.oH}),1:(0,n.jsx)(g.h,{mx:"2px"})}})})]})]}):null,(0,n.jsx)(s.K,{spacing:2,children:(0,n.jsx)(v.xu,{width:"100%",mx:0,children:(0,n.jsx)(A,{themes:o,currentThemeId:null==t?void 0:t.id,setTheme:i,openThemeEditor:r})})})]})});T.displayName="ThemePickerBodyInner";var O=i(93441),P=i(14324);let D=e=>{let{setTheme:t,openThemeEditor:i,openThemeEditorWithDefaultTheme:g,currentTheme:j,openBackgroundPanel:f,shouldScrollToCurrent:v=!0,flexProps:C}=e,{isLoadingThemes:b}=(0,P.a)(),y=(0,m.CG)(S.FM);return(0,O.vm)(()=>{v&&!b&&"search"!==y&&(b||requestAnimationFrame(()=>{var e;return null===(e=document.querySelector('[data-theme-id="'.concat(null==j?void 0:j.id,'"]')))||void 0===e?void 0:e.scrollIntoView()}))},[b,null==j?void 0:j.id,y,v],[b,y]),(0,h.useEffect)(()=>{var e;null===(e=document.querySelector("[data-theme-picker-scroll-container]"))||void 0===e||e.scrollTo(0,0)},[y]),(0,n.jsxs)(r.k,{direction:"column",flex:1,h:"fit-content",...C,children:[b?(0,n.jsx)(p.S,{size:4}):(0,n.jsx)(T,{currentTheme:j,setTheme:t,openThemeEditor:i,openThemeEditorWithDefaultTheme:g}),f&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(l.L,{}),(0,n.jsxs)(s.K,{mt:12,mb:4,p:8,border:"1px solid",borderColor:"gray.200",spacing:4,bgColor:"gray.50",borderRadius:"md",align:"center",justifyContent:"center",children:[(0,n.jsx)(o.M,{children:(0,n.jsx)(a.x,{fontSize:"sm",children:(0,n.jsx)(x.cC,{id:"UNfHm4"})})}),(0,n.jsx)(d.z,{size:"sm",w:"fit-content",leftIcon:(0,n.jsx)(u.G,{icon:c.UHQ}),onClick:f,children:(0,n.jsx)(x.cC,{id:"+EZioz"})})]})]})]})}},28664:function(e,t,i){"use strict";i.d(t,{v:function(){return _}});var n=i(52322),r=i(24624),l=i(43297),s=i(74409),o=i(36474),a=i(62614),d=i(2338),c=i(28535),u=i(75768),x=i(32899),h=i(87651),m=i(85573),p=i(89099),g=i(16556),j=i(42946),f=i(49929),v=i(5879),C=i(87254),b=i(2784),y=i(8393),k=i(91994),w=i(67613),E=i(36651),S=i(93441);let I={dark:{label:(0,n.jsx)(v.cC,{id:"pvnfJD"})},light:{label:(0,n.jsx)(v.cC,{id:"1njn7W"})},professional:{label:(0,n.jsx)(v.cC,{id:"Oojfbh"})},colorful:{label:(0,n.jsx)(v.cC,{id:"Op7PhG"})}},_=(0,b.memo)(e=>{let{title:t,description:i,showDrawerCloseButton:_,openThemeEditorWithDefaultTheme:A,stackProps:T,currentTheme:O}=e,P=(0,k.TL)(),D=(0,k.CG)(w.FM),R=(0,k.CG)(w.s1),N=(0,b.useRef)(null),{currentWorkspace:G}=(0,E.SE)(),[z,M]=(0,b.useState)(""),L=(0,k.CG)(w.C0),F=(0,b.useCallback)(()=>{P((0,w.uG)({activeView:"search"})),setTimeout(()=>{var e;null===(e=N.current)||void 0===e||e.focus()},200)},[P]),U=(0,b.useCallback)(e=>{P((0,w.ql)({searchQuery:e}))},[P]),W=(0,S.Kt)(U,500),H=(0,b.useCallback)(e=>{M(e),W(e)},[W]),V=(0,b.useCallback)(e=>{let t=[...R];R.includes(e)?t=t.filter(t=>t!==e):t.push(e),P((0,w.LT)({filterKeywords:t}))},[R,P]);return(0,S.vm)(()=>{"search"!==D&&(O&&O.workspaceId?P((0,w.uG)({activeView:"custom"})):P((0,w.uG)({activeView:"standard"})))},[P,O,D],[O]),(0,b.useEffect)(()=>()=>{P((0,w.mc)())},[]),(0,n.jsxs)(l.K,{spacing:4,...T,children:[(0,n.jsxs)(l.K,{spacing:8,children:[(0,n.jsxs)(l.K,{spacing:4,children:[(0,n.jsxs)(l.K,{direction:"row",width:"100%",pr:_?10:void 0,children:[(0,n.jsx)(s.X,{fontSize:"3xl",children:t}),(0,n.jsx)(o.L,{}),!!A&&G&&L&&(0,n.jsx)(a.z,{size:"sm",variant:"solid",leftIcon:(0,n.jsx)(f.G,{icon:j.r8p}),onClick:A,"data-testid":"new-theme-button",children:(0,n.jsx)(v.cC,{id:"FiwgR9"})}),_&&(0,n.jsx)(d.o,{})]}),i?(0,n.jsx)(c.xu,{children:i}):(0,n.jsx)(n.Fragment,{})]}),L&&(0,n.jsxs)(u.h,{variant:"ghost",size:"sm",borderRadius:"full",w:"100%",children:[(0,n.jsx)(a.z,{borderRadius:"full",w:"50%",leftIcon:(0,n.jsx)(f.G,{icon:j.D0h,fixedWidth:!0}),"data-theme-picker-active-view-button":"custom",colorScheme:"custom"===D?"trueblue":"gray",bg:"custom"===D?"trueblue.100":"gray.100",onClick:()=>P((0,w.uG)({activeView:"custom"})),children:(0,n.jsx)(v.cC,{id:"8Tg/JR"})}),(0,n.jsx)(a.z,{borderRadius:"full",w:"50%",leftIcon:(0,n.jsx)(c.xu,{w:3.5,children:(0,n.jsx)(y.Y,{})}),"data-theme-picker-active-view-button":"standard",colorScheme:"standard"===D?"trueblue":"gray",bg:"standard"===D?"trueblue.100":"gray.100",onClick:()=>P((0,w.uG)({activeView:"standard"})),children:(0,n.jsx)(v.cC,{id:"TJBHlP"})}),(0,n.jsx)(x.h,{icon:(0,n.jsx)(r.G,{}),isRound:!0,"data-theme-picker-active-view-button":"search","aria-label":C.ag._({id:"A1taO8"}),variant:"ghost",colorScheme:"search"===D?"trueblue":"gray",bg:"search"===D?"trueblue.100":"gray.100",onClick:F})]})]}),(0,n.jsx)(h.U,{in:"search"===D,children:(0,n.jsx)(m.I,{ref:N,w:"100%",placeholder:C.ag._({id:"L0fOnm"}),value:z,onChange:e=>{H(e.target.value)}})}),(0,n.jsx)(h.U,{in:"standard"===D,children:(0,n.jsx)(p.E,{children:Object.entries(I).map(e=>{let[t,{label:i}]=e,r=R.includes(t);return(0,n.jsx)(g.Vp,{size:"md",letterSpacing:"normal",cursor:"pointer",onClick:()=>{V(t)},_hover:{bgColor:r?"trueblue.200":"blackAlpha.200"},colorScheme:r?"trueblue":"blackAlpha",children:i},t)})})})]})});_.displayName="ThemePickerHeader"},86963:function(e,t,i){"use strict";i.d(t,{g:function(){return d}});var n=i(9850),r=i.n(n),l=i(2784),s=i(47749);let o={theme:s.mU,themeValidationError:null,status:"new",themeBackgroundImgStatus:"idle",themeLogoImgStatus:"idle",customizationStep:null,originalTheme:null};function a(e,t){switch(t.type){case"NEW_BLANK_THEME":return{...r()(o),customizationStep:"customization"};case"THEME_RESET":return r()(o);case"SET_THEME_EDITING":{let{theme:i}=t.data,n=r()(i);return{...e,status:"editing",theme:i,originalTheme:n,customizationStep:"customization"}}case"SET_NEW_THEME_FOR_SELECTING":{let{theme:i}=t.data;return{...e,status:"new",theme:i,customizationStep:"selection"}}case"SET_NEW_THEME_FOR_CUSTOMIZING":{let{theme:i}=t.data,n=r()(i);return{...e,theme:i,originalTheme:n,customizationStep:"customization"}}case"THEME_UPDATE_THEME_PROPS":{let{theme:i}=e,{themeProps:n}=t.data;return{...e,theme:{...i,...n}}}case"THEME_UPDATE_THEME_CONFIG":{let{theme:i}=e,{themeConfig:n}=t.data;return{...e,theme:{...i,config:{...i.config,...n}}}}case"THEME_UPDATE_THEME_KEYWORDS":{let{theme:i}=e,{keywords:n}=t.data;return{...e,theme:{...i,config:{...i.config,keywords:{color:[],tone:[],...i.config.keywords,...n}}}}}case"THEME_BACKGROUND_IMAGE_UPLOAD_STARTED":{let{theme:i}=e,{background:n}=t.data;return{...e,themeBackgroundImgStatus:"loading",theme:{...i,config:{...i.config,background:n}}}}case"THEME_BACKGROUND_UPDATE_SUCCESS":{let{theme:i}=e,{background:n}=t.data;return{...e,themeBackgroundImgStatus:"idle",theme:{...i,config:{...i.config,background:n}}}}case"THEME_BACKGROUND_IMAGE_UPLOAD_FAIL":return{...e,themeBackgroundImgStatus:"idle"};case"THEME_LOGO_UPLOAD_STARTED":return{...e,themeLogoImgStatus:"loading"};case"THEME_LOGO_UPLOAD_SUCCESS":{let{theme:i}=e,{logoUrl:n}=t.data;return{...e,themeLogoImgStatus:"idle",theme:{...i,logoUrl:n}}}case"THEME_LOGO_UPLOAD_FAIL":return{...e,themeLogoImgStatus:"idle"};case"THEME_UPDATE_THEME_NAME":{let{theme:i}=e,{name:n}=t.data;return{...e,theme:{...i,name:n},themeValidationError:null}}case"THEME_VALIDATION_ERROR":{let{errorMessage:i}=t.data;return{...e,themeValidationError:i}}case"THEME_VALIDATION_ERROR_RESET":return{...e,themeValidationError:null}}}function d(){return l.useReducer(a,o)}},86783:function(e,t,i){"use strict";i.d(t,{z:function(){return j}});var n=i(52322),r=i(38035),l=i(87254),s=i(2784),o=i(64467),a=i(91994),d=i(91579),c=i(58879),u=i(46741),x=i(97676);let h={fontFamily:'"Inter", sans-serif !important',fontWeight:"500",lineHeight:"1.5 !important",textTransform:"none",letterSpacing:"normal !important",textAlign:"left !important",margin:"0 !important",color:"gray.800 !important",background:"none !important",border:"0 none !important",padding:"0 !important",content:'""'},m={".block-paragraph,.block-heading,.block-title,.block-todo,.block-numbered,.block-bullet":{...h,margin:0,my:"0.75em",":first-child":{mt:"0px !important"},":last-child":{mb:"0px !important"}},".block-paragraph":{fontSize:"1em"},".block-heading,.block-title":{fontWeight:"bold",lineHeight:{fontSize:"1.25"},'.heading[level="1"]':{fontSize:"1.5em"},'.heading[level="2"]':{fontSize:"1.25em"},'.heading[level="3"]':{fontSize:"1.125em"},'.heading[level="4"]':{fontSize:"1em"}},".block-title":{".title":{fontSize:"1.75em"}},a:{...h,color:"var(--chakra-colors-blue-500) !important","&:hover":{textDecoration:"underline"},cursor:"pointer"},".mention":{bgColor:"trueblue.50",whiteSpace:"break-spaces"},code:{backgroundColor:"var(--chakra-colors-trueblue-50)",color:"var(--body-color)",...x.FC}},p={".block-paragraph,.block-heading,.block-title,.block-todo,.block-numbered,.block-bullet":{...h,margin:0,my:"0.75em",":first-child":{mt:"0px !important"},":last-child":{mb:"0px !important"},color:"white"},code:{backgroundColor:"var(--chakra-colors-whiteAlpha-100)",color:"var(--chakra-colors-gray-200)",...x.FC},".block-todo label.chakra-checkbox .chakra-checkbox__control[data-checked]":{backgroundColor:"var(--chakra-colors-whiteAlpha-100)",color:"var(--chakra-colors-white)"}},g=e=>{let{isDark:t=!1}=e;return{".ProseMirror":{height:"100%"},...m,...u.dE,"--box-border-radius":"var(--chakra-radii-sm)","--link-color":t?"var(--chakra-colors-trueblue-100)":"var(--chakra-colors-trueblue-500)",".block-todo label.chakra-checkbox .chakra-checkbox__control:not([data-checked])":{borderColor:"var(--chakra-colors-chakra-border-color)"},"--body-color-inverted":t?"black":"white",...t?p:{},".is-selecting-node":{"[data-selection-ring]":{_before:{content:'""',position:"absolute",inset:0,borderRadius:"inherit",outline:"2px solid",outlineColor:t?"trueblue.100":"trueblue.300",pointerEvents:"none",zIndex:1}},'[data-selection-ring="padded"]':{_before:{outlineOffset:"0.25em"}}}}},j=(0,s.memo)(e=>{let{isEditable:t,notesSx:i,canShowEditHint:u=!1,isDark:x=!1}=e,[h,m]=(0,s.useState)(null),{destroyEditor:p,mountEditor:j}=(0,a.CG)(o.Vy);(0,s.useEffect)(()=>(j&&m(j()),()=>{null==p||p(),m(null)}),[p,j]),(0,s.useEffect)(()=>{h&&t&&h.commands.focus("end")},[t,h]),(0,s.useEffect)(()=>{if(h){if(t&&!h.isEditable){h.setEditable(!0);return}if(!t&&h.isEditable){h.setEditable(!1);return}}},[t,h]);let f=t?l.ag._({id:"fnNtuR"}):"Double click to edit",v=u&&h&&h.isEmpty,C=g({isDark:x});return(0,n.jsx)(r.k,{overflowY:"auto",border:"1px solid",borderColor:x?"gray.700":"gray.200",borderRadius:"md",flex:1,p:4,wordBreak:"break-word",sx:{".block.block-paragraph.first-block.last-block.is-empty::before":{...c.BI,content:'"'.concat(f,'"')},...C,...i,_before:v?{...c.BI,top:2,left:2,height:"auto",width:"auto",content:'"'.concat(l.ag._({id:"CvH5f/"}),'"')}:{}},pos:"relative",children:(0,n.jsx)(r.k,{flex:1,flexDirection:"column",children:h&&(0,n.jsx)(d.k,{editor:h,className:"highlight-mask",style:{height:"100%"}})})})});j.displayName="CardNotesEditor"},12136:function(e,t,i){"use strict";i.d(t,{e:function(){return p}});var n=i(52322),r=i(70065),l=i(5879),s=i(5632),o=i(2784),a=i(93202),d=i(49165),c=i(11050),u=i(84405),x=i(36651),h=i(41425),m=i(23147);let p=()=>{let[e]=(0,a.So6)({refetchQueries:["GetDocs"]}),{push:t}=(0,s.useRouter)(),i=(0,r.p)(),{user:p,currentWorkspace:g}=(0,x.SE)(),j=(0,c.z$)(),f=(0,o.useCallback)(r=>{var s;let{docId:o,docTitle:a,initialContent:x,channelId:f,source:v,openThemeEditor:C,onSuccess:b,newWindow:y}=r,k=null==p?void 0:null===(s=p.settings)||void 0===s?void 0:s.needsEditorOnboarding;if(!o)return Promise.reject(Error("Cannot duplicate without a docId"));let w=i({id:"duplicate-toast-".concat(o),isClosable:!1,position:"top",status:"loading",variant:"light",duration:null,title:(0,n.jsx)(l.cC,{id:"OvEjsP"})});return p&&(null==g?void 0:g.id)?e({variables:{duplicateDocInput:{orgId:null==g?void 0:g.id,sourceDocId:o,source:d.R[v],initialContent:x?{ydoc:(0,m.qI)(x),schemaVersion:h.bI,editors:[null==p?void 0:p.id]}:void 0,...f?{channels:[{channelId:f}]}:{}}}}).then(e=>{var r,s;if(!(null==e?void 0:null===(r=e.data)||void 0===r?void 0:r.duplicateDoc))throw Error("No data received");null==j||j.track(c.AA.EXAMPLE_DUPLICATED,{doc_id:o,title:a,source:v});let{id:d}=null==e?void 0:null===(s=e.data)||void 0===s?void 0:s.duplicateDoc;(0,u.Q)({doc_id:d,source:v,source_doc_id:o}),console.debug("[Duplicate.".concat(v,"] Doc duplicated New doc id (").concat(d,"). Navigating to Editor")),i.update(w,{status:"success",description:(0,n.jsx)(l.cC,{id:"zzDlyQ"}),duration:5e3,isClosable:!0});let x=C?"/docs/".concat(d).concat(C?"?openThemeEditor=true":""):k?"/docs/".concat(d,"?tour=true"):"/docs/".concat(d);y?window.open(x,"_blank"):t(x),b&&d&&b(d)},e=>{console.error("[Duplicate.".concat(v,"] Error duplicating doc:"),e.message),i.update(w,{title:(0,n.jsx)(l.cC,{id:"ADJtFi"}),description:e.message,status:"error",duration:null,isClosable:!0})}).catch(e=>{console.error("[Duplicate.".concat(v,"] Error duplicating doc:"),e.message),i.update(w,{title:(0,n.jsx)(l.cC,{id:"ADJtFi"}),description:e.message,status:"error",duration:null,isClosable:!0})}):(console.error("[Duplicate.".concat(v,"] Cannot duplicate without a user or workspace"),{user:p}),Promise.reject(Error("Cannot duplicate without a user or workspace")))},[null==g?void 0:g.id,p,i,e,j,t]);return f}},82245:function(e,t,i){"use strict";i.d(t,{A:function(){return n},i:function(){return r}});let n=e=>e.endsWith("gmail.com")||e.endsWith("hotmail.com")||e.endsWith(".edu"),r="gamma_logged_in"},45905:function(e,t,i){"use strict";i.r(t),i.d(t,{EditorPage:function(){return u}});var n=i(52322),r=i(71537),l=i(86236),s=i(5313),o=i(77627),a=i(86793),d=i(90221),c=i(93441);let u=()=>{let e=(0,c.gF)(),t=(0,a.o)();return e?(0,n.jsx)(o.m,{children:(0,d.s2)()?(0,n.jsx)(s.nz,{docEditorType:t}):(0,n.jsx)(s.Ur,{docEditorType:t})}):null};t.default=(0,r.z)((0,l.oO)(u))},75692:function(e,t,i){"use strict";i.d(t,{nP:function(){return _},tE:function(){return w},vP:function(){return k}});var n=i(52322),r=i(77533),l=i(332),s=i(28535),o=i(74409),a=i(69251),d=i(30523),c=i(19783),u=i(32899),x=i(54933),h=i(49929),m=i(5879),p=i(87254),g=i(87202),j=i(2784),f=i(17292),v=i(87827),C=i(91994),b=i(58184);let y=(0,g.ZP)("mod+Escape"),k=new Set(["h","j","k","l","s","PageUp","PageDown","ArrowRight","ArrowLeft","ArrowDown","ArrowUp","Enter","Escape"]),w=e=>{let{enabled:t,setActiveKey:i}=e,n=(0,C.CG)(v.C),{handlePresentNavigationEvent:r,spotlightingByBlock:l}=(0,b._)();return(0,j.useEffect)(function(){if(t)return f.F7.on("keydown","NAVIGATION_CONTROLS",e=>{var t,l;let s=e.target;if((null==s?void 0:null===(t=s.closest)||void 0===t?void 0:t.call(s,"[data-gamma-child-tiptap-editor]"))||(null==s?void 0:null===(l=s.closest)||void 0===l?void 0:l.call(s,"input"))||e.metaKey||n)return!1;let o=e.key;switch(k.has(o)&&("s"!==o&&(i(e.key),setTimeout(()=>{i(null)},100)),e.preventDefault()),o){case"s":return r({eventType:"toggleSpotlight",eventKey:o});case"l":case"ArrowRight":return r({eventType:"arrowRight",eventKey:o});case"h":case"ArrowLeft":return r({eventType:"arrowLeft",eventKey:o});case"j":case"ArrowDown":case"PageDown":return r({eventType:"arrowDown",eventKey:o});case"k":case"ArrowUp":case"PageUp":return r({eventType:"arrowUp",eventKey:o});case"r":return r({eventType:"restart",eventKey:o});case"Escape":if(y(e))return!1;return r({eventType:"cancelCurrentAction",eventKey:o});case"Enter":return r({eventType:"toggleExpanded",eventKey:o});default:return!1}})},[t,r,n,i]),l},E=e=>{let t=new KeyboardEvent("keydown",{key:e});i.g.dispatchEvent(t)},S={ArrowUp:{icon:x.FPD,label:(0,n.jsx)(m.cC,{id:"VbggDE"}),ariaLabel:()=>p.ag._({id:"VbggDE"}),shortcuts:["↑","K"],key:"ArrowUp",onClick:()=>{E("ArrowUp")},gridPos:[1,2]},ArrowLeft:{icon:x.acZ,label:(0,n.jsx)(m.cC,{id:"4jciC3"}),ariaLabel:()=>p.ag._({id:"4jciC3"}),shortcuts:["←","H"],key:"ArrowLeft",onClick:()=>{E("ArrowLeft")},gridPos:[2,1]},ArrowDown:{icon:x.r5q,label:(0,n.jsx)(m.cC,{id:"e3GOIZ"}),ariaLabel:()=>p.ag._({id:"e3GOIZ"}),shortcuts:["↓","J"],key:"ArrowDown",onClick:()=>{E("ArrowDown")},gridPos:[2,2]},ArrowRight:{icon:x.eFW,label:(0,n.jsx)(m.cC,{id:"ZjQRVw"}),ariaLabel:()=>p.ag._({id:"ZjQRVw"}),shortcuts:["→","L"],key:"ArrowRight",onClick:()=>{E("ArrowRight")},gridPos:[2,3]},Spotlight:{icon:x.GTX,label:(0,n.jsx)(m.cC,{id:"Xon9jp"}),ariaLabel:()=>p.ag._({id:"Xon9jp"}),shortcuts:["S"],key:"S",onClick:()=>{E("s")},gridPos:[1,3]}},I=e=>{let{shortcuts:t}=e;return(0,n.jsx)(r.x,{as:"span",color:"gray.400",ml:2,children:t.map((e,i)=>(0,n.jsxs)(j.Fragment,{children:[e,i===t.length-1?null:(0,n.jsx)(r.x,{fontSize:"11px",as:"span",color:"gray.500",mx:1,children:"or"})]},e))})},_=e=>{let{activeKey:t,spotlightingByBlock:i}=e;return(0,n.jsx)(l.h,{children:(0,n.jsxs)(s.xu,{position:"absolute",bottom:4,right:6,zIndex:"sticky",children:[(0,n.jsx)(o.X,{children:(0,n.jsx)(m.cC,{id:"wja8aL"})}),(0,n.jsx)(a.r,{gridTemplateColumns:"repeat(3, 1fr)",gridTemplateRows:"repeat(2, 1fr)",children:Object.values(S).map(e=>{let{gridPos:l,icon:s,label:o,ariaLabel:a,shortcuts:x,key:m,onClick:p}=e,g=t===m;return(0,n.jsx)(d.P,{gridColumn:l[1],gridRow:l[0],children:(0,n.jsx)(c.u,{hasArrow:!0,placement:"top",label:(0,n.jsxs)(r.x,{whiteSpace:"nowrap",children:[o,(0,n.jsx)(I,{shortcuts:x})]}),children:(0,n.jsx)(u.h,{m:1,shadow:"base",size:"md",variant:"S"==m&&i?"solid":"plain",isActive:g||"S"===m&&i,onClick:p,onMouseDown:e=>e.preventDefault(),"aria-label":a(),icon:(0,n.jsx)(h.G,{icon:s})})})},m)})})]})})}},58184:function(e,t,i){"use strict";i.d(t,{_:function(){return p}});var n=i(2784),r=i(34922),l=i(91994),s=i(24781),o=i(11050),a=i(97857),d=i(61750),c=i(82400),u=i(54999),x=i(47968),h=i(12825);let m=function(e,t){let i=!(arguments.length>2)||void 0===arguments[2]||arguments[2],n=(0,s.cC)("editor"),r=n.scroller;if(!r)return;e.commands.turnOffSpotlight();let l=r.scrollHeight-r.offsetHeight;if("down"===t){let t=n.isAtBottom(90),s=t&&i&&e.commands.spotlightNextCard(!1,"top");if(!s){let e=r.scrollTop+.5*r.offsetHeight;e>l-150&&(e=l),n.scrollTo({top:e})}}else{let t=n.isAtTop(90),l=t&&i&&e.commands.spotlightNextCard(!0,"bottom");if(!l){let e=r.scrollTop-.5*r.offsetHeight;e<150&&(e=0),n.scrollTo({top:e})}}},p=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.R0.MAIN_PRESENT_VIEW,{editor:t}=(0,h._)(),i=(0,o.z$)(),{enabled:s}=(0,d.gZ)(t),p=(0,l.qr)(),g=(0,n.useCallback)(n=>{let{eventType:l,eventKey:s,method:d="keyboard",payload:h={}}=n;if(!t)return!1;let g=p.getState(),j=(0,x.k8)(g),f=null==j?void 0:j.pos,v=!!(t&&j&&(0,c.Jg)(t,j)),C=Object.keys((0,x.X9)(g).tree);switch(l){case"toggleSpotlight":return v?null==t||t.commands.turnOffSpotlight():null==t||t.commands.spotlightNextBlock(),!0;case"goToCard":{let{cardId:e}=h;if(!e)return!1;return t.commands.spotlightCardById(e,v),p.dispatch((0,x.Qx)({attached:!1})),!0}case"arrowRight":return(0,r.p7)(),p.dispatch((0,x.Qx)({attached:!1})),null==i||i.trackDocEvent(o.AA.PRESENT_MODE_NAVIGATED,{direction:o.xQ.CARD_NEXT,method:"keyboard"===d?o.SY.KEYBOARD:o.SY.BUTTON_CLICK,source:e,...void 0!==s&&{key:s}}),t.commands.spotlightNextCard();case"arrowLeft":return(0,r.p7)(),p.dispatch((0,x.Qx)({attached:!1})),null==i||i.trackDocEvent(o.AA.PRESENT_MODE_NAVIGATED,{direction:o.xQ.CARD_PREV,method:"keyboard"===d?o.SY.KEYBOARD:o.SY.BUTTON_CLICK,source:e,...void 0!==s&&{key:s}}),t.commands.spotlightNextCard(!0);case"arrowDown":if((0,r.p7)(),p.dispatch((0,x.Qx)({attached:!1})),!v){let e=(0,a.ei)(t.state.selection);return t.commands.goToNextExpandableNode()||m(t,"down",!e),!0}return null==i||i.trackDocEvent(o.AA.PRESENT_MODE_NAVIGATED,{direction:o.xQ.TELEPROMPTER_DOWN,method:"keyboard"===d?o.SY.KEYBOARD:o.SY.BUTTON_CLICK,source:e,...void 0!==s&&{key:s}}),t.commands.spotlightNextBlock();case"arrowUp":if((0,r.p7)(),p.dispatch((0,x.Qx)({attached:!1})),!v){let e=(0,a.ei)(t.state.selection);return t.commands.goToNextExpandableNode(!0)||m(t,"up",!e),!0}return null==i||i.trackDocEvent(o.AA.PRESENT_MODE_NAVIGATED,{direction:o.xQ.TELEPROMPTER_UP,method:"keyboard"===d?o.SY.KEYBOARD:o.SY.BUTTON_CLICK,source:e,...void 0!==s&&{key:s}}),t.commands.spotlightNextBlock(!0);case"restart":if(C[0])return(0,r.p7)(),t.commands.spotlightCardById(C[0]),p.dispatch((0,x.Qx)({attached:!1})),!0;return!1;case"cancelCurrentAction":{let e=v&&f;if(t.commands.spotlightCollapseNearestExpandableNode(e?f:null))return t.commands.reHighlightExpandableNode(),!0;if(v)return t.commands.turnOffSpotlight(),!0;return p.dispatch((0,x.Qx)({attached:!1})),null==i||i.track(o.AA.CARD_COLLAPSED,{is_present_mode:!0,method:"escape_key"}),t.commands.ascendUpToParentCard(!1)}case"toggleExpanded":{let e=v&&f,i=t.commands.expandOrCollapseExpandableNode(e?f:null);if(i)return!0;if(e){let e=t.state.doc.resolve(f),i=e.parent;if(i&&(0,u.AH)(i))return(0,u.xB)(i.attrs.id,!1),t.commands.spotlightNextBlock(!0),!0;return t.commands.spotlightCollapseNearestExpandableNode(f)}return!1}default:return!1}},[i,t,e,p]);return{handlePresentNavigationEvent:g,spotlightingByBlock:s}}},48105:function(e,t,i){"use strict";i.d(t,{VN:function(){return x},rJ:function(){return c},us:function(){return u}});var n=i(2784),r=i(42111),l=i(91994),s=i(95316),o=i(47968),a=i(90439);let d="disable-card-size-animations",c=()=>{let e=(0,r.ye)("autoZoomToFit"),t=(0,l.CG)(o.Kk);return null!=t?t:e},u=()=>{let e=(0,l.CG)(o.i2),t=(0,n.useRef)(),i=c(),r=!a.Pv&&i;(0,n.useEffect)(()=>{let i=!t.current;t.current=e;let n=i?s.nY:s.id/4;e&&r&&setTimeout(()=>{document.body.classList.add(d),x(),setTimeout(()=>{document.body.classList.remove(d)},s.id/2)},n)},[e,r])},x=()=>{let e=(0,l.bh)(),t=document.documentElement.clientHeight,i=document.querySelector('[data-animate-value="presentCurrent"][data-card-scroll-element]');i&&(e.dispatch((0,o.Ic)({zoomLevel:1})),setTimeout(()=>{let n=i.scrollHeight,r=t/n;if(a.QX)r=Math.max(t/n,.7);else{if(r<.7)return;r=Math.floor(10*r)/10}e.dispatch((0,o.Ic)({zoomLevel:r})),console.debug("[zoomPresentModeToFit] zooming",JSON.stringify({viewportHeight:t,cardHeight:n,targetZoom:r}))}))}},86793:function(e,t,i){"use strict";i.d(t,{o:function(){return h}});var n=i(21805),r=i(2784),l=i(14274),s=i(76332),o=i(42111),a=i(91994),d=i(21733),c=i(82245),u=i(44631),x=i(97590);let h=e=>{let t=(0,a.CG)(x.yx),i=(0,r.useMemo)(()=>!!n.Z.get(c.i),[]),h=(0,d.we)(),m=(0,a.TL)(),p=(0,a.CG)(x.fh),g=(0,o.ye)("docEditorForcePublicStatic"),j=(0,r.useMemo)(()=>{var e,n;let r=new URLSearchParams(window.location.search),o=r.get("following_id")&&r.get("follow_on_start");if(o)return!0;if(!t)return i;let a=null===(n=t.accessLinks)||void 0===n?void 0:null===(e=n.find(e=>e.token===l.v.SHARE_TOKEN))||void 0===e?void 0:e.permission,d=a&&[s.y3$.Edit,s.y3$.Comment].includes(a);return d||h.can(s.y3$.Comment,t)||h.can(s.y3$.Edit,t)||h.can(s.y3$.Manage,t)},[h,t,i]);(0,r.useEffect)(()=>{let t=g?u.Z.PUBLIC_STATIC:e||(j?u.Z.COLLABORATIVE:u.Z.PUBLIC_STATIC);m((0,x.R8)({docEditorType:t}))},[m,e,g,j]);let f=e||(j?u.Z.COLLABORATIVE:u.Z.PUBLIC_STATIC);return console.debug("useSetDocEditorType",{canUseCollaborativeEditor:j,docEditorType:p,fallbackEditor:f,override:e}),p||f}},5313:function(e,t,i){"use strict";i.d(t,{dM:function(){return uX},Ur:function(){return uN},nz:function(){return u8},_i:function(){return ta._i}});var n,r,l,s=i(52322),o=i(38035),a=i(77533),d=i(28535),c=i(73200),u=i(42946),x=i(49929),h=i(5879),m=i(87254),p=i(97729),g=i.n(p),j=i(2784),f=i(43997),v=i(93202),C=i(75279),b=i(30384),y=i(37869),k=i(16690),w=i(55478),E=i(43679),S=i(34071),I=i(32899),_=i(39429),A=i(48394),T=i(30733),O=i.n(T),P=i(12436),D=i.n(P),R=i(76919);class N extends R.v{cleanup(){document.removeEventListener("mousemove",this.throttled)}constructor(){super(),this.throttled=D()(e=>{this.emit("move",e)},200,{leading:!0}),document.addEventListener("mousemove",this.throttled)}}let G=O()(()=>new N),z=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=G(),[n,r]=(0,j.useState)(!1),l=(0,j.useRef)(t);return(0,j.useEffect)(()=>{l.current=t},[t]),(0,j.useEffect)(()=>i.on("move",t=>{l.current||r(e(t))}),[i,e]),n};var M=i(91994),L=i(47968),F=i(89458),U=i(88640),W=i(27537),H=i(60617),V=i(33022);let B=(0,j.memo)(()=>{let{isOpen:e,onToggle:t,onClose:i}=(0,w.q)(),[n,r]=(0,F.I)(U.H.hasSeenCoachBar,!1),l=(0,M.CG)(L.Tf),o=(0,j.useCallback)(()=>{n||r(!0),i()},[n,i,r]),a=!n||e,d=z((0,j.useCallback)(e=>e.clientX>window.innerWidth-150&&e.clientY>window.innerHeight-150,[]));return(0,s.jsx)(H.H,{mr:l&&n&&!a&&!d?"-100%":"0px",transitionProperty:"margin-right",transitionDuration:"ultra-slow",transitionTimingFunction:"ease-in-out",children:(0,s.jsxs)(E.J,{returnFocusOnClose:!1,isOpen:a,onClose:o,closeOnBlur:!0,children:[(0,s.jsx)(S.x,{children:(0,s.jsx)(I.h,{onClick:()=>{e&&r(!0),t()},"aria-label":"Help",isRound:!0,size:"md",icon:(0,s.jsx)(x.G,{icon:u.UFh})})}),(0,s.jsx)(_.y,{...W.Ro,children:(0,s.jsx)(A.b,{children:(0,s.jsx)(V.C,{onClose:o})})})]})})});B.displayName="PresentModeHelpWidget";var K=i(94199),q=i(67964),Y=i(58632),Z=i(10653),J=i(16770);let X=()=>(0,M.CG)((0,J.CO)("left")),Q=()=>(0,M.CG)((0,J.CO)("right")),$=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1],i=e.panelPosition,n=(0,f.I0)(),r=(0,M.CG)((0,J.OC)(e)),l=(0,j.useCallback)(()=>{n((0,J.uJ)({component:e}))},[e,n]);(0,Y.v)(()=>{!t&&r&&n((0,J.sR)({position:i}))},[r,n,t,i],[t]);let s=(0,j.useCallback)(l=>{if(!t)return;let s=!r;(null==l?void 0:l.override)==="open"?s=!0:(null==l?void 0:l.override)==="closed"&&(s=!1),s?n((0,J.Yp)({component:e,disableTransition:!!(null==l?void 0:l.disableTransition)})):n((0,J.sR)({position:i}))},[e,i,r,n,t]);return{togglePanel:s,initPanel:l,isPanelOpen:r}},ee=()=>{let e=(0,j.useMemo)(()=>new Z.st,[]),t=(0,j.useMemo)(()=>new Z.st,[]),i=(0,j.useMemo)(()=>new Z.st,[]);return(0,j.useEffect)(()=>{if(!i||!e||!t)return;let n=e.pipe(i),r=t.pipe(i);return()=>{n(),r()}},[e,t,i]),{leftPanelLifecycle:e,rightPanelLifecycle:t,globalPanelLifecycle:i}};var et=i(48929),ei=i(90419),en=i(96933),er=i(4425);let el=(e,t,i)=>Math.min(Math.max(e,t),i),es=e=>{let{setWidth:t,width:i,position:n,onClose:r,panelRef:l,initialWidth:a,isDragging:c,setIsDragging:u}=e,x=(0,j.useMemo)(()=>(0,er.n)(),[]),h=x>0&&"right"===n,[m,p]=(0,j.useState)(i),[g,f]=(0,j.useState)(null),v=D()(e=>{let t;let i=el(t="left"===n?e.clientX:-((e.clientX-g)*1)+m,ei.pn,ei.ZQ);t<=ei.Nh?(l.current.style.transitionProperty="width",l.current.style.transitionDuration="var(--chakra-transition-duration-normal)",i=0):i>ei.pn&&(l.current.style.transitionProperty="",l.current.style.transitionDuration=""),l.current.style.width="".concat(i,"px")},30),C=()=>{u(!1),f(null);let e=l.current.style.width;"0px"===e?(r(),t(a)):t(parseInt(e.replace("px",""),10)),l.current.style.transitionProperty="",l.current.style.transitionDuration="",window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",C)};(0,j.useEffect)(()=>(g&&(window.addEventListener("mousemove",v),window.addEventListener("mouseup",C)),()=>{window.removeEventListener("mousemove",v),window.removeEventListener("mouseup",C)}),[g]);let b={};return b="left"===n?{right:-4,position:"absolute"}:h?{position:"relative"}:{left:-4,position:"absolute"},(0,s.jsx)(o.k,{h:"100%",bg:h?"gray.200":c?"blackAlpha.200":"rgba(0,0,0,0)",w:h?2:4,justifyContent:"center",alignItems:"center",cursor:"col-resize",_hover:{bg:h?"gray.400":"blackAlpha.200"},transitionProperty:"common",transitionDuration:"normal",role:"group",onMouseDown:e=>{e.preventDefault(),u(!0),f(e.clientX),p(i)},position:"absolute",display:["none","none","none","flex"],...b,children:!h&&(0,s.jsx)(d.xu,{bg:"white",borderRadius:"full",w:1,h:10,opacity:c?1:".5",transitionProperty:"common",transitionDuration:"normal",_groupHover:{opacity:1}})})},eo={ifPanelHasRoomToOpen:function(e,t){return{base:t,xl:e}}},ea=e=>{var t;let{position:i,panelLifecycle:n}=e,r=(0,j.useRef)(),[l,a]=(0,j.useState)(!1),d=(0,f.I0)(),c=(0,M.CG)((0,J.SL)(i)),u=(0,M.CG)((0,J.Fw)(i)),x=(0,M.CG)((0,J.CO)(i)),h=(0,M.CG)((0,J.eh)(i)),m=null!==(t=null==h?void 0:h.canCollapse)&&void 0!==t&&t,p=(0,j.useCallback)(()=>{d((0,J.sR)({position:i}))},[d,i]),g=(0,j.useCallback)(()=>{d((0,J.Yp)({component:h}))},[h,d]),v=(0,j.useCallback)(e=>{d((0,J.UG)({width:e,position:i})),n.emit("resize",{})},[d,n,i]),C={zIndex:Number((0,et.dQ)("zIndices","overlay"))+1,position:eo.ifPanelHasRoomToOpen("relative","fixed"),top:eo.ifPanelHasRoomToOpen(0,"var(--editor-padding-top)"),bottom:0,[i]:0};u||l||(C.transitionProperty="width",C.transitionDuration="normal"),(0,j.useEffect)(()=>{let e=e=>{"width"===e.propertyName&&n.emit("resize",{})};return r.current.addEventListener("transitionend",e),()=>{r.current&&r.current.removeEventListener("transitionend",e)}},[n,r]);let b=(0,en.i)(eo.ifPanelHasRoomToOpen(!0,!1))||!1;return(0,j.useEffect)(()=>{c&&!b&&m&&p()},[b,c,p,m]),(0,s.jsxs)(o.k,{ref:r,...C,style:{width:c||m?x:0},maxW:"100%","data-print-hidden":!0,children:[c&&"right"===i&&(0,s.jsx)(es,{isDragging:l,setIsDragging:a,position:i,width:x,setWidth:v,panelRef:r,onClose:p,initialWidth:ei.Ld}),(0,s.jsx)(Z.Mn.Provider,{value:n,children:h&&(c||m)&&(0,s.jsx)(h,{isDragging:l,isOpen:c,closePanel:p,openPanel:g,panelRef:r,lifecycle:n,hasRoomToOpen:b})}),c&&"left"===i&&(0,s.jsx)(es,{isDragging:l,setIsDragging:a,position:i,width:x,setWidth:v,panelRef:r,onClose:p,initialWidth:ei.X9})]})},ed=(0,j.memo)(e=>(0,s.jsx)(ea,{position:"right",...e}));ed.displayName="RightPanelContainer";let ec=(0,j.memo)(e=>(0,s.jsx)(ea,{position:"left",...e}));ec.displayName="LeftPanelContainer";var eu=i(50019),ex=i(29117),eh=i(62614),em=i(75768),ep=i(94523),eg=i(5632),ej=i(17292),ef=i(90221),ev=i(78462),eC=i(84698);let eb=e=>{let{docId:t}=e,i=(0,M.TL)(),n=(0,eu.ff)("gray.300","gray.800"),r=(0,eu.ff)("white","gray.900"),l=(0,eu.ff)("transparent","transparent"),a=(0,eu.ff)("gray.500","gray.400"),c=(0,eu.ff)("trueblue.50","trueblue.400"),p=(0,eu.ff)("trueblue.500","white"),g=(0,eu.ff)("gray.600","gray.100"),f=(0,eu.ff)("gray.100","gray.700"),v=(0,eu.ff)("trueblue.50","trueblue.400"),C=(0,eu.ff)("trueblue.500","white"),{replace:b}=(0,eg.useRouter)(),y=(0,M.CG)(eC.tv),k=(0,j.useCallback)(()=>{if(!t)return;let e=(0,ev.yQ)({docId:t});b(e,void 0,{shallow:!0})},[t,b]),w=(0,j.useCallback)(e=>{i((0,eC.Tj)({previewSize:e}))},[i]);return(0,j.useEffect)(()=>ej.F7.on("keydown","SITE_PREVIEW_PANE",e=>("Escape"===e.key&&k(),!0)),[k]),(0,s.jsx)(o.k,{bg:"white",align:"flex-start",direction:"column",width:"100%","data-sites-preview-pane":!0,children:(0,s.jsxs)(ex.U,{w:"100%",spacing:0,p:2,py:2,bg:r,borderColor:n,justify:"flex-start",borderBottomWidth:"1px",children:[(0,s.jsx)(ex.U,{spacing:2,flexBasis:"30%",children:!(0,ef.s2)()&&(0,s.jsx)(eh.z,{size:"sm",variant:"plain",onClick:k,children:(0,s.jsx)(ex.U,{children:(0,s.jsx)(d.xu,{children:(0,s.jsx)(x.G,{icon:u.acZ})})})})}),(0,s.jsxs)(em.h,{size:"sm",ml:24,flexBasis:"40%",justifyContent:"center",children:[(0,s.jsx)(ep.kH,{label:(0,s.jsx)(h.cC,{id:"58m6Qy"}),children:(0,s.jsx)(I.h,{"aria-label":m.ag._({id:"58m6Qy"}),variant:"ghost",size:"sm",icon:(0,s.jsx)(x.G,{icon:u.Z__}),bg:"mobile"===y?c:l,_hover:{color:"mobile"===y?C:g,bg:"mobile"===y?v:f},color:"mobile"===y?p:a,onClick:()=>{w("mobile")}})}),!(0,ef.s2)()&&(0,s.jsx)(ep.kH,{label:(0,s.jsx)(h.cC,{id:"fpcKeD"}),children:(0,s.jsx)(I.h,{"aria-label":m.ag._({id:"fpcKeD"}),variant:"ghost",size:"sm",icon:(0,s.jsx)(x.G,{icon:u.ep5}),bg:"tablet"===y?c:l,_hover:{color:"tablet"===y?C:g,bg:"tablet"===y?v:f},color:"tablet"===y?p:a,onClick:()=>{w("tablet")}})}),!(0,ef.s2)()&&(0,s.jsx)(ep.kH,{label:(0,s.jsx)(h.cC,{id:"K3p0ar"}),children:(0,s.jsx)(I.h,{"aria-label":m.ag._({id:"K3p0ar"}),variant:"ghost",size:"sm",icon:(0,s.jsx)(x.G,{icon:u.tc$}),bg:"desktop"===y?c:l,_hover:{color:"desktop"===y?C:g,bg:"desktop"===y?v:f},color:"desktop"===y?p:a,onClick:()=>{w("desktop")}})})]}),(0,s.jsx)(ex.U,{flexBasis:"30%",justifyContent:"flex-end"})]})})};var ey=i(31341),ek=i(85326),ew=i(54073),eE=i.n(ew),eS=i(31181),eI=i(23147);let e_=(e,t)=>{let i=(0,M.TL)(),n=(0,M.qr)(),r=!!(0,M.CG)(eS.$U),l=(0,M.CG)(L.wc),s=(0,M.CG)(eS.B$),o=t&&r&&l;(0,j.useEffect)(()=>{var t,r;if(!o||!e||e.gammaDocId!==s)return;let l=(0,L.yx)(n.getState()),a=null==l?void 0:null===(r=l.publishedSnapshot)||void 0===r?void 0:null===(t=r.content)||void 0===t?void 0:t.default;if(!a)return;let d=!(0,eI.G0)(e,a);console.debug("[useDirtyStateTracking] INITIALIZING DIRTY STATE ".concat(s," via compareDocJSON"),{isDirty:d}),d&&i((0,eS.xc)({pageId:e.gammaDocId,lastUpdatedAt:new Date().toISOString()}))},[i,n,e,o,s]),(0,j.useEffect)(()=>{if(!o||!e)return;let t=eE()(()=>{i((0,eS.xc)({pageId:e.gammaDocId,lastUpdatedAt:new Date().toISOString()}))},500,{leading:!0,trailing:!0,maxWait:1e3});return e.on("update",t),()=>{e.off("update",t)}},[o,i,e])};var eA=i(15041),eT=i(29318),eO=i(56356),eP=i(74389),eD=i(56904),eR=i(78160),eN=i(17132),eG=i(11050),ez=i(97563),eM=i(72338),eL=i(84636),eF=i.n(eL),eU=i(24781),eW=i(96255),eH=i(60742),eV=i(90604);let eB=(e,t,i,n,r)=>{let l=n-i,s=Math.max(l-Math.max(e-i,0)-Math.max(n-t,0),0),o=s/l,a=o>0&&s==t-e;return{overlap:o,viewing:r&&(a||o>.5||s>400),only:a}},eK=(e,t)=>{let i=(0,eU.As)("editor"),[n,r]=(0,j.useState)(null),l=(0,j.useRef)({presentingCardId:null,scrollTop:0,containerHeight:0,expandedCards:{}}),s=(0,M.CG)(L.gh),o=(0,M.CG)(L.i2);(0,j.useEffect)(()=>{l.current.presentingCardId=null!=o?o:null},[o]);let a=(0,M.CG)(L.Q5);(0,j.useEffect)(()=>{l.current.expandedCards=a},[a]),(0,j.useEffect)(()=>{let e=document.querySelector(i.scrollSelector);if(!e)return;r(e);let t=e.getBoundingClientRect(),{height:n}=t;l.current.scrollTop=e.scrollTop,l.current.containerHeight=n},[i.scrollSelector,l]),(0,j.useEffect)(()=>{let e=eE()(()=>{n&&(l.current.scrollTop=n.scrollTop)},250,{trailing:!0,maxWait:500});return window.addEventListener("scroll",e,!0),()=>window.removeEventListener("scroll",e,!0)},[n]),(0,j.useEffect)(()=>{let e=eE()(()=>{n&&(l.current.containerHeight=n.getBoundingClientRect().height)},250,{trailing:!0,maxWait:500});return window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[n]),(0,j.useEffect)(()=>{if(!e)return;if(s===eV.q.SLIDE_VIEW){let e=setInterval(()=>{t.emit("cardViewed",{cardId:l.current.presentingCardId,interval:1e3})},1e3);return()=>clearInterval(e)}let n=setInterval(()=>{if(document.hidden)return;let{scrollTop:n,containerHeight:r,expandedCards:s}=l.current,o=n+r;eF()((0,eM.N2)(e.state.doc,eW.KH),e=>e.node.attrs.id).map(t=>{let r;let l=t.node.attrs.id,a=s[l];if(!a)return null;try{r=e.view.nodeDOM(t.pos)}catch(e){return null}if(r instanceof HTMLElement){let e=(0,eH.LY)(r,i.scrollSelector),{offsetHeight:t}=r,s=t+e;return{id:l,...eB(n,o,e,s,a)}}return null}).filter(e=>!!(null==e?void 0:e.viewing)).forEach(e=>{t.emit("cardViewed",{cardId:e.id,interval:1e3})})},1e3);return()=>clearInterval(n)},[s,e,l,t,i.scrollSelector])},eq=e=>{let{editor:t,backoffFactor:i=1}=e,n=(0,eG.z$)(),[r,l]=(0,j.useState)(15e3);eK(t,ez.f);let s=(0,j.useCallback)(()=>{ez.f.flush(),l(Math.min(r*i,12e4))},[i,r]);return(0,j.useEffect)(()=>{if(!n)return;ez.f.initialize(),ez.f.on("flush",e=>{let{viewed:t}=e;for(let[e,i]of Object.entries(t))n.trackDocEvent(eG.AA.CARD_VIEWED,{card_id:e,duration:i})});let e=setInterval(()=>s(),r);return()=>{clearInterval(e),ez.f.destroy()}},[n,r,s]),null};var eY=i(36651),eZ=i(81672),eJ=i(74409),eX=i(17993),eQ=i(8713),e$=i(69420),e0=i(86783),e1=i(18149),e2=i.n(e1),e5=i(64467),e4=i(48776),e3=i(98462);let e9=e=>{let t=(0,M.CG)(e5.AD),{title:i}=(0,e4.T)({cardId:t||void 0}),n=(0,M.CG)(L.pN,function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return e2()(...t)}),r=n.indexOf(t||""),l=(0,j.useCallback)(t=>()=>{var i,l;if(!e)return;let s=null!==(l=n[r+(t?1:-1)])&&void 0!==l?l:n[r],o=null===(i=(0,eW.Bw)(e,s))||void 0===i?void 0:i.pos;if(!o)return;(0,e3.vS)(e,o)||e.commands.selectInsideNodeAtPos(o);let a=e.view.nodeDOM(o);a instanceof HTMLElement&&(0,eU.cC)("editor").scrollElementIntoView({element:a,delay:0})},[r,e,n]);return{cardId:t,title:i||"Untitled",canGoForward:r<n.length-1,canGoBack:r>0,goToNextCard:l(!0),goToPreviousCard:l(!1)}};var e6=i(89996),e7=i(42111),e8=i(95316);let te=e=>{let{editor:t,isReadonly:i}=e,{selection:n}=(0,e6.t)(t),r=(0,M.TL)(),l=(0,e7.ye)("cardNotes");(0,j.useEffect)(()=>{if(!t||!l)return;let e=(0,e8.AQ)(t.state.doc,t.state.selection.from);if(e&&e.node&&!(0,e3.Qp)(e.node)){if(i){r((0,e5.NK)());return}(0,e3.Fi)(t,e.pos)}},[l,r,t,i,n])},tt=e=>{let{closePanel:t}=e,{editor:i}=(0,ta._i)(),n=(0,M.CG)(L.hN),{canGoBack:r,canGoForward:l,title:c,goToNextCard:p,goToPreviousCard:g}=e9(i),f=(0,M.TL)();te({editor:i,isReadonly:!n}),(0,j.useEffect)(()=>eQ.F7.on("keydown","CARD_NOTES_PANEL",e=>{let i=document.activeElement;return!!(i instanceof HTMLElement&&i.closest('[data-panelid="card-notes-panel"]'))&&"Escape"===e.key&&(t(),!0)}),[t,f]);let v=(0,eT.Yy)();return(0,s.jsx)(ep.Wk,{isDark:v,children:(0,s.jsx)(e$.s,{bgColor:v?"gray.900":"white","data-panelid":"card-notes-panel",color:v?"white":"gray.900",children:(0,s.jsxs)(o.k,{direction:"column",h:"100%",flex:1,children:[(0,s.jsx)(eZ.P,{"data-card-notes-close-button":!0,position:"absolute",top:2,right:3,onClick:t}),(0,s.jsxs)(ex.U,{px:6,py:4,spacing:4,children:[(0,s.jsx)(eJ.X,{fontSize:"3xl",fontWeight:800,letterSpacing:-1,children:"Notes"}),n&&(0,s.jsx)(ep.Yq,{label:(0,s.jsx)(h.cC,{id:"qcPeK2"})})]}),(0,s.jsxs)(eX.g,{px:6,pb:4,alignItems:"stretch",flex:1,overflowY:"hidden",spacing:4,children:[(0,s.jsx)(d.xu,{children:(0,s.jsx)(a.x,{fontWeight:"600",color:v?"gray.300":"gray.500",wordBreak:"break-word",noOfLines:2,"data-testid":"card-notes-card-title",children:c})}),(0,s.jsx)(e0.z,{isEditable:n,isDark:v}),n&&(0,s.jsxs)(ex.U,{children:[(0,s.jsx)(ep.kH,{label:r?(0,s.jsx)(h.cC,{id:"cbqngJ"}):(0,s.jsx)(h.cC,{id:"4OtlnH"}),children:(0,s.jsx)(o.k,{flex:1,children:(0,s.jsx)(I.h,{"aria-label":r?m.ag._({id:"cbqngJ"}):m.ag._({id:"4OtlnH"}),icon:(0,s.jsx)(x.G,{icon:u.acZ}),onClick:g,isDisabled:!r,flex:1})})}),(0,s.jsx)(ep.kH,{label:l?(0,s.jsx)(h.cC,{id:"EyUKqu"}):(0,s.jsx)(h.cC,{id:"ggpGEd"}),children:(0,s.jsx)(o.k,{flex:1,children:(0,s.jsx)(I.h,{"aria-label":l?m.ag._({id:"EyUKqu"}):m.ag._({id:"ggpGEd"}),icon:(0,s.jsx)(x.G,{icon:u.eFW}),onClick:p,isDisabled:!l,flex:1})})})]})]})]})})})};tt.panelPosition="right";var ti=i(15830);let tn=e=>{let{toggleCardNotesPanel:t,isCardNotesPanelOpen:i,editor:n}=e,r=(0,M.TL)(),l=(0,e7.ye)("cardNotes"),s=(0,M.CG)(L.gh),o=s===eV.q.SLIDE_VIEW;(0,j.useEffect)(()=>{i&&(!l||o)&&t()},[l,i,t,o]),(0,j.useEffect)(()=>{!i&&n&&(r((0,e5.mK)({isOpen:!1})),n.view.dispatch(n.state.tr))},[r,n,i,t]),(0,j.useEffect)(()=>{if(l&&n)return ti.T.on("toggle",e=>{let{config:l,clickedCardId:s,activeNotesCardId:o}=e;i&&s!==o||(t(l),r((0,e5.mK)({isOpen:!i})),n.view.dispatch(n.state.tr))})},[r,n,l,i,t])};var tr=i(93441);let tl="drag-in-progress",ts=()=>{(0,j.useEffect)(()=>{let e=()=>{document.body.classList.add(tl)},t=()=>{document.body.classList.remove(tl)};return document.body.addEventListener("dragstart",e,!0),document.body.addEventListener("dragend",t,!0),document.body.addEventListener("drop",t,!0),document.body.addEventListener("mouseup",t,!0),()=>{document.body.removeEventListener("dragstart",e,!0),document.body.removeEventListener("dragend",t,!0),document.body.removeEventListener("drop",t,!0),document.body.removeEventListener("mouseup",t,!0)}},[])};var to=i(44631),ta=i(52926),td=i(42822),tc=i(43297),tu=i(81540),tx=i(34972),th=i(50788),tm=i(7370),tp=i(27058),tg=i(741),tj=i(94465),tf=i(42703),tv=i(90383);let tC=e=>"tablet"===e?"768px":"mobile"===e?(0,ef.s2)()?"100vw":"375px":"100vw",tb=e=>{let{loading:t,...i}=e,{editor:n,docId:r,previewSize:l}=i;return(0,s.jsx)(tx.BU,{children:(0,s.jsx)(th.cL,{children:(0,s.jsx)(o.k,{pos:"relative",justifyContent:"center",bg:"#C5C5C5",flex:1,children:!t&&n&&r?(0,s.jsx)(ty,{...i,editor:n,docId:r}):(0,s.jsx)(d.xu,{flexDirection:"column",w:tC(l),h:"var(--100vh)",bg:"gray.100","data-testid":"preview-editor-loading",inset:0,children:(0,s.jsx)(td.M,{h:"100%",children:(0,s.jsx)(tc.K,{align:"center",children:(0,s.jsx)(tu.$,{})})})})})})})},ty=e=>{let{docId:t,editor:i,previewSize:n,onCreate:r}=e,l=(0,j.useMemo)(()=>(0,tm.e)().concat(tp.F),[]),a=(0,j.useMemo)(()=>i.getJSON(),[i]),u="mobile"===n?"mobile":"desktop",x=(0,tj.j)({async onCreate(e){let{editor:t}=e;console.debug("[SimpleEditor][onCreate] TipTap editor is now ready"),null==r||r({editor:t})},content:a,extensions:l,editable:!1});x.shouldUsePublishedVersion=!0;let{editorAnimationsClass:h,editorAnimationsCSSVars:m}=(0,eP.k)({editor:x,instanceId:u,scrollingParentSelector:".".concat(to.B)}),p=(0,M.CG)(eS.lH),g=(0,M.CG)(L.Pu),f=(0,tv.nT)(p),v=f?eR.ZQ:0,C=tC(n);return(0,s.jsxs)(d.xu,{className:(0,c.cx)("preview-editor-root",h),style:m,w:C,h:"100%",css:{"--editor-width":C,"--doc-padding-top":"".concat(v,"px"),"--editor-padding-top":"".concat(50,"px")},position:"relative",shadow:"xl",children:[p&&f&&(0,s.jsx)(o.k,{pos:"absolute",top:0,left:0,w:"100%",zIndex:"10",children:(0,s.jsx)(tg.n,{theme:g,editable:!1,content:p.navContent},"".concat(t,"__preview-editor-nav__").concat(u,"}"))}),(0,s.jsx)(tf.f,{editor:x},"".concat(t,"__preview-editor__").concat(u,"}"))]})};var tk=i(97590),tw=i(83905);let tE=()=>{let e=(0,M.CG)(eS.lH),t=(0,M.CG)(L.Pu),i=(0,M.qr)(),[n]=(0,v.Iyu)(),r=(0,j.useCallback)(async e=>{var t;let{editor:r}=e,l=null===(t=(0,eS.lH)(i.getState()))||void 0===t?void 0:t.id;l&&await n({variables:{input:{siteId:l,navContent:r.state.doc.toJSON()}}})},[n,i]),l=(0,tr.Kt)(r,500);return e?(0,s.jsx)(o.k,{pos:"absolute",top:0,left:0,w:"100%",zIndex:tw.S.siteNav,children:(0,s.jsx)(tg.n,{theme:t,onUpdate:l,content:e.navContent,editable:!0,scrollingParentSelector:".".concat(to.B)})}):null};var tS=i(55274),tI=i(32981),t_=i(26468),tA=i(73751),tT=i(2338),tO=i(97217),tP=i(50250),tD=i(58125),tR=i(30764),tN=i(71113),tG=i(29957),tz=i(50260),tM=i(66479),tL=i(79671),tF=i(32186),tU=i(46409),tW=i(22569);let tH=j.createContext({enabled:!1,registerEditor:(e,t)=>{},getAllCards:()=>[],userMessage:"",setUserMessage:e=>{}});function tV(){let e=(0,j.useContext)(tH);return e}let tB=e=>{let{children:t}=e,i=(0,j.useRef)(new Map),n=(0,j.useRef)(""),r=(0,j.useRef)((e,t)=>{i.current.set(e,t)}),l=(0,j.useRef)(()=>Array.from(i.current.values()).map(e=>{var t,i;return null===(i=e.state.doc.firstChild)||void 0===i?void 0:null===(t=i.content.toJSON())||void 0===t?void 0:t[0]}).filter(Boolean)),o=(0,j.useCallback)(e=>{n.current=e},[]);return(0,s.jsx)(tH.Provider,{value:{enabled:!0,registerEditor:r.current,getAllCards:l.current,userMessage:n.current,setUserMessage:o},children:t})};var tK=i(8776),tq=i(40335),tY=i(56581),tZ=i(31709);let tJ=e=>{let{cardId:t,onClick:i}=e,n=(0,M.CG)((0,tK.NB)(t)),r=(0,M.CG)(L.Pu);return n?(0,s.jsxs)(tc.K,{zIndex:1,mt:"4.5em",width:"180px",bg:"whiteAlpha.500",border:"1px solid",borderColor:"blackAlpha.300",borderRadius:"lg",p:4,sx:{"*":{"backdrop-filter":"none !important","-webkit-backdrop-filter":"none !important"}},children:[n.variants.map(e=>{if(!e)return null;let{label:l,card:o,id:a}=e;return(0,s.jsx)(tX,{theme:r,isSelected:n.selected===a,label:l,card:o,onClick:()=>{i({cardId:t,variationId:a})}},a)}),n.variants.length<2&&(0,s.jsx)(td.M,{children:(0,s.jsx)(tu.$,{})})]}):null},tX=e=>{let{label:t,card:i,theme:n,isSelected:r=!1,onClick:l=()=>{}}=e,d=(0,j.useMemo)(()=>(0,tZ.vL)({docFlags:{cardLayoutsEnabled:!0}},[i]),[i]);return(0,s.jsxs)(tc.K,{align:"start",children:[(0,s.jsx)(o.k,{borderRadius:"md",bg:"white",shadow:r?"outline":"md",overflow:"hidden",cursor:"pointer",_hover:{bg:"trueblue.50"},transitionProperty:"common",transitionDuration:"fast",onClick:l,children:(0,s.jsx)(o.k,{sx:tF.n,css:{"--editor-font-size":"0.15rem","--editor-width":"150px"},justifyContent:"center",alignItems:"top",pointerEvents:"none",children:(0,s.jsx)(tF.m,{content:d,theme:n,isThumbnail:!0})})}),(0,s.jsxs)(a.x,{fontSize:"sm",children:[r&&(0,s.jsx)(tY.n,{boxSize:3,mr:2}),t]})]})},tQ="ai-wizard-editor-root",t$=e=>{let{doc:t,cards:i,theme:n=tz.mU}=e,r=(0,tW.R5)(n),l=(0,tM.wj)(n),a=(0,tW.wh)(r,l),d=(0,M.TL)(),{registerEditor:c}=tV();return((0,j.useEffect)(()=>()=>{d((0,tK.mc)())},[d]),t)?(0,s.jsxs)(o.k,{bg:"gray.100",overflowY:"auto",overflowX:"hidden",justifyContent:"flex-start",alignContent:"center",alignItems:"center",alignSelf:"stretch",direction:"column",width:"100%",height:"100%",position:"relative",className:tQ,...a,children:[(0,s.jsx)(tU.Y,{}),i.map((e,i)=>{var n;let r=null===(n=e.attrs)||void 0===n?void 0:n.id;return r?(0,s.jsx)(t0,{doc:t,cardId:r,cardIndex:i,cardJSON:e,onCreate:e=>{c(r,e)}},r):null})]}):null},t0=e=>{let{cardId:t,cardIndex:i,cardJSON:n,doc:r,onCreate:l}=e,a=(0,M.TL)(),[d,c]=(0,j.useState)(null),{userMessage:u}=tV(),x=(0,tq.b)({editor:d});(0,j.useEffect)(()=>{d&&x({doc:d.state.doc,cardId:t,message:u})},[x,d,t,i,u]);let h=(0,j.useMemo)(()=>(0,tL.vL)({docFlags:{cardLayoutsEnabled:!0}},[n]),[n]),m=(0,M.CG)((0,tK.a4)(t));(0,tr.vm)(()=>{if(!d||!m)return;let e=(0,eW.Bw)(d,t);e&&d.commands.command(t=>{let{tr:i}=t,n=tR.NB.fromJSON(d.schema,m.card);return i.replaceWith(e.pos,e.pos+e.node.nodeSize,n),!0})},[d,m,t],[m]);let p=(0,j.useCallback)(e=>{let{cardId:i,variationId:n}=e;d&&i===t&&a((0,tK.dx)({cardId:t,variantId:n}))},[a,d,t]);return(null==r?void 0:r.id)?(0,s.jsxs)(o.k,{className:"ai-variation-editor-".concat(t),alignItems:"flex-start",sx:tF.n,my:-8,children:[(0,s.jsx)(tJ,{cardId:t,onClick:p}),(0,s.jsx)(tm.y,{initialContent:h,onCreate:e=>{let{editor:t}=e;c(t),l(t)},doc:r,docId:r.id,scrollingParentSelector:".".concat(tQ),readOnly:!0,isStatic:!0,animationsEnabled:!1,extensions:[],shouldSupportMenus:!1})]}):null};var t1=i(11550);let t2=e=>{let{isOpen:t,onClose:i,onOpen:n}=(0,t1.M)({id:"cardSuggestionDrawer"}),r=(0,M.CG)(L.Pu),[l]=(0,j.useState)(()=>(0,tD.xC)({reducer:M.Ct}));return(0,s.jsx)(f.zt,{store:l,children:(0,s.jsx)(t5,{...e,isOpen:t,onClose:i,onOpen:n,theme:r})})},t5=(n=e=>{let{doc:t,editor:i,theme:n,isOpen:r,onClose:l,onOpen:o}=e,[a,d]=(0,j.useState)([]),[c,u]=(0,j.useState)(null),{getAllCards:x,setUserMessage:m}=tV(),p=(0,j.useCallback)(()=>{l(),d([]),u(null)},[l]),g=(0,j.useCallback)(()=>{if(p(),!i)return;let e={type:"document",content:x()};console.log("[handleConfirm] contentToUse",e);let t=1,n=i.state.doc.nodeSize-2,r=(0,eW.Bw)(i,c);if(r){n=(t=r.pos)+r.node.nodeSize;let i=e.content.find(e=>{var t;return(null===(t=e.attrs)||void 0===t?void 0:t.id)===c});if(!i){console.warn("[handleConfirm] Count not find card to use");return}e=i}i.commands.command(r=>{let{tr:l}=r;return l.replaceRangeWith(t,n,tR.NB.fromJSON(i.schema,e)),!0})},[p,i,c,x]),f=(0,j.useCallback)(async(e,t,i)=>{o(),u(t);let n=e.toJSON().content[0].content;d(n.filter(e=>{var i;return null===t||(null===(i=e.attrs)||void 0===i?void 0:i.id)===t})),m(i)},[o,m]);return(0,j.useEffect)(()=>{if(i)return tG.T.on("openSuggestionEditor",e=>{let{cardId:t,userMessage:n}=e;f(i.view.state.doc,t,n)})},[i,f]),(0,s.jsxs)(tI.d,{placement:"bottom",onClose:l,isOpen:r,trapFocus:!0,isFullHeight:!0,children:[(0,s.jsx)(t_.Z,{}),(0,s.jsxs)(tA.s,{borderTopRadius:"xl",h:"calc(var(--100vh) - 24px)",transform:"none !important",children:[(0,s.jsx)(tT.o,{zIndex:"10",backgroundColor:"white",mr:2,shadow:"md"}),(0,s.jsx)(tO.f,{p:0,h:"100%",children:a.length>0&&t?(0,s.jsx)(t$,{doc:t,cards:a,theme:n}):(0,s.jsx)(tN.AA,{})}),(0,s.jsx)(tP.m,{borderTop:"1px solid #000",borderColor:"gray.200",children:(0,s.jsxs)(em.h,{spacing:4,children:[(0,s.jsx)(eh.z,{variant:"ghost",onClick:l,children:(0,s.jsx)(h.cC,{id:"dEgA5A"})}),(0,s.jsx)(eh.z,{variant:"solid",onClick:g,children:(0,s.jsx)(h.cC,{id:"7VpPHA"})})]})})]})]})},(0,j.memo)(e=>(0,s.jsx)(tB,{children:(0,s.jsx)(n,{...e})})));var t4=i(69747),t3=i(12825),t9=i(75009),t6=i(20336),t7=i(4030),t8=i(3561),ie={src:"/_next/static/media/Sal-Fishing-2x.1a2d0290.png"},it=i(46640),ii=i(83906),ir=i(10625),il=i(67046),is=i(99058),io=i(44035),ia=i(39237),id=i(82108),ic=i.n(id);let iu=e=>{let{count:t,onClose:i,commentStatusFilter:n,setCommentStatusFilter:r}=e,l=n===v.Ux9.Open?m.ag._({id:"Kz1TxG"}):m.ag._({id:"kywJax"});return(0,s.jsxs)(o.k,{width:"100%",px:6,py:4,justifyContent:"space-between",alignItems:"center",h:16,tabIndex:0,outline:"none",children:[(0,s.jsx)(eJ.X,{size:"md",flex:1,noOfLines:1,children:(0,s.jsx)(h.cC,{id:"eiUA4k",values:{count:t}})}),(0,s.jsxs)(ir.v,{closeOnSelect:!0,children:[(0,s.jsx)(il.j,{as:eh.z,size:"sm",rightIcon:(0,s.jsx)(ii.v,{}),mr:8,children:ic()(l)}),(0,s.jsx)(is.q,{zIndex:3,children:(0,s.jsxs)(io._,{defaultValue:n,title:m.ag._({id:"0cVgUw"}),type:"radio",children:[(0,s.jsx)(ia.i,{onClick:()=>r(v.Ux9.Open),value:"open",children:(0,s.jsx)(h.cC,{id:"1TNIig"})}),(0,s.jsx)(ia.i,{onClick:()=>r(v.Ux9.Closed),value:"closed",children:(0,s.jsx)(h.cC,{id:"D87pha"})})]})})]}),(0,s.jsx)(eZ.P,{position:"absolute",top:2,right:2,onClick:i,"data-comment-feed-close-button":!0})]})};var ix=i(57480);let ih=e=>{let{user:t,editor:i}=e,[n,r]=(0,j.useState)(()=>{let e=(0,t7.W1)(i,ix.Et),t=e&&e.length?e[0]:(0,t7.xN)(()=>ix.Et,i,"");return t});(0,j.useEffect)(()=>{if(n&&i)return()=>{var e,t;null===(e=(t=i.commands).createDraftComment)||void 0===e||e.call(t,n)}},[n,i]);let l=(0,t7.iZ)({draftComment:n,clearDraftComment(){var e,t,l,s;n&&(null===(l=(s=i.commands).removeDraftComments)||void 0===l||l.call(s,[n]));let o=(0,t7.xN)(()=>ix.Et,i,"");null===(e=(t=i.commands).createDraftComment)||void 0===e||e.call(t,o),r(o)},editor:i}),o=(0,j.useCallback)(e=>{let{editor:t}=e;r(e=>e?{...e,json:t.view.state.doc.toJSON(),text:t.view.state.doc.textContent}:e)},[]);return(0,s.jsx)(t7.Ag,{draftComment:n,user:t,onCommentDraftUpdate:o,onCommentSave:l,commentIdToHighlight:null})},im=()=>({today:m.ag._({id:"ecUA8p"}),thisWeek:m.ag._({id:"yByRxz"}),earlier:m.ag._({id:"HPqZkW"})}),ip=e=>{var t;let{onClose:i,editor:n}=e,r=(0,M.CG)(L.yx),{isConnected:l}=(0,v.$gs)(),[c,u]=(0,j.useState)(v.Ux9.Open),x=null==r?void 0:r.comments,m=null==r?void 0:null===(t=r.comments)||void 0===t?void 0:t.filter(e=>e.status===c),p=(0,M.CG)(L.gh),g=(0,eY.py)("comment",r),f=g&&l,{user:b}=(0,eY.SE)(),y=(0,C.$m)(r,b),k=(0,j.useMemo)(()=>{let e=(0,it.yd)({items:m||[],sortBy:it.Yz,latestTimeGetterFn:it.z3});return e},[m]);return x&&r&&n?(0,s.jsxs)(o.k,{direction:"column",h:"100%",overflowX:"hidden",className:t8.G,w:"100%",children:[(0,s.jsx)(iu,{commentStatusFilter:c,setCommentStatusFilter:u,count:(null==m?void 0:m.length)||0,onClose:i}),(0,s.jsxs)(o.k,{direction:"column",className:"comments-list",flex:1,overflowY:"auto",tabIndex:0,outline:"none",children:[(0,s.jsx)(t6.V,{label:(0,s.jsx)(h.cC,{id:"pQvCbR"}),isConnected:l,mx:6}),y&&!b&&r&&(0,s.jsx)(t7.IZ,{doc:r,accessLink:y}),f&&(0,s.jsx)(d.xu,{px:6,py:2,children:(0,s.jsx)(ih,{user:b,editor:n})}),!(null==m?void 0:m.length)&&(0,s.jsxs)(eX.g,{align:"center",p:6,textAlign:"center",spacing:8,children:[(0,s.jsx)(d.xu,{w:"80%",maxW:"300px",mb:6,alignContent:"center",children:(0,s.jsx)(t9.E,{src:ie.src,width:"640px",alt:"Sal, the Gamma mascot, fishing extraterrestrially"})}),(0,s.jsxs)(d.xu,{children:[(0,s.jsx)(eJ.X,{size:"xs",mb:2,children:"open"===c?(0,s.jsx)(h.cC,{id:"W7i5f5"}):(0,s.jsx)(h.cC,{id:"mpDN1V"})}),(0,s.jsx)(a.x,{fontSize:"sm",children:(0,s.jsx)(h.cC,{id:"iB9OEi"})})]})]}),Object.entries(k).filter(e=>{let[,t]=e;return t.length}).map(e=>{let[t,l]=e;return(0,s.jsxs)(o.k,{direction:"column",children:[(0,s.jsx)(ep.NZ,{px:6,pt:4,pb:2,position:"sticky",top:-2,bg:"white",zIndex:2,children:im()[t]}),(0,s.jsx)(o.k,{direction:"column",children:l.map(e=>(0,s.jsx)(t7.q5,{instanceType:"feed",userCanComment:f,editor:n,comment:e,selfUser:b,docId:null==r?void 0:r.id,editorMode:p,onClose:i,isRootComment:!0,pt:6,px:6,pb:4},e.id))})]},t)})]})]}):null},ig=e=>{let{closePanel:t,...i}=e,{editor:n}=(0,t3._)();return(0,j.useEffect)(()=>{let e=e=>{let{open:i}=e;i&&t()};return t4.pw.on(t4.TI.POPUP_COMMENT_TOGGLED,e),()=>{t4.pw.on(t4.TI.POPUP_COMMENT_TOGGLED,e)}},[t]),(0,j.useEffect)(()=>ej.F7.on("keydown","COMMENT_FEED_PANEL",e=>!!document.activeElement.closest('[data-panelid="comment-feed-panel"]')&&("Escape"===e.key&&t(),!0)),[t]),(0,s.jsx)(e$.s,{...i,bgColor:"white","data-panelid":"comment-feed-panel",children:(0,s.jsx)(ip,{onClose:t,editor:n})})};ig.panelPosition="right";var ij=i(87202),iv=i(39097),iC=i.n(iv),ib=i(14764),iy=i(97763),ik=i(74684),iw=i(21733);let iE=()=>{var e,t;let i=(0,M.CG)(L.yx),{user:n}=(0,iw.SE)(),r=(0,iw.py)("manage",i)&&!!n,l=null==i?void 0:null===(e=i.docGenerateInput)||void 0===e?void 0:e.docGeneration;if(i&&l&&(null===(t=i.createdBy)||void 0===t?void 0:t.id)===(null==n?void 0:n.id)&&r)return(0,ev.Xn)(l)};var iS=i(47443),iI=i(80877),i_=i(74444),iA=i(67422);let iT=e=>{let{onClose:t}=e;return(0,s.jsxs)(tc.K,{flex:1,align:"center",justify:"center",p:6,spacing:6,children:[(0,s.jsx)(t9.E,{src:"https://cdn.gamma.app/zc87vhr30n8uf3n/b4b04402416f4ec8b5c1dc24f4c2a3d6/optimized/Sal-Spaceship-Riding.png",px:12}),(0,s.jsx)(iA.K,{children:(0,s.jsx)(a.x,{children:(0,s.jsx)(h.cC,{id:"jVQv+Q"})})}),(0,s.jsx)(eh.z,{variant:"ghost",colorScheme:"blackAlpha",leftIcon:(0,s.jsx)(x.G,{icon:u.g82}),onClick:t,children:(0,s.jsx)(h.cC,{id:"pqZJT2"})})]})},iO=()=>(0,s.jsxs)(iS.b,{status:"warning",mt:12,minH:20,flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",borderRadius:"lg",borderWidth:"1px",children:[(0,s.jsx)(iI.C,{children:(0,s.jsx)(h.cC,{id:"rvbk/4"})}),(0,s.jsx)(i_.X,{children:(0,s.jsx)(h.cC,{id:"XNkIFY"})})]});var iP=i(74105),iD=i(29494),iR=i(54933),iN=i(27191),iG=i(85420),iz=i(57124),iM=i(4878);let iL="40px",iF=e=>{let{value:t,onChange:i,onSubmit:n,isLoading:r,editor:l,resetMessages:o}=e;(0,iM.F1)(l);let{selection:d,doc:c}=l.state,u=c.textBetween(d.from,d.to,"\n"),h=(0,iz.fg)(),p=(0,j.useRef)(null),[g,f]=(0,j.useState)(!1),v=d instanceof iN.qv,C=d instanceof iN.Bs,b=v&&"card"===d.node.type.name,y=d.empty||b?m.ag._({id:"XrfE9D"}):v?m.ag._({id:"CsUli9"}):C&&u?m.ag._({id:"+NPPZN",values:{0:u.length>50?u.slice(0,50)+"...":u}}):m.ag._({id:"/fY1js"}),k=(0,j.useCallback)(()=>{p.current&&(p.current.style.height=iL,p.current.style.height="".concat(p.current.scrollHeight,"px"))},[]);return(0,j.useEffect)(()=>(l.on("selectionUpdate",k),()=>{l.off("selectionUpdate",k)}),[l,k]),(0,j.useEffect)(()=>{g?k():setTimeout(()=>{f(!0),k()},400)},[g,y,k,t]),(0,s.jsxs)(ex.U,{align:"end",children:[(0,s.jsx)(iP.B,{size:"md",children:(0,s.jsx)(iD.g,{"data-gamma-child-tiptap-editor":!0,id:"ai-chat-input",h:iL,minH:iL,ref:p,resize:"none",maxH:g?32:iL,bg:"white",shadow:"md",autoFocus:!0,placeholder:y,value:t,onKeyPress:e=>{"Enter"===e.key&&t.length>0&&!r&&(e.preventDefault(),n())},onChange:e=>i(e.target.value),pr:12})}),(0,s.jsx)(ep.kH,{placement:"top",label:(0,s.jsxs)(eX.g,{spacing:0,children:[(0,s.jsx)(a.x,{children:"Send request"}),!h&&(0,s.jsxs)(a.x,{color:"gray.400",children:[(0,s.jsx)(iG.J,{type:"chatSuggestion",ml:0})," if successful"]}),(0,s.jsx)(ep.f2,{shortcut:"Enter"})]}),children:(0,s.jsx)(I.h,{"aria-label":"Send message",isDisabled:!t||r,size:"sm",h:iL,w:iL,variant:"solid",icon:(0,s.jsx)(x.G,{icon:iR.FzC,fixedWidth:!0}),onClick:n})})]})};var iU=i(28086),iW=i(26031),iH=i(66214);let iV=e=>{let{editor:t,scrollSelector:i,onClose:n}=e,[r,l]=(0,j.useState)(""),a=(0,e7.ye)("openAiStatus"),d=(0,M.TL)(),c=(0,eU.As)("editor"),m=(0,M.qr)(),p=(0,M.CG)(iW.AZ),g=(0,M.CG)(iW.Q_),[f,v]=(0,j.useState)(null),C=(0,j.useCallback)(()=>{let e=(0,iW.AZ)(m.getState());return e},[m]),b=(0,j.useCallback)(e=>{let t={timestamp:Date.now(),...e};d((0,iW.Hz)({message:t}))},[d]),y=(0,j.useCallback)(()=>{d((0,iW.mc)())},[d]),{status:k,sendMessage:w}=(0,iH.n)({addMessage:b,getMessageHistory:C,editor:t});(0,j.useEffect)(()=>{let e=i&&document.querySelector(i);e&&requestAnimationFrame(()=>{e.scrollTop=e.scrollHeight})},[i,p]);let E="idle"!==k;(0,j.useEffect)(()=>{if(!g.length||E)return;let{task:e,id:t}=g[0];!1===e.submit?l(e.message):w({message:e.message}),d((0,iW.VB)({id:t}))},[E,w,d,g]);let S=(0,j.useCallback)(()=>{if(!f||!t)return;let e=document.querySelector('[data-card-id="'.concat(f,'"]')),i=(0,eU.v4)(e,100);null!=i&&i.yAxisInView||c.scrollElementIntoView({element:e})},[t,c,f]),_=(0,j.useCallback)(e=>{S(),w({message:e})},[S,w]),A=(0,j.useCallback)(()=>{_(r),l("")},[_,r]),T=(0,iy.YO)(A,"chatSuggestion",eG.AA.GAMMA_UPSELL_CALLOUT_AI_CREDITS_CHAT);(0,j.useEffect)(()=>{if(!t)return;let e=()=>{let e=(0,ik.AQ)(t.state.doc,t.state.selection.from);e&&v(e.node.attrs.id)};return e(),t.on("selectionUpdate",e),()=>{t.off("selectionUpdate",e)}},[t]);let O=iE();return t?"DOWN"===a?(0,s.jsx)(iT,{onClose:n}):(0,s.jsxs)(o.k,{direction:"column",h:"100%",w:"100%",px:6,pb:2,children:["DEGRADED"===a&&(0,s.jsx)(iO,{}),(0,s.jsx)(iU.rN,{scrollSelector:i,messages:p,editor:t,sendMessage:_,isLoading:E,onClose:n}),(0,s.jsxs)(tc.K,{pos:"sticky",bottom:0,py:2,pt:4,bg:"gray.50",children:[(0,s.jsx)(iF,{editor:t,value:r,onChange:l,onSubmit:T,isLoading:E,resetMessages:y}),(0,s.jsx)(ib.r,{modalId:"ai-credits-modal-message-list",variant:"ghost",justify:"flex-end",segmentEvent:eG.AA.GAMMA_UPSELL_CALLOUT_AI_CREDITS_CHAT})]}),(0,s.jsxs)(em.h,{position:"absolute",left:4,top:1,variant:"ghost",colorScheme:"blackAlpha",children:[(0,s.jsx)(ep.kH,{label:(0,s.jsx)(h.cC,{id:"5eg0kp"}),placement:"top",children:(0,s.jsx)(I.h,{color:"currentColor","aria-label":"reset-chat",icon:(0,s.jsx)(x.G,{icon:u.YcH}),onClick:y,isRound:!0})}),O&&(0,s.jsx)(ep.kH,{label:(0,s.jsx)(h.cC,{id:"JrXBQr",values:{GAMMA_ARTIFACT_PROPER_NOUN:K.Yc}}),placement:"top",children:(0,s.jsx)(I.h,{color:"currentColor","aria-label":"source-prompt",icon:(0,s.jsx)(x.G,{icon:u.Fzb}),as:iC(),href:O,target:(0,ef.Q5)()?"_self":"_blank",isRound:!0})})]})]}):null};var iB=i(48892);let iK=e=>{let{onClose:t}=e;return(0,s.jsx)(o.k,{width:"100%",px:6,py:4,justifyContent:"space-between",alignItems:"center",h:8,tabIndex:0,outline:"none",position:"absolute",top:0,children:(0,s.jsx)(eZ.P,{"data-design-partner-close-button":!0,position:"absolute",top:2,right:6,zIndex:1,onClick:t})})},iq="design-partner-panel-wrapper",iY=e=>{let{toggleDesignPartnerPanel:t,isDesignPartnerPanelOpen:i,editor:n}=e,r=(0,e7.ye)("aiChat"),l=(0,M.TL)();(0,j.useEffect)(()=>()=>{l((0,iW.mc)())},[]);let s=(0,M.CG)(L.hN);(0,j.useEffect)(()=>{!s&&i&&t()},[s,i,t]),(0,j.useEffect)(()=>{var e,t;n&&(null===(e=(t=n.commands).setSalOpen)||void 0===e||e.call(t,i))},[n,i]),(0,j.useEffect)(()=>{if(r)return iB.T.on("toggle",e=>{let{config:i}=e;t(i)})},[t,r]),(0,j.useEffect)(()=>{if(r)return t4.pw.on("queueDesignPartnerTask",e=>{l((0,iW.Lj)({task:e})),t({disableTransition:!1,override:"open"}),console.log("queueDesignPartnerTask",e)})},[l,r,t]),(0,j.useEffect)(()=>{if(!r||!s)return;let e=(0,ij.ZP)("mod+shift+S");return ej.F7.on("keydown","DESIGN_PARTNER_PANEL",i=>!!e(i)&&(t(),!0))},[t,r,s])},iZ=e=>{let{closePanel:t,...i}=e,{editor:n}=(0,t3._)();return(0,j.useEffect)(()=>ej.F7.on("keydown","DESIGN_PARTNER_PANEL",e=>!!document.activeElement.closest('[data-panelid="design-partner-panel"]')&&"Escape"===e.key&&(t(),!0)),[t]),(0,s.jsx)(e$.s,{...i,bgColor:"gray.50","data-panelid":"design-partner-panel",borderLeftWidth:"1px",children:(0,s.jsxs)(o.k,{direction:"column",h:"100%",overflowY:"auto",overflowX:"hidden",className:iq,w:"100%",children:[(0,s.jsx)(iK,{onClose:t}),(0,s.jsx)(iV,{editor:n,scrollSelector:".".concat(iq),onClose:t})]})})};iZ.panelPosition="right";var iJ=i(70065),iX=i(26284),iQ=i(87651),i$=i(17190),i0=i(41774),i1=i(84405),i2=i(7207),i5=i(76332);let i4=e=>{var t,i;let{doc:n,site:r,path:l}=e,o=(0,iJ.p)(),c=(0,M.TL)(),m=(0,M.CG)(eS.v),[p]=(0,i5.zU5)(),[g]=(0,i5.sIg)(),[f]=(0,i5.odt)(),[v,{loading:C}]=(0,i5.kui)(),[b,{loading:y}]=(0,i5.V$$)(),k=(0,M.CG)(eS.B$),w=null==n?void 0:n.id,E=null==n?void 0:null===(t=n.organization)||void 0===t?void 0:t.id,S=(0,eA.mn)({domain:null==r?void 0:null===(i=r.domains)||void 0===i?void 0:i[0],path:l}),I=null==r?void 0:r.id,_=(0,j.useCallback)(async()=>{w&&((0,eS.yB)(c)(!0),await (0,eA.iL)(w),await g({variables:{id:w},refetchQueries:["GetDoc","GetSite"]}).then(()=>{o({render:function(){return(0,s.jsx)(d.xu,{color:"white",p:3,bg:"green.500",shadow:"md",borderRadius:"md",children:(0,s.jsxs)(ex.U,{spacing:4,children:[(0,s.jsx)(d.xu,{children:(0,s.jsx)(x.G,{icon:u.fV7})}),(0,s.jsx)(a.x,{fontWeight:"semibold",children:(0,s.jsx)(h.cC,{id:"V6Byuz"})}),S&&(0,s.jsx)(eh.z,{variant:"plain",as:"a",target:"_blank",_hover:{textDecoration:"none",color:"trueblue.500"},href:S,rightIcon:(0,s.jsx)(x.G,{icon:u.wlW}),children:(0,s.jsx)(h.cC,{id:"Zel0o2"})}),(0,s.jsx)(eZ.P,{onClick:()=>o.closeAll()})]})})},status:"success",position:"top",duration:5e3,isClosable:!0})}).catch(e=>{o({title:(0,s.jsx)(h.cC,{id:"DD5mqk"}),status:"error",position:"top",isClosable:!0}),console.error("Error publishing site:",e.message)}).finally(()=>{(0,eS.yB)(c)(!1)}))},[c,w,g,o,S]),A=(0,j.useCallback)(async()=>{I&&((0,eS.yB)(c)(!0),k&&await (0,eA.iL)(k),await p({variables:{id:I},update:(e,t)=>{let{data:i}=t,n=null==i?void 0:i.publishSite;n&&n.routes.forEach(t=>{e.updateQuery({query:i5.yE1,variables:{id:t.docId}},e=>{var i,n,r;if(e||console.log("%c Publish doc _data is undefined or null","color: red; font-size: 16px"),!(null==e?void 0:e.doc))return e;let l=e.doc;return{doc:{...l,publishedTime:null===(i=t.doc)||void 0===i?void 0:i.publishedTime,publishedSnapshotId:null===(n=t.doc)||void 0===n?void 0:n.publishedSnapshotId,currentSnapshotId:null===(r=t.doc)||void 0===r?void 0:r.currentSnapshotId}}})})}}).then(()=>{o({render:function(){return(0,s.jsx)(d.xu,{color:"white",p:3,bg:"green.500",shadow:"md",borderRadius:"md",children:(0,s.jsxs)(ex.U,{spacing:4,children:[(0,s.jsx)(d.xu,{children:(0,s.jsx)(x.G,{icon:u.fV7})}),(0,s.jsx)(a.x,{fontWeight:"semibold",children:(0,s.jsx)(h.cC,{id:"V6Byuz"})}),S&&(0,s.jsx)(eh.z,{variant:"plain",as:"a",target:"_blank",_hover:{textDecoration:"none",color:"trueblue.500"},href:S,rightIcon:(0,s.jsx)(x.G,{icon:u.wlW}),children:(0,s.jsx)(h.cC,{id:"Zel0o2"})}),(0,s.jsx)(eZ.P,{onClick:()=>o.closeAll()})]})})},status:"success",position:"top",duration:5e3,isClosable:!0})}).catch(e=>{o({title:(0,s.jsx)(h.cC,{id:"DD5mqk"}),description:(0,s.jsx)(h.cC,{id:"R4PZ4k"}),status:"error",position:"top",isClosable:!0}),console.error("Error publishing site:",e.message)}).finally(()=>{(0,eS.yB)(c)(!1)}))},[I,c,k,p,o,S]),T=(0,j.useCallback)(async e=>{if(I&&w)try{await v({variables:{input:{siteId:I,name:e}},refetchQueries:["GetSites","GetDoc"]})}catch(e){console.error("Error adding domain:",e),o({status:"error",title:(0,s.jsx)(h.cC,{id:"HugOMA"}),isClosable:!0,position:"top"})}},[v,w,I,o]),O=(0,j.useCallback)(async e=>{w&&b({variables:{input:{workspaceId:E,name:e,routes:[]}},refetchQueries:["GetSites","GetDoc"]}).catch(e=>{console.error("Error creating site:",e.message)})},[w,E,b]),P=(0,j.useCallback)(async()=>{if(!w||!I)return;let e=(0,eA.kj)({routes:(null==r?void 0:r.routes)||[],docId:w,path:l});await f({variables:{input:{siteId:I,routes:e}}})},[f,w,null==r?void 0:r.routes,I,l]);return{publishSite:A,publishDoc:_,addDomain:T,isAddingDomain:C,createSite:O,isCreatingSite:y,updateRoutes:P,isPublishing:m}};var i3=i(45820),i9=i(23082),i6=i(49516),i7=i(49580),i8=i(49197),ne=i(21723),nt=i(704);let ni=e=>{let{onGenerateSuccess:t}=e,[i,n]=(0,j.useState)("createGenerate"),[r,l]=(0,j.useState)([]),[o,a]=(0,j.useState)(void 0),d=(0,j.useMemo)(()=>({goToScreen:(e,t)=>{a(null==t?void 0:t.generateId),l(e=>[...e,i]),n(e)},goBack:()=>{l(e=>{let t=[...e],i=t.pop();return i&&n(i),t})},navEnabled:"createGenerate"!==i,webpageOnly:!0,skipThemeStep:!0,onGenerateSuccess:t}),[i,t]),c=(0,j.useMemo)(()=>{switch(i){case"createWithAI":return i7.B;case"createImport":return i6.j;case"createPaste":return i8.L;case"promptEditor":return function(){return(0,s.jsx)(ne.B,{id:o,children:(0,s.jsx)(i3.N,{})})};case"createGenerate":return function(){return o?(0,s.jsx)(ne.B,{id:o,children:(0,s.jsx)(i9.m,{autosetLocale:!1})}):(0,s.jsx)(i9.m,{autosetLocale:!0})};default:throw Error("invalid page")}},[o,i]);return(0,s.jsx)(nt.u.Provider,{value:d,children:(0,s.jsx)(c,{})})},nn=e=>{let{isOpen:t,onClose:i}=e;return(0,s.jsx)(ep.Wk,{isDark:!1,children:(0,s.jsxs)(tI.d,{isOpen:t,placement:"bottom",onClose:i,isFullHeight:!0,children:[(0,s.jsx)(t_.Z,{}),(0,s.jsxs)(tA.s,{h:"calc(var(--100vh) - 24px)",p:0,children:[(0,s.jsx)(tT.o,{zIndex:"sticky"}),(0,s.jsx)(tO.f,{p:0,children:(0,s.jsx)(ni,{onGenerateSuccess:i})})]})]})})},nr=()=>{var e;let t=(0,M.CG)(tk.yx),i=(0,eT.Yy)(),n=(0,iJ.p)(),r=null==t?void 0:null===(e=t.accessLinks)||void 0===e?void 0:e[0],l=(0,j.useMemo)(()=>(0,ev.Gn)({docTitle:null==t?void 0:t.title,docId:null==t?void 0:t.id,token:null==r?void 0:r.token,absolute:!0}),[t,null==r?void 0:r.token]),{onCopy:o}=(0,iX.V)(l),a=(0,j.useCallback)(()=>{(0,i1.J)({docId:null==t?void 0:t.id,source:"docWizardFooter",type:"tokenUrl"}),o(),n({title:(0,s.jsx)(h.cC,{id:"pQjjYo"}),status:"success",position:"top",duration:1e3,isClosable:!1})},[null==t?void 0:t.id,o,n]),d=iE();return(0,s.jsxs)(tc.K,{spacing:4,textAlign:"center",children:[(0,s.jsx)(eJ.X,{size:"md",children:(0,s.jsx)(h.cC,{id:"bB+DHs"})})," ",(0,s.jsx)(eh.z,{as:iC(),target:(0,ef.Q5)()?"_self":"_blank",variant:"solid",colorScheme:i?"blackAlpha":"whiteAlpha",leftIcon:(0,s.jsx)(x.G,{icon:u.r8p}),href:"/create",children:(0,s.jsx)(h.cC,{id:"xFxi2V"})}),d?(0,s.jsx)(eh.z,{leftIcon:(0,s.jsx)(x.G,{icon:u.Fzb}),variant:"plain",as:iC(),target:(0,ef.Q5)()?"_self":"_blank",href:d,children:(0,s.jsx)(h.cC,{id:"550oRP"})}):(0,s.jsx)(eh.z,{leftIcon:(0,s.jsx)(x.G,{icon:u.nNP}),variant:"plain",onClick:a,children:(0,s.jsx)(h.cC,{id:"RGCCrg"})})]})},nl=()=>{let{isOpen:e,onClose:t,onOpen:i}=(0,t1.M)({id:"add-page-ai-modal"}),n=(0,M.CG)(eS.lH),r=(0,eA.Vr)(n),{publishSite:l,isPublishing:o}=i4({site:n}),a=(0,eT.Yy)();return(0,s.jsxs)(tc.K,{spacing:4,textAlign:"center",children:[(0,s.jsx)(eJ.X,{size:"md",children:(0,s.jsx)(h.cC,{id:"bB+DHs"})}),(0,s.jsx)(eh.z,{variant:"solid",colorScheme:a?"blackAlpha":"whiteAlpha",leftIcon:(0,s.jsx)(x.G,{icon:u.r8p}),onClick:i,children:(0,s.jsx)(h.cC,{id:"K3193W"})}),r&&(0,s.jsx)(eh.z,{leftIcon:(0,s.jsx)(x.G,{icon:u.A$k}),variant:"plain",onClick:l,isLoading:o,children:(0,s.jsx)(h.cC,{id:"2uGo/E"})}),(0,s.jsx)(nn,{isOpen:e,onClose:t})]})};var ns=i(35183),no=i(97166),na=i(89099),nd=i(14304),nc=i.n(nd),nu=i(35676),nx=i.n(nu),nh=i(3440),nm=i.n(nh),np=i(46152),ng=i.n(np),nj=i(31490);let nf=[{key:"num_cards",category:"length",label:(0,s.jsx)(h.cC,{id:"UnRHxh"})},{key:"content_quality",category:"content",label:(0,s.jsx)(h.cC,{id:"5w/BaJ"})},{key:"missing_content",category:"content",label:(0,s.jsx)(h.cC,{id:"XoKzka"})},{key:"wrong_language",category:"content",label:(0,s.jsx)(h.cC,{id:"R2Ly6h"})},{key:"amount_of_text",category:"content",label:(0,s.jsx)(h.cC,{id:"pi+Tez"})},{key:"inappropriate_content",category:"content",label:(0,s.jsx)(h.cC,{id:"i/9pR4"})},{key:"citations",category:"content",label:(0,s.jsx)(h.cC,{id:"EpFwDO"})},{key:"inaccurate_content",category:"content",label:(0,s.jsx)(h.cC,{id:"Qk+SyG"})},{key:"image_quality",category:"image",label:(0,s.jsx)(h.cC,{id:"ESjmDR"})},{key:"number_of_images",category:"image",label:(0,s.jsx)(h.cC,{id:"x6yr/9"})},{key:"layouts_and_templates",category:"layout",label:(0,s.jsx)(h.cC,{id:"5yz5Kl"})},{key:"theme_styling",category:"layout",label:(0,s.jsx)(h.cC,{id:"d3n/st"})}],nv={key:"other",category:"other",label:(0,s.jsx)(h.cC,{id:"/IX/7x"})},nC=[{key:"bad",label:(0,s.jsx)(h.cC,{id:"XSfVsn"}),ariaLabel:()=>m.ag._({id:"XSfVsn"}),icon:u.KfU,color:"red"},{key:"meh",label:(0,s.jsx)(h.cC,{id:"0ASQJH"}),ariaLabel:()=>m.ag._({id:"0ASQJH"}),icon:u.C4q,color:"yellow"},{key:"good",label:(0,s.jsx)(h.cC,{id:"9ZYnL5"}),ariaLabel:()=>m.ag._({id:"9ZYnL5"}),icon:u.ctA,color:"green"}],nb=e=>{let{docId:t,isDark:i,interactionId:n}=e,[r,l]=(0,j.useState)(null),[o,c]=(0,j.useState)(!1),[m,p]=(0,j.useState)(""),g=(0,j.useMemo)(()=>nx()(ng()(nm()(ng()(nf),"category"))).concat([nv]),[]),[f,v]=(0,j.useState)(new Set),C=(0,j.useRef)(null),b=(0,iJ.p)(),y=(0,j.useCallback)(e=>{l(e),(0,nj.fM)({rating:e,doc_id:t,interactionId:n}),b({title:(0,s.jsx)(h.cC,{id:"2gZOCV"}),status:"success",position:"top",duration:1e3}),setTimeout(()=>{var e;null==C||null===(e=C.current)||void 0===e||e.scrollIntoView({behavior:"smooth"})},200)},[t,n,b]),k=(0,j.useCallback)(e=>{e||((0,nj.XH)({feedback:nc().sanitize(m),tags:Array.from(f),rating:r,doc_id:t,interactionId:n}),b({title:(0,s.jsx)(h.cC,{id:"+Rq0s/"}),status:"success",position:"top",duration:2e3,isClosable:!0})),c(!0)},[t,m,n,b,f,r]);return(0,s.jsx)(d.xu,{p:4,borderRadius:"lg",border:"1px solid",borderColor:i?"whiteAlpha.100":"gray.200",position:"relative",children:o?(0,s.jsxs)(a.x,{color:i?"green.400":"green.600",textAlign:"center",children:[(0,s.jsx)(x.G,{icon:u.fV7})," ",(0,s.jsx)(h.cC,{id:"SOk0EB"})]}):(0,s.jsxs)(tc.K,{spacing:4,children:[(0,s.jsxs)(tc.K,{alignItems:"center",spacing:"1",children:[(0,s.jsx)(a.x,{fontSize:"sm",color:i?"whiteAlpha.800":"gray.500",children:(0,s.jsx)(h.cC,{id:"E47gBS"})}),r?(0,s.jsxs)(a.x,{textAlign:"center",color:i?"green.400":"green.600",children:[(0,s.jsx)(x.G,{icon:u.fV7})," ",(0,s.jsx)(h.cC,{id:"SOk0EB"})]}):(0,s.jsx)(a.x,{children:(0,s.jsx)(h.cC,{id:"cguR5Y"})})]}),(0,s.jsx)(ex.U,{fontSize:"xl",width:"100%",children:nC.map(e=>{let{key:t,ariaLabel:n,label:l,icon:o,color:a}=e,d=r===t;return(0,s.jsx)(nk,{ariaLabel:n,label:l,icon:o,color:a,onClick:()=>y(t),isSelected:d,isDisabled:!1,isDark:i},t)})}),r&&"good"!==r&&(0,s.jsxs)(ns.NI,{children:[(0,s.jsx)(no.l,{fontSize:"sm",color:i?"whiteAlpha.800":"gray.500",children:(0,s.jsx)(h.cC,{id:"467HY8"})}),(0,s.jsx)(na.E,{children:g.map(e=>{let{key:t,label:n}=e;return(0,s.jsx)(na.U,{onClick:()=>{v(e=>{let i=new Set(e);return i.has(t)?i.delete(t):i.add(t),i})},children:(0,s.jsx)(ny,{label:n,isDark:i,isSelected:f.has(t)})},t)})})]}),r&&(0,s.jsxs)(ns.NI,{textAlign:"center",children:[(0,s.jsx)(no.l,{fontSize:"sm",color:i?"whiteAlpha.800":"gray.500",children:"good"===r?(0,s.jsx)(h.cC,{id:"AmM8eQ"}):(0,s.jsx)(h.cC,{id:"PhJTrf"})}),(0,s.jsx)(iD.g,{value:m,onChange:e=>{p(e.target.value)},placeholder:"",size:"sm",mb:"4"}),(0,s.jsxs)(em.h,{spacing:"4",ref:C,children:[(0,s.jsx)(eh.z,{variant:"text",onClick:()=>{k(!0)},children:(0,s.jsx)(h.cC,{id:"6Uau97"})}),(0,s.jsx)(eh.z,{variant:"solid",isDisabled:""===m&&0===f.size,onClick:()=>k(!1),minW:32,children:(0,s.jsx)(h.cC,{id:"hQRttt"})})]})]})]})})},ny=e=>{let{label:t,isDark:i,isSelected:n}=e;return(0,s.jsx)(eh.z,{variant:"plain",size:"sm",height:"6",boxShadow:"none",bgGradient:"none",bg:n?i?"purple.500":"purple.100":i?"gray.800":"gray.50",color:n?i?"white":"purple.700":i?"white":"gray.800",borderColor:i?"whiteAlpha.200":"blackAlpha.200",_hover:{color:void 0},cursor:"pointer",children:t})},nk=e=>{let{label:t,ariaLabel:i,icon:n,color:r,isSelected:l,onClick:o,isDisabled:d,isDark:c}=e;return(0,s.jsx)(ep.kH,{label:t,placement:"top",children:(0,s.jsx)(I.h,{"aria-label":i(),boxShadow:"none",bg:l?c?"".concat(r,".200"):"".concat(r,".100"):c?"whiteAlpha.300":"gray.50",_disabled:{opacity:"".concat(l?1:.5),cursor:"not-allowed"},color:l?c?"".concat(r,".600"):"".concat(r,".500"):c?"whiteAlpha.800":"gray.500",_hover:{backgroundColor:"".concat(r,".100"),color:"".concat(r,".500")},flex:1,icon:(0,s.jsx)(a.x,{fontSize:"2xl",children:(0,s.jsx)(x.G,{icon:n})}),isDisabled:d,variant:"plain",onClick:o})})};var nw=i(39122),nE=i(34881);let nS=["90%","360px"],nI=e=>{let{onClose:t,eyebrowText:i,mainText:n,callsToAction:r}=e;return(0,s.jsxs)(d.xu,{bg:"white",border:"0.5px solid var(--chakra-colors-gray-100)",borderRadius:"md",shadow:"md",p:4,w:nS,maxW:nS,position:"relative",children:[(0,s.jsx)(eZ.P,{size:"sm",onClick:t,position:"absolute",insetEnd:1,top:1}),(0,s.jsxs)(tc.K,{spacing:4,children:[(0,s.jsxs)(tc.K,{spacing:1,paddingEnd:3,children:[!(0,ef.s2)()&&(0,s.jsx)(a.x,{fontSize:"sm",color:"gray.600",children:i}),(0,s.jsx)(a.x,{fontSize:"md",children:n})]}),(0,s.jsx)(d.xu,{w:"100%",children:r})]})]})},n_=e=>{let{onClose:t,startTour:i}=e;return(0,s.jsx)(nI,{eyebrowText:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("span",{"aria-label":"Wave",role:"img",children:"\uD83D\uDC4B"})," ",(0,s.jsx)(h.cC,{id:"IiwaCT",values:{GAMMA_ARTIFACT_PROPER_NOUN:K.Yc}})]}),mainText:(0,s.jsx)(h.cC,{id:"ntWFEH"}),onClose:t,callsToAction:(0,s.jsx)(eh.z,{size:"md",w:"100%",variant:"solid",onClick:()=>{i(0),t()},children:(0,s.jsx)(h.cC,{id:"VzFYDl"})})})};var nA=i(38914);let nT=["90%","360px"],nO=e=>{let{onClose:t}=e,[i,n]=(0,j.useState)(!0);return(0,j.useEffect)(()=>{setTimeout(()=>{n(!1)},3e3)},[]),(0,s.jsxs)(d.xu,{bg:"white",border:"0.5px solid var(--chakra-colors-gray-100)",borderRadius:"md",shadow:"md",p:4,w:nT,maxW:nT,position:"relative",children:[(0,s.jsx)(eZ.P,{size:"md",onClick:t,position:"absolute",insetEnd:1,top:1}),(0,s.jsxs)(tc.K,{direction:"row",spacing:3,justify:"center",w:"100%",alignItems:"center",children:[(0,s.jsx)(d.xu,{color:"trueblue.300",children:(0,s.jsx)(x.G,{icon:nA.tc$,size:"2x",className:i?"fa-bounce":void 0})}),(0,s.jsxs)(tc.K,{spacing:0,direction:"column",flex:1,textAlign:"left",children:[(0,s.jsx)(a.x,{fontSize:"sm",color:"gray.600",children:(0,s.jsx)(h.cC,{id:"eoDgVo"})}),(0,s.jsx)(a.x,{fontSize:"md",children:(0,s.jsx)(h.cC,{id:"p7dFyi"})})]})]})]})},nP="source",nD="desktop-tour-toast",nR="switch-from-mobile-to-desktop-toast",nN=e=>{var t;let{editor:i}=e,n=(0,iJ.p)(),r=(0,M.CG)(tk.yx),{startTour:l}=(0,b.c8)(),{user:s,setSettings:o}=(0,eY.SE)(),[a,d]=(0,j.useState)(!1),c=(0,j.useRef)(!1),u=!!(null==s?void 0:null===(t=s.settings)||void 0===t?void 0:t.needsEditorOnboarding),x=(0,M.CG)((0,i0.oH)(null==i?void 0:i.gammaDocId)),h=!!x&&"running"===x.status,m=!!x&&("complete"===x.status||"error"===x.status),p=(0,eU.As)("editor"),[g,f]=(0,j.useState)(null),[v]=(0,j.useState)(()=>(0,ev.SJ)()[nP]===nw.VY),[C]=(0,j.useState)(()=>v&&(0,ef.s2)()),y=v&&m;return(0,j.useEffect)(()=>{i&&d(!h&&!(0,ef.s2)()&&v&&u)},[i,v,h,u]),(0,j.useEffect)(()=>{setTimeout(()=>{(0,nE.lO)({query:{...(0,ev.SJ)(),[nP]:void 0},emitChange:!1})})},[]),(0,j.useEffect)(function(){return a&&!n.isActive(nD)&&setTimeout(()=>{n({id:nD,position:"bottom-left",render:e=>{let{onClose:t}=e;return n_({onClose:()=>{null==o||o({remove:["needsEditorOnboarding"]}),t()},startTour:l})},isClosable:!0,duration:null})},2e3),()=>{n.isActive(nD)&&n.close(nD)}},[o,a,l,n]),(0,j.useEffect)(function(){if(!(0,ef.s2)())return;let e=document.querySelector(p.scrollSelector);if(!e)return;f(e);let t=()=>{if(!g||!(0,ef.s2)())return;let e=(null==g?void 0:g.scrollTop)>=(null==g?void 0:g.scrollHeight)/4;e&&C&&!n.isActive(nR)&&!c.current&&(c.current=!0,n({id:nR,position:"top",render:e=>{let{onClose:t}=e;return nO({onClose:t})},isClosable:!0,duration:null,containerStyle:{minWidth:"100%",display:"flex",justifyContent:"center"}}))};return window.addEventListener("scroll",t,!0),()=>{window.removeEventListener("scroll",t,!0),n.isActive(nR)&&n.close(nR)}},[r,g,p.scrollSelector,C,n]),{showDocWizardFooter:y}},nG=(0,j.memo)(e=>{var t;let{interactionId:i}=e,n=(0,M.CG)(tk.yx),r=(0,eT.Yy)(),[l,a]=(0,j.useState)(!1),d=(0,iJ.p)(),c=null==n?void 0:null===(t=n.accessLinks)||void 0===t?void 0:t[0],u=(0,j.useMemo)(()=>(0,ev.Gn)({docTitle:null==n?void 0:n.title,docId:null==n?void 0:n.id,token:null==c?void 0:c.token,absolute:!0}),[n,null==c?void 0:c.token]),{onCopy:x}=(0,iX.V)(u);(0,j.useCallback)(()=>{(0,i1.J)({docId:null==n?void 0:n.id,source:"docWizardFooter",type:"tokenUrl"}),x(),d({title:(0,s.jsx)(h.cC,{id:"pQjjYo"}),status:"success",position:"top",duration:1e3,isClosable:!1})},[null==n?void 0:n.id,x,d]);let m=(0,j.useCallback)(()=>{a(!0)},[]);return(iE(),n)?(0,s.jsx)(ep.Wk,{isDark:r,children:(0,s.jsx)(o.k,{className:"chakra-dont-set-collapse","data-doc-wizard-footer":!0,w:"100%",mt:(0,ef.s2)()?void 0:"-".concat(i2.m),children:(0,s.jsx)(iQ.U,{in:!l,style:{width:"100%"},unmountOnExit:!0,children:(0,s.jsx)(o.k,{pt:[10,10,20],pb:[4,4,8],w:"100%",position:"relative",...r?{background:"gray.900",color:"white",borderTop:"2px solid var(--chakra-colors-whiteAlpha-200)"}:{background:"white",color:void 0,borderTop:"2px solid var(--chakra-colors-blackAlpha-200)"},children:(0,s.jsx)(i$.W,{maxW:"450px",children:(0,s.jsxs)(tc.K,{spacing:8,children:[!n.site&&(0,s.jsx)(nr,{}),n.site&&!(0,ef.s2)()&&(0,s.jsx)(nl,{}),(0,s.jsx)(nb,{docId:n.id,isDark:r,interactionId:i}),(0,s.jsx)(td.M,{pt:[0,0,4],w:"100%",children:(0,s.jsx)(eh.z,{size:"sm",onClick:m,variant:"text",colorScheme:"blackAlpha",children:(0,s.jsx)(h.cC,{id:"vLyv1R"})})})]})})})})})}):null});nG.displayName="DocWizardFooterInner";let nz=e=>{let{editor:t}=e,{showDocWizardFooter:i}=nN({editor:t}),n=(0,M.CG)((0,i0.oH)(null==t?void 0:t.gammaDocId)),r=null==n?void 0:n.id;return i&&r?(0,s.jsx)(nG,{interactionId:r}):(0,s.jsx)(s.Fragment,{})};var nM=i(98537),nL=i.n(nM),nF=i(11082),nU=i(12136);let nW=e=>{let{onCloneClick:t,onSignupClick:i,isLoggedIn:n}=e;return(0,s.jsx)(d.xu,{bg:"white",border:"0.5px solid var(--chakra-colors-gray-100)",borderRadius:"md",shadow:"md",display:"column",p:4,position:"relative",children:n?(0,s.jsxs)(ex.U,{children:[(0,s.jsxs)(a.x,{mr:1,children:[(0,s.jsx)(h.cC,{id:"HMsJrS",values:{GAMMA_ARTIFACT_PROPER_NOUN:K.Yc},components:{0:(0,s.jsx)("strong",{})}})," ","\uD83D\uDE0D"]}),(0,s.jsx)(eh.z,{variant:"solid",onClick:t,children:(0,s.jsx)(h.cC,{id:"he3ygx"})})]}):(0,s.jsxs)(ex.U,{children:[(0,s.jsxs)(a.x,{mr:1,children:[(0,s.jsx)(h.cC,{id:"FEyEJk",values:{GAMMA_ARTIFACT_PROPER_NOUN:K.Yc,GAMMA_PROPER_NOUN:K.N6},components:{0:(0,s.jsx)("strong",{})}})," ","\uD83D\uDE0D"]}),(0,s.jsx)(iC(),{href:"/signup",passHref:!0,legacyBehavior:!0,children:(0,s.jsx)(eh.z,{as:nF.r,onClick:i,variant:"solid",textDecoration:"none !important",children:(0,s.jsx)(h.cC,{id:"e+RpCP"})})})]})})},nH=e=>{let t=!(0,ef.s2)(),{user:i}=(0,eY.SE)(),n=(0,iJ.p)(),r=(0,j.useRef)(),l=(0,nU.e)(),s=(0,j.useCallback)(()=>{e&&(null===eG.co||void 0===eG.co||eG.co.track(eG.AA.EXAMPLE_SIGNUP_CLICKED,{doc_id:e.id,title:e.title}))},[e]),o=(0,j.useCallback)(()=>{l({docId:null==e?void 0:e.id,docTitle:null==e?void 0:e.title,source:"example_deck_clone_toast"})},[e,l]);(0,j.useEffect)(()=>()=>{r.current&&n.close(r.current)},[n]);let a=t&&e,d=!!i;(0,tr.vm)(()=>{r.current&&n.close(r.current),a&&(r.current=n({position:"bottom",render:()=>nW({onCloneClick:o,isLoggedIn:d,onSignupClick:s}),isClosable:!0,duration:null}))},[e,t,o,s,a,i,n,d],[a,d])};var nV=i(97857),nB=i(61750),nK=i(58247);let nq="sessionId1",nY=eM.hj.create({addStorage:()=>({user:{}}),addCommands(){return{user:e=>()=>{let t=(0,M.bh)();return this.storage.user=nL()({},this.storage.user,e),t.dispatch((0,L.MU)({sessionId:nq})),t.dispatch((0,L.Tx)({collaborators:[this.storage.user]})),!0}}}}),nZ=e=>{var t;let{docId:i,snapshotId:n,scrollingParentSelector:r,onCreate:l}=e,a=(0,M.CG)(tk.yx);nH(a);let[c]=(0,j.useState)(()=>[tp.F,nB.$1.configure({scrollerSelector:r}),nY,nV._g]),{user:u,anonymousUser:x,isUserLoading:h,color:m}=(0,eY.SE)(),[p,g]=(0,j.useState)(),{data:f,loading:C,error:b}=(0,v.EDv)({variables:{docId:i,snapshotId:n},skip:!n});(0,j.useEffect)(()=>{!h&&p&&p.commands.user({id:(null==u?void 0:u.id)||x.id,color:m.value,sessionId:nq,idleSince:null,name:(null==u?void 0:u.displayName)||x.displayName||"",profileImageUrl:(null==u?void 0:u.profileImageUrl)||"",isReady:!h})},[p,u,m,h,x]);let y=f&&void 0!==f.snapshot&&!C&&a;return(0,s.jsxs)(d.xu,{"data-testid":"example-static-editor-wrapper",flex:"1",height:"100%",children:[!y||b?(0,s.jsxs)(o.k,{direction:"column",height:"100%",flex:"1",bg:"gray.100",alignItems:"center",justifyContent:"center",children:[!y&&(0,s.jsx)(tu.$,{}),b&&(0,s.jsxs)(td.M,{h:"100%",children:["There was an error loading this ",K.Yc,":"," ",b.message]})]}):(0,s.jsx)(d.xu,{"data-testid":"example-static-editor-wrapper-inner",transitionProperty:"common",transitionDuration:"750ms",transitionTimingFunction:"ease-out",opacity:y?1:0,children:(0,s.jsx)(eO.yE,{doc:a,editorId:"main",docId:i,extensions:c,onCreate:e=>{let{editor:t}=e;g(t),setTimeout(()=>{l&&l(t)},10)},readOnly:!0,initialContent:null===(t=f.snapshot)||void 0===t?void 0:t.content.default,scrollingParentSelector:r})}),(0,s.jsx)(nK.m,{forceShow:!0,abuseReportingEnabled:!1})]})};var nJ=i(332),nX=i(36474),nQ=i(48832);let n$=e=>{var t;let{site:i}=e,n=null==i?void 0:null===(t=i.currentDeployment)||void 0===t?void 0:t.deploymentTime,r=(0,j.useMemo)(()=>({fromNow:(0,nQ.Km)(n),calendar:(0,nQ.p6)(n,"PPpp")}),[n]);return(0,s.jsx)(h.cC,{id:"XHgRJj",values:{0:r.fromNow},components:{0:(0,s.jsx)(ep.kH,{label:r.calendar,placement:"top",shouldWrapChildren:!0}),1:(0,s.jsx)(a.x,{as:"span",cursor:"pointer",style:{textDecoration:"underline"}})}})},n0=e=>{let t=(0,M.CG)(eS.lH),i=(0,eA.k2)(t),n=!(0,eA.Vr)(t),r=(0,M.CG)(eS.RM),l=(0,M.CG)(eS.rc),o=e?(0,s.jsx)(h.cC,{id:"mkk40+"}):n?(0,s.jsx)(h.cC,{id:"r5OY1d"}):i?r>0?(0,s.jsx)(h.cC,{id:"pxio6v",values:{changedPagesCount:r}}):l?(0,s.jsx)(h.cC,{id:"G971z4"}):(0,s.jsx)(h.cC,{id:"o+bOqE"}):(0,s.jsx)(h.cC,{id:"tpB6bH"}),a=e?null:n?(0,s.jsx)(h.cC,{id:"u8Rqhk"}):!1===i?(0,s.jsx)(h.cC,{id:"Ys0XoA"}):r>0||l?(0,s.jsx)(h.cC,{id:"Ys0XoA"}):null,d=t?(0,s.jsx)(n$,{site:t}):null;return{statusText:o,detailText:a,needsPublish:!i||l||r>0,lastPublishedTime:d,publishEnabled:!1===n&&!e}},n1=e=>{let{context:t,openSiteSettings:i}=e,n=(0,M.CG)(eS.lH),r=(0,ek.O1)(),{publishSite:l,isPublishing:o}=i4({site:n}),{statusText:d,detailText:c,needsPublish:m,publishEnabled:p}=n0(o),g=(0,eu.ff)(!1,!0);return("pages"!==t||m||o)&&r&&n&&(0,eA.Vr)(n)?(0,s.jsx)(i$.W,{px:0,children:(0,s.jsxs)(tc.K,{w:"100%",bg:g?"gray.800":"gray.50",borderRadius:"md",p:4,align:"pages"===t?"stretch":"center",direction:"pages"===t?"column":"row",spacing:3,children:[(0,s.jsxs)(eX.g,{spacing:0,color:g?"gray.200":void 0,textAlign:"pages"===t?"center":"left",align:"pages"===t?"center":"start",children:[(0,s.jsx)(a.x,{fontWeight:"500",fontSize:"sm",children:d}),c&&(0,s.jsx)(a.x,{fontSize:"xs",textColor:"gray.500",css:{textWrap:"balance"},children:c})]}),"pages"!==t&&(0,s.jsx)(nX.L,{}),(0,s.jsx)(eh.z,{size:"sm",variant:"solid",leftIcon:(0,s.jsx)(x.G,{icon:u.A$k}),isDisabled:!p,onClick:l,isLoading:o,children:(0,s.jsx)(h.cC,{id:"1EeNDU"})}),"pages"===t&&(0,s.jsx)(eh.z,{textAlign:"left",color:g?"trueblue.200":"trueblue.600",variant:"link",size:"sm",onClick:i,flex:1,children:(0,s.jsx)(h.cC,{id:"WtsmDd"})})]})}):null};var n2=i(27599),n5=i(25481),n4=i(69024),n3=i(29705),n9=i(92850),n6=i(22226),n7=i(54326);let n8=e=>{var t;let{onClose:i,isOpen:n,site:r}=e,{replace:l}=(0,eg.useRouter)(),d=(0,iJ.p)(),[c,{data:u,loading:x}]=(0,v.jUI)(),m=null==u?void 0:null===(t=u.archiveSite)||void 0===t?void 0:t.archived,p=(0,j.useCallback)(async()=>{if(null==r?void 0:r.id)try{await c({variables:{id:null==r?void 0:r.id}}),i()}catch(e){console.error("[DeleteGammaModal] Failed to archive site",e.message),d({title:(0,s.jsx)(h.cC,{id:"aBvGpM"}),description:(0,s.jsx)(h.cC,{id:"DVB9Jq"}),status:"error",duration:5e3,isClosable:!0,position:"top"})}},[c,null==r?void 0:r.id,d]);return((0,j.useEffect)(()=>{m&&(i(),l("/#sites"),d({title:(0,s.jsx)(h.cC,{id:"oGP1Fe"}),description:(0,s.jsx)(h.cC,{id:"sqh0jP"}),status:"success",duration:5e3,isClosable:!0,position:"top"}))},[m,i,l,d,r]),x||m)?(0,s.jsx)(nJ.h,{children:(0,s.jsx)(o.k,{w:"100%",h:"100%",zIndex:"overlay",position:"absolute",top:"0",left:"0",background:"whiteAlpha.800",flex:1,children:(0,s.jsx)(tN.AA,{})})}):(0,s.jsxs)(n9.u_,{onClose:i,isOpen:n,size:"lg",children:[(0,s.jsx)(t_.Z,{}),(0,s.jsxs)(n6.h,{children:[(0,s.jsx)(n7.x,{children:(0,s.jsx)(h.cC,{id:"cw2uO1",values:{GAMMA_ARTIFACT_PROPER_NOUN:K.Yc}})}),(0,s.jsx)(tT.o,{isDisabled:x}),(0,s.jsx)(tO.f,{children:(0,s.jsxs)(tc.K,{spacing:4,children:[(0,s.jsx)(a.x,{children:(0,s.jsx)(h.cC,{id:"87gjhX",values:{GAMMA_ARTIFACT_PROPER_NOUN:K.Yc}})}),(0,s.jsx)(a.x,{children:(0,s.jsx)(h.cC,{id:"tOGRxi",values:{0:(null==r?void 0:r.name)?'"'.concat(null==r?void 0:r.name,'"'):""}})}),(0,s.jsx)(a.x,{children:(0,s.jsx)(h.cC,{id:"MluQ97",values:{GAMMA_ARTIFACT_PROPER_NOUN_PLURAL:K.aq},components:{0:(0,s.jsx)(nF.r,{color:"trueblue.500",colorScheme:"trueblue",href:"/#trash",textDecoration:"underline",isExternal:!0}),1:(0,s.jsx)(n3.h,{mx:"2px"})}})})]})}),(0,s.jsx)(tP.m,{children:(0,s.jsxs)(em.h,{children:[(0,s.jsx)(eh.z,{variant:"ghost",onClick:i,children:(0,s.jsx)(h.cC,{id:"dEgA5A"})}),(0,s.jsx)(eh.z,{variant:"ghost",color:"red.600",onClick:p,isLoading:x,children:(0,s.jsx)(h.cC,{id:"cnGeoo"})})]})})]})]})},re=e=>{let{site:t}=e,{isOpen:i,onOpen:n,onClose:r}=(0,w.q)({id:"trash-site-modal"}),[l]=(0,v.sJX)(),o=(0,ek.O1)(),a=null==t?void 0:t.archived,d=(0,j.useCallback)(()=>{(null==t?void 0:t.id)&&l({variables:{id:t.id},optimisticResponse:{unarchiveSite:{id:t.id,__typename:"Site"}}})},[null==t?void 0:t.id,l]);return o&&t?a?(0,s.jsx)(n5.s,{icon:(0,s.jsx)(x.G,{fixedWidth:!0,icon:iR.XnX}),onClick:d,children:(0,s.jsx)(h.cC,{id:"yKu/3Y"})}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n5.s,{color:"red.500",icon:(0,s.jsx)(x.G,{fixedWidth:!0,icon:u.XAH}),onClick:()=>{n()},children:(0,s.jsx)(h.cC,{id:"NOLglc",values:{GAMMA_ARTIFACT_PROPER_NOUN:K.Yc}})}),i&&(0,s.jsx)(n8,{isOpen:i,onClose:r,site:t})]}):(0,s.jsx)(s.Fragment,{})},rt=()=>({[eV.q.DOC_VIEW]:{buttonLabel:(0,s.jsx)(h.cC,{id:"eZb+lw"}),shortcutIcon:iR.zc,shortcutKeys:(0,ep.cE)("Mod+Enter"),shortcutLabel:(0,s.jsx)(h.cC,{id:"tbDuNX"})},[eV.q.SLIDE_VIEW]:{buttonLabel:(0,s.jsx)(h.cC,{id:"ydzS9x"}),shortcutIcon:iR.Bg$,shortcutKeys:"Esc",shortcutLabel:(0,s.jsx)(h.cC,{id:"5Rfo7J"})}});var ri=i(65610),rn=i(87827),rr=i(25944),rl=i(52332),rs=i(54999),ro=i(67748);let ra=(0,ij.ZP)("mod+Enter"),rd=(0,ij.ZP)("Esc"),rc=(0,ij.ZP)("mod+Esc"),ru=(0,ij.ZP)("shift+mod+Enter"),rx=e=>function(t){t((0,L.Qx)({attached:!1})),t((0,L.PM)({mode:e}))},rh=(e,t)=>{let i=document.querySelector(t);if(!i)return;let n=i.getBoundingClientRect();e.commands.scrollToNodeWithPin(document.elementFromPoint(n.width/2,100),100)},rm=e=>{let{editorWrapperEl:t,scrollingParentSelector:i}=e,n=(0,M.TL)(),[r,l]=(0,j.useState)(!1),[s,o]=(0,j.useState)(!1),{editor:a}=(0,ta._i)(),d=(0,M.CG)(L.gh),c=(0,j.useRef)(d);(0,j.useEffect)(()=>{c.current=d},[d]);let u=(0,M.CG)(L.yq),x=(0,M.CG)(L.JA),h=(0,M.CG)(rn.C),m=(0,eG.z$)(),p=(0,j.useCallback)(e=>{a&&!a.isDestroyed&&(e===eV.q.SLIDE_VIEW?((0,rl.E0)(a.state.doc,n),(0,rs.U6)(a,!1),a.commands.spotlightCurrentCard()):(a.commands.turnOffSpotlight(!0),rh(a,i)),n(rx(e)))},[n,a,i]),g=(0,j.useCallback)(()=>{try{var e,t,i,n;if(null===(e=document.body)||void 0===e?void 0:e.requestFullscreen){null===(i=document.body)||void 0===i||i.requestFullscreen();return}(null===(t=document.body)||void 0===t?void 0:t.webkitRequestFullscreen)&&(null===(n=document.body)||void 0===n||n.webkitRequestFullscreen())}catch(e){console.debug("[PresentBlock] Error entering fullscreen:",e)}},[]),f=(0,j.useCallback)(()=>{try{if(document.fullscreenElement){document.exitFullscreen();return}document.webkitCurrentFullScreenElement&&document.webkitExitFullscreen&&document.webkitExitFullscreen()}catch(e){console.debug("[PresentBlock] Error exiting fullscreen:",e)}},[]),v=(0,e7.ye)("realUserMetrics"),{recordExitSlideModePerformance:C,recordEnterSlideModePerformance:b}=(0,rr.wK)(v),y=(0,j.useCallback)(e=>{let{fullscreen:t=!1}=e;c.current!==eV.q.SLIDE_VIEW&&(p(eV.q.SLIDE_VIEW),t&&g(),null==m||m.trackDocEvent(eG.AA.PRESENT_MODE_ENTERED),b({isFullscreen:t}),setTimeout(()=>{document.activeElement&&document.activeElement instanceof HTMLElement&&document.activeElement.blur()}))},[p,b,g,c,m]),k=(0,j.useCallback)(()=>{c.current!==eV.q.DOC_VIEW&&(p(eV.q.DOC_VIEW),r&&f(),null==m||m.trackDocEvent(eG.AA.PRESENT_MODE_EXITED),C({isFullscreen:r}))},[p,r,f,C,c,m]);return(0,j.useEffect)(()=>{let e=()=>{null!==document.fullscreenElement||s||k(),null!==document.webkitCurrentFullScreenElement||s||k(),l(e=>!e),o(!1)};return document.addEventListener("fullscreenchange",e),document.addEventListener("webkitfullscreenchange",e),document.addEventListener("mozfullscreenchange",e),()=>{document.removeEventListener("fullscreenchange",e),document.removeEventListener("webkitfullscreenchange",e),document.removeEventListener("mozfullscreenchange",e)}},[s,k,f]),(0,ri.r)(()=>{a&&!a.isDestroyed&&d===eV.q.DOC_VIEW&&requestAnimationFrame(()=>{let e=a.state.selection;e instanceof ro.c&&a.commands.command(t=>{let{tr:i}=t;return i.setSelection(e.createSelectionNear()),!0})})},[a,d]),(0,j.useEffect)(()=>ej.F7.on("keydown","PRESENT_BLOCK",e=>{var t,i,n;let r=c.current===eV.q.SLIDE_VIEW;if(!h){if(ra(e)){if(null==e?void 0:null===(t=e.target)||void 0===t?void 0:t.closest("[data-gamma-child-tiptap-editor]"))return;return e.preventDefault(),y({fullscreen:!1}),!0}if(ru(e)){if(null==e?void 0:null===(i=e.target)||void 0===i?void 0:i.closest("[data-gamma-child-tiptap-editor]"))return;return e.preventDefault(),y({fullscreen:!0}),!0}if(rc(e)&&r)return k(),!0;if(rd(e)&&r&&!u&&!x){if(null==e?void 0:null===(n=e.target)||void 0===n?void 0:n.closest("[data-gamma-child-tiptap-editor]"))return;return k(),!0}}}),[y,k,g,u,x,t,h]),{enterSlideView:y,exitSlideView:k,enterFullscreen:g,exitFullscreen:f,exitedFullscreenByClick:s,isFullscreen:r,setIsFullscreen:l,setExitedFullscreenByClick:o}},rp=e=>{let{editorWrapperEl:t,scrollingParentSelector:i}=e,n=(0,M.CG)(L.gh),r=(0,e7.ye)("presentFullScreen"),{shortcutIcon:l,shortcutKeys:o,buttonLabel:a}=rt()[n],{enterSlideView:d,exitSlideView:c}=rm({editorWrapperEl:t,scrollingParentSelector:i});return(0,s.jsx)(n5.s,{icon:(0,s.jsx)(x.G,{icon:l,fixedWidth:!0}),command:o,onClick:()=>{n===eV.q.SLIDE_VIEW?c():d({fullscreen:r})},children:a})};var rg=i(74008),rj=i(67109),rf=i(87342),rv=i(81640);let rC="gray.700";var rb=i(52929);let ry=e=>{let{error:t,refetch:i,...n}=e;return(0,s.jsx)(d.xu,{px:6,py:4,...n,children:(0,s.jsxs)(iS.b,{p:6,status:"error",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",children:[(0,s.jsx)(rb.z,{mr:0,boxSize:"30px",alignSelf:"center"}),(0,s.jsx)(iI.C,{mt:4,mb:2,fontSize:"md",children:(0,s.jsx)(h.cC,{id:"uNQm3r"})}),(0,s.jsx)(i_.X,{maxWidth:"md",children:t.message}),(0,s.jsx)(eh.z,{mt:4,onClick:()=>i(),children:(0,s.jsx)(h.cC,{id:"6gRgw8"})})]})})},rk=()=>m.ag._({id:"QbrUIo"}),rw=()=>m.ag._({id:"FbBkvL"}),rE=e=>{let{isAnalyticsLoading:t,hasError:i,view:n,setView:r,description:l}=e;return i?(0,s.jsx)(n7.x,{children:(0,s.jsx)(h.cC,{id:"ZlwDi6"})}):(0,s.jsxs)(o.k,{direction:"column",flex:1,children:[(0,s.jsx)(n7.x,{children:t?(0,s.jsx)(rS,{}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(h.cC,{id:"ZlwDi6"}),(0,s.jsxs)(eX.g,{align:"stretch",spacing:4,children:[(0,s.jsx)(a.x,{color:"gray.500",fontSize:"sm",fontWeight:"normal",letterSpacing:"normal",children:l}),(0,s.jsxs)(na.E,{children:[(0,s.jsx)(na.U,{children:(0,s.jsx)(eh.z,{leftIcon:(0,s.jsx)(x.G,{icon:iR.Ma4,"aria-label":rk()}),variant:"ghost",fontWeight:"600",bg:"deckView"===n?"trueblue.50":"transparent",color:"deckView"===n?"trueblue.500":rC,onClick:()=>r("deckView"),children:rk()})}),(0,s.jsx)(na.U,{children:(0,s.jsx)(eh.z,{leftIcon:(0,s.jsx)(x.G,{icon:iR.AGo,"aria-label":rw()}),variant:"ghost",fontWeight:"600",bg:"cardEngagement"===n?"trueblue.50":"transparent",color:"cardEngagement"===n?"trueblue.500":rC,onClick:()=>r("cardEngagement"),children:rw()})})]})]})]})}),(0,s.jsx)(tT.o,{})]})},rS=()=>(0,s.jsxs)(eX.g,{align:"stretch",spacing:4,children:[(0,s.jsx)(rj.O,{h:12,width:"30%"}),(0,s.jsx)(rj.O,{h:4,width:"80%"})]});var rI=i(98621),r_=i.n(rI),rA=i(17831);let rT=e=>{let{degree:t,alpha:i=1,startColor:n="#ECC94B",endColor:r="#38A169"}=e;if(Number.isNaN(t))return r_()("#e5e0df").toHex8String();let l=r_()(n).toHsl(),s=r_()(r).toHsl();return r_()({h:(0,rA.t7)(l.h,s.h,t),s:(0,rA.t7)(l.s,s.s,t),l:(0,rA.t7)(l.l,s.l,t),a:i}).toHex8String()},rO=(e,t)=>e.reduce((e,i)=>(e[i.cardId]=i[t],e),{}),rP=(e,t)=>{let i=0;for(let r in e){var n;i+=(null!==(n=t[r])&&void 0!==n?n:0)+rP(e[r],t)}return i},rD=(e,t)=>{let i=0;for(let r in e){var n;let l=null!==(n=t[r])&&void 0!==n?n:0;i=Math.max(l+rP(e[r],t),i)}return i};var rR=i(25195),rN=i(62349),rG=i.n(rN);let rz=e=>{let{cardsViewed:t,totalCards:i}=e,n=rT({degree:t/i}),r=i>0;return(0,s.jsxs)(ex.U,{spacing:3,children:[(0,s.jsxs)(o.k,{flex:1,position:"relative",children:[(0,s.jsx)(rR.E,{h:4,flex:1,borderRadius:"sm",value:t,max:r?i:void 0,bg:"gray.200",sx:{"> div":{bg:n}}}),r&&t===i&&(0,s.jsx)(rL,{top:0,right:0,transform:"translate(50%,-50%)",position:"absolute"})]}),(0,s.jsx)(a.x,{w:{base:10,lg:12},fontSize:"sm",whiteSpace:"nowrap",textAlign:"left",children:r?"".concat(t,"/").concat(i):(0,s.jsx)(h.cC,{id:"8Va3Pt"})})]})},rM=e=>{let{cardCount:t}=e,i=(0,j.useMemo)(()=>rG()(1,t),[t]);return(0,s.jsxs)(ex.U,{spacing:3,filter:"blur(3px)",children:[(0,s.jsx)(o.k,{flex:1,position:"relative",children:(0,s.jsx)(rR.E,{h:4,flex:1,borderRadius:"sm",value:i,max:t,bg:"gray.300",sx:{"> div":{bg:"gray.300"}}})}),(0,s.jsxs)(a.x,{w:{base:10,lg:12},fontSize:"sm",whiteSpace:"nowrap",textAlign:"left",color:"gray.600",children:[i,"/",t]})]})},rL=e=>{let{...t}=e;return(0,s.jsx)(d.Cd,{bg:"green.500",size:"18px",border:"2px solid white",color:"white",...t,children:(0,s.jsx)(x.G,{icon:iR.LEp,"aria-label":m.ag._({id:"y886Ns"}),size:"xs"})})},rF=e=>t=>(0,rA.t7)(0,100,t/e),rU=e=>{var t;let{cards:i,isColorized:n=!1,scaleToMax:r=!1,includeChildren:l,showViewersPercent:o=!1,leftLabel:a,rightLabel:c,tooltipLabel:u,cardLookupTable:x,onAnalyticsPanelClose:h}=e,m=l?rD(i,x):Math.max(...Object.values(x)),p=rF(m),g=(0,j.useCallback)(e=>p(e),[p]);return(0,s.jsxs)(d.xu,{mt:6,mb:4,children:[(0,s.jsxs)(ex.U,{mb:3,children:[(0,s.jsx)(ex.U,{children:(0,s.jsx)(ep.NZ,{children:a})}),(0,s.jsx)(nX.L,{}),(0,s.jsx)(ex.U,{children:(0,s.jsx)(ep.kH,{placement:"top",label:u,children:(0,s.jsx)(ex.U,{children:(0,s.jsx)(ep.NZ,{borderBottom:"0.125em dashed",borderBottomColor:"gray.400",children:c})})})})]}),(0,s.jsx)(d.xu,{width:"100%",children:Object.entries(i).map(e=>{let[i,a]=e;return(0,s.jsx)(rW,{id:i,childCards:a,percentage:null!==(t=x[i])&&void 0!==t?t:0,calculatePercentageScale:g,isColorized:n,cardLookupTable:x,scaleToMax:r,includeChildren:l,showViewersPercent:o,onAnalyticsPanelClose:h},i)})})]})},rW=e=>{var t;let{id:i,cardLookupTable:n,childCards:r,percentage:l,calculatePercentageScale:c,isColorized:m,scaleToMax:p,includeChildren:g,showViewersPercent:f,onAnalyticsPanelClose:v}=e,[C,b]=(0,j.useState)(!1),y=(0,j.useCallback)(()=>{b(!C)},[C]),{title:k}=(0,e4.T)({cardId:i}),w=Object.values(r).length>0,E=0===l,S=g?l+rP(r,n):l,_=C?S:0,A=p?c(S):Math.min(100,_),T=C?l:S,O=p?c(T):Math.min(100,T),P={startColor:"#F6AD55",endColor:"#68D391"},D=m?rT({degree:A/100,...P}):"trueblue.50",R=m?rT({degree:O/100,...P}):"trueblue.100";return(0,s.jsxs)(tc.K,{children:[(0,s.jsx)(o.k,{direction:"column",children:(0,s.jsxs)(o.k,{h:8,px:2,bg:"gray.100",borderRadius:"md",position:"relative",overflow:"hidden",alignItems:"center",_focusWithin:{shadow:"outline"},children:[(0,s.jsxs)(ex.U,{pos:"absolute",zIndex:1,children:[w&&(0,s.jsx)(I.h,{"aria-label":"expand-card",size:"xs",variant:"ghost",isRound:!0,colorScheme:"blackAlpha",icon:(0,s.jsx)(x.G,{icon:u._tD}),transform:C?"rotate(90deg)":"",onClick:y,_focus:{shadow:"none"}}),!w&&(0,s.jsx)(o.k,{w:6,justifyContent:"center",alignItems:"center",children:E?(0,s.jsx)(ep.kH,{label:(0,s.jsx)(h.cC,{id:"s+PDNe"}),children:(0,s.jsx)(d.xu,{color:"blackAlpha.500",children:(0,s.jsx)(x.G,{icon:iR.Aq,size:"sm"})})}):(0,s.jsx)(d.xu,{color:"blackAlpha.300",fontSize:"xx-small",children:(0,s.jsx)(x.G,{icon:iR.nZ9,size:"sm"})})}),(0,s.jsx)(a.x,{color:E?"blackAlpha.500":void 0,noOfLines:1,children:k||(0,s.jsx)(h.cC,{id:"wja8aL"})})]}),(0,s.jsxs)(d.xu,{position:"absolute",w:"100%",height:"100%",top:0,left:0,pointerEvents:"none",children:[(0,s.jsx)(d.xu,{position:"absolute",h:"100%",bg:E?"blackAlpha.200":D,w:"".concat(A,"%")}),(0,s.jsx)(d.xu,{transitionProperty:"all",transitionDuration:"normal",position:"absolute",h:"100%",bg:E?"blackAlpha.300":R,w:"".concat(O,"%")})]}),m&&100===l&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(nX.L,{}),(0,s.jsx)(rL,{alignSelf:"center",zIndex:1})]})]})}),(0,s.jsx)(d.xu,{pl:8,children:w&&Object.entries(r).map(e=>{let[i,r]=e;return(0,s.jsx)(iQ.U,{in:C,children:(0,s.jsx)(rW,{id:i,childCards:r,percentage:null!==(t=n[i])&&void 0!==t?t:0,cardLookupTable:n,calculatePercentageScale:c,scaleToMax:p,isColorized:m,includeChildren:g,showViewersPercent:f,onAnalyticsPanelClose:v})},i)})})]})},rH=()=>(0,s.jsx)(tc.K,{spacing:2,children:(0,s.jsx)(h.cC,{id:"QXJTby",components:{0:(0,s.jsx)(a.x,{}),1:(0,s.jsx)(a.x,{}),2:(0,s.jsx)(a.x,{})}})}),rV=e=>{let{timeInMS:t}=e;return void 0===t?(0,s.jsx)(s.Fragment,{}):(0,s.jsx)(h.cC,{id:"yXHI9B",values:{timeInSeconds:t/1e3}})},rB=(e,t)=>"viewTimePercent"===e?{chartDescription:(0,s.jsx)(h.cC,{id:"dpTE1c",values:{viewerCount:t}}),leftLabel:(0,s.jsx)(h.cC,{id:"ml51m3"}),rightLabel:(0,s.jsx)(h.cC,{id:"8R7bfR"})}:{chartDescription:(0,s.jsx)(h.cC,{id:"b2VMTo",values:{viewerCount:t}}),leftLabel:(0,s.jsx)(h.cC,{id:"kTgCTO"}),rightLabel:(0,s.jsx)(h.cC,{id:"AKDcmS"})},rK=e=>{let{docId:t,viewerFilter:i,currentViewerFilterCount:n,onAnalyticsPanelClose:r}=e,l=(0,M.qr)(),o=l.getState(),a=(0,L.X9)(o),{data:c,error:m,loading:p,refetch:g}=(0,v.IrH)({variables:{docId:t}}),[f,C]=(0,j.useState)("viewTimePercent"),{chartDescription:b,rightLabel:y,leftLabel:k}=rB(f,n),w="viewersOnly"===i?"viewers":"everyone",E=(0,e7.ye)("cardViewedThreshold"),S=(0,j.useMemo)(()=>{var e;return(null==c?void 0:null===(e=c.docCardsStats)||void 0===e?void 0:e[w])||[]},[null==c?void 0:c.docCardsStats,w]),I=(0,j.useMemo)(()=>rO(S,f),[S,f]),_=(0,j.useCallback)(()=>C("viewTimePercent"),[]),A=(0,j.useCallback)(()=>C("viewersPercent"),[]);return(0,s.jsxs)(d.xu,{children:[(0,s.jsxs)(ex.U,{my:4,children:[(0,s.jsx)(eh.z,{leftIcon:(0,s.jsx)(x.G,{icon:u.SZw,"aria-label":"Time spend"}),variant:"ghost",fontWeight:"600",bg:"viewTimePercent"===f?"trueblue.50":"transparent",color:"viewTimePercent"===f?"trueblue.500":rC,onClick:_,children:(0,s.jsx)(h.cC,{id:"XyvAeS"})}),(0,s.jsx)(eh.z,{leftIcon:(0,s.jsx)(x.G,{icon:iR.jGC,"aria-label":"Percent viewed"}),variant:"ghost",fontWeight:"600",bg:"viewersPercent"===f?"trueblue.50":"transparent",color:"viewersPercent"===f?"trueblue.500":rC,onClick:A,children:(0,s.jsx)(h.cC,{id:"vXtpAZ"})})]}),(0,s.jsx)(rY,{description:b}),m&&(0,s.jsx)(ry,{error:m,refetch:g}),p&&!m&&(0,s.jsx)(rq,{}),!p&&!m&&(0,s.jsx)(rU,{cards:a.tree,cardLookupTable:I,scaleToMax:"viewTimePercent"===f,isColorized:"viewersPercent"===f,includeChildren:"viewTimePercent"===f,showViewersPercent:"viewersPercent"===f,rightLabel:y,leftLabel:k,tooltipLabel:"viewTimePercent"===f?(0,s.jsx)(rH,{}):(0,s.jsx)(rV,{timeInMS:E}),onAnalyticsPanelClose:r})]})},rq=e=>{let{includeDescription:t=!1}=e;return(0,s.jsx)(o.k,{direction:"column",mt:6,mb:4,children:(0,s.jsxs)(eX.g,{align:"stretch",children:[t&&(0,s.jsx)(rj.O,{h:5,mb:3,w:"70%"}),[void 0,void 0,void 0,void 0,void 0].map((e,t)=>(0,s.jsx)(rj.O,{h:8},t))]})})},rY=e=>{let{description:t}=e;return(0,s.jsx)(a.x,{color:rC,children:t})};var rZ=i(89364),rJ=i(78534),rX=i(80774),rQ=i(5832),r$=i(14093),r0=i(70189),r1=i(66983),r2=i(79443),r5=i(109),r4=i(16556),r3=i(829),r9=i.n(r3);let r6=e=>{let{uniqueViewers:t,docCreatedDate:i}=e,n=(0,e7.ye)("cardViewedThreshold");return(0,s.jsx)(rJ.h,{children:(0,s.jsxs)(rX.Tr,{children:[(0,s.jsx)(r7,{label:(0,s.jsx)(h.cC,{id:"LZHJAq",values:{uniqueViewers:t}}),tooltip:(0,s.jsx)(h.cC,{id:"aaiIlJ",values:{docCreatedDate:i}}),width:"40%"}),(0,s.jsx)(r7,{label:(0,s.jsx)(h.cC,{id:"pRGfP3"}),width:"35%"}),(0,s.jsx)(r7,{label:(0,s.jsx)(h.cC,{id:"QfqHuz"}),tooltip:(0,s.jsx)(rV,{timeInMS:n}),width:"25%"})]})})},r7=e=>{let{label:t,width:i,tooltip:n}=e,r=(0,s.jsx)(rQ.Th,{w:i,children:(0,s.jsx)(a.x,{display:"inline",borderBottom:n?"0.125em dashed":void 0,borderBottomColor:n?"gray.400":void 0,children:t})});return n?(0,s.jsx)(ep.kH,{placement:"top",label:n,children:r}):r},r8=["Yesterday at 11:02 am","Today at 12:55 pm","Dec 12, 2020, 10:19 pm","Apr 14, 2023, 4:30 pm","Jan 1, 2021, 12:03 am","Dec 7, 1984, 12:03 am","May 14, 2002, 3:56 pm"],le=e=>{let{viewers:t,currentViewerFilterCount:i,docCreatedDate:n,creatorId:r,contributors:l,cardCount:o,handleTableRowClick:d,hasIndividualAnalytics:c}=e,{user:u}=(0,eY.SE)(),x=c?t:r9()(t,e=>{var t;return[(null===(t=e.user)||void 0===t?void 0:t.id)===(null==u?void 0:u.id)?0:1,-e.lastOpened]}).slice(0,3);return(0,s.jsx)(r$.x,{children:(0,s.jsxs)(r0.i,{colorScheme:"blackAlpha",children:[(0,s.jsx)(r6,{uniqueViewers:i,docCreatedDate:n}),(0,s.jsx)(r1.p,{children:x.map((e,i)=>{let{user:n,lastOpened:x,visitorId:h}=e,p=(null==n?void 0:n.id)===r,g=l.some(e=>e.user.id===(null==n?void 0:n.id)),j=n?n.displayName+(n.id===(null==u?void 0:u.id)?" "+m.ag._({id:"dDUgzP"}):"")||"":m.ag._({id:"VmjbJY"}),f=x?ic()((0,it.P9)(x)):m.ag._({id:"/JO3xr"}),v={name:j,id:(null==n?void 0:n.id)||h||"",email:null==n?void 0:n.email,isCreator:p,isContributor:g,profileImg:null==n?void 0:n.profileImageUrl,lastOpened:f},C=i===t.length-1,b=(null==n?void 0:n.id)===(null==u?void 0:u.id),y=!c&&!b;return(0,s.jsxs)(rX.Tr,{cursor:"pointer",onClick:()=>d(v),_hover:{bg:"blackAlpha.50"},borderBottom:"none",children:[(0,s.jsx)(r2.Td,{borderBottom:C?"0 none":void 0,children:(0,s.jsx)(lt,{name:j,email:null==n?void 0:n.email,profileImg:null==n?void 0:n.profileImageUrl,isContributor:g,isCreator:p,isAnonymous:!n})}),(0,s.jsx)(r2.Td,{borderBottom:C?"0 none":void 0,children:y?(0,s.jsx)(a.x,{fontSize:"sm",filter:"blur(3px)",color:"gray.600",children:r8[i%r8.length]}):(0,s.jsx)(a.x,{fontSize:"sm",children:f})}),(0,s.jsx)(r2.Td,{borderBottom:C?"0 none":void 0,children:y?(0,s.jsx)(rM,{cardCount:o}):(0,s.jsx)(rz,{cardsViewed:e.cardsViewed||0,totalCards:o||0})})]},(null==n?void 0:n.id)||h)})})]})})},lt=e=>{let{name:t,profileImg:i,email:n="",isCreator:r=!1,isContributor:l=!1,isAnonymous:o=!1,...d}=e;return(0,s.jsxs)(ex.U,{...d,children:[(0,s.jsx)(r5.q,{size:"sm",name:t,src:i}),(0,s.jsxs)(tc.K,{spacing:.5,children:[(0,s.jsxs)(a.x,{children:[t,o&&(0,s.jsx)(ep.Yq,{label:(0,s.jsx)(h.cC,{id:"VHgG8W",values:{GAMMA_ARTIFACT_PROPER_NOUN:K.Yc}}),ml:2})]}),(0,s.jsxs)(ex.U,{mt:1,children:[(0,s.jsx)(a.x,{fontSize:"sm",color:"gray.500",children:n}),(r||l)&&(0,s.jsx)(r4.Vp,{size:"sm",transform:"translate(0, 1.5px)",children:r?(0,s.jsx)(h.cC,{id:"UE2beD"}):(0,s.jsx)(h.cC,{id:"3L51iw"})})]})]})]})},li=e=>{var t,i,n,r;let{user:l,onBackClick:o,docId:a,onAnalyticsPanelClose:c}=e,u=(0,M.qr)(),x=u.getState(),m=(0,L.X9)(x),{data:p,error:g,loading:f,refetch:C}=(0,v.IrH)({variables:{docId:a,userId:l.id},skip:!a||!l.id,pollInterval:9e5,notifyOnNetworkStatusChange:!0}),b=null!==(r=null==p?void 0:null===(i=p.docCardsStats)||void 0===i?void 0:null===(t=i.everyone)||void 0===t?void 0:t.length)&&void 0!==r?r:0,y=null==p?void 0:null===(n=p.docCardsStats)||void 0===n?void 0:n.cardCount,k=(0,j.useMemo)(()=>{var e;return(null==p?void 0:null===(e=p.docCardsStats)||void 0===e?void 0:e.everyone)||[]},[null==p?void 0:p.docCardsStats]),w=(0,j.useMemo)(()=>rO(k,"viewTimePercent"),[k]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n7.x,{children:(0,s.jsx)(eh.z,{"aria-label":"Back",leftIcon:(0,s.jsx)(rZ.R,{}),variant:"ghost",onClick:o,children:(0,s.jsx)(h.cC,{id:"iH8pgl"})})}),(0,s.jsx)(tT.o,{}),(0,s.jsx)(rg.i,{}),(0,s.jsx)(tO.f,{children:(0,s.jsxs)(d.xu,{children:[(0,s.jsx)(ln,{user:l,showLastOpened:!0}),y&&(0,s.jsx)(rY,{description:(0,s.jsx)(h.cC,{id:"YJOrjl",values:{cardsViewed:b,totalCards:y}})}),f&&!g&&(0,s.jsx)(rq,{includeDescription:!0}),g&&(0,s.jsx)(ry,{error:g,refetch:C}),!g&&!f&&(0,s.jsx)(rU,{cards:m.tree,scaleToMax:!0,includeChildren:!0,leftLabel:(0,s.jsx)(h.cC,{id:"ml51m3"}),rightLabel:(0,s.jsx)(h.cC,{id:"8R7bfR"}),cardLookupTable:w,tooltipLabel:(0,s.jsx)(rH,{}),onAnalyticsPanelClose:c})]})})]})},ln=e=>{let{user:t,showLastOpened:i}=e;return(0,s.jsxs)(ex.U,{align:"center",my:6,children:[(0,s.jsx)(lt,{name:t.name,profileImg:t.profileImg,email:t.email,isCreator:t.isCreator,isContributor:t.isContributor,width:i?"50%":void 0}),i&&(0,s.jsxs)(eX.g,{align:"flex-start",spacing:0,children:[(0,s.jsx)(ep.NZ,{children:(0,s.jsx)(h.cC,{id:"pRGfP3"})}),(0,s.jsx)(a.x,{children:t.lastOpened})]})]})},lr=(e,t,i)=>"everyone"===e?m.ag._({id:"1IE7uf",values:{everyone:t}}):"viewersOnly"===e?m.ag._({id:"r/tA4Y",values:{viewersOnly:i}}):m.ag._({id:"V9JX7d"}),ll={everyone:iR.NdV,viewersOnly:iR.Mdf,accessLinkOnly:iR.uWk},ls=e=>{let{selected:t,handleMenuItemChange:i,everyoneCount:n,viewersOnlyCount:r}=e;return(0,s.jsxs)(ir.v,{children:[(0,s.jsx)(il.j,{leftIcon:(0,s.jsx)(x.G,{size:"xs",icon:ll[t]}),as:eh.z,size:"md",rightIcon:(0,s.jsx)(x.G,{size:"xs",icon:u.ptq}),children:lr(t,n,r)}),(0,s.jsx)(is.q,{zIndex:2,maxW:"380px",children:(0,s.jsxs)(io._,{defaultValue:t,value:t,onChange:e=>{Array.isArray(e)||i(e)},children:[(0,s.jsx)(ia.i,{value:"everyone",isDisabled:0===n,children:(0,s.jsxs)(o.k,{align:"center",children:[(0,s.jsx)(x.G,{icon:ll.everyone,size:"xs"}),(0,s.jsxs)(d.xu,{ml:3,children:[(0,s.jsx)(a.x,{children:lr("everyone",n,r)}),(0,s.jsx)(a.x,{fontSize:"sm",color:"gray.500",children:(0,s.jsx)(h.cC,{id:"c5ESvc",values:{GAMMA_ARTIFACT_PROPER_NOUN:K.Yc}})})]})]})}),(0,s.jsx)(ia.i,{value:"viewersOnly",isDisabled:0===r,children:(0,s.jsxs)(o.k,{align:"center",children:[(0,s.jsx)(x.G,{icon:ll.viewersOnly,size:"xs"}),(0,s.jsxs)(d.xu,{ml:3,children:[(0,s.jsx)(a.x,{children:lr("viewersOnly",n,r)}),(0,s.jsx)(a.x,{fontSize:"sm",color:"gray.500",children:(0,s.jsx)(h.cC,{id:"5hKO48",values:{GAMMA_ARTIFACT_PROPER_NOUN:K.Yc}})})]})]})}),!1]})})]})};var lo=i(46423),la=i(6802),ld=i(70258),lc=i(80237),lu=i(59309),lx=i(2574),lh=i(92638),lm=i(33951),lp=i(10897),lg=i(14582),lj=i(75715),lf=i(96492),lv=i(14141),lC=i(40837);let lb={top:55,right:20,bottom:40,left:24},ly=e=>Math.round(e).toString(),lk=e=>Math.max(...e.map(e=>(0,lj.Z)(e.toString(),{fontFamily:"Inter, sans-serif",fontSize:"var(--chakra-fontSizes-sm)",fontWeight:"600"})||0)),lw={backgroundColor:"var(--chakra-colors-blackAlpha-800)",color:"var(--chakra-colors-gray-100)",fontFamily:"Inter, sans-serif",boxShadow:"var(--chakra-shadows-4)",fontSize:"var(--chakra-fontSizes-xs)",borderRadius:"var(--chakra-radii-sm)",fontWeight:"var(--chakra-fontWeights-semibold)",borderWidth:"1px",borderColor:"black",paddingRight:"var(--chakra-space-1.5)",paddingLeft:"var(--chakra-space-1.5)",paddingTop:"var(--chakra-space-0.5)",paddingBottom:"var(--chakra-space-0.5)",zIndex:"var(--chakra-zIndex-tooltip)",minWidth:"60px",lineHeight:"var(--chakra-lineHeights-base)"},lE="var(--chakra-colors-gray-500)",lS="var(--chakra-colors-gray-200)",lI=e=>e.map(e=>e.x),l_=e=>e.map(e=>e.y),lA=e=>{let{width:t,height:i,margin:n=lb,chartData:r,TooltipInner:l,showZero:o,shouldRoundYValues:a,showMaxAndMiddle:c,barColor:u,customTooltipStyles:x,onClick:h=()=>{}}=e,{showTooltip:m,tooltipOpen:p,tooltipLeft:g,tooltipTop:f,tooltipData:v,hideTooltip:C}=(0,lf.Z)(),b=(0,j.useRef)(),y=(0,j.useRef)();(0,j.useEffect)(()=>()=>{b.current&&clearTimeout(b.current),y.current&&clearTimeout(y.current)},[]);let k=l_(r),w=Math.max(...k),E=[w,Math.round(w/2)],S=lk(c?E:k),I=n.left+S,_=t-I-n.right,A=i-n.top-n.bottom,T={...lv.j,...lw,...x},O=(0,j.useMemo)(()=>(0,lh.Z)({range:[0,_],domain:lI(r),padding:.3}),[_,r]),P=(0,j.useMemo)(()=>(0,lm.Z)({range:[A,0],round:!0,domain:[0,w]}),[A,w]),D=o?P(Math.min(...k.filter(e=>0!==e))):A,R=o&&A-D>6;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(d.xu,{children:(0,s.jsxs)("svg",{width:t,height:i,children:[(0,s.jsx)("rect",{x:0,y:0,rx:4,width:t,height:i,fill:"var(--chakra-colors-gray-100)"}),(0,s.jsx)(lu.Z,{top:n.top,left:I,children:r.map(e=>{var t,i;let n=e.y,r=e.x,l="bar-".concat(r,"-").concat(n),a=O.bandwidth(),d=A-(null!==(t=P(n))&&void 0!==t?t:0),c=R&&0===d?6:d,x=null!==(i=O(r))&&void 0!==i?i:0,p=A-c;return(0,s.jsxs)(lu.Z,{children:[(0,s.jsx)(lp.Z,{x:x,y:p,width:a,height:c,radius:5,topLeft:!0,topRight:!0,fill:o&&0===n?lS:u,onMouseLeave:()=>{b.current=window.setTimeout(()=>{C()},300)},onMouseMove:t=>{b.current&&clearTimeout(b.current);let i=(0,lc.Z)(t);m({tooltipData:e,tooltipTop:null==i?void 0:i.y,tooltipLeft:null==i?void 0:i.x})},onClick:t=>h(t,e)}),(0,s.jsx)(lg.Z,{x:x,y:0,width:a,height:Math.max(0,A-c),opacity:0,onMouseLeave:()=>{y.current=window.setTimeout(()=>{C()},300)},onMouseMove:t=>{y.current&&clearTimeout(y.current);let i=(0,lc.Z)(t);m({tooltipData:e,tooltipTop:null==i?void 0:i.y,tooltipLeft:null==i?void 0:i.x})}})]},l)})}),(0,s.jsx)(la.Z,{top:n.top,left:I,scale:P,stroke:lS,strokeWidth:2,tickValues:c?E:void 0,numTicks:c?void 0:2,hideZero:!0,tickFormat:a?ly:void 0,tickLength:6,tickStroke:lS,tickLabelProps:()=>({fill:lE,textAnchor:"end",fontFamily:"Inter, sans-serif",fontSize:"var(--chakra-fontSizes-sm)",fontWeight:"600",dy:"0.33em",dx:-4})}),(0,s.jsx)(ld.Z,{top:A+n.top,left:I,scale:O,stroke:lS,numTicks:4,tickStroke:lS,tickLabelProps:()=>({fill:lE,textAnchor:"middle",fontFamily:"Inter, sans-serif",fontSize:"var(--chakra-fontSizes-sm)",fontWeight:"600",dy:4}),strokeWidth:2,tickLength:6})]})}),p&&v&&(0,s.jsx)(lC.Z,{top:f,left:g,style:T,children:(0,s.jsx)(l,{x:v.x,y:v.y})})]})},lT=e=>{let{chartTitle:t,TooltipInner:i,showZero:n=!0,shouldRoundYValues:r=!0,showMaxAndMiddle:l=!0,data:o,barColor:c="var(--chakra-colors-trueblue-200)",customTooltipStyles:u,onClick:x=()=>{},...h}=e;return(0,s.jsxs)(d.xu,{position:"relative",height:"300px",...h,children:[(0,s.jsx)(a.x,{size:"xs",color:"gray.500",fontWeight:"600",position:"absolute",top:3,left:"50%",transform:"translateX(-50%)",children:t}),(0,s.jsx)(lx.Z,{children:e=>{let{width:t,height:a}=e;return t<10?null:(0,s.jsx)(lA,{width:t,height:a,showZero:n,chartData:o,barColor:c,customTooltipStyles:u,onClick:x,TooltipInner:i,shouldRoundYValues:r,showMaxAndMiddle:l})}})]})},lO=(e,t)=>{let i="LLL d",n=new Date;n.setDate(n.getDate()-t+1);let r=[];for(let l=0;l<t;l++){let t=new Date(n);t.setDate(t.getDate()+l);let s=(0,lo.Z)(t,{representation:"date"}),o=e.find(e=>e.date===s);o?r.push({x:(0,nQ.p6)(o.date,i),y:o.uniqueVisitors?o.uniqueVisitors:0}):r.push({x:(0,nQ.p6)(s,i),y:0})}return r},lP=e=>{let{viewData:t,dayCount:i}=e,n=lO(t,i);return(0,s.jsx)(lT,{data:n,my:3,chartTitle:(0,s.jsx)(h.cC,{id:"mSEibf"}),TooltipInner:lD})},lD=e=>{let{x:t,y:i}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.x,{children:t}),(0,s.jsx)(a.x,{children:(0,s.jsx)(h.cC,{id:"6MKtHx",values:{y:i}})})]})},lR=e=>e.every(e=>0===e.uniqueVisitors),lN=(e,t)=>t&&t.dailyViews?"everyone"===e?t.dailyViews.everyone?t.dailyViews.everyone:[]:"viewersOnly"===e&&t.dailyViews.viewers?t.dailyViews.viewers:[]:[],lG=(e,t,i)=>{var n,r,l;if(!i)return 0;let s=null!==(r=i.uniqueViewers)&&void 0!==r?r:0,o=null!==(l=null===(n=e.editors)||void 0===n?void 0:n.length)&&void 0!==l?l:0;return"everyone"===t?s:"viewersOnly"===t?Math.max(0,s-o):0},lz=e=>{var t,i;let{doc:n,handleSharePanelOpen:r,onAnalyticsPanelClose:l,canShare:a}=e,{loading:d,data:c,error:u,refetch:x}=(0,v.xls)({variables:{memoId:n.id},skip:!n.id,pollInterval:9e5,notifyOnNetworkStatusChange:!0}),{user:p}=(0,eY.SE)(),[g,f]=(0,j.useState)("deckView"),[C,b]=(0,j.useState)(null),[y,k]=(0,j.useState)("everyone"),w=(0,nQ.p6)(n.createdTime,"PPP"),E=n.title||(0,s.jsx)(h.cC,{id:"wja8aL"}),S=(null==c?void 0:c.memoStats.viewers)||[],I=(null==c?void 0:null===(t=c.memoStats.dailyViews)||void 0===t?void 0:t.dayCount)||0,_=lN(y,null==c?void 0:c.memoStats),A=(0,q.Y)("individual_analytics",n.organization),{openUpsellModal:T}=(0,rv.z)(),O=lR(_),P=S.filter(e=>{var t;return"everyone"===y||!(null===(t=n.editors)||void 0===t?void 0:t.some(t=>{var i,n;return(null===(i=e.user)||void 0===i?void 0:i.id)===(null===(n=t.user)||void 0===n?void 0:n.id)}))}),D=lG(n,y,null==c?void 0:c.memoStats),R=(0,j.useCallback)(e=>{k(e)},[]),N=(0,j.useCallback)(e=>{f(e)},[]),G=(0,j.useCallback)(e=>{if(!A&&e.id!==(null==p?void 0:p.id)){T({segmentEvent:eG.AA.GAMMA_PRO_UPSELL_SUBSCRIPTION_INDIVIDUAL_ANALYTICS});return}b(e)},[T,A,p]),z=(0,j.useCallback)(()=>{b(null)},[]),M=void 0!==u;return(0,s.jsxs)(s.Fragment,{children:[C&&(0,s.jsx)(li,{user:C,onBackClick:z,docId:n.id,onAnalyticsPanelClose:l}),!C&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(rE,{hasError:M,isAnalyticsLoading:d,setView:N,view:g,description:(0,s.jsx)(h.cC,{id:"uEtUah",values:{docTitle:E,docCreatedDate:w}})}),M&&(0,s.jsx)(ry,{error:u,refetch:x}),!M&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(rg.i,{}),(0,s.jsxs)(tO.f,{children:[d&&(0,s.jsx)(lM,{}),!d&&S.length<=1&&a&&(0,s.jsx)(lL,{handleSharePanelOpen:r}),!d&&(0,s.jsxs)(tc.K,{direction:"column",mt:4,spacing:4,children:[(0,s.jsxs)(o.k,{direction:"row",justify:"space-between",align:"center",children:[(0,s.jsx)(eJ.X,{as:"h2",size:"md",children:"cardEngagement"===g?rw():rk()}),(0,s.jsx)(ls,{selected:y,handleMenuItemChange:R,everyoneCount:lG(n,"everyone",null==c?void 0:c.memoStats),viewersOnlyCount:lG(n,"viewersOnly",null==c?void 0:c.memoStats)})]}),"deckView"===g&&O&&(0,s.jsx)(lF,{handleSharePanelOpen:r,dayCount:I}),"deckView"===g&&!O&&(0,s.jsx)(lP,{viewData:_,dayCount:I}),"cardEngagement"===g&&(0,s.jsx)(rK,{docId:n.id,viewerFilter:y,currentViewerFilterCount:D,onAnalyticsPanelClose:l}),(0,s.jsx)(le,{creatorId:(null===(i=n.createdBy)||void 0===i?void 0:i.id)||"",viewers:P,currentViewerFilterCount:D,docCreatedDate:w,contributors:n.editors||[],cardCount:(null==c?void 0:c.memoStats.cardCount)||0,handleTableRowClick:G,hasIndividualAnalytics:A}),P.length>3&&!A&&(0,s.jsx)(eh.z,{variant:"ghost",size:"sm",color:"gray.600",colorScheme:"gray",onClick:()=>T({segmentEvent:eG.AA.GAMMA_PRO_UPSELL_SUBSCRIPTION_INDIVIDUAL_ANALYTICS}),children:(0,s.jsx)(h.cC,{id:"BKBX4n",values:{0:P.length-3}})}),!A&&(0,s.jsx)(rf.m,{segmentEvent:eG.AA.GAMMA_PRO_UPSELL_SUBSCRIPTION_INDIVIDUAL_ANALYTICS,description:m.ag._({id:"GYgPBy"})})]})]})]})]})]})},lM=()=>(0,s.jsxs)(o.k,{direction:"column",py:2,children:[(0,s.jsx)(rj.O,{h:10,width:"40%",mb:4}),(0,s.jsx)(rj.O,{h:40,mb:4}),(0,s.jsx)(eX.g,{align:"stretch",children:[void 0,void 0,void 0].map((e,t)=>(0,s.jsx)(rj.O,{h:12},t))})]}),lL=e=>{let{handleSharePanelOpen:t}=e;return(0,s.jsx)(o.k,{p:3,px:4,mt:2,bg:"gray.100",color:rC,borderRadius:"base",children:(0,s.jsxs)(o.k,{align:"baseline",fontSize:"sm",children:[(0,s.jsx)(d.xu,{pr:2,children:(0,s.jsx)(x.G,{icon:iR.ILF,"aria-label":"user-icon",size:"sm"})}),(0,s.jsx)(a.x,{children:(0,s.jsx)(h.cC,{id:"FNMh4I",components:{0:(0,s.jsx)(a.x,{as:"button",onClick:t,textDecoration:"underline",fontWeight:"600",color:"gray.800"})}})})]})})},lF=e=>{let{handleSharePanelOpen:t,dayCount:i}=e;return(0,s.jsxs)(iS.b,{my:4,p:6,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",textAlign:"center",colorScheme:"gray",children:[(0,s.jsx)(d.Cd,{size:"30px",bg:"gray.500",children:(0,s.jsx)(x.G,{icon:iR.ImE,color:"white"})}),(0,s.jsx)(iI.C,{mt:4,mb:2,fontSize:"md",children:(0,s.jsx)(h.cC,{id:"2OzAI5"})}),i>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(i_.X,{maxWidth:"sm",children:(0,s.jsx)(h.cC,{id:"qQLmo7",values:{dayCount:i}})}),(0,s.jsx)(eh.z,{mt:4,onClick:t,children:(0,s.jsx)(h.cC,{id:"IXzWG0"})})]})]})},lU=e=>{var t,i,n,r,l,o;let{doc:c,onAnalyticsPanelClose:u}=e,x=(0,M.qr)(),m=x.getState(),p=(0,L.X9)(m),{user:g}=(0,eY.SE)(),{data:f,error:C,loading:b,refetch:y}=(0,v.IrH)({variables:{docId:c.id,userId:null==g?void 0:g.id},skip:!(null==g?void 0:g.id),pollInterval:9e5,notifyOnNetworkStatusChange:!0}),k=null!==(o=null==f?void 0:null===(i=f.docCardsStats)||void 0===i?void 0:null===(t=i.everyone)||void 0===t?void 0:t.length)&&void 0!==o?o:0,w=null==f?void 0:null===(n=f.docCardsStats)||void 0===n?void 0:n.cardCount,E=(0,j.useMemo)(()=>{var e;return(null==f?void 0:null===(e=f.docCardsStats)||void 0===e?void 0:e.everyone)||[]},[null==f?void 0:f.docCardsStats]),S=(0,j.useMemo)(()=>rO(E,"viewTimePercent"),[E]);if(!g)return null;let I=g.id===(null===(r=c.createdBy)||void 0===r?void 0:r.id),_=null===(l=c.editors)||void 0===l?void 0:l.some(e=>e.user.id===g.id),A={name:g.displayName,id:g.id,profileImg:g.profileImageUrl,email:g.email,isContributor:_,isCreator:I};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n7.x,{children:[(0,s.jsx)(h.cC,{id:"ZlwDi6"}),(0,s.jsx)(a.x,{fontSize:"sm",fontWeight:"normal",letterSpacing:"normal",color:"gray.500",noOfLines:1,children:c.title||(0,s.jsx)(h.cC,{id:"wja8aL"})})]}),(0,s.jsx)(tT.o,{}),(0,s.jsx)(rg.i,{}),(0,s.jsx)(tO.f,{children:(0,s.jsxs)(d.xu,{children:[(0,s.jsx)(ln,{user:A}),void 0!==w&&(0,s.jsx)(rY,{description:(0,s.jsx)(h.cC,{id:"YJOrjl",values:{cardsViewed:k,totalCards:w}})}),b&&!C&&(0,s.jsx)(rq,{includeDescription:!0}),C&&(0,s.jsx)(ry,{error:C,refetch:y,px:0}),!C&&!b&&(0,s.jsx)(rU,{cards:p.tree,scaleToMax:!0,includeChildren:!0,leftLabel:(0,s.jsx)(h.cC,{id:"ml51m3"}),rightLabel:(0,s.jsx)(h.cC,{id:"8R7bfR"}),cardLookupTable:S,tooltipLabel:(0,s.jsx)(rH,{}),onAnalyticsPanelClose:u}),(0,s.jsxs)(iS.b,{children:[(0,s.jsx)(rb.z,{}),(0,s.jsx)(h.cC,{id:"Znuvj3",values:{GAMMA_PROPER_NOUN:K.N6,GAMMA_ARTIFACT_PROPER_NOUN:K.Yc}})]})]})})]})},lW=e=>{let{doc:t,mode:i,isAnalyticsPanelOpen:n,onAnalyticsPanelClose:r,onSharePanelOpen:l}=e,a=(0,en.i)({base:"sm",md:"2xl",lg:"4xl"}),d=!!l&&"full"==i,c=(0,j.useCallback)(()=>{l&&(l(),r())},[l,r]);return(0,s.jsx)(ep.Wk,{isDark:!1,children:(0,s.jsxs)(n9.u_,{onClose:r,isOpen:n,size:a,blockScrollOnMount:!1,children:[(0,s.jsx)(t_.Z,{}),(0,s.jsxs)(n6.h,{mx:2,minW:0,children:["full"===i?(0,s.jsx)(lz,{doc:t,handleSharePanelOpen:c,onAnalyticsPanelClose:r,canShare:d}):(0,s.jsx)(lU,{doc:t,onAnalyticsPanelClose:r}),(0,s.jsx)(rg.i,{my:4}),(0,s.jsx)(tP.m,{children:(0,s.jsxs)(o.k,{justifyContent:d?"space-between":"flex-end",flex:1,children:[d&&(0,s.jsx)(eh.z,{leftIcon:(0,s.jsx)(x.G,{icon:u.zBy}),variant:"ghost",onClick:c,children:(0,s.jsx)(h.cC,{id:"IXzWG0"})}),(0,s.jsx)(eh.z,{variant:"solid",onClick:r,children:(0,s.jsx)(h.cC,{id:"DPfwMq"})})]})})]})]})})},lH=e=>{let{doc:t}=e,i=(0,eG.z$)(),{isOpen:n,onClose:r,onOpen:l}=(0,t1.M)({id:"analyticsPanelDisclosure"}),o=(0,j.useCallback)(()=>{null==i||i.track(eG.AA.DOC_ANALYTICS_VIEWED,{docId:null==t?void 0:t.id,source:"toolbar_doc_menu",type:"personal"}),l()},[i,null==t?void 0:t.id,l]);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n5.s,{icon:(0,s.jsx)(x.G,{icon:u.Ma4,fixedWidth:!0}),onClick:o,children:(0,s.jsx)(h.cC,{id:"ZlwDi6"})}),t&&n&&(0,s.jsx)(lW,{doc:t,isAnalyticsPanelOpen:n,onAnalyticsPanelClose:r,mode:"personal"})]})};var lV=i(82554),lB=i(99793),lK=i(12985);let lq=e=>{let{label:t,initialValue:n="",updateValue:r,helperText:l,language:o,...a}=e,[c,u]=(0,j.useState)(n),[x,h]=(0,j.useState)(null),m=(0,tr.Kt)(r,100),[p,g]=(0,j.useState)();(0,j.useEffect)(()=>{"css"===o?Promise.all([i.e(8917),i.e(7120),i.e(6214)]).then(i.bind(i,65284)).then(e=>{g(e.css())}):"html"===o&&Promise.all([i.e(8917),i.e(7120),i.e(6214),i.e(4100),i.e(2163)]).then(i.bind(i,22163)).then(e=>{g(e.html())})},[o]),(0,tr.vm)(()=>{h(null),m(c)},[c,m],[c]);let f=[p].filter(Boolean);return(0,s.jsxs)(ns.NI,{isInvalid:!!x,children:[(0,s.jsx)(no.l,{children:t}),x&&(0,s.jsx)(lB.J1,{children:x}),l&&(0,s.jsx)(ns.Q6,{children:l}),(0,s.jsx)(d.xu,{border:"1px solid",borderColor:"gray.200",fontSize:"md",position:"relative",children:(0,s.jsx)(j.Suspense,{fallback:(0,s.jsx)("span",{}),children:(0,s.jsx)(lK.B,{value:c,extensions:f,onChange:u,...a})})})]})};var lY=i(61840);let lZ=(0,j.memo)(e=>{let{isOpen:t,onClose:i,editor:n}=e,r=(0,lY.A)(n),{bodyStart:l}=(0,M.CG)(L.$p),o=(0,j.useCallback)(e=>{null==n||n.commands.updateNestedAttributesAtPos(0,{customCode:{bodyStart:e}})},[n]);return(0,s.jsx)(ep.Wk,{isDark:!1,children:(0,s.jsxs)(tI.d,{returnFocusOnClose:!1,isOpen:t,placement:"right",onClose:i,size:"lg",children:[(0,s.jsx)(t_.Z,{background:"none"}),(0,s.jsxs)(tA.s,{onKeyDown:r,"data-testid":"custom-code-drawer",motionProps:{variants:{enter:{x:"0%",transition:{duration:.2}},exit:{x:"100%",transition:{duration:.1}}}},children:[(0,s.jsx)(tT.o,{}),(0,s.jsx)(n7.x,{children:(0,s.jsx)(h.cC,{id:"E16GGw"})}),(0,s.jsx)(tO.f,{overflowX:"hidden",children:(0,s.jsx)(lq,{label:m.ag._({id:"fC5kYg"}),helperText:m.ag._({id:"0AZNtw"}),initialValue:l,updateValue:o,language:"html",height:"600px"})}),(0,s.jsx)(tP.m,{children:(0,s.jsx)(eh.z,{w:"100%",variant:"solid",onClick:i,children:(0,s.jsx)(h.cC,{id:"DPfwMq"})})})]})]})})});lZ.displayName="CustomCodeDrawer";let lJ=e=>{let{editor:t}=e,{isOpen:i,onOpen:n,onClose:r}=(0,t1.M)({id:"codeEditor"});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n5.s,{icon:(0,s.jsx)(x.G,{icon:u.dT$,fixedWidth:!0}),onClick:n,children:(0,s.jsxs)(ex.U,{children:[(0,s.jsx)(h.cC,{id:"cnlGIm"}),(0,s.jsx)(nX.L,{}),(0,s.jsx)(lV.C,{colorScheme:"green",ml:2,children:(0,s.jsx)(h.cC,{id:"YBt9YP"})})]})}),(0,s.jsx)(lZ,{editor:t,isOpen:i,onClose:r})]})},lX=e=>{let{doc:t}=e,[i]=(0,v.LT4)(),[n]=(0,v.iX9)(),r=(0,j.useCallback)(e=>()=>{if(!t.id)return;let r={id:t.id};e?i({variables:r,optimisticResponse:{archiveDoc:{...r,archived:e,__typename:"Doc"}}}):n({variables:r,optimisticResponse:{unarchiveDoc:{...r,archived:e,__typename:"Doc"}}})},[i,t.id,n]);return t.archived?(0,s.jsx)(n5.s,{icon:(0,s.jsx)(x.G,{icon:u.ZeM,fixedWidth:!0}),onClick:r(!1),children:(0,s.jsx)(h.cC,{id:"yKu/3Y"})}):(0,s.jsx)(n5.s,{"data-testid":"doc-menu-trash-button",color:"red.500",icon:(0,s.jsx)(x.G,{icon:u.XAH,fixedWidth:!0}),onClick:r(!0),children:(0,s.jsx)(h.cC,{id:"NOLglc",values:{GAMMA_ARTIFACT_PROPER_NOUN:K.Yc}})})};var lQ=i(82282),l$=i(31807),l0=i(20678);let l1=e=>{var t,i;let{doc:n}=e,r=(null==n?void 0:n.createdTime)&&(0,lQ.Z)((0,l$.Z)(n.createdTime),"PPP"),l=(0,l0.$)(null==n?void 0:n.title);return(0,s.jsxs)(d.xu,{px:4,py:2,maxW:"300px",children:[(0,s.jsx)(a.x,{noOfLines:6,children:l}),(0,s.jsx)(a.x,{fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,s.jsx)(h.cC,{id:"jlWdji",values:{createdTime:r}})}),(0,s.jsx)(ep.kH,{label:null==n?void 0:null===(t=n.createdBy)||void 0===t?void 0:t.email,children:(0,s.jsx)(a.x,{display:"inline-block",fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,s.jsx)(h.cC,{id:"t490IT",values:{0:null==n?void 0:null===(i=n.createdBy)||void 0===i?void 0:i.displayName}})})})]})},l2=e=>{let{doc:t,editor:i}=e,n=(0,nU.e)(),r=(0,j.useCallback)(()=>{if(!i)return;let e=i.getJSON();n({docId:t.id,initialContent:e,source:"editor_toolbar_doc_menu_duplicate",newWindow:!(0,ef.Q5)()})},[t.id,n,i]);return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(n5.s,{icon:(0,s.jsx)(x.G,{icon:u.kZ_,fixedWidth:!0}),onClick:r,children:(0,s.jsx)(h.cC,{id:"0Fcoqv",values:{GAMMA_ARTIFACT_PROPER_NOUN:K.Yc}})})})};var l5=i(18412);let l4=()=>(0,s.jsx)(n5.s,{icon:(0,s.jsx)(x.G,{icon:u.kwI,fixedWidth:!0}),onClick:()=>{l5.T.emit("openSharePanel",{view:"export"})},children:(0,s.jsx)(h.cC,{id:"U8WPSi"})}),l3=e=>{let{site:t,path:i}=e,n=(0,eA.AR)({site:t,path:i});return n?(0,s.jsx)(ep.kH,{label:(0,s.jsx)(h.cC,{id:"kcKqQj"}),children:(0,s.jsx)(I.h,{ml:-1,href:n,as:iC(),target:"_blank","aria-label":m.ag._({id:"WklWxF"}),variant:"ghost",color:"gray.500",size:"xs",icon:(0,s.jsx)(x.G,{icon:u.ZE5})})}):null},l9=e=>{var t,i;let{doc:n,site:r,showCreatedInfo:l}=e,o=(0,l0.$)(null==n?void 0:n.title),c=null===(t=r.routes)||void 0===t?void 0:t.find(e=>e.docId===n.id),u=(0,eA.jl)(n,r);return(0,s.jsxs)(d.xu,{px:4,pb:2,maxW:"300px",children:[(0,s.jsxs)(ex.U,{align:"start",children:[(0,s.jsx)(a.x,{noOfLines:2,children:o}),u&&(0,s.jsx)(l3,{site:r,path:null==c?void 0:c.path})]}),c&&(0,s.jsx)(l6,{path:c.path}),l&&"createdTime"in n&&(0,s.jsx)(a.x,{fontSize:"sm",color:"gray.500",noOfLines:1,mt:2,children:(0,s.jsx)(h.cC,{id:"oJFw5Q",values:{0:(0,nQ.Dw)(n.createdTime)}})}),"createdBy"in n&&l&&(0,s.jsx)(a.x,{display:"inline-block",fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,s.jsx)(h.cC,{id:"t490IT",values:{0:null==n?void 0:null===(i=n.createdBy)||void 0===i?void 0:i.displayName}})})]})},l6=e=>{let{path:t}=e;return"/"===t?(0,s.jsx)(a.x,{fontSize:"sm",color:"gray.500",children:(0,s.jsx)(h.cC,{id:"wFCbbC"})}):(0,s.jsx)(a.x,{fontFamily:"mono",fontSize:"sm",color:"gray.500",children:t})};var l7=i(24772),l8=i(36371),se=i(73582),st=i(2969),si=i(3181),sn=i(13272),sr=i(41098),sl=i(82729),ss=i(4170),so=i(97412);let sa=e=>{let{updateDocSetting:t,editor:i}=e,{animationsEnabled:n,defaultFullBleed:r,defaultContentWidth:l,presentBackdrop:o,cardDimensions:d}=(0,M.CG)(L.US),c=(0,so.l)(d),x=(0,e7.ye)("editorAnimationsEnabled"),p=x||void 0!==n;return(0,s.jsxs)(tc.K,{spacing:5,mt:4,divider:(0,s.jsx)(rg.i,{}),children:[(0,s.jsx)(sd,{title:m.ag._({id:"jBvtuq"}),description:m.ag._({id:"Q3Qdcd"}),icon:u.qnl,control:(0,s.jsx)(so.Ft,{cardDimensions:d,updateCardDimensions:e=>t("cardDimensions",e)})}),(0,s.jsx)(sd,{title:m.ag._({id:"lklIf1"}),description:m.ag._({id:"aJ+ISV"}),icon:u.dH7,value:"lg"===l,onChange:e=>{t("defaultContentWidth",e?"lg":void 0),i.commands.resetCardSettings({container:{width:void 0}})}}),(0,s.jsx)(sd,{title:m.ag._({id:"lsVq2Z"}),description:m.ag._({id:"u/0NJZ"}),icon:u.r9b,value:"full"===r,onChange:e=>{t("defaultFullBleed",e?"full":void 0),i.commands.resetCardSettings({cardSize:"default"})}}),(0,s.jsx)(sd,{title:m.ag._({id:"7VfbQM"}),description:m.ag._({id:"XZHPlI"}),icon:u.UHQ,value:o,onChange:e=>t("presentBackdrop",e)}),p&&(0,s.jsx)(sd,{title:m.ag._({id:"HgWdP3"}),description:m.ag._({id:"XsKE1m"}),icon:u.kq2,value:(0,ss.C)({animationsEnabled:n}),onChange:e=>{t("animationsEnabled",e)}}),(0,s.jsxs)(tc.K,{children:[(0,s.jsx)(a.x,{fontSize:"xs",color:"gray.600",children:(0,s.jsx)(h.cC,{id:"ymPKi7"})}),(0,s.jsxs)(ex.U,{alignItems:"flex-start",spacing:"4",children:[(0,s.jsx)(su,{label:m.ag._({id:"wl99H6"}),cardDimensions:c,isWide:"lg"===l,showBackdrop:"full"!==r,scaleCardUp:!1}),(0,s.jsx)(su,{label:m.ag._({id:"GWjDlt"}),cardDimensions:c,isWide:"lg"===l,showBackdrop:o&&"full"!==r,scaleCardUp:!o||"full"===r})]})]})]})},sd=e=>{let{title:t,description:i,icon:n,children:r,helpDescription:l,value:o,onChange:d,control:c,direction:u="row"}=e;return(0,s.jsxs)(tc.K,{alignItems:"flex-start",spacing:2,direction:u,children:[n&&(0,s.jsx)(a.x,{fontSize:"lg",width:8,maxW:8,children:(0,s.jsx)(x.G,{icon:n,fixedWidth:!0})}),(0,s.jsxs)(tc.K,{spacing:4,flex:1,children:[(0,s.jsxs)(tc.K,{spacing:1,children:[(0,s.jsxs)(eJ.X,{size:"sm",fontWeight:"semibold",children:[t," ",l?(0,s.jsx)(ep.Yq,{label:l,ml:1}):null]}),(0,s.jsx)(a.x,{fontSize:"xs",color:"gray.600",children:i}),c]}),r]}),d&&(0,s.jsx)(sr.r,{isChecked:o,onChange:e=>d(e.target.checked)})]})},sc=e=>{let{hideExtraLines:t}=e;return(0,s.jsxs)(tc.K,{w:"100%",py:2,px:2.5,children:[(0,s.jsx)(d.xu,{w:20,h:1.5,bg:"gray.200"}),(0,s.jsxs)(ex.U,{flex:"1",alignItems:"flex-start",children:[(0,s.jsx)(sl.o,{ratio:4/3,color:"gray.600",w:12,bg:"gray.200",children:(0,s.jsx)(d.xu,{fontSize:"lg",children:(0,s.jsx)(x.G,{icon:u.VmB})})}),(0,s.jsxs)(tc.K,{flex:"1",spacing:"1",children:[(0,s.jsx)(d.xu,{h:1,bg:"gray.200"}),(0,s.jsx)(d.xu,{h:1,bg:"gray.200"}),(0,s.jsx)(d.xu,{h:1,bg:"gray.200"}),(0,s.jsx)(d.xu,{w:t?"80%":"100%",h:1,bg:"gray.200"}),!t&&(0,s.jsx)(d.xu,{w:"80%",h:1,bg:"gray.200"})]})]})]})},su=e=>{let{cardDimensions:t,showBackdrop:i,isWide:n,label:r,scaleCardUp:l}=e,c={boxShadow:"".concat(i?"sm":""),w:"".concat(n?"85%":"65%"),mx:"auto",borderRadius:"sm",bg:"white",transform:"".concat(l?"scale(1.15)":"none")};return(0,s.jsxs)(tc.K,{flex:"1",alignItems:"center",sx:{"*":{transition:"all 0.2s ease"}},spacing:1.5,maxW:"50%",mx:"auto",children:[(0,s.jsx)(o.k,{bg:i?"gray.200":"white",borderWidth:"1px",borderColor:"gray.200",width:"100%",minH:32,borderRadius:"sm",alignItems:"center",py:2,overflow:"hidden",children:t.aspectRatio?(0,s.jsx)(sl.o,{...c,ratio:t.aspectRatio,children:(0,s.jsx)(d.xu,{children:(0,s.jsx)(sc,{hideExtraLines:n})})}):(0,s.jsx)(tc.K,{...c,children:(0,s.jsx)(sc,{hideExtraLines:n})})}),(0,s.jsx)(a.x,{fontSize:"xs",color:"gray.700",children:r})]})};var sx=i(64743),sh=i(55891);let sm=e=>{let{editor:t}=e,i=(0,M.CG)(L.Pu),n=(0,M.CG)(L.XV),r=(0,j.useCallback)(e=>{null==t||t.commands.updateNestedAttributesAtPos(0,e)},[t]);return(0,s.jsx)(sh.o,{editor:t,background:n,updateNestedAttributes:r,defaultMessage:(0,s.jsxs)(iS.b,{children:[(0,s.jsx)(rb.z,{}),(0,s.jsx)(h.cC,{id:"dyXYfJ"})]}),isDark:(0,tM.wj)(i),isValidSource:sx.Rr})};var sp=i(85573);let sg=e=>{let{length:t,idealLength:i,maxLength:n}=e;return(0,s.jsxs)(a.x,{fontSize:"xs",color:t>=n?"red.400":"gray.500",children:[t>=n&&(0,s.jsx)(x.G,{icon:iR.e7M})," ",t,"/",i]})};var sj=i(66625),sf=i(25566),sv=i(60536),sC=i(82476),sb=i(92768),sy=i(37733),sk=i(56920);let sw=(e,t)=>{var i;return null==e?void 0:null===(i=e.routes.find(e=>e.docId===t))||void 0===i?void 0:i.path},sE=()=>{let e=(0,iJ.p)(),[t,i]=(0,j.useState)(!1),{openPageSetup:n}=(0,tS.AA)(),r=(0,iz._O)(),l=(0,M.CG)(tk.yx),o=(0,M.CG)(eS.lH),[c,{loading:u}]=(0,v.qbt)(),x=sw(o,null==l?void 0:l.id),[m,p]=(0,j.useState)(()=>(0,eA.es)(x||"")),[g,f]=(0,j.useState)(()=>(0,eA.es)(x||"")),C=(0,eA.gT)({routes:(null==o?void 0:o.routes)||[],path:(0,eA.fJ)(m),docId:null==l?void 0:l.id}),b=!!C,y=g!==m&&!b,k=(0,j.useCallback)(()=>{p(g)},[g]),w=(0,j.useCallback)(()=>{if(!y)return;if(!(null==o?void 0:o.id)||!(null==l?void 0:l.id)){console.error("Missing site or doc");return}let t=(0,eA.Is)(m);c({variables:{input:{siteId:o.id,docId:l.id,path:t}},refetchQueries:["GetSite"]}).then(()=>{f((0,eA.es)(t)),p((0,eA.es)(t)),i(!0)}).catch(t=>{e({status:"error",title:(0,s.jsx)(h.cC,{id:"dl5vwx"}),description:t.message}),console.error("[UrlSlugForm] Error setting route",t.message)})},[y,null==l?void 0:l.id,m,c,null==o?void 0:o.id,e]);return r?(0,s.jsxs)(tc.K,{pb:6,children:[(0,s.jsx)(tc.K,{direction:"row",children:(0,s.jsxs)(a.x,{children:[(0,s.jsx)(h.cC,{id:"dq8+qI"})," "]})}),(0,s.jsx)(nX.L,{}),(0,s.jsx)(tc.K,{spacing:2,children:(0,s.jsx)(ex.U,{spacing:1,children:(0,s.jsxs)(ns.NI,{as:"fieldset",isInvalid:b,children:[(0,s.jsx)(ex.U,{children:(0,s.jsxs)(iP.B,{children:[(0,s.jsx)(sb.Ui,{children:"/"}),(0,s.jsx)(sp.I,{isDisabled:u,bg:"white",flex:2,value:m,onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),w())},onChange:e=>{let t=(0,sk.IR)(e.currentTarget.value);p(t)}}),(0,s.jsx)(sy.R,{in:y,unmountOnExit:!0,children:(0,s.jsx)(d.xu,{ml:2,children:(0,s.jsxs)(em.h,{w:"100%",children:[(0,s.jsx)(eh.z,{variant:"solid",isLoading:u,isDisabled:b,onClick:w,children:(0,s.jsx)(h.cC,{id:"tfDRzk"})}),(0,s.jsx)(eh.z,{onClick:k,children:(0,s.jsx)(h.cC,{id:"dEgA5A"})})]})})})]})}),C?(0,s.jsx)(lB.J1,{justifyContent:"flex-end",alignItems:"flex-start",children:(0,s.jsx)(a.x,{fontSize:"xs",children:(0,s.jsx)(h.cC,{id:"DQaTdC",components:{0:(0,s.jsx)(nF.r,{textDecoration:"underline",onClick:()=>n(C.docId,"preview")})}})})}):(0,s.jsxs)(tc.K,{spacing:2,children:[(0,s.jsx)(ns.Q6,{fontSize:"sm",children:(0,s.jsx)(h.cC,{id:"ZMlbHK"})}),t&&(0,s.jsxs)(iS.b,{status:"warning",variant:"left-accent",fontSize:"sm",children:[(0,s.jsx)(rb.z,{}),(0,s.jsx)(i_.X,{children:(0,s.jsx)(h.cC,{id:"ZyBxCy"})})]})]})]})})})]}):(0,s.jsx)(s.Fragment,{})},sS=e=>{let{updateDocSetting:t}=e,{metaDescription:i}=(0,M.CG)(L.US),n=(0,M.CG)(L.yx),r=(0,M.CG)((0,sj.cn)(null==n?void 0:n.id)),l=(0,M.CG)(sj.$4),[o,c]=(0,j.useState)(()=>(null==n?void 0:n.title)||""),[u,x]=(0,j.useState)(()=>i||""),p=n&&!!n.site&&(0,eA.Vr)(n.site),[g]=(0,v.D1_)(),f=(0,j.useCallback)(e=>{n&&g({variables:{id:n.id,title:e,titleEdited:!0}})},[n,g]),C=(0,tr.Kt)(f,300),b=(0,j.useCallback)(e=>{c(e.target.value.substring(0,sC.S8)),C(e.target.value.substring(0,sC.S8))},[C]),k=(0,j.useCallback)(e=>{t("metaDescription",e)},[t]),w=(0,tr.Kt)(k,300),E=(0,M.CG)(sj.NN),S=null==E?void 0:E.previewUrl,I=(0,q.dU)(null==n?void 0:n.organization),_=(0,y.U)(o||r,I),A=(0,y.V)(u||l,I);return(0,s.jsxs)(tc.K,{spacing:4,children:[(0,s.jsxs)(ns.NI,{children:[(0,s.jsxs)(ex.U,{justifyContent:"center",children:[(0,s.jsx)(no.l,{flex:"1",children:(0,s.jsx)(h.cC,{id:"MHrjPM"})}),(0,s.jsx)(sg,{length:o.length||0,idealLength:sC.si,maxLength:sC.S8})]}),(0,s.jsx)(sp.I,{value:o,placeholder:r||m.ag._({id:"bTzMt5"}),_placeholder:{opacity:1,color:"gray.500"},onKeyDown:e=>{"Enter"===e.key&&f(o)},onChange:b,"data-title-input":!0})]}),(null==n?void 0:n.site)&&(0,s.jsx)(sE,{}),(0,s.jsxs)(ns.NI,{children:[(0,s.jsxs)(ex.U,{justifyContent:"center",children:[(0,s.jsx)(no.l,{flex:"1",children:(0,s.jsx)(h.cC,{id:"Nu4oKW"})}),(0,s.jsx)(sg,{length:u.length||0,idealLength:sC.cl,maxLength:sC.Us})]}),(0,s.jsx)(iD.g,{bg:"white",rows:4,value:u,placeholder:(null==l?void 0:l.trim())||m.ag._({id:"2VBqT4"}),onChange:e=>{x(e.target.value.substring(0,sC.Us)),w(e.target.value.substring(0,sC.Us))}})]}),(0,s.jsxs)(d.xu,{p:4,pt:3,bg:"gray.100",borderRadius:"md",children:[(0,s.jsxs)(tc.K,{spacing:2,mb:4,children:[(0,s.jsx)(a.x,{size:"sm",children:(0,s.jsx)(h.cC,{id:"h8sMnd"})}),(0,s.jsx)(sI,{title:_,description:A,screenshotUrl:S})]}),p&&(0,s.jsxs)(tc.K,{spacing:2,children:[(0,s.jsx)(rg.i,{}),(0,s.jsx)(a.x,{size:"sm",children:(0,s.jsx)(h.cC,{id:"d3xOlk"})}),(0,s.jsx)(s_,{title:_,description:A,screenshotUrl:S}),(0,s.jsx)(a.x,{fontSize:"sm",color:"gray.500",children:(0,s.jsx)(h.cC,{id:"Ubf8D8"})})]})]}),(0,s.jsx)(sv.V,{label:(0,s.jsx)(h.cC,{id:"SDyz5I"}),segmentEvent:sf.AA.GAMMA_PRO_UPSELL_PAGE_SETUP_REMOVE_WATERMARK,doc:n})]})},sI=e=>{let{title:t,description:i,screenshotUrl:n}=e;return(0,s.jsxs)(d.xu,{cursor:"not-allowed",bg:"white",border:"1px solid",borderColor:"gray.200",borderRadius:"md",overflow:"hidden",children:[(0,s.jsx)(sl.o,{ratio:1200/630,bg:"gray.300",borderBottom:"1px solid",borderColor:"gray.200",children:(0,s.jsx)(d.xu,{bgColor:"gray.200",bgImage:"url(".concat(n,")"),backgroundSize:"cover",position:"relative"})}),(0,s.jsxs)(tc.K,{px:4,py:3,spacing:1,children:[(0,s.jsx)(a.x,{fontSize:"md",fontWeight:"bold",noOfLines:2,children:t}),(0,s.jsx)(a.x,{fontSize:"xs",noOfLines:2,children:i})]})]})},s_=e=>{let{title:t,description:i}=e;return(0,s.jsxs)(tc.K,{cursor:"not-allowed",bg:"white",border:"1px solid",borderColor:"gray.200",borderRadius:"md",overflow:"hidden",px:4,py:3,spacing:1,pos:"relative",children:[(0,s.jsx)(a.x,{color:"blue.600",fontSize:"lg",lineHeight:1.3,noOfLines:2,children:t}),(0,s.jsx)(a.x,{color:"gray.700",fontSize:"sm",noOfLines:3,children:i})]})},sA=["cards","background","preview"],sT=e=>{let{editor:t}=e,i=(0,M.CG)(L.ke),{isOpen:n,onClose:r,onOpen:l}=(0,t1.M)({id:"pageSetupDisclosure"}),[o,a]=(0,j.useState)(0);(0,j.useEffect)(()=>{let e=e=>{let t=sA.indexOf(e);a(t),l()},t=l5.T.on("openPageSetup",e),i=t4.pw.on(t4.TI.OPEN_PAGE_SETUP,e);return()=>{t(),i()}},[l,r]);let c=(0,lY.A)(t),m=(0,j.useCallback)((e,i)=>{null==t||t.commands.updateNestedAttributesAtPos(0,{settings:{[e]:i}})},[t]),p=(0,l7.S)({base:"calc(100% - 1rem)",lg:"auto"}),g=(0,l7.S)({base:"bottom",lg:"right"})||"right";return t?(0,s.jsx)(ep.Wk,{isDark:!1,children:(0,s.jsxs)(tI.d,{returnFocusOnClose:!1,isOpen:n,placement:g,onClose:r,size:"md",blockScrollOnMount:!1,children:[(0,s.jsx)(t_.Z,{background:{base:void 0,lg:"none"}}),(0,s.jsxs)(tA.s,{"data-testid":"page-setup-drawer",onKeyDown:c,h:p,borderTopRadius:{base:"xl",lg:"none"},transform:"none !important",children:[(0,s.jsx)(tT.o,{}),(0,s.jsx)(n7.x,{children:(0,s.jsx)(h.cC,{id:"fvaOtb"})}),(0,s.jsx)(tO.f,{overflowX:"hidden",children:(0,s.jsxs)(l8.m,{variant:"soft-rounded",size:"sm",isFitted:!0,isLazy:!0,index:o,onChange:a,children:[(0,s.jsxs)(se.t,{children:[(0,s.jsxs)(st.O,{children:[(0,s.jsx)(d.xu,{mr:2,children:(0,s.jsx)(x.G,{icon:u.s2})}),(0,s.jsx)(h.cC,{id:"Ccpbzh"})]}),(0,s.jsxs)(st.O,{children:[(0,s.jsx)(d.xu,{mr:2,children:(0,s.jsx)(x.G,{icon:u.UHQ})}),(0,s.jsx)(h.cC,{id:"GtJbUa"})]}),(0,s.jsxs)(st.O,{children:[(0,s.jsx)(d.xu,{mr:2,children:(0,s.jsx)(x.G,{icon:u.g4A})}),(0,s.jsx)(h.cC,{id:"rdUucN"})]})]}),(0,s.jsxs)(si.n,{children:[(0,s.jsx)(sn.x,{p:2,mt:4,children:(0,s.jsx)(sa,{editor:t,updateDocSetting:m},i)}),(0,s.jsx)(sn.x,{p:2,mt:4,children:(0,s.jsx)(sm,{editor:t,updateDocSetting:m},i)}),(0,s.jsx)(sn.x,{p:2,mt:4,children:(0,s.jsx)(sS,{editor:t,updateDocSetting:m},i)})]})]})})]})]})}):null},sO=e=>{let{editor:t,withDrawer:i=!1,onClick:n,icon:r,label:l}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n5.s,{icon:r||(0,s.jsx)(x.G,{icon:u.gr5,fixedWidth:!0}),onClick:n||(()=>{l5.T.emit("openPageSetup","cards")}),children:l||(0,s.jsx)(h.cC,{id:"Kx2GmY"})}),i&&(0,s.jsx)(sT,{editor:t})]})},sP=e=>{let{site:t}=e,i=(0,lQ.Z)((0,l$.Z)(t.createdTime),"PPP");return(0,s.jsxs)(d.xu,{px:4,pb:2,maxW:"300px",children:[(0,s.jsx)(a.x,{noOfLines:6,children:t.name}),(0,s.jsx)(a.x,{fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,s.jsx)(h.cC,{id:"jlWdji",values:{createdTime:i}})})]})},sD=e=>{let{onClose:t,domainName:i,onDelete:n,isDeleting:r}=e;return(0,s.jsxs)(n9.u_,{isOpen:!0,onClose:t,trapFocus:!1,size:"xl",isCentered:!0,closeOnOverlayClick:!1,children:[(0,s.jsx)(t_.Z,{}),(0,s.jsxs)(n6.h,{children:[(0,s.jsx)(n7.x,{children:(0,s.jsx)(tc.K,{spacing:0,children:(0,s.jsx)(a.x,{children:(0,s.jsx)(h.cC,{id:"T3exbL",values:{domainName:i}})})})}),(0,s.jsx)(tO.f,{children:(0,s.jsx)(tc.K,{spacing:4,children:(0,s.jsx)(a.x,{children:(0,s.jsx)(h.cC,{id:"DkFGZj"})})})}),(0,s.jsx)(tP.m,{children:(0,s.jsxs)(em.h,{children:[(0,s.jsx)(eh.z,{isDisabled:r,variant:"ghost",colorScheme:"gray",onClick:t,children:(0,s.jsx)(h.cC,{id:"dEgA5A"})}),(0,s.jsx)(eh.z,{variant:"ghost",colorScheme:"red",isLoading:r,onClick:n,loadingText:m.ag._({id:"EF2EU9"}),children:(0,s.jsx)(h.cC,{id:"cnGeoo"})})]})})]})]})};var sR=i(56453),sN=i(75397);let sG=e=>{let{isOpen:t,onClose:i,domain:n,siteId:r}=e,l=(0,iJ.p)(),o=null==n?void 0:n.name,d=null==o?void 0:o.split(".")[0].split("-").slice(-1)[0],[c,u]=(0,j.useState)(null==o?void 0:o.split(".")[0].split("-").slice(0,-1).join("-")),x=null==o?void 0:o.split(".").slice(1).join("."),[p,{loading:g}]=(0,v.gVY)(),f=(0,j.useCallback)(()=>{p({variables:{input:{siteId:r,name:c}}}).then(()=>{l({title:(0,s.jsx)(h.cC,{id:"oMgC5V"}),description:(0,s.jsx)(h.cC,{id:"tIBLtD"}),duration:3e3,position:"top",isClosable:!1,status:"success"}),i()}).catch(e=>{l({title:(0,s.jsx)(h.cC,{id:"YoFYYT"}),description:(0,s.jsx)(h.cC,{id:"Wd0ucu"}),duration:3e3,position:"top",isClosable:!1,status:"error"}),console.error("[BuiltInDomainEditModal] Failed to change domain name:",e)})},[p,r,c,l,i]);return(0,s.jsxs)(n9.u_,{isOpen:t,onClose:i,size:"md",closeOnOverlayClick:!1,children:[(0,s.jsx)(t_.Z,{}),(0,s.jsxs)(n6.h,{children:[(0,s.jsx)(n7.x,{children:(0,s.jsx)(h.cC,{id:"zPTAcG"})}),(0,s.jsx)(tT.o,{}),(0,s.jsx)(tO.f,{children:(0,s.jsxs)(ns.NI,{children:[(0,s.jsxs)(ex.U,{children:[(0,s.jsx)(sp.I,{value:c,onKeyDown:e=>{"Enter"===e.key&&f()},onChange:e=>{let t=(0,sk.IR)(e.target.value);u(t)},placeholder:m.ag._({id:"dcSbw0"})}),(0,s.jsxs)(no.l,{whiteSpace:"nowrap",children:["-",d,".",x]})]}),(0,s.jsx)(ns.Q6,{lineHeight:"normal",children:(0,s.jsx)(a.x,{children:(0,s.jsx)(h.cC,{id:"8lTjum"})})})]})}),(0,s.jsxs)(tP.m,{children:[(0,s.jsx)(eh.z,{onClick:i,mr:3,variant:"ghost",children:(0,s.jsx)(h.cC,{id:"dEgA5A"})}),(0,s.jsx)(eh.z,{variant:"solid",onClick:f,isLoading:g,isDisabled:c.length<3,children:(0,s.jsx)(h.cC,{id:"tfDRzk"})})]})]})]})},sz={pending:{tooltip:(0,s.jsx)(h.cC,{id:"/BjVEU"}),badgeText:(0,s.jsx)(h.cC,{id:"bl9677"}),badgeColorScheme:"yellow"},failed:{tooltip:(0,s.jsx)(h.cC,{id:"7Bj3x9"}),badgeText:(0,s.jsx)(h.cC,{id:"7Bj3x9"}),badgeColorScheme:"red"}},sM=e=>{let{status:t,onClick:i}=e;if("verified"===t)return null;let{tooltip:n,badgeText:r,badgeColorScheme:l}=sz[t];return(0,s.jsx)(ep.kH,{label:n,placement:"top",children:(0,s.jsx)(lV.C,{display:"flex",justifyContent:"center",colorScheme:l,cursor:i?"pointer":"default",onClick:i||void 0,children:r})})},sL=e=>{let{domain:t,onDomainSetupClick:i,path:n,onDeleteClick:r,numDomains:l,siteId:o}=e,d=(0,eA.mn)({domain:t,path:n}),c=(0,iJ.p)(),p=!t.builtin,g=t.builtin,f=p&&("verified"!==t.status||"verified"===t.status&&l>1),[C]=(0,v.NEQ)(),b=(0,j.useCallback)(async()=>{await C({variables:{id:t.id}}),c({title:(0,s.jsx)(h.cC,{id:"LIAJwx"}),status:"success",duration:3e3,position:"top",isClosable:!0})},[C,t.id,c]),{isOpen:y,onOpen:k,onClose:E}=(0,w.q)({id:"edit-domain-modal"});return(0,s.jsxs)(sR.Z,{variant:"outline",children:[(0,s.jsx)(sN.e,{children:(0,s.jsxs)(ex.U,{children:["verified"===t.status?(0,s.jsx)(ep.kH,{label:d,placement:"top",children:(0,s.jsx)(eh.z,{as:nF.r,variant:"link",href:d,target:"_blank",rightIcon:(0,s.jsx)(x.G,{icon:iR.wlW,size:"xs"}),children:t.name})}):(0,s.jsx)(a.x,{children:t.name}),(0,s.jsx)(nX.L,{}),(0,s.jsx)(sM,{status:t.status,onClick:"failed"===t.status?b:null}),(0,s.jsxs)(em.h,{children:[g&&(0,s.jsx)(ep.kH,{label:(0,s.jsx)(h.cC,{id:"zPTAcG"}),placement:"top",children:(0,s.jsx)(I.h,{onClick:k,"aria-label":m.ag._({id:"zPTAcG"}),size:"sm",variant:"ghost",icon:(0,s.jsx)(x.G,{icon:u.Xcf})})}),p&&(0,s.jsx)(ep.kH,{label:(0,s.jsx)(h.cC,{id:"UqSZMD"}),placement:"top",children:(0,s.jsx)(I.h,{onClick:()=>{i(t.name)},"aria-label":m.ag._({id:"UqSZMD"}),size:"sm",variant:"ghost",colorScheme:"blackAlpha",icon:(0,s.jsx)(x.G,{icon:u.DBf})})}),f&&(0,s.jsx)(ep.kH,{label:(0,s.jsx)(h.cC,{id:"C2YqXi"}),placement:"top",children:(0,s.jsx)(I.h,{onClick:()=>{r(null==t?void 0:t.id)},"aria-label":m.ag._({id:"C2YqXi"}),size:"sm",variant:"ghost",colorScheme:"red",icon:(0,s.jsx)(x.G,{icon:u.Vui})})})]})]})}),(0,s.jsx)(sG,{isOpen:y,onClose:E,domain:t,siteId:o})]})},sF=e=>{let{isOpen:t,onClose:i,domainName:n,onTransferConfirm:r,onTransferCancel:l,domainToTransfer:o,isTransferring:d}=e,c=(0,j.useCallback)(()=>{l(),i()},[i,l]),u=(0,j.useCallback)(async()=>{r(),i()},[i,r]);return o?(0,s.jsx)(ep.Wk,{isDark:!1,children:(0,s.jsxs)(n9.u_,{isOpen:t,onClose:c,size:"lg",children:[(0,s.jsx)(t_.Z,{}),(0,s.jsxs)(n6.h,{children:[(0,s.jsx)(n7.x,{children:(0,s.jsx)(h.cC,{id:"hqplvI"})}),(0,s.jsx)(tT.o,{}),(0,s.jsx)(tO.f,{children:(0,s.jsxs)(tc.K,{spacing:2,children:[(0,s.jsx)(a.x,{children:o.siteArchived?(0,s.jsx)(h.cC,{id:"SeHn75",values:{domainName:n,0:o.siteName}}):(0,s.jsx)(h.cC,{id:"tX38ij",values:{domainName:n,0:o.siteName}})}),(0,s.jsx)(a.x,{children:(0,s.jsx)(h.cC,{id:"rKH6wM"})})]})}),(0,s.jsxs)(tP.m,{children:[(0,s.jsx)(eh.z,{variant:"ghost",mr:3,onClick:c,children:(0,s.jsx)(h.cC,{id:"yz7wBu"})}),(0,s.jsx)(eh.z,{isLoading:d,variant:"ghost",colorScheme:"red",onClick:u,children:(0,s.jsx)(h.cC,{id:"vTZxnA"})})]})]})]})}):(0,s.jsx)(s.Fragment,{})},sU=e=>{var t;let{site:i,path:n,onDomainSetupClick:r,onAddDomain:l,isAddingDomain:o,refetchSites:a}=e,d=(0,iJ.p)(),{currentWorkspace:c}=(0,eY.SE)(),[u,x]=(0,j.useState)(),[p,g]=(0,j.useState)(),[f,C]=(0,j.useState)(""),{isOpen:b,onOpen:y,onClose:k}=(0,w.q)({id:"delete-domain-modal"}),{isOpen:E,onOpen:S,onClose:I}=(0,t1.M)({id:"transferDomainModal"}),[_,{loading:A}]=(0,v.KtP)({fetchPolicy:"network-only",nextFetchPolicy:"network-only"}),T=i.domains.find(e=>e.id===u),O=(0,eA.m6)(f)&&void 0===i.domains.find(e=>e.name===f),[P,{loading:D}]=(0,v.Yqv)(),[R,{loading:N}]=(0,v.dLz)(),[G,z]=(0,j.useState)(void 0),M=(0,j.useCallback)(async e=>{var t;let n=await _({variables:{name:e,workspaceId:null==c?void 0:c.id}}),r=null==n?void 0:null===(t=n.data)||void 0===t?void 0:t.domains,s=null==r?void 0:r[0];if(i&&s){g(s),S();return}l(e),g(void 0),C("")},[null==c?void 0:c.id,_,l,S,i]);(0,tr.vm)(()=>{u?z(null==T?void 0:T.name):z(void 0)},[u,null==T?void 0:T.name],[u]);let L=(0,j.useCallback)(()=>{k(),x(()=>void 0)},[k]),F=(0,j.useCallback)(async()=>{T&&(await P({variables:{id:u}}),await a(),d({title:(0,s.jsx)(h.cC,{id:"V4fbcv",values:{0:T.name}}),status:"success",duration:3e3,position:"top",isClosable:!0}),L())},[a,P,u,T,L,d]),U=(0,iz.Y)("custom_domains"),W=(0,eA.Zz)(i.domains),H=(0,j.useCallback)(()=>{g(void 0)},[]),V=(0,j.useCallback)(async()=>{p&&(await R({variables:{id:null==p?void 0:p.id,siteId:i.id},refetchQueries:["GetSite"]}),d({title:(0,s.jsx)(h.cC,{id:"dHhDGG",values:{0:p.name}}),position:"top",status:"success",duration:5e3}),C(""),g(void 0))},[p,i.id,d,R]);return(0,s.jsxs)(tc.K,{spacing:4,p:2,children:[(0,s.jsxs)(ns.NI,{children:[(0,s.jsx)(no.l,{children:(0,s.jsx)(h.cC,{id:"AZ4xlc"})}),U&&(0,s.jsxs)(ex.U,{mb:2,children:[(0,s.jsx)(sp.I,{bg:"white",placeholder:(null==i?void 0:null===(t=i.domains)||void 0===t?void 0:t.length)?m.ag._({id:"B6e4xs"}):m.ag._({id:"1y9z1r"}),value:f,onChange:e=>C(e.target.value),onKeyDown:e=>{"Enter"===e.key&&O&&(e.preventDefault(),M(f))}}),(0,s.jsx)(tc.K,{children:(0,s.jsx)(ep.kH,{label:(0,s.jsx)(h.cC,{id:"aUB5ST"}),placement:"top",shouldWrapChildren:!0,isDisabled:O,children:(0,s.jsx)(eh.z,{isDisabled:!O,variant:"plain",onClick:()=>{M(f)},isLoading:o||A,children:(0,s.jsx)(h.cC,{id:"EdEpYN"})})})})]})]}),W.map(e=>(0,s.jsx)(sL,{domain:e,onDomainSetupClick:r,path:n,onDeleteClick:e=>{x(e),y()},numDomains:i.domains.length||0,siteId:i.id},e.id)),!U&&(0,s.jsx)(rf.m,{segmentEvent:eG.AA.GAMMA_PRO_UPSELL_DOMAINS,title:(0,s.jsx)(h.cC,{id:"r3cvvP"}),description:(0,s.jsx)(h.cC,{id:"AhVuiC",values:{GAMMA_PROPER_NOUN:K.N6}})}),b&&(0,s.jsx)(sD,{onClose:L,onDelete:F,domainName:G,isDeleting:D}),(0,s.jsx)(sF,{isOpen:E,onClose:I,onTransferCancel:H,domainName:f,domainToTransfer:p,onTransferConfirm:V,isTransferring:N})]})};var sW=i(97010),sH=i(44438);let sV=async e=>{let t=await fetch("/api/domains/connectToken").then(e=>e.json()).then(e=>{if(!e.auth_token)throw Error("No auth token returned");return e.auth_token});if(!window.entri)throw Error("Entri not found");let{domain:i,dnsRecords:n}=(0,eA.Yd)(e),r={applicationId:"gamma",token:t,prefilledDomain:i,dnsRecords:n};return console.log("[launchEntri] Launching Entri with config",r),window.entri.showEntri(r),new Promise((e,t)=>{let i=n=>{console.log("onEntriClose: event",n),window.removeEventListener("onEntriClose",i),n.detail.success?e(n.detail):t(n.detail)};window.addEventListener("onEntriClose",i,!1)})},sB=e=>{let{isOpen:t,onClose:i,domainName:n,onDomainConfirmed:r}=e,[l,d]=(0,j.useState)("initial"),c=(0,j.useRef)(!1),[m,p]=(0,j.useState)(()=>void 0!==window.entri),[g,f]=(0,j.useState)(!1),v=(0,iJ.p)();(0,tr.Gq)(sC.oc,{predicate:()=>void 0===window.entri,onload:()=>{p(!0),c.current=!0}});let{dnsRecords:C,isRootDomain:b,subdomain:y}=(0,j.useMemo)(()=>(0,eA.Yd)(n||""),[n]);return(0,s.jsx)(ep.Wk,{isDark:!1,children:(0,s.jsxs)(n9.u_,{isOpen:t,onClose:i,size:"3xl",children:[(0,s.jsx)(t_.Z,{}),(0,s.jsxs)(n6.h,{children:[(0,s.jsx)(n7.x,{children:(0,s.jsx)(h.cC,{id:"xQMU8T",values:{domainName:n}})}),(0,s.jsx)(tT.o,{}),(0,s.jsxs)(tO.f,{children:["initial"===l&&(0,s.jsx)(sR.Z,{variant:"filled",children:(0,s.jsx)(sN.e,{children:(0,s.jsxs)(tc.K,{spacing:4,py:4,mx:"auto",children:[(0,s.jsxs)(tc.K,{spacing:2,children:[(0,s.jsxs)(tc.K,{spacing:1,children:[(0,s.jsx)(a.x,{textAlign:"center",fontSize:"2xl",children:(0,s.jsx)(x.G,{icon:u.g4A,size:"lg"})}),(0,s.jsx)(a.x,{fontWeight:"semibold",fontSize:"lg",textAlign:"center",children:(0,s.jsx)(h.cC,{id:"w5l5pM"})})]}),(0,s.jsx)(a.x,{textAlign:"center",maxW:"unset",children:(0,s.jsx)(h.cC,{id:"MhdvBQ"})})]}),(0,s.jsx)(o.k,{align:"center",justify:"center",w:"100%",children:(0,s.jsxs)(tc.K,{w:64,maxW:"100%",children:[(0,s.jsx)(eh.z,{size:"md",variant:"solid",isDisabled:!m,isLoading:g,onClick:()=>{n&&(f(!0),sV(n).then(e=>{console.log("[ENTRI] Successfully setup domain",e),v({title:(0,s.jsx)(h.cC,{id:"p8Oc6N"}),description:(0,s.jsx)(h.cC,{id:"HqV46b"}),status:"success",duration:3e3,isClosable:!0,position:"top"}),null==r||r(n)}).catch(e=>{v({title:(0,s.jsx)(h.cC,{id:"l/2jzv"}),description:e.message,status:"error",duration:3e3,isClosable:!0,position:"top"})}).finally(()=>{f(!1)}))},children:(0,s.jsx)(h.cC,{id:"qu+sXe"})}),(0,s.jsxs)(ex.U,{children:[(0,s.jsx)(rg.i,{}),(0,s.jsx)(a.x,{color:"gray.600",children:(0,s.jsx)(h.cC,{id:"BzEFor"})}),(0,s.jsx)(rg.i,{})]}),(0,s.jsx)(eh.z,{size:"md",variant:"plain",onClick:()=>{d("manualSetup")},children:(0,s.jsx)(h.cC,{id:"ANIrop"})})]})})]})})}),"manualSetup"===l&&(0,s.jsx)(sR.Z,{variant:"filled",children:(0,s.jsx)(sN.e,{children:(0,s.jsxs)(tc.K,{spacing:6,children:[(0,s.jsx)(a.x,{fontWeight:"semibold",fontSize:"lg",children:(0,s.jsx)(h.cC,{id:"L5N7HX"})}),(0,s.jsxs)(r0.i,{variant:"simple",children:[(0,s.jsx)(rJ.h,{children:(0,s.jsxs)(rX.Tr,{children:[(0,s.jsx)(rQ.Th,{children:(0,s.jsx)(h.cC,{id:"6YtxFj"})}),(0,s.jsx)(rQ.Th,{children:(0,s.jsx)(h.cC,{id:"+zy2Nq"})}),(0,s.jsx)(rQ.Th,{isNumeric:!0,children:(0,s.jsx)(h.cC,{id:"HKH+W+"})})]})}),(0,s.jsx)(r1.p,{children:(C||[]).map(e=>(0,s.jsxs)(rX.Tr,{children:[(0,s.jsx)(r2.Td,{fontFamily:"mono",children:e.host}),(0,s.jsx)(r2.Td,{fontFamily:"mono",children:e.type}),(0,s.jsx)(r2.Td,{isNumeric:!0,fontFamily:"mono",children:e.value})]},e.value))})]}),(0,s.jsxs)(iS.b,{status:"info",colorScheme:"orange",children:[(0,s.jsx)(rb.z,{}),(0,s.jsxs)(tc.K,{children:[(0,s.jsx)(a.x,{fontWeight:"bold",fontSize:"md",children:(0,s.jsx)(h.cC,{id:"NxHkkp"})}),(0,s.jsxs)(sW.GS,{pl:"4",spacing:"2",children:[b?1===sC.Co.length?(0,s.jsx)(sW.HC,{children:(0,s.jsx)(h.cC,{id:"YMrXdT",values:{0:sC.Co[0]},components:{0:(0,s.jsx)(sH.E,{colorScheme:"gray"}),1:(0,s.jsx)(sH.E,{colorScheme:"gray"}),2:(0,s.jsx)(sH.E,{colorScheme:"gray"})}})}):(0,s.jsx)(sW.HC,{children:(0,s.jsx)(h.cC,{id:"FM+LNW",values:{0:sC.Co.slice(0,-1).map(e=>(0,s.jsx)(sH.E,{colorScheme:"gray",children:e},e)),1:sC.Co.slice(-1)[0]},components:{0:(0,s.jsx)(sH.E,{colorScheme:"gray"}),1:(0,s.jsx)(ex.U,{display:"inline",divider:(0,s.jsx)("span",{children:", "})}),2:(0,s.jsx)(sH.E,{colorScheme:"gray"}),3:(0,s.jsx)(sH.E,{colorScheme:"gray"})}})}):null,(0,s.jsx)(sW.HC,{children:(0,s.jsx)(h.cC,{id:"Jmb6Yp",values:{subdomain:y,GAMMA_SITES_HOST:sC.ax},components:{0:(0,s.jsx)(sH.E,{colorScheme:"gray"}),1:(0,s.jsx)(sH.E,{colorScheme:"gray"}),2:(0,s.jsx)(sH.E,{colorScheme:"gray"})}})})]})]})]}),r&&(0,s.jsxs)(ex.U,{justifyContent:"space-between",children:[(0,s.jsx)(eh.z,{variant:"plain",onClick:()=>d("initial"),children:(0,s.jsx)(h.cC,{id:"iH8pgl"})}),(0,s.jsx)(eh.z,{variant:"solid",onClick:()=>{i(),null==r||r(n)},size:"md",mx:"auto",children:(0,s.jsx)(h.cC,{id:"RyhVuk"})})]})]})})})]}),(0,s.jsx)(tP.m,{})]})]})})},sK=e=>{let{children:t,shouldWrap:i=!1}=e;return i?(0,s.jsx)(i$.W,{py:16,maxW:"container.md",children:t}):(0,s.jsx)(s.Fragment,{children:t})},sq=e=>{let{showHeadings:t=!0}=e,{currentWorkspace:i}=(0,eY.SE)(),n=(0,M.CG)(eS.lH),{refetch:r}=(0,i5.ZUZ)({variables:{id:null==n?void 0:n.id},fetchPolicy:"cache-first",skip:!(null==n?void 0:n.id)}),{isOpen:l,onOpen:d,onClose:c}=(0,t1.M)({id:"domainSetupModal"}),u=null==n?void 0:n.domains.find(e=>"pending"===e.status),[x,m]=(0,j.useState)(null),[p,{loading:g}]=(0,i5.kui)(),[f,v]=(0,j.useState)();(0,j.useEffect)(()=>{if(!u)return;let e=setInterval(()=>{r()},1e4);return()=>{clearInterval(e)}},[u,r,n]);let C=(0,j.useCallback)(e=>{v(e),d()},[d]),b=(0,j.useCallback)(e=>{"addDomain"===x&&(p({variables:{input:{siteId:null==n?void 0:n.id,name:e}}}),c())},[p,x,c,null==n?void 0:n.id]);return console.debug("%cDomainsPanel debug","background-color: #cc00ff",{site:n}),(0,s.jsx)(o.k,{w:"100%",flex:1,direction:"column",mt:4,children:(0,s.jsxs)(sK,{shouldWrap:t,children:[t&&(0,s.jsxs)(tc.K,{spacing:1,mb:4,children:[(0,s.jsx)(eJ.X,{children:(0,s.jsx)(h.cC,{id:"AZ4xlc"})}),(0,s.jsx)(a.x,{children:(0,s.jsx)(h.cC,{id:"KuoJwF"})})]}),n?(0,s.jsx)(sU,{site:n,onDomainSetupClick:C,onAddDomain:e=>{d(),v(e),m("addDomain")},isAddingDomain:g,refetchSites:r}):(0,s.jsx)(tN.AA,{}),l&&f&&(0,s.jsx)(sB,{domainName:f,isOpen:l,onClose:()=>{c(),m(null)},onDomainConfirmed:x?b:null})]})})};var sY=i(20437),sZ=i(99787),sJ=i(16494),sX=i(19576),sQ={src:"/_next/static/media/no-navbar.e9d28333.png"},s$={src:"/_next/static/media/top-navbar.97a69a83.png"};let s0=e=>{let t=(0,M.CG)(eS.lH);return t?(0,s.jsx)(s1,{site:t,...e}):null},s1=e=>{let{site:t,showHeadings:i=!0,doc:n}=e,r=(0,iJ.p)(),l=(0,e7.ye)("sitesNav"),[d,c]=(0,j.useState)(t.name),[p,g]=(0,j.useState)(t.gtmContainerId),[f,C]=(0,j.useState)(t.navEnabled),[b,y]=(0,j.useState)(!1),[k,w]=(0,j.useState)(!1),[E,S]=(0,j.useState)(null),{currentWorkspace:_}=(0,eY.SE)(),[A]=(0,v.Iyu)(),T=(0,j.useCallback)(async()=>{if(!(null==t?void 0:t.id))return;y(!0);let e={siteId:null==t?void 0:t.id,name:d,navEnabled:f,gtmContainerId:p};!f||(null==t?void 0:t.navContent)||(e.navContent=(0,eR.JB)()),await A({variables:{input:e}}),r({title:(0,s.jsx)(h.cC,{id:"bZn5Ok"}),status:"success",isClosable:!0,position:"top"}),y(!1)},[p,d,f,null==t?void 0:t.id,null==t?void 0:t.navContent,r,A]),O=(0,j.useCallback)(async e=>{(null==t?void 0:t.id)&&(w(!0),await A({variables:{input:{siteId:null==t?void 0:t.id,faviconUrl:e}}}),r({title:e?(0,s.jsx)(h.cC,{id:"64GEyu"}):(0,s.jsx)(h.cC,{id:"/K2cLG"}),status:"success",isClosable:!0,position:"top"}),w(!1))},[null==t?void 0:t.id,r,A]),P=d!==(null==t?void 0:t.name)||f!==(null==t?void 0:t.navEnabled)||p!==(null==t?void 0:t.gtmContainerId);return(0,s.jsx)(o.k,{w:"100%",flex:1,direction:"column",px:2,children:(0,s.jsxs)(sK,{shouldWrap:i,children:[i&&(0,s.jsx)(eJ.X,{fontSize:"3xl",letterSpacing:"tight",fontWeight:"800",mb:12,children:(0,s.jsx)(h.cC,{id:"Tz0i8g"})}),(0,s.jsxs)(tc.K,{spacing:4,mt:6,children:[(0,s.jsxs)(ns.NI,{children:[(0,s.jsx)(ex.U,{justifyContent:"center",children:(0,s.jsx)(no.l,{flex:"1",children:(0,s.jsx)(h.cC,{id:"Lve3H6"})})}),(0,s.jsx)(sp.I,{onChange:e=>{c(e.currentTarget.value)},placeholder:m.ag._({id:"ZiMSMQ"}),value:d})]}),(0,s.jsxs)(ns.NI,{children:[(0,s.jsx)(ex.U,{justifyContent:"center",children:(0,s.jsx)(no.l,{flex:"1",children:(0,s.jsx)(h.cC,{id:"+Qaboy"})})}),(0,s.jsx)(o.k,{h:"150px",w:"100%",position:"relative",justify:"center",align:"center",children:(null==t?void 0:t.faviconUrl)?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.k,{align:"center",justify:"center",w:"128px",h:"128px",border:"1px solid var(--chakra-colors-blackAlpha-200)",children:(0,s.jsx)(t9.E,{src:null==t?void 0:t.faviconUrl,maxW:"100px",maxH:"100px",borderRadius:"sm"})}),(0,s.jsx)(ep.kH,{label:(0,s.jsx)(h.cC,{id:"XyBdok"}),children:(0,s.jsx)(I.h,{zIndex:2,position:"absolute",top:0,right:0,isRound:!0,isDisabled:k,size:"sm",icon:(0,s.jsx)(x.G,{icon:u.XAH}),"aria-label":m.ag._({id:"XyBdok"}),onClick:()=>O(null)})})]}):k||E===sJ.D.Uploading?(0,s.jsx)(tu.$,{}):(0,s.jsx)(sZ.un,{orgId:null==_?void 0:_.id,uploadType:"icon",editType:"icon",dropHereText:m.ag._({id:"hVCCpY",values:{0:"%{browse}"}}),customHeight:"150px",customFontSize:"xs",showTip:!1,onUploadStart:()=>{S(sJ.D.Uploading)},onUploadSuccess:async(e,t)=>{let{src:i,uploadResultStep:n}=e;"optimized"===n&&(await O(i),S(sJ.D.Done))},onUploadFailed:e=>{S(sJ.D.Error),r({title:(0,s.jsx)(h.cC,{id:"aECahe"})}),console.error("[Site SettingsPanel] Favicon upload error",e)},sx:{width:"100%",".uppy-Root":{border:"1px solid var(--chakra-colors-gray-200)",borderRadius:"md",width:"100%"},".uppy-DragDrop-label":{fontSize:"xs",color:"gray.500"},".uppy-DragDrop--isDragDropSupported":{border:"none"},".uppy-DragDrop-arrow":{transform:"scale(0.85)"}}})}),(0,s.jsx)(a.x,{fontSize:"xs",color:"gray.500",mt:2,children:(0,s.jsx)(h.cC,{id:"ifTGl2"})})]}),l&&(0,s.jsxs)(ns.NI,{children:[(0,s.jsx)(ex.U,{justifyContent:"center",children:(0,s.jsx)(no.l,{flex:"1",children:(0,s.jsx)(h.cC,{id:"UxKoFf"})})}),(0,s.jsxs)(sY.M,{columns:2,spacing:6,flex:1,children:[(0,s.jsx)(s2,{name:m.ag._({id:"Nom9QG"}),src:s$.src,isSelected:f,onClick:()=>{C(!0)}}),(0,s.jsx)(s2,{name:m.ag._({id:"BvDFuc"}),src:sQ.src,isSelected:!f,onClick:()=>{C(!1)}})]})]}),(0,s.jsxs)(ns.NI,{children:[(0,s.jsx)(ex.U,{justifyContent:"center",children:(0,s.jsx)(no.l,{flex:"1",children:(0,s.jsx)(h.cC,{id:"d4WWfP"})})}),(0,s.jsxs)(o.k,{sx:{".gtm-prefix::before":{content:'"GTM\\2009-"'}},children:[(0,s.jsx)(o.k,{className:"gtm-prefix",position:"absolute",alignItems:"center",color:(null==p?void 0:p.length)?"gray.800":"gray.500",fontWeight:"400",h:10,pl:4}),(0,s.jsx)(sp.I,{pl:16,placeholder:"XXXXXX",value:p,onChange:e=>{let t=sX.R.sanitize(e.currentTarget.value);g(t.replace(/[\W_]+/g,"").toUpperCase().slice(0,10))}})]}),(0,s.jsx)(a.x,{fontSize:"xs",color:"gray.500",mt:2,children:(0,s.jsx)(h.cC,{id:"6LEeiE",components:{0:(0,s.jsx)("br",{}),1:(0,s.jsx)(eh.z,{"aria-label":"Learn more about Google Tag Manager",as:"a",px:1,textDecoration:"underline",variant:"ghost",href:"https://support.google.com/tagmanager/answer/6103696?hl=en",target:"_blank",size:"xs",rightIcon:(0,s.jsx)(n3.h,{ml:-1})})}})})]}),n&&(0,s.jsx)(sv.V,{label:(0,s.jsx)(h.cC,{id:"SDyz5I"}),segmentEvent:sf.AA.GAMMA_PRO_UPSELL_SITE_REMOVE_WATERMARK,doc:n}),(0,s.jsx)(o.k,{w:"100%",flex:1,direction:"column",align:"flex-end",justify:"flex-end",pb:8,children:(0,s.jsx)(em.h,{children:(0,s.jsx)(eh.z,{variant:"solid",isDisabled:!P,onClick:T,isLoading:b,children:(0,s.jsx)(h.cC,{id:"tfDRzk"})})})})]})]})})},s2=e=>{let{name:t,src:i,onClick:n,isSelected:r,...l}=e;return(0,s.jsxs)(tc.K,{p:2,bg:r?"trueblue.50":"transparent",_hover:{bg:"trueblue.50",cursor:"pointer"},borderRadius:"md",spacing:2,...l,transitionProperty:"common",transitionDuration:"normal",onClick:n,children:[(0,s.jsx)(d.xu,{height:"80px",bg:"gray.50",borderRadius:"md",borderWidth:"1px",overflow:"hidden",children:i&&(0,s.jsx)(t9.E,{src:i,width:"100%",height:"100%",objectFit:"contain",borderRadius:"md"})}),(0,s.jsxs)(ex.U,{children:[r&&(0,s.jsx)(d.xu,{children:(0,s.jsx)(x.G,{icon:u.LEp})}),(0,s.jsx)(a.x,{fontSize:"sm",fontWeight:"500",children:t})]})]})},s5=(0,j.memo)(e=>{let{editor:t}=e,{bodyStart:i}=(0,M.CG)(L.$p),n=(0,j.useCallback)(e=>{null==t||t.commands.updateNestedAttributesAtPos(0,{customCode:{bodyStart:e}})},[t]);return(0,s.jsx)(o.k,{w:"100%",flex:1,direction:"column",p:2,pt:6,children:(0,s.jsx)(lq,{label:m.ag._({id:"fC5kYg"}),helperText:m.ag._({id:"0AZNtw"}),initialValue:i,updateValue:n,language:"html",height:"600px"})})});s5.displayName="CustomCodePanel";let s4=(0,j.memo)(e=>{let{selectedPanel:t,setSelectedPanel:i}=e,n=(0,e7.ye)("docCustomCode");return(0,s.jsx)(tc.K,{spacing:4,children:(0,s.jsx)(tc.K,{spacing:8,children:(0,s.jsxs)(em.h,{variant:"ghost",size:"sm",borderRadius:"full",w:"100%",children:[(0,s.jsx)(eh.z,{borderRadius:"full",leftIcon:(0,s.jsx)(x.G,{icon:u.ovd,fixedWidth:!0}),"data-website-panel-active-view-button":"domains",colorScheme:"domains"===t?"trueblue":"gray",bg:"domains"===t?"trueblue.100":void 0,onClick:()=>i("domains"),flex:1,children:(0,s.jsx)(h.cC,{id:"AZ4xlc"})}),(0,s.jsx)(eh.z,{borderRadius:"full",leftIcon:(0,s.jsx)(x.G,{icon:u.gr5,fixedWidth:!0}),"data-website-panel-active-view-button":"website",colorScheme:"website"===t?"trueblue":"gray",bg:"website"===t?"trueblue.100":void 0,onClick:()=>i("website"),flex:1,children:(0,s.jsx)(h.cC,{id:"Tz0i8g"})}),n&&(0,s.jsx)(eh.z,{borderRadius:"full",leftIcon:(0,s.jsx)(x.G,{icon:u.dT$,fixedWidth:!0}),"data-website-panel-active-view-button":"code",colorScheme:"code"===t?"trueblue":"gray",bg:"code"===t?"trueblue.100":void 0,onClick:()=>i("code"),flex:1,children:(0,s.jsx)(h.cC,{id:"E16GGw"})})]})})})});s4.displayName="SettingsPanelHeader";let s3=e=>{let{onEnable:t,isLoading:i}=e;return(0,s.jsxs)(tc.K,{align:"center",justify:"center",spacing:6,flex:1,p:6,mt:8,bg:"gray.50",borderRadius:"md",children:[(0,s.jsx)(t9.E,{src:"https://cdn.gamma.app/zc87vhr30n8uf3n/9f0b4d71d10f4d388e50febe89bb1853/optimized/Sal-Chill-Cloud.svg",w:"200px"}),(0,s.jsx)(eJ.X,{fontFamily:"p22-mackinac-pro",fontWeight:"700",size:"md",children:(0,s.jsx)(h.cC,{id:"2xMidw"})}),(0,s.jsx)(a.x,{fontSize:"sm",textAlign:"center",css:{textWrap:"balance"},children:(0,s.jsx)(h.cC,{id:"RxQ97P",components:{0:(0,s.jsx)("code",{})}})}),(0,s.jsxs)(em.h,{children:[(0,s.jsx)(eh.z,{variant:"solid",onClick:t,isLoading:i,children:(0,s.jsx)(h.cC,{id:"JHMOcq"})}),(0,s.jsx)(eh.z,{as:nF.r,variant:"plain",isExternal:!0,href:"https://help.gamma.app/en/articles/8429268-how-to-publish-your-page-to-a-custom-domain",rightIcon:(0,s.jsx)(x.G,{icon:u.gJF}),children:(0,s.jsx)(h.cC,{id:"zwWKhA"})})]}),(0,s.jsx)(a.x,{fontSize:"sm",color:"gray.500",children:(0,s.jsx)(h.cC,{id:"qdah/E"})})]})};var s9=i(28165),s6=i(38045),s7=i(25925);let s8=(0,s6.E)(d.xu),oe={initial:{opacity:0,translateY:-40},animate:{opacity:1,translateY:0},exit:{opacity:0,translateY:40},transition:{duration:.3}},ot=e=>{let{isLoading:t,onChange:i,isChecked:n,isDisabled:r,enabledText:l,disabledText:a}=e;return(0,s.jsxs)(o.k,{cursor:r?"not-allowed":"pointer",className:(0,c.cx)("gamma-switch-container",t&&"loading",n?"active":""),opacity:r?.6:1,children:[(0,s.jsx)(d.xu,{as:"label",className:"text",fontSize:"sm",justifyContent:"center",htmlFor:"gamma-checkbox",position:"relative",overflow:"hidden",children:(0,s.jsx)(s7.M,{initial:!1,children:t?(0,s.jsx)(s8,{as:"span",position:"absolute",...oe,children:(0,s.jsx)(tu.$,{size:"sm"})},"loading"):n?(0,s.jsx)(s8,{as:"span",position:"absolute",...oe,children:l},"checked"):(0,s.jsx)(s8,{as:"span",position:"absolute",...oe,children:a},"unchecked")})}),(0,s.jsxs)(d.xu,{as:"label",className:"switch",pointerEvents:r?"none":"auto",children:[(0,s.jsx)("input",{id:"gamma-checkbox",type:"checkbox",onChange:i,disabled:t||r}),(0,s.jsx)("span",{className:"slider round"})]})]})},oi=(0,s9.F4)({"0%":{transform:"scale(1)",opacity:1},"50%":{transform:"scale(1.7)",opacity:0},"100%":{transform:"scale(1)",opacity:0}}),on=(0,s9.F4)({"0%":{transform:"scale(1)",opacity:1},"15%":{transform:"scale(1)",opacity:1},"60%":{transform:"scale(1.7)",opacity:0},"100%":{transform:"scale(1)",opacity:0}}),or=(0,s9.F4)({"0%":{transform:"scale(1)"},"30%":{transform:"scale(1)"},"50%":{transform:"scale(1.05)"},"70%":{transform:"scale(1)"},"100%":{transform:"scale(1)"}}),ol=e=>{let{icon:t,showDisabled:i=!1,shouldPulse:n=!1,bg:r="gray.200",color:l="gray.800"}=e;return(0,s.jsx)(d.Cd,{color:l,textAlign:"center",bg:r,size:8,opacity:i?.5:1,position:"relative",animation:n?"".concat(or," 2.7s infinite"):"none",sx:{":before":n?{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",content:"''",boxShadow:"inset 0 0 0 3px #6910D166",transition:"transform 0.2s, opacity 0.2s",animation:"".concat(oi," 2.7s infinite")}:{},":after":n?{position:"absolute",top:0,left:0,width:"100%",height:"100%",borderRadius:"50%",content:"''",boxShadow:"inset 0 0 0 2px #6910D133",transition:"transform 0.2s, opacity 0.2s",animation:"".concat(on," 2.7s infinite")}:{}},children:i?(0,s.jsxs)("span",{className:"fa-stack",children:[(0,s.jsx)(x.G,{icon:u.u6k,className:"fa-stack-1x"}),(0,s.jsx)(x.G,{icon:t,className:"fa-stack-1x"})]}):(0,s.jsx)(x.G,{size:"1x",icon:t})})},os=e=>{let{isLoading:t=!1,site:i,onChange:n,disabledText:r,doc:l}=e,c=(0,eA.Vr)(i),x=(0,ek.Lu)(),m=(0,eY.py)("manage",l),p=x||m,g=(0,eA.k2)(i),j=p?r||(t?(0,s.jsx)(h.cC,{id:"mkk40+"}):c?(0,s.jsx)(h.cC,{id:"f4CBNf"}):(0,s.jsx)(h.cC,{id:"5G4vd5"})):(0,s.jsx)(h.cC,{id:"Z2uNdQ"});return(0,s.jsxs)(ex.U,{w:"100%",justify:"space-between","data-testid":"toggle-website-settings",children:[(0,s.jsx)(d.xu,{children:(0,s.jsxs)(o.k,{alignItems:"center",children:[(0,s.jsx)(ol,{shouldPulse:g,bg:g?"#6910D1":"gray.200",color:g?"white":"gray.800",icon:g?u.cL$:u.g4A}),(0,s.jsxs)(d.xu,{ml:3,children:[(0,s.jsx)(ex.U,{children:(0,s.jsx)(a.x,{children:g?(0,s.jsx)(h.cC,{id:"MuDTSp"}):c?(0,s.jsx)(h.cC,{id:"AAm5jh"}):(0,s.jsx)(h.cC,{id:"HzFHhy"})})}),(0,s.jsx)(o.k,{align:"center",children:(0,s.jsx)(ex.U,{spacing:1,align:"center",children:(0,s.jsx)(a.x,{fontSize:"xs",color:"gray.500",css:{textWrap:"balance"},children:i&&g?(0,s.jsx)(n$,{site:i}):c?(0,s.jsx)(h.cC,{id:"N4VTXP"}):(0,s.jsx)(h.cC,{id:"1bmqGL"})})})})]})]})}),(0,s.jsx)(d.xu,{children:(0,s.jsx)(ep.kH,{label:j,placement:"top",shouldWrapChildren:!0,children:(0,s.jsx)(ot,{isChecked:c,isDisabled:!!(t||r||!p),isLoading:t,onChange:n})})})]})},oo=e=>{var t,i;let{doc:n,isOpen:r,onOpen:l,onPublishSettingsClose:a}=e,d=(0,iJ.p)(),c=(0,M.TL)(),u=(0,M.CG)(eS.lH),x=(0,M.CG)(eS.$U),{editor:m}=(0,ta._i)(),{currentWorkspace:p}=(0,eY.SE)(),[g,f]=(0,j.useState)(!1),[C]=(0,v.V$$)(),[b]=(0,v.cxO)(),[y]=(0,v.A0Z)(),[k]=(0,v.UoQ)(),[w,E]=(0,j.useState)("domains"),S=n.id,I=n.title,_=null==p?void 0:p.id,A=null==n?void 0:null===(t=n.theme)||void 0===t?void 0:t.id,T=!1==!!n.site?null:(null===(i=n.site)||void 0===i?void 0:i.enabled)?"enabled":"disabled",O=(null==u?void 0:u.archived)?(0,s.jsx)(h.cC,{id:"VAyYv6"}):null;(0,j.useEffect)(()=>{let e=l5.T.on("openSiteSettings",e=>{E(e),l()});return()=>{e()}},[l]);let P=(0,j.useCallback)(async()=>{if(_){f(!0),k({variables:{id:S,themeId:null}});try{await C({variables:{input:{workspaceId:_,name:I,themeId:A,routes:[{docId:S,path:"/"}]}},refetchQueries:["GetDoc"]}).then(e=>{let{data:t}=e;(0,eS.zs)(c)({site:null==t?void 0:t.createSite,docId:S})})}catch(e){console.error("[WebsiteSettingsModal] Failed to create site",e.message),d({title:(0,s.jsx)(h.cC,{id:"Pdboh4"}),description:(0,s.jsx)(h.cC,{id:"8wxFbh"}),status:"error",duration:5e3,isClosable:!0,position:"top"})}finally{f(!1)}}},[C,c,S,I,A,d,k,_]),D=(0,j.useCallback)(async()=>{if(x){f(!0);try{await b({variables:{id:x},update:(e,t)=>{let{data:i}=t;e.updateQuery({query:v.yE1,variables:{id:S}},e=>e&&e.doc?{...e,doc:{...e.doc,site:null==i?void 0:i.disableSite}}:e)}})}catch(e){console.error("[WebsiteSettingsModal] Failed to deactivate site",e.message),d({title:(0,s.jsx)(h.cC,{id:"ksq4sM"}),description:(0,s.jsx)(h.cC,{id:"VE0YVl"}),status:"error",duration:5e3,isClosable:!0,position:"top"})}finally{f(!1)}}},[b,S,x,d]),R=(0,j.useCallback)(async()=>{if(x){f(!0);try{await y({variables:{id:x},update:(e,t)=>{let{data:i}=t;e.updateQuery({query:v.yE1,variables:{id:S}},e=>e&&e.doc?{...e,doc:{...e.doc,site:null==i?void 0:i.enableSite}}:e)}})}catch(e){console.error("[WebsiteSettingsModal] Failed to re-activate site",e.message),d({title:(0,s.jsx)(h.cC,{id:"aQnYTJ"}),description:(0,s.jsx)(h.cC,{id:"E2sPQM"}),status:"error",duration:5e3,isClosable:!0,position:"top"})}finally{f(!1)}}},[S,y,x,d]),N=(0,j.useCallback)(()=>{null===T?P():"enabled"===T?D():"disabled"===T&&R()},[P,D,R,T]);return(0,s.jsx)(ep.Wk,{isDark:!1,children:(0,s.jsx)(tI.d,{isOpen:r,onClose:a,size:"lg",children:(0,s.jsxs)(tA.s,{p:0,shadow:"xl",children:[(0,s.jsxs)(n7.x,{children:[(0,s.jsx)(h.cC,{id:"WtsmDd"})," ",(0,s.jsx)(lV.C,{colorScheme:"green",ml:2,fontSize:"sm",letterSpacing:"normal",children:(0,s.jsx)(h.cC,{id:"YBt9YP"})})]}),(0,s.jsx)(tT.o,{}),(0,s.jsxs)(tO.f,{children:[(0,s.jsxs)(eX.g,{spacing:4,align:"stretch",children:[(0,s.jsx)(os,{isLoading:g,site:u,doc:n,onChange:N,disabledText:O}),!!u&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n1,{context:"settings"}),(0,s.jsx)(rg.i,{}),"disabled"===T&&(0,s.jsxs)(iS.b,{status:"warning",mb:6,children:[(0,s.jsx)(rb.z,{}),(0,s.jsx)(h.cC,{id:"CHu+l0"})]}),(0,s.jsxs)(o.k,{direction:"column",children:[(0,s.jsx)(s4,{selectedPanel:w,setSelectedPanel:E}),"website"===w?(0,s.jsx)(s0,{showHeadings:!1,doc:n}):"domains"===w?(0,s.jsx)(sq,{showHeadings:!1}):"code"===w?(0,s.jsx)(s5,{editor:m}):null]})]})]}),!u&&(0,s.jsx)(s3,{onEnable:N,isLoading:g})]})]})})})},oa=e=>{let{doc:t}=e,i=!!(null==t?void 0:t.site),{isOpen:n,onClose:r,onOpen:l}=(0,t1.M)({id:"PublishSettingsDisclosure"});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n5.s,{icon:(0,s.jsx)(x.G,{icon:u.g4A,fixedWidth:!0}),onClick:l,children:i?(0,s.jsx)(h.cC,{id:"gKmuNS"}):(0,s.jsx)(h.cC,{id:"wzvDe1"})}),t&&(0,s.jsx)(oo,{isOpen:n,onOpen:l,doc:t,onPublishSettingsClose:r})]})};var od=i(84010),oc=i(43019);let ou=(e,t)=>{let i=[],n=e=>{if(t(e)&&i.push(e),e.content)for(let t of e.content)n(t)};return n(e),i},ox=()=>({today:m.ag._({id:"ecUA8p"}),thisWeek:m.ag._({id:"yByRxz"}),earlier:m.ag._({id:"HGg4T/"})}),oh=()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(rj.O,{w:"350px",h:12}),(0,s.jsx)(od.N,{mt:3,w:64,noOfLines:1})]}),om=e=>{let{createdTime:t,editors:i,isLatest:n,onClick:r,showPaywall:l,paywallCount:c}=e;if(!i||!i.length)return(0,s.jsx)(s.Fragment,{});let u=l?"linear-gradient(rgb(0, 0, 0) 15%, transparent 100%)":"",x=(0,s.jsxs)(st.O,{flexDirection:"row",borderRadius:"base",style:{WebkitMaskImage:u,maskImage:u},border:"none",isDisabled:l,opacity:"1 !important",onClick:r,alignItems:"flex-start",width:"100%",textAlign:"left",children:[(0,s.jsxs)(o.k,{w:"100%",direction:"column",children:[(0,s.jsx)(a.x,{fontSize:"sm",children:ic()((0,it.P9)(t))}),(0,s.jsx)(a.x,{fontSize:"xs",flex:1,children:i[0].displayName})]}),n&&(0,s.jsx)(lV.C,{colorScheme:"green",py:"0.5",fontSize:"0.65em",children:(0,s.jsx)(h.cC,{id:"wL3cK8"})})]});return l?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ep.kH,{placement:"top",isDisabled:!l,label:l?(0,s.jsx)(h.cC,{id:"PYTBm5",values:{paywallCount:c}}):void 0,children:(0,s.jsx)(d.xu,{mb:4,children:x})}),(0,s.jsx)(rf.m,{isNarrow:!0,segmentEvent:eG.AA.GAMMA_PRO_UPSELL_CALLOUT_CHANGE_HISTORY,description:(0,s.jsx)(h.cC,{id:"mVKYtH"})})]}):x},op=e=>{var t;let i=(0,q.Yt)(),{items:n,paywalledItems:r}=(0,j.useMemo)(()=>{if("unlimited"===i)return{items:e,paywalledItems:[]};let t=parseInt(i),n=e.filter((e,i)=>0===i||(0,l$.Z)(e.createdTime)>=new Date(Date.now()-864e5*t)),r=e.slice(n.length,e.length),l=r.length?r[0]:null;return{items:n.concat(l?[l]:[]),paywalledItems:r}},[i,e]),l=(0,j.useMemo)(()=>(0,it.yd)({items:n,sortBy:"createdTime"}),[n]);return{groupedSnapshots:l,paywalledSnapshotId:null===(t=r[0])||void 0===t?void 0:t.id,paywallCount:r.length}},og=e=>{let{groupedSnapshots:t,paywalledSnapshotId:i,paywallCount:n,onClick:r,showFetchMore:l,onFetchMoreClick:o,isFetchingMore:a}=e;return(0,s.jsxs)(se.t,{w:"100%",children:[Object.entries(t).filter(e=>{let[,t]=e;return t.length}).map((e,t)=>{let[l,o]=e;return(0,s.jsxs)(j.Fragment,{children:[(0,s.jsx)(ep.NZ,{px:4,py:2,mx:0,mt:2,children:ox()[l]}),o.map((e,l)=>{let{createdTime:o,editors:a,id:d}=e;return(0,s.jsx)(om,{onClick:()=>r(d),isLatest:0===t&&0===l,createdTime:o,editors:a,showPaywall:i===d,paywallCount:n},d)})]},l)}),l&&(0,s.jsx)(eh.z,{isLoading:a,onClick:o,children:(0,s.jsx)(h.cC,{id:"yQ2kGp"})})]})},oj=()=>(0,s.jsxs)(se.t,{w:"100%",children:[(0,s.jsx)(rj.O,{h:16}),(0,s.jsx)(rj.O,{h:16,mt:2}),(0,s.jsx)(rj.O,{h:16,mt:2}),(0,s.jsx)(rj.O,{h:16,mt:2}),(0,s.jsx)(rj.O,{h:16,mt:2}),(0,s.jsx)(rj.O,{h:16,mt:2}),(0,s.jsx)(rj.O,{h:16,mt:2}),(0,s.jsx)(rj.O,{h:16,mt:2})]}),of=e=>{let{title:t,createdBy:i,createdTime:n,numSnapshots:r}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.x,{mt:1,children:(0,s.jsx)(h.cC,{id:"yf//Op",values:{numSnapshots:r,0:(0,nQ.Dw)(n),1:(0,nQ.Dw)(n)}})}),(0,s.jsx)(a.x,{color:"gray.500",fontSize:"sm",fontWeight:"normal",letterSpacing:"normal",children:(0,s.jsx)(h.cC,{id:"JVHTIo",values:{title:t,0:(null==i?void 0:i.displayName)?null==i?void 0:i.displayName:"Unknown",1:(0,nQ.p6)(n,"PPp")}})})]})},ov="snapshot-editor-root",oC=e=>{let{id:t,doc:i,content:n}=e,r=(0,j.useMemo)(()=>{if(n)return ou(n,e=>e.type===e8.W4).map(e=>{var t;return{__typename:"Card",id:(null===(t=e.attrs)||void 0===t?void 0:t.id)||"",docId:i.id,title:(0,oc.getCardTitle)(e),createdTime:i.createdTime,updatedTime:i.updatedTime,archived:!1}})},[n,i]);return(0,s.jsx)(eO.fb,{reduxData:{cards:r},initialContent:n,doc:i,docId:i.id,scrollingParentSelector:".".concat(ov),isInsideDrawer:!0},t)},ob=e=>{let{isOpen:t,onClose:i,doc:n}=e,r=(0,iJ.p)(),{getCollaborativeEditorInstance:l}=(0,ta._i)(),[a,c]=(0,j.useState)(!1),{loading:u,data:x,called:m,fetchMore:p}=(0,v.pfN)({variables:{docId:n.id,first:25},skip:!n||!t,fetchPolicy:"network-only",nextFetchPolicy:"network-only"}),[g,{loading:f,data:C}]=(0,v.opq)({nextFetchPolicy:"cache-only"}),b=(null==x?void 0:x.snapshots.edges.map(e=>e.node))||[],{groupedSnapshots:y,paywalledSnapshotId:k,paywallCount:w}=op(b),E=null==x?void 0:x.snapshots.pageInfo,S=!!(!k&&m&&(null==E?void 0:E.hasNextPage)&&(null==E?void 0:E.endCursor)),I=(0,j.useCallback)(()=>{(null==E?void 0:E.hasNextPage)&&(null==E?void 0:E.endCursor)&&(c(!0),p({variables:{after:E.endCursor}}).finally(()=>{c(!1)}))},[p,null==E?void 0:E.endCursor,null==E?void 0:E.hasNextPage]),_=b[0];(0,j.useEffect)(()=>{(null==_?void 0:_.id)&&g({variables:{snapshotId:_.id,docId:n.id}})},[n.id,g,null==_?void 0:_.id]);let A=(0,l0.$)(null==n?void 0:n.title),T="createdBy"in n?n.createdBy:void 0,O=null==n?void 0:n.createdTime,P=null==C?void 0:C.snapshot,D=P&&P.id===n.currentSnapshotId;return(0,s.jsx)(ep.Wk,{isDark:!1,children:(0,s.jsxs)(tI.d,{placement:"bottom",onClose:i,isOpen:t,trapFocus:!0,isFullHeight:!0,blockScrollOnMount:!1,children:[(0,s.jsx)(t_.Z,{}),(0,s.jsxs)(tA.s,{borderTopRadius:"xl",h:"calc(var(--100vh) - 24px)",transform:"none !important",children:[(0,s.jsx)(tT.o,{}),(0,s.jsxs)(n7.x,{borderBottom:"1px solid #000",borderColor:"gray.200",children:[u&&(0,s.jsx)(oh,{}),n&&b&&(0,s.jsx)(of,{numSnapshots:(null==b?void 0:b.length)||0,createdBy:T,createdTime:O,title:A})]}),(0,s.jsx)(tO.f,{p:0,h:"100%",children:(0,s.jsxs)(o.k,{direction:"row",h:"100%",children:[(0,s.jsx)(d.xu,{p:2,w:"17rem",overflowY:"auto",bg:"gray.50",children:(0,s.jsxs)(l8.m,{variant:"soft-rounded",orientation:"vertical",size:"md",children:[u&&(0,s.jsx)(oj,{}),!u&&b&&(0,s.jsx)(og,{onClick:e=>{g({variables:{snapshotId:e,docId:n.id}})},groupedSnapshots:y,paywalledSnapshotId:k,paywallCount:w,showFetchMore:S,onFetchMoreClick:I,isFetchingMore:a})]})}),(0,s.jsx)(o.k,{flex:1,bg:"gray.100",overflowY:"scroll",justifyContent:"center",alignContent:"center",alignItems:"flex-start",width:"100%",height:"100%",className:ov,css:{"--editor-width":"calc(100vw - 17rem)"},children:(0,s.jsxs)(o.k,{direction:"column",position:"relative",width:"100%",height:"100%",children:[(0,s.jsx)(tU.Y,{}),(!P||f)&&(0,s.jsx)(tN.AA,{}),P&&!f&&(0,s.jsx)(oC,{id:P.id,doc:n,content:null==P?void 0:P.content.default})]})})]})}),(0,s.jsx)(tP.m,{borderTop:"1px solid #000",borderColor:"gray.200",children:(0,s.jsxs)(em.h,{spacing:4,children:[(0,s.jsx)(eh.z,{variant:"ghost",onClick:i,children:(0,s.jsx)(h.cC,{id:"dEgA5A"})}),(0,s.jsx)(ep.kH,{label:D?(0,s.jsx)(h.cC,{id:"HJo72u"}):(0,s.jsx)(h.cC,{id:"sonTm1"}),shouldWrapChildren:!0,children:(0,s.jsx)(eh.z,{variant:"solid",isDisabled:!P||D,onClick:()=>{var e;if(!P)return;let t=null==b?void 0:null===(e=b.find(e=>e.id===P.id))||void 0===e?void 0:e.createdTime,n=l();if(!n)return;n.commands.setContent(P.content.default,!0);let{annotationsAbsolute:o}=P.content;o?n.commands.restoreAnnotations(o):n.commands.clearAnnotations(),i(),r({title:(0,s.jsx)(h.cC,{id:"7ovf4C"}),description:(0,s.jsx)(h.cC,{id:"DTim6X",values:{GAMMA_ARTIFACT_PROPER_NOUN:K.Yc,0:t?(0,nQ.p6)(t,"PPp"):"selected snapshot"}}),status:"success",duration:5e3,isClosable:!0})},children:(0,s.jsx)(h.cC,{id:"yKu/3Y"})})})]})})]})]})})},oy=e=>{let{doc:t}=e,{isOpen:i,onClose:n,onOpen:r}=(0,t1.M)({id:"snapshotsDrawer"});return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n5.s,{icon:(0,s.jsx)(x.G,{icon:u.SZw,fixedWidth:!0}),onClick:r,children:(0,s.jsx)(h.cC,{id:"6Z5x06"})}),t&&(0,s.jsx)(ob,{doc:t,isOpen:i,onClose:n})]})},ok=()=>{let e=iE();return e?(0,s.jsx)(n5.s,{icon:(0,s.jsx)(x.G,{icon:u.Fzb,fixedWidth:!0}),as:nF.r,href:e,target:(0,ef.Q5)()?"_self":"_blank",children:(0,s.jsx)(h.cC,{id:"7U0bM7"})}):null},ow=e=>{let{editor:t}=e,i=(0,j.useCallback)(()=>{t&&t.commands.undo()},[t]);return(0,s.jsx)(n5.s,{icon:(0,s.jsx)(x.G,{icon:u.paY,fixedWidth:!0}),onClick:i,command:(0,ep.cE)("Mod+Z"),children:(0,s.jsx)(h.cC,{id:"9uI/rE"})})},oE=e=>{let{doc:t,editorWrapperEl:i,scrollingParentSelector:n}=e,{isConnected:r}=(0,v.$gs)(),{user:l}=(0,eY.SE)(),o=(0,eY.py)("view",t),a=(0,eY.py)("edit",t),d=(0,eY.py)("manage",t);(0,ek.O1)();let c=(0,M.CG)(eS.lH);(null==t?void 0:t.id)&&(0,eA.Rh)({site:c,docId:t.id});let{editor:u}=(0,t3._)(),x=(0,M.CG)(L.hN),h=!!l&&!d&&!t.site,m=!!(l&&0!==l.workspaceMemberships.length&&!t.site),p=(0,e7.ye)("docCustomCode")&&a;return r?(0,s.jsxs)(is.q,{zIndex:"popover",maxH:"100vh",minW:"280px",maxW:"360px",overflow:"auto",children:[(0,s.jsxs)(n4.k,{children:[c?(0,s.jsx)(l9,{doc:t,site:c}):(0,s.jsx)(l1,{doc:t}),(0,s.jsx)(n2.R,{}),x&&(0,s.jsx)(ow,{editor:u}),a&&(0,s.jsx)(oy,{doc:t}),t.site&&(0,s.jsx)(rp,{editorWrapperEl:i,scrollingParentSelector:n}),(0,s.jsx)(ok,{}),a&&u&&(0,s.jsx)(sO,{editor:u,withDrawer:!0}),o&&!!l&&(0,s.jsx)(l4,{}),p&&(0,s.jsx)(lJ,{editor:u})]}),c?(0,s.jsx)(n2.R,{}):null,(0,s.jsxs)(n4.k,{children:[c&&(0,s.jsx)(sP,{site:c}),c?null:(0,s.jsx)(n2.R,{}),h&&(0,s.jsx)(lH,{doc:t}),d&&(0,s.jsx)(oa,{doc:t}),m&&(0,s.jsx)(l2,{doc:t,editor:u}),d&&(0,s.jsx)(re,{site:c}),!t.site&&d?(0,s.jsx)(lX,{doc:t}):null]})]}):(0,s.jsxs)(is.q,{zIndex:"popover",maxH:"100vh",minW:"280px",overflow:"auto",children:[c?(0,s.jsx)(sP,{site:c}):(0,s.jsx)(l1,{doc:t}),(0,s.jsx)(oS,{})]})},oS=()=>(0,s.jsx)(is.q,{zIndex:"popover",maxH:"100vh",minW:"280px",overflow:"auto",children:(0,s.jsx)(t6.V,{label:(0,s.jsx)(h.cC,{id:"IdcoRx"}),isConnected:!1,maxWidth:"300px"})}),oI=e=>{let{isDisabled:t,onClick:i,isPublishing:n}=e;return(0,s.jsx)(ep.kH,{placement:"top",label:(0,s.jsx)(h.cC,{id:"Bq2yPr"}),shouldWrapChildren:!0,isDisabled:!t,children:(0,s.jsx)(n5.s,{icon:(0,s.jsx)(d.xu,{children:(0,s.jsx)(x.G,{icon:u.PQh,fixedWidth:!0})}),onClick:i,closeOnSelect:!1,isDisabled:n||t,children:(0,s.jsxs)(o.k,{direction:"row",w:"100%",justify:"space-between",align:"center",children:[(0,s.jsx)(h.cC,{id:"jNnwuI"}),n&&(0,s.jsx)(tu.$,{size:"xs"})]})})})},o_=e=>{let{title:t,path:i}=e;return(0,s.jsxs)(s.Fragment,{children:[t?"".concat(t," "):"",i&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(sH.E,{as:"span",fontFamily:"mono",children:i})," "]})]})},oA=e=>{let{onClose:t,doc:i,site:n,path:r}=e,{push:l}=(0,eg.useRouter)(),[o,{loading:d}]=(0,v.nRC)(),c=(0,iJ.p)(),u=(0,M.CG)(eS.B$),x=(0,j.useCallback)(async()=>{if((null==i?void 0:i.id)&&n){if(await o({variables:{id:i.id},refetchQueries:["GetSite","GetDoc"]}),c({title:(0,s.jsx)(h.cC,{id:"oMgC5V"}),description:(0,s.jsx)(h.cC,{id:"gw6aHP",components:{0:(0,s.jsx)(o_,{title:null==i?void 0:i.title,path:r})}}),status:"success",duration:1e4,position:"top",isClosable:!0}),u===i.id){let e=(0,ev.hm)({site:n,docId:i.id});e&&await l(e)}t()}},[null==i?void 0:i.id,null==i?void 0:i.title,n,u,o,c,r,t,l]);return(0,s.jsx)(ep.Wk,{isDark:!1,children:(0,s.jsxs)(n9.u_,{onClose:t,isOpen:!0,size:"xl",children:[(0,s.jsx)(t_.Z,{}),(0,s.jsxs)(n6.h,{children:[(0,s.jsx)(n7.x,{children:(0,s.jsx)(h.cC,{id:"kbKU/5"})}),(0,s.jsx)(tT.o,{isDisabled:d}),(0,s.jsx)(tO.f,{children:(0,s.jsxs)(tc.K,{spacing:4,children:[(0,s.jsx)(a.x,{children:(0,s.jsx)(h.cC,{id:"YOtIqx",values:{0:null==i?void 0:i.title,1:r&&(0,s.jsx)(sH.E,{as:"span",fontFamily:"mono",colorScheme:"blackAlpha",children:r})}})}),(0,s.jsx)(a.x,{color:"red.500",children:(0,s.jsx)(h.cC,{id:"2xOCJW"})})]})}),(0,s.jsx)(tP.m,{children:(0,s.jsxs)(em.h,{children:[(0,s.jsx)(eh.z,{variant:"ghost",onClick:t,children:(0,s.jsx)(h.cC,{id:"dEgA5A"})}),(0,s.jsx)(eh.z,{variant:"ghost",colorScheme:"red",onClick:x,isLoading:d,children:(0,s.jsx)(h.cC,{id:"O1M1zi"})})]})})]})]})})},oT=e=>{var t;let{site:i,doc:n,path:r}=e,{isOpen:l,onOpen:o,onClose:a}=(0,w.q)({id:"confirm-remove-page-modal"}),c=(null==i?void 0:i.routes)&&(null==i?void 0:null===(t=i.routes)||void 0===t?void 0:t.length)>1;return(0,s.jsxs)(s.Fragment,{children:[l&&(0,s.jsx)(oA,{site:i,doc:n,path:r,onClose:a}),(0,s.jsx)(ep.kH,{placement:"top",isDisabled:c,label:(0,s.jsx)(h.cC,{id:"PBFhJK"}),shouldWrapChildren:!0,children:(0,s.jsx)(n5.s,{color:"red.500",isDisabled:!c,icon:(0,s.jsx)(d.xu,{children:(0,s.jsx)(x.G,{icon:u.XAH,fixedWidth:!0})}),onClick:o,children:(0,s.jsx)(h.cC,{id:"cnGeoo"})})})]})},oO=e=>{let{site:t,doc:i,route:n,isTopToolbar:r=!1,hasChanges:l,onToggleOffline:o,...a}=e,{openPageSetup:c}=(0,tS.AA)(),{editor:m}=(0,t3._)(),{replace:p}=(0,eg.useRouter)(),{isConnected:g}=(0,v.$gs)(),j=(null==i?void 0:i.id)&&(0,eA.Rh)({site:t,docId:i.id}),{publishDoc:f,isPublishing:C}=i4({doc:i,site:t,path:j}),b=(0,eA.Vr)(t),y=(0,M.CG)(L.yx),k=(0,eY.py)("edit",y),w=(0,eY.py)("edit",y),E=(0,eY.py)("manage",y),S=(0,ek.O1)(),I=(0,M.CG)(L.hN);return g?(0,s.jsx)(nJ.h,{children:i&&(0,s.jsxs)(is.q,{...a,zIndex:"popover",maxH:"100vh",minW:"280px",maxW:"380px",overflow:"auto",children:[(0,s.jsx)(l9,{doc:i,site:t,showCreatedInfo:!0}),(0,s.jsx)(n2.R,{}),S&&!n.offline&&(l||C)&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(oI,{onClick:f,isDisabled:!b,isPublishing:C}),(0,s.jsx)(n2.R,{})]}),!!o&&(0,s.jsx)(n5.s,{onClick:o,icon:(0,s.jsx)(d.xu,{children:(0,s.jsx)(x.G,{icon:n.offline?u.gMD:u.uoY,fixedWidth:!0})}),children:n.offline?(0,s.jsx)(h.cC,{id:"i/zQgj"}):(0,s.jsx)(h.cC,{id:"ySCSAn"})}),(0,s.jsx)(n5.s,{icon:(0,s.jsx)(d.xu,{children:(0,s.jsx)(x.G,{icon:iR.sl_,fixedWidth:!0})}),onClick:()=>{let e=(0,ev.yQ)({docId:i.id,preview:!0});p(e,void 0,{shallow:!0})},children:(0,s.jsx)(h.cC,{id:"rdUucN"})}),(0,s.jsx)(n2.R,{}),w&&m&&(0,s.jsx)(sO,{onClick:()=>c(n.docId,"cards"),withDrawer:r,editor:m}),w&&m&&(0,s.jsx)(sO,{icon:(0,s.jsx)(x.G,{icon:u.Lc0,fixedWidth:!0}),onClick:()=>c(n.docId,"preview"),label:(0,s.jsx)(h.cC,{id:"hInFGi"}),editor:m}),I&&r&&(0,s.jsx)(ow,{editor:m}),k&&r&&(0,s.jsx)(oy,{doc:i}),E&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n2.R,{}),(0,s.jsx)(oT,{site:t,doc:i,path:j})]})]})}):(0,s.jsx)(oS,{})};var oP=i(83669);let oD=e=>{if(!e)return{path:"untitled-page",title:m.ag._({id:"kveQAJ"})};let t=e.filter(e=>e.path.startsWith("/untitled-page"));if(0===t.length)return{title:m.ag._({id:"kveQAJ"}),path:"untitled-page"};let i=Math.max(...e.map(e=>{let[t,i]=e.path.match(/^\/untitled-page-?(\d+)/)||["","1"];return Number(i)}));return{title:m.ag._({id:"kveQAJ"})+" "+String(i+1),path:"untitled-page-".concat(i+1)}},oR=e=>{let{site:t}=e,i=(0,oP.b)(),{isOpen:n,onClose:r,onOpen:l}=(0,t1.M)({id:"add-page-ai-modal"}),[o,d]=(0,j.useState)(!1),c=(0,j.useCallback)(()=>{l()},[l]),p=(0,j.useCallback)(()=>{let{path:e}=oD(null==t?void 0:t.routes);d(!0),i({path:(0,eA.Is)(e),siteId:null==t?void 0:t.id,routes:null==t?void 0:t.routes}).then(()=>{d(!1)})},[i,null==t?void 0:t.id,null==t?void 0:t.routes]);return(0,s.jsxs)(ir.v,{children:[(0,s.jsx)(ep.kH,{label:m.ag._({id:"yLRlZm"}),placement:"bottom",children:(0,s.jsx)(il.j,{as:I.h,isRound:!0,size:"xs",isLoading:o,onFocus:e=>e.preventDefault(),"data-testid":"add-page",icon:(0,s.jsx)(x.G,{icon:u.r8p}),sx:{span:{flexGrow:0}}})}),(0,s.jsx)(nJ.h,{children:(0,s.jsx)(is.q,{maxW:"350px",zIndex:"tooltip",children:(0,s.jsxs)(n4.k,{title:m.ag._({id:"yLRlZm"}),children:[(0,s.jsx)(n5.s,{icon:(0,s.jsx)(x.G,{icon:iR.JyM,fixedWidth:!0}),onClick:c,children:(0,s.jsxs)(ex.U,{align:"flex-start",children:[(0,s.jsxs)(tc.K,{spacing:0,children:[(0,s.jsx)(a.x,{children:(0,s.jsx)(h.cC,{id:"OppH33"})}),(0,s.jsx)(a.x,{fontSize:"xs",color:"gray.500",children:(0,s.jsx)(h.cC,{id:"P/o+t+"})})]}),(0,s.jsx)(nX.L,{}),(0,s.jsx)(lV.C,{h:"fit-content",colorScheme:"trueblue",ml:2,children:(0,s.jsx)(h.cC,{id:"jsQZMk"})})]})}),(0,s.jsx)(n5.s,{icon:(0,s.jsx)(x.G,{icon:u.r8p,fixedWidth:!0}),onClick:p,children:(0,s.jsxs)(tc.K,{spacing:0,children:[(0,s.jsx)(a.x,{children:(0,s.jsx)(h.cC,{id:"SSZKB9"})}),(0,s.jsx)(a.x,{fontSize:"xs",color:"gray.500",children:(0,s.jsx)(h.cC,{id:"S65lUr"})})]})})]})})}),(0,s.jsx)(nn,{isOpen:n,onClose:r})]})},oN=e=>{if(!e)return{path:"untitled-page",title:m.ag._({id:"kveQAJ"})};let t=e.filter(e=>e.path.startsWith("/untitled-page"));if(0===t.length)return{title:m.ag._({id:"kveQAJ"}),path:"untitled-page"};let i=Math.max(...e.map(e=>{let[t,i]=e.path.match(/^\/untitled-page-?(\d+)/)||["","1"];return Number(i)}));return{title:m.ag._({id:"kveQAJ"})+" "+String(i+1),path:"untitled-page-".concat(i+1)}},oG=e=>{let{isOpen:t,onClose:i,site:n}=e,r=(0,oP.b)(),[l,o]=(0,j.useState)(()=>oN(null==n?void 0:n.routes).title),[d,c]=(0,j.useState)(()=>oN(null==n?void 0:n.routes).path),u=(0,j.useRef)(null),[x,p]=(0,j.useState)(!1),g=(null==n?void 0:n.routes.map(e=>e.path))||[],f=g.includes("/".concat(d)),v=(0,eu.ff)("gray.900","gray.50"),C=(0,j.useCallback)(()=>{x||f||(p(!0),r({title:l,path:(0,eA.Is)(d),siteId:null==n?void 0:n.id,routes:null==n?void 0:n.routes}).then(()=>{p(!1),i()}))},[r,f,x,i,d,null==n?void 0:n.id,null==n?void 0:n.routes,l]);return((0,j.useEffect)(()=>{t&&setTimeout(()=>{u.current&&u.current.select()},50)},[t]),n)?(0,s.jsxs)(n9.u_,{isOpen:t,onClose:i,size:"xl",children:[(0,s.jsx)(t_.Z,{}),(0,s.jsxs)(n6.h,{color:v,children:[(0,s.jsx)(n7.x,{children:(0,s.jsxs)(tc.K,{children:[(0,s.jsx)(a.x,{children:(0,s.jsx)(h.cC,{id:"yLRlZm"})}),(0,s.jsx)(a.x,{fontSize:"sm",color:"gray.500",fontWeight:"normal",letterSpacing:"normal",children:(0,s.jsx)(h.cC,{id:"7TUZvz"})})]})}),(0,s.jsx)(tT.o,{}),(0,s.jsx)(tO.f,{children:(0,s.jsxs)(tc.K,{spacing:4,children:[(0,s.jsxs)(ns.NI,{children:[(0,s.jsxs)(ex.U,{justifyContent:"center",children:[(0,s.jsx)(no.l,{flex:"1",children:(0,s.jsx)(h.cC,{id:"MHrjPM"})}),(0,s.jsx)(sg,{length:l.length||0,idealLength:sC.si,maxLength:sC.S8})]}),(0,s.jsx)(sp.I,{ref:u,value:l,onChange:e=>{o(e.target.value),c((0,sk.IR)(e.target.value))},_placeholder:{opacity:1,color:"gray.500"},onKeyDown:e=>{"Enter"===e.key&&C()}})]}),(0,s.jsxs)(ns.NI,{isInvalid:f,children:[(0,s.jsx)(ex.U,{justifyContent:"center",children:(0,s.jsx)(no.l,{flex:"1",children:(0,s.jsx)(h.cC,{id:"dq8+qI"})})}),(0,s.jsxs)(iP.B,{children:[(0,s.jsx)(sb.Ui,{children:"/"}),(0,s.jsx)(sp.I,{fontFamily:"mono",value:d,onKeyDown:e=>{"Enter"===e.key&&C()},onChange:e=>{c((0,sk.IR)(e.target.value))},placeholder:m.ag._({id:"bTzMt5"}),_placeholder:{opacity:1,color:"gray.500"}})]}),f&&!x&&(0,s.jsx)(lB.J1,{children:(0,s.jsx)(h.cC,{id:"hw1fjn"})})]})]})}),(0,s.jsx)(tP.m,{children:(0,s.jsxs)(em.h,{children:[(0,s.jsx)(eh.z,{colorScheme:"gray",variant:"ghost",onClick:i,children:(0,s.jsx)(h.cC,{id:"dEgA5A"})}),(0,s.jsx)(eh.z,{onClick:C,isDisabled:f,variant:"solid",isLoading:x,children:(0,s.jsx)(h.cC,{id:"yLRlZm"})})]})})]})]}):(0,s.jsx)(s.Fragment,{})},oz=e=>{let{site:t}=e,{isOpen:i,onClose:n,onOpen:r}=(0,w.q)();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(d.xu,{bgColor:"gray.50",textAlign:"center",p:4,m:2,children:[(0,s.jsx)(a.x,{fontSize:"sm",children:(0,s.jsx)(h.cC,{id:"6TCEnS"})}),(0,s.jsx)(a.x,{fontSize:"sm",mt:2,fontWeight:"bold",children:(0,s.jsx)(nF.r,{color:"trueblue.600",href:"#",onClick:r,children:(0,s.jsx)(h.cC,{id:"S0WoXy"})})})]}),i&&(0,s.jsx)(oG,{isOpen:i,onClose:n,site:t})]})},oM=e=>{let{icon:t,isSelected:i,children:n,href:r}=e,l=(0,j.useRef)(null),o=(0,eu.ff)("gray.600","gray.50"),a=(0,eu.ff)("trueblue.50","whiteAlpha.100"),c=(0,eu.ff)("gray.900","gray.50"),u=(0,eu.ff)("blackAlpha.50","whiteAlpha.100"),x=(0,eu.ff)("gray.600","gray.50"),h=(0,eu.ff)("trueblue.400","trueblue.200");(0,j.useEffect)(()=>{if(!i||!(null==l?void 0:l.current))return;let{inView:e}=(0,eU.v4)(l.current)||{};e||l.current.scrollIntoView()},[i]);let m=(0,j.useCallback)(e=>{e.target.closest('[data-id="sidebar-item-menu-button"]')&&e.preventDefault(),e.target.closest('[data-id="sidebar-item-menu-list"]')&&e.stopPropagation()},[]);return(0,s.jsx)(iC(),{href:r,passHref:!0,shallow:!0,children:(0,s.jsx)(eh.z,{ref:l,onClick:m,variant:"ghost",justifyContent:"flex-start",fontWeight:"500",w:"100%",size:"sm",color:i?c:o,bgColor:i?a:"transparent",_hover:{bgColor:i?a:u,color:i?c:x},h:"auto",py:1.5,px:2,role:"group",children:(0,s.jsxs)(ex.U,{alignItems:"start",justify:"flex-start",w:"100%",spacing:2,children:[(0,s.jsx)(d.xu,{color:i?h:o,mt:"0.2em",w:4,children:t}),(0,s.jsx)(tc.K,{flex:1,direction:"row",minW:0,align:"start",justifyContent:"flex-start",children:n})]})})})},oL=e=>{let{title:t,children:i}=e;return(0,s.jsxs)(ex.U,{justify:"space-between",children:[(0,s.jsx)(a.x,{fontSize:"sm",fontWeight:"600",px:1,py:1.5,color:"gray.500",children:t}),i&&i]})},oF=(e,t,i)=>i?(0,s.jsx)(tu.$,{size:"xs"}):e?(0,s.jsx)(x.G,{icon:u.t22,fixedWidth:!0}):t?(0,s.jsx)(x.G,{icon:u.BKg,fixedWidth:!0}):(0,s.jsx)(x.G,{icon:u.gMD,fixedWidth:!0}),oU=e=>{let{site:t,isSelected:i,doc:n,route:r,hasChanges:l,onToggleOffline:o}=e,a=(0,eu.ff)("trueblue.50","whiteAlpha.200"),c=(0,eu.ff)("trueblue.100","whiteAlpha.200");return(0,s.jsx)(ir.v,{modifiers:[{name:"flip",enabled:!0,options:{fallbackPlacements:["right"]}}],children:e=>{let{isOpen:h}=e;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(il.j,{"data-id":"sidebar-item-menu-button",ml:3,as:I.h,isRound:!0,variant:"ghost",py:2,size:"xs",_hover:{bgColor:i?c:a},icon:(0,s.jsx)(d.xu,{className:"ellipsis-icon",transitionProperty:"common",transitionDuration:"normal",_groupHover:{opacity:1},_hover:{opacity:1},_active:{opacity:1},opacity:h?1:0,children:(0,s.jsx)(x.G,{icon:u.S6C,fixedWidth:!0})})}),(0,s.jsx)(nJ.h,{children:(0,s.jsx)(oO,{site:t,doc:n,route:r,hasChanges:l,"data-id":"sidebar-item-menu-list",onToggleOffline:o})})]})}})},oW=e=>{var t;let{route:i,isHome:n,isSelected:r}=e,{docId:l,doc:d}=i,c=(0,tr.gF)(),u=(0,M.CG)(eS.lH),x=(0,M.CG)((0,eS.hZ)(l)),m=(0,j.useRef)(null),p=(0,M.CG)(eS.B$),[g,{loading:f}]=(0,v.qbt)(),C=oF(n,x,f),b="currentColor",y=(0,eu.ff)("gray.500","gray.400"),k=(0,eu.ff)("trueblue.400","trueblue.200"),w=(0,j.useCallback)(async()=>{if(!(null==d?void 0:d.id)||!u)return;let e=!(null==i?void 0:i.offline);await g({variables:{input:{siteId:u.id,docId:d.id,offline:e,path:null==i?void 0:i.path}}})},[null==d?void 0:d.id,i,g,u]);(0,j.useEffect)(()=>{if(!m.current||p!==l)return;let{inView:e}=(0,eU.v4)(m.current)||{};e||m.current.scrollIntoView()},[p,l]);let E=(0,ev.yQ)({docId:l});return(0,s.jsxs)(oM,{icon:C,"data-sidebar-doc":l,isSelected:r,href:E,children:[(0,s.jsxs)(tc.K,{flex:1,spacing:"3px",alignItems:"flex-start",justifyContent:"flex-start",w:"100%",minW:0,children:[(0,s.jsx)(a.x,{textAlign:"left",color:r?k:b,noOfLines:2,maxW:"100%",whiteSpace:"normal",children:(0,l0.$)(null===(t=i.doc)||void 0===t?void 0:t.title)}),(0,s.jsxs)(ex.U,{color:y,children:[x&&!i.offline?(0,s.jsx)(ep.kH,{label:(0,s.jsxs)(tc.K,{spacing:1,children:[(0,s.jsx)(a.x,{children:(0,s.jsx)(h.cC,{id:"cFW7WD"})}),(0,s.jsx)(a.x,{fontSize:"xs",color:"whiteAlpha.700",children:(0,s.jsx)(h.cC,{id:"qliBJ3"})})]}),placement:"top",children:(0,s.jsx)(o.k,{bg:r?k:b,minW:1.5,minH:1.5,borderRadius:"full"})}):null,(0,s.jsx)(a.x,{mt:"-1px",textAlign:"left",noOfLines:1,fontFamily:n?void 0:"mono",fontSize:"xs",whiteSpace:"normal",wordBreak:"break-all",children:n?(0,s.jsx)(h.cC,{id:"i0qMbr"}):i.path})]})]}),w&&c&&u&&(0,s.jsx)(oU,{site:u,doc:d,route:i,hasChanges:x,isSelected:r,onToggleOffline:w})]})},oH=()=>{let e=(0,M.CG)(eS.lH),{openSiteSettings:t}=(0,tS.AA)(),i=(0,M.CG)(eS.B$),{onlineRoutes:n,offlineRoutes:r}=(0,j.useMemo)(()=>{let t=(null==e?void 0:e.routes)?[...e.routes]:[],i=t.sort(function(e,t){return e.path<t.path?-1:e.path>t.path?1:0}).sort((e,t)=>"/"===e.path?-1:"/"===t.path?1:0);return{onlineRoutes:i.filter(e=>!e.offline),offlineRoutes:i.filter(e=>e.offline)}},[null==e?void 0:e.routes]);return e?(0,s.jsxs)(tc.K,{spacing:2,w:"100%",p:0,children:[(0,s.jsx)(n1,{context:"pages",openSiteSettings:()=>t("website")}),(0,s.jsxs)(oL,{title:(0,s.jsx)(h.cC,{id:"wRR604"}),children:[(0,s.jsx)(nX.L,{}),(0,s.jsx)(oR,{site:e})]}),(0,s.jsxs)(tc.K,{spacing:1,px:0,children:[0===n.length&&(0,s.jsx)(oz,{site:e}),n.map(e=>{let t=e.docId===i;return(0,s.jsx)(oW,{route:e,isHome:"/"===e.path,isSelected:t},e.id)}),r.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(oL,{title:(0,s.jsx)(h.cC,{id:"1DdXjE"})}),r.map(e=>{let t=e.docId===i;return(0,s.jsx)(oW,{route:e,isHome:"/"===e.path,isSelected:t},e.id)})]})]})]}):(0,s.jsx)(s.Fragment,{})},oV=()=>{let e=(0,eT.Yy)();return(0,s.jsx)(ep.Wk,{isDark:e,children:(0,s.jsx)(e$.s,{bg:e?"gray.900":"white",borderRight:"1px solid",borderColor:e?"gray.800":"gray.200","data-panelid":"pages-panel",overflowX:"hidden",px:6,pt:4,children:(0,s.jsx)(oH,{})})})};oV.panelPosition="left";var oB=i(11093);let oK=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"body",i=(0,M.TL)(),n=(0,eU.As)("editor"),r=X(),l=(0,M.CG)(L.yn,e2()),s=(0,M.CG)(L.k8,e2()),o=!!(null==s?void 0:s.pos);(0,j.useEffect)(()=>{if(!e)return;let t=eE()(()=>{l&&i((0,L.Qx)({attached:!1}))},500,{leading:!0}),n=(0,eH.B$)({topOffset:100,requiredCookie:"spotlightScrollDebug=true"});return document.addEventListener("wheel",t,!0),()=>{n(),t.cancel(),document.removeEventListener("wheel",t,!0)}},[e,i,l,o,t]);let a=(0,M.CG)(L.ks,e2());(0,j.useEffect)(()=>{if(!e||a)return;let t=eE()(()=>{if(n.inProgress)return;let t=(0,oB.lI)(e,100,r);if(!t){console.debug("[useHandleScrollAndSelectionChange][handleScroll] Unable to find topPosPct.");return}i((0,L.Us)(t))},250,{trailing:!0,maxWait:500}),l=eE()(()=>{let t=e.state.selection;if(t instanceof ro.c)return;let r=document.querySelector(n.scrollSelector||""),l=null==r?void 0:r.getBoundingClientRect(),s=e.state.selection.from,o=(0,oB.Sh)(e,s);if(!r||!l||!o){console.debug("[useHandleScrollAndSelectionChange][handleSelectionChange] missing data",{domNodeToUse:o});return}let a=o.getBoundingClientRect(),d=e.view.coordsAtPos(s),c=parseFloat(((d.top-a.y)/a.height).toFixed(2));i((0,L.Us)({pos:s,pct:c}))},250,{trailing:!0,maxWait:500});return t(),e.on("selectionUpdate",l),window.addEventListener("scroll",t,!0),()=>{e.off("selectionUpdate",l),window.removeEventListener("scroll",t,!0)}},[e,i,n,a,r])},oq=()=>{let e=(0,iJ.p)(),t=(0,M.TL)(),i=(0,j.useCallback)(i=>{let{collaborator:n,localIsFollowing:r,localIsAttached:l}=i,d={attached:!0};r?l?d.following=null:e.closeAll():(d.following=n.sessionId,e.closeAll(),e({duration:2e3,position:"bottom",render:function(){return(0,s.jsxs)(o.k,{bg:"gray.50",p:3,px:6,align:"center",borderRadius:"md",shadow:"md",children:[(0,s.jsx)(r5.q,{size:"sm",src:n.profileImageUrl,border:"solid 2px ".concat(n.color),color:r_()(n.color).isDark()?"white":"black",bg:n.color}),(0,s.jsx)(a.x,{ml:2,children:(0,s.jsx)(h.cC,{id:"lULvWe",values:{0:n.name}})})]})}})),console.debug("[CollaboratorsPanel] Clicked on collaborator ".concat(n.name,". Setting following to ").concat(d)),t((0,L.Qx)(d))},[e,t]);return i},oY=e=>{let{editor:t,collaborators:i,user:n}=e,r=(0,j.useRef)(!1),l=oq(),s=new URLSearchParams(window.location.search),o=s.get("following_id"),a=s.get("follow_on_start");(0,j.useEffect)(()=>{if(r.current||!a||(null==n?void 0:n.id)===o||!t)return;let e=i.find(e=>e.id===o);e&&(l({collaborator:e,localIsAttached:!1,localIsFollowing:!1}),r.current=!0)},[o,a,t,i,n,l])},oZ="sessionId1",oJ=eM.hj.create({addStorage:()=>({user:{}}),addCommands(){return{user:e=>()=>{let t=(0,M.bh)();return this.storage.user=nL()({},this.storage.user,e),t.dispatch((0,L.MU)({sessionId:oZ})),t.dispatch((0,L.Tx)({collaborators:[this.storage.user]})),!0}}}}),oX=e=>{var t;let{docId:i,snapshotId:n,scrollingParentSelector:r,onCreate:l,theme:a,hideMadeWithGammaBadge:c=!1}=e,[u]=(0,j.useState)(()=>[tp.F,nB.$1.configure({scrollerSelector:r}),oJ,nV._g]),{user:x,isUserLoading:h,anonymousUser:m,color:p}=(0,eY.SE)(),[g,f]=(0,j.useState)(),{data:C,loading:b,error:y}=(0,v.EDv)({variables:{docId:i,snapshotId:n},skip:!n}),k=(0,M.CG)(tk.yx);(0,j.useEffect)(()=>{!h&&g&&g.commands.user({id:(null==x?void 0:x.id)||m.id,color:p.value,sessionId:oZ,idleSince:null,name:(null==x?void 0:x.displayName)||m.displayName||"",profileImageUrl:(null==x?void 0:x.profileImageUrl)||"",isReady:!h})},[g,x,p,h,m]);let w=C&&void 0!==C.snapshot&&!b&&k;return(0,s.jsxs)(d.xu,{"data-testid":"public-static-editor-wrapper",flex:"1",height:"100%",children:[!w||y?(0,s.jsxs)(o.k,{direction:"column",height:"100%",flex:"1",bg:"gray.100",alignItems:"center",justifyContent:"center",children:[!w&&(0,s.jsx)(tu.$,{}),y&&(0,s.jsxs)(td.M,{h:"100%",children:["There was an error loading this ",K.Yc,":"," ",y.message]})]}):(0,s.jsx)(d.xu,{"data-testid":"public-static-editor-wrapper-inner",transitionProperty:"common",transitionDuration:"750ms",transitionTimingFunction:"ease-out",opacity:w?1:0,children:(0,s.jsx)(eO.yE,{doc:k,editorId:"main",docId:i,theme:a||void 0,extensions:u,onCreate:e=>{let{editor:t}=e;f(t),setTimeout(()=>{l&&l(t)},10)},readOnly:!0,initialContent:null===(t=C.snapshot)||void 0===t?void 0:t.content.default,scrollingParentSelector:r})}),g&&(0,s.jsx)(eq,{editor:g,backoffFactor:2}),!c&&(0,s.jsx)(nK.m,{docWorkspace:null==k?void 0:k.organization})]})},oQ={[eV.q.DOC_VIEW]:"doc",[eV.q.SLIDE_VIEW]:"present"},o$=e=>{let t=(0,f.I0)(),i=(0,ev.SJ)(),n=i.mode,r=(0,M.CG)(L.gh),l=(0,j.useCallback)(e=>{let t=e||r,{mode:i}=(0,ev.SJ)(),n=oQ[t];i!==n&&(0,nE.lO)({query:{...(0,ev.SJ)(),mode:n},emitChange:!1})},[r]);(0,ri.r)(l,[r]),(0,j.useEffect)(()=>nE.fI.on("changed",()=>l()),[l]),(0,tr.vm)(function(){if(!e)return;let i=n===oQ.SLIDE_VIEW?eV.q.SLIDE_VIEW:eV.q.DOC_VIEW,{cardId:r}=(0,ev.sY)();i===eV.q.SLIDE_VIEW&&(r?(console.debug("[useQuerySync] initializeModeFromQuery - Entering slide view -> spotlightCardById:",r),e.commands.spotlightCardById(r)):(console.debug("[useQuerySync] initializeModeFromQuery - Entering slide view -> spotlightCurrentCard"),e.commands.spotlightCurrentCard())),t((0,L.PM)({mode:i})),l(i)},[e,t,n,l],[e])};var o0=i(58184);let o1=e=>{let t=(0,M.CG)(L.uD),i=(0,M.CG)(L.e0),{handlePresentNavigationEvent:n}=(0,o0._)(sf.R0.PRESENTER_VIEW_POPUP);(0,j.useEffect)(()=>{if(!t)return;let r=t=>{let{payload:r}=t;if(e)try{let e=JSON.parse(r),{payload:t}=e,{action:l,eventKey:s,method:o,toSessionId:a,fromUserId:d}=t;if(a!==(null==i?void 0:i.sessionId)||d!==(null==i?void 0:i.id))return;switch(l){case"goToCard":{let{cardId:e}=t;if(!e)break;n({eventType:l,eventKey:s,method:o,payload:{cardId:e}});break}case"toggleSpotlight":case"arrowRight":case"arrowLeft":case"arrowDown":case"arrowUp":case"restart":case"toggleExpanded":case"cancelCurrentAction":n({eventType:l,eventKey:s,method:o});break;default:console.warn("[usePresenterViewMessages] Unknown message type",t)}}catch(e){console.error("[usePresenterViewMessages] Error parsing message",e)}};return t.on("stateless",r),()=>{t.off("stateless",r)}},[e,null==i?void 0:i.sessionId,null==i?void 0:i.id,n,t])};var o2=i(48105),o5=i(75692),o4=i(63176),o3=i(19376),o9=i(5365),o6=i(6185),o7=i.n(o6),o8=i(68642),ae=i(27875),at=i.n(ae),ai=i(93814);let an={easeOutLinear:rA.gA,easeOutSine:rA.vh,easeOutCubic:rA.w2,easeOutCirc:rA.ei,easeOutQuad:rA.hl,easeOutQuart:rA.Y3,easeOutExpo:rA.ad,bezierCustom1:o7()(.13,.97,.035,.73),bezierCustom2:o7()(.105,1.15,.15,.355)},ar={UP:"up",DOWN:"down"},al=e=>e?+new Date-+new Date(e):1/0,as=(e,t)=>{let i=(0,j.useMemo)(()=>new o8.Lethargy(6,120,.3,150),[]),{easing:n="easeOutCubic",touchpadFactor:r=1.5,triggerThreshold:l=1200}=t||{},s=(0,eU.As)("editor"),o=(0,M.CG)(L.i2),a=(0,j.useRef)(null),d=(0,j.useRef)(null),c=(0,j.useRef)(null),u=(0,j.useRef)(!1),x=(0,j.useRef)(null),h=(0,j.useRef)(null),[m,p]=(0,j.useState)(!1),[g,f]=(0,j.useState)(!1),v=(0,j.useRef)({counterTarget:0,counterCurrent:0,direction:ar.DOWN}),C=(0,j.useCallback)(()=>{var e;if(!a.current)return;let{counterTarget:t}=v.current,i=t/l*100,n=(null!=i?i:0)*2.64,r="".concat(n," ").concat(264-n),s=null===(e=a.current.querySelector(".chakra-progress"))||void 0===e?void 0:e.lastElementChild,o=a.current.querySelector(".chakra-progress__indicator");o&&o.setAttribute("stroke-dasharray",r),s&&(s.innerHTML="".concat(i.toFixed(0),"%"))},[l]),b=(0,j.useCallback)(()=>{let e=c.current,t=d.current;if(!t||!e)return;let i=e.querySelector(".chakra-progress__indicator"),r=t.querySelector(".chakra-progress__indicator");if(!i||!r)return;let s=v.current.counterCurrent/l,o=550>al(h.current),a=(o?1:null!=s?s:0)*264,u="".concat(a," ").concat(264-a),x=56*an[n](Math.min(s,1)),m=Math.max(56-x,0);e.style.transform="translateY(".concat(m,"px)"),t.style.transform="translateY(-".concat(m,"px)"),r.setAttribute("stroke-dasharray",u),i.setAttribute("stroke-dasharray",u)},[n,l]),y=(0,j.useCallback)(()=>{let e;if(u.current)return;let t=i=>{let n=e?i-e:0;e=i;let r=v.current.counterTarget-v.current.counterCurrent;if(.1>Math.abs(r)){v.current.counterCurrent=v.current.counterTarget,b(),u.current=!1;return}v.current.counterCurrent=(0,rA.t7)(v.current.counterCurrent,v.current.counterTarget,at()(.3*(60/(n?1e3/n:60)),.3,1)),b(),requestAnimationFrame(t)};requestAnimationFrame(t)},[b]),k=(0,j.useCallback)(()=>{v.current.counterTarget=0,p(!1),f(!1),C(),y()},[y,C]);return(0,j.useEffect)(()=>{let t,n;if(!o||!e)return k();let a=document.querySelector((0,ai.U8)(o));if(!a)return k();let u=t=>{if(t.target.closest("[data-comments-wrapper]"))return;let o=i.check(t);if(null===c.current||null===d.current)return;let a=al(x.current);if(a<500||a<1e3&&!1===o)return;let u=al(h.current);if(u<500||u<1e3&&!1===o)return;let m=0===Math.abs(t.deltaY)?v.current.direction:t.deltaY>0?ar.DOWN:ar.UP,g="down"===m?s.isAtBottom():s.isAtTop();if(!g)return;clearTimeout(n);let j=t.wheelDeltaY?t.wheelDeltaY===-3*t.deltaY:0===t.deltaMode,b=Math.abs(void 0!==t.deltaY?t.deltaY:40),w=b*(j?r:1);if(m!==v.current.direction){v.current.direction=m,k();return}f(m===ar.DOWN),p(m===ar.UP),v.current.counterTarget+=w,v.current.direction=m;let E=v.current.counterTarget/l;E>=1?(e.commands.spotlightNextCard(m===ar.UP,m===ar.UP?"bottom":"top"),h.current=+new Date,setTimeout(()=>{k(),C()},250),setTimeout(()=>{h.current=null},1e3)):n=setTimeout(k,500),y(),C()},m=()=>{x.current=+new Date,clearTimeout(t),k(),t=setTimeout(()=>{x.current=null},1e3)};return a.addEventListener("scroll",m),a.addEventListener("wheel",u,{passive:!0}),C(),()=>{a.removeEventListener("scroll",m),a.removeEventListener("wheel",u)}},[e,i,y,n,r,l,s,C,b,k,o]),{debugRef:a,nextCardRef:c,prevCardRef:d,showNextCard:g,showPrevCard:m}},ao=e=>{let{editor:t}=e,i=(0,e7.ye)("debugLogging"),[n,r]=(0,j.useState)("easeOutExpo"),[l,o]=(0,j.useState)(1.5),[a,d]=(0,j.useState)(1200),{debugRef:c,nextCardRef:u,prevCardRef:x,showNextCard:h,showPrevCard:m}=as(t,{easing:n,touchpadFactor:l,triggerThreshold:a}),{prevCard:p,nextCard:g}=(0,M.CG)(e=>{let t=(0,L.i2)(e)||"",i=(0,L.X9)(e),n=i.parents[t]||[],r=n.reduce((e,t)=>e[t],i.tree),l=Object.keys(r),s=null,o=null;return l.forEach((e,n)=>{if(e!==t)return;let r=i.parents[t];0===n?r.length&&(s={cardId:r[r.length-1],isSibling:!1}):s={cardId:l[n-1],isSibling:!0},n===l.length-1?r.length&&(o={cardId:r[r.length-1],isSibling:!1}):o={cardId:l[n+1],isSibling:!0}}),{prevCard:s,nextCard:o}},e2()),f=null==g?void 0:g.cardId,v=null==p?void 0:p.cardId,C=(0,j.useMemo)(()=>{let e=null,i=null;return t&&t.state.doc.descendants(t=>!(0,eW.KH)(t)||(t.attrs.id===v?e=t:t.attrs.id===f&&(i=t),!!(!e&&v)||!!(!i&&f))),{prev:e,next:i}},[t,f,v]);return(0,s.jsxs)(s.Fragment,{children:[i&&(0,s.jsx)(aa,{ref:c,setEasing:r,setTouchpadFactor:o,setTriggerThreshold:d}),(0,s.jsx)(ad,{ref:x,direction:"up",node:C.prev,enabled:m,offset:16}),(0,s.jsx)(ad,{ref:u,direction:"down",node:C.next,enabled:h,offset:24})]})},aa=j.forwardRef((e,t)=>{let{setEasing:i,setTouchpadFactor:n,setTriggerThreshold:r}=e;return(0,s.jsxs)(o.k,{position:"absolute",alignItems:"center",bg:"gray.100",left:2,bottom:16,zIndex:"overlay",borderRadius:"md",border:"solid 2px var(--chakra-colors-trueblue-300)",p:1,children:[(0,s.jsxs)(ir.v,{closeOnSelect:!1,children:[(0,s.jsx)(il.j,{as:eh.z,colorScheme:"trueblue",children:"Options"}),(0,s.jsxs)(is.q,{minWidth:"240px",children:[(0,s.jsx)(ep.kH,{label:"How much total scrolling work do we need to do to trigger next/prev card?",placement:"right",children:(0,s.jsxs)(a.x,{color:"gray",fontSize:"sm",fontWeight:"600",ml:2,pb:2,children:["Scroll Threshold"," ",(0,s.jsxs)("i",{children:["(default=",1200,")"]})]})}),(0,s.jsxs)(o4.Y2,{defaultValue:1200,min:100,max:1e4,precision:0,step:100,onChange:(e,t)=>r(t),children:[(0,s.jsx)(o4.zu,{}),(0,s.jsxs)(o4.Fi,{children:[(0,s.jsx)(o4.WQ,{}),(0,s.jsx)(o4.Y_,{})]})]}),(0,s.jsx)(n2.R,{}),(0,s.jsx)(ep.kH,{label:"How much extra weight do we give to touchpad scroll events?",placement:"right",children:(0,s.jsxs)(a.x,{color:"gray",fontSize:"sm",fontWeight:"600",ml:2,pb:2,children:["Touchpad Multiplier"," ",(0,s.jsxs)("i",{children:["(default=",1.5,")"]})]})}),(0,s.jsxs)(o4.Y2,{defaultValue:1.5,min:1,max:10,precision:1,step:.1,onChange:(e,t)=>n(t),children:[(0,s.jsx)(o4.zu,{}),(0,s.jsxs)(o4.Fi,{children:[(0,s.jsx)(o4.WQ,{}),(0,s.jsx)(o4.Y_,{})]})]}),(0,s.jsx)(n2.R,{}),(0,s.jsxs)(io._,{defaultValue:"easeOutExpo",title:"Easing (of peek element)",type:"radio",onChange:e=>i(e),children:[(0,s.jsx)(ia.i,{value:"easeOutLinear",children:"easeOutLinear"}),(0,s.jsx)(ia.i,{value:"easeOutSine",children:"easeOutSine"}),(0,s.jsx)(ia.i,{value:"easeOutCubic",children:"easeOutCubic"}),(0,s.jsx)(ia.i,{value:"easeOutCirc",children:"easeOutCirc"}),(0,s.jsx)(ia.i,{value:"easeOutQuad",children:"easeOutQuad"}),(0,s.jsx)(ia.i,{value:"easeOutQuart",children:"easeOutQuart"}),(0,s.jsx)(ia.i,{value:"easeOutExpo",children:"easeOutExpo"}),(0,s.jsx)(ia.i,{value:"bezierCustom1",children:"bezierCustom1"}),(0,s.jsx)(ia.i,{value:"bezierCustom2",children:"bezierCustom2"})]})]})]}),(0,s.jsx)(o.k,{ref:t,direction:"column",alignItems:"center",width:"85px",ml:1,sx:{".chakra-progress__indicator":{transition:"none !important",opacity:1}},children:(0,s.jsx)(o3.D,{value:40,color:"trueblue.500",children:(0,s.jsx)(o9.i,{})})})]})});aa.displayName="PeekDebugger";let ad=j.forwardRef((e,t)=>{let{direction:i,enabled:n,node:r,offset:l}=e,[d,c]=(0,j.useState)(!1),[h,m]=(0,j.useState)(r);(0,j.useEffect)(()=>{c(!0);let e=setTimeout(()=>{c(!1),m(r)},550);return()=>{clearTimeout(e)}},[r]);let p=(0,j.useMemo)(()=>h?(0,oc.getCardTitle)(h.toJSON()):"",[h]),g=!!h;return(0,s.jsx)(o.k,{ref:t,pointerEvents:"none",position:"absolute",justifyContent:"center",width:"100%",zIndex:"overlay",top:"up"===i?"".concat(l,"px"):"inherit",bottom:"down"===i?"".concat(l,"px"):"inherit",children:(0,s.jsxs)(o.k,{bg:"gray.100",borderRadius:"md",boxShadow:"md",h:"".concat(40,"px"),maxWidth:"450px",justifyContent:"center",opacity:n?1:0,transition:"opacity ".concat(300,"ms ease-out"),textAlign:"center",alignItems:"center",direction:"row",px:2,sx:{".chakra-progress__indicator":{transition:"none !important",opacity:1}},children:[(0,s.jsx)(o3.D,{display:g?"block":"none",color:"trueblue.500",size:"20px",thickness:"16px",children:(0,s.jsx)(o9.i,{visibility:d?"visible":"hidden",children:(0,s.jsx)(x.G,{icon:u.fV7,fontSize:"14px",style:{color:"var(--chakra-colors-gray-100)",backgroundColor:"var(--chakra-colors-trueblue-500)",borderRadius:"10px"}})})}),g||"up"!==i?g||"down"!==i?null:(0,s.jsx)(x.G,{icon:u.m5q,size:"xs",color:"var(--chakra-colors-gray-600)"}):(0,s.jsx)(x.G,{icon:u.ytF,size:"xs",color:"var(--chakra-colors-gray-600)"}),(0,s.jsx)(o.k,{width:1}),(0,s.jsx)(a.x,{noOfLines:1,textOverflow:"ellipsis",overflowX:"hidden",fontSize:"md",color:g?"gray.800":"gray.600",px:2,children:g?p:"down"===i?"End of presentation":"Start of presentation"})]})})});ad.displayName="PeekCardTab";let ac=()=>{let[e,t]=(0,j.useState)(["",[],{}]),i=(0,M.qr)();return(0,j.useEffect)(()=>i.subscribe(()=>{let e=i.getState(),n=(0,L.X9)(e),r=(0,L.i2)(e)||"",l=n.parents[r]||[],s={};Object.keys(n.tree).forEach(e=>{let t=[],i=e=>{Object.keys(e).forEach(n=>{t.push(n),i(e[n])})};i(n.tree[e]),s[e]=t}),t([r,l,s])}),[i]),e},au=()=>{let[e,t,i]=ac(),n=Object.keys(i);return(0,s.jsx)(ex.U,{position:"fixed",bottom:0,w:"100vw",zIndex:10,background:"blackAlpha.200",px:"6px",py:"2px",align:"end",spacing:"2px",opacity:e?1:0,transitionProperty:"opacity",transitionDuration:"normal",children:n.map((r,l)=>{let o=[...t,e][0],a=n.indexOf(o),d=i[o],c=0,u=100;if(e&&d&&-1===n.indexOf(e)){let t=d.indexOf(e);c=(t+1)/d.length*100,u=1/d.length*100}return(0,s.jsx)(am,{cardId:r,state:l===a?"current":l<=a?"prev":"next",percent:c,unit:u},r)})})},ax="var(--chakra-colors-trueblue-200)",ah="var(--chakra-colors-trueblue-100)",am=e=>{let{cardId:t,state:i,percent:n,unit:r}=e,l="linear-gradient(to right, ".concat(ax," 0% ").concat(n,"%, ").concat("var(--chakra-colors-trueblue-300)"," ").concat(n,"% ").concat(n+r,"%, ").concat(ah," ").concat(n+r,"% 100%)");return(0,s.jsx)(o.k,{borderRadius:"2px",flex:"1",h:"6px",bg:"current"===i?l:"prev"===i?ax:ah},t)},ap=(0,ij.ZP)("Esc"),ag=e=>{let{editor:t,showNavigationControls:i}=e,n=(0,f.v9)(L.gh),r=n===eV.q.SLIDE_VIEW,[l,d]=(0,j.useState)(null),c=(0,f.v9)(L.JA),u=(0,j.useRef)(c),x=(0,f.I0)(),m=r&&!c,p=(0,o5.tE)({enabled:m,setActiveKey:d});return o1(t),(0,j.useEffect)(()=>{x((0,L.e)({isEditingInSlideView:!1}))},[r,x]),u.current=c,(0,j.useEffect)(()=>ej.F7.on("keydown","SLIDE_VIEW",e=>!!(u.current&&ap(e))&&(x((0,L.e)({isEditingInSlideView:!1})),e.preventDefault(),!0)),[x]),(0,o2.us)(),(0,s.jsxs)(s.Fragment,{children:[r&&(0,s.jsx)(ao,{editor:t}),r&&(0,s.jsx)(au,{}),r&&(0,s.jsx)(o.k,{position:"absolute",inset:0,width:"100%",height:"100%",pointerEvents:"none",justify:"flex-end",children:(0,s.jsxs)(o.k,{bg:"gray.50",position:"fixed",bottom:6,right:6,p:3,px:6,justify:"flex-end",align:"center",opacity:c?1:0,pointerEvents:c?"auto":"none",transitionProperty:"opacity, transform",transitionDuration:"normal",transitionTimingFunction:"ease",transform:c?"translate(0,0)":"translate(0,100%)",borderRadius:"md",shadow:"md",zIndex:"overlay",children:[(0,s.jsx)(a.x,{size:"sm",mr:3,children:(0,s.jsx)(h.cC,{id:"DjD/sG"})}),(0,s.jsx)(eh.z,{size:"sm",variant:"solid",onClick:()=>x((0,L.e)({isEditingInSlideView:!1})),children:(0,s.jsx)(h.cC,{id:"DPfwMq"})})]})}),r&&i&&(0,s.jsx)(o5.nP,{activeKey:l,spotlightingByBlock:p})]})};var aj=i(50423);let af={duration:.25,delay:.75},av={duration:.25},aC="filmstrip-root",ab=".".concat(aC),ay="filmstrip-scroller",ak=".".concat(ay),aw=j.createContext({navItemPreviewRefMap:{}});function aE(){let e=(0,j.useContext)(aw);return e}var aS=i(76643),aI=i(6110),a_=i(22662),aA=i(791),aT=i(17007);let aO=e=>{let{content:t,selection:i}=(0,aA.i)(e),n=!!(null==t?void 0:t.content),r=(0,j.useMemo)(()=>{var e;if(!n)return[];let i=t.content,r=(null==i?void 0:i[0].content)||[],l=null===(e=t.content)||void 0===e?void 0:e[0].attrs;return r.map(e=>{var t;if(!l||!(null===(t=e.attrs)||void 0===t?void 0:t.id))return null;let i={cardId:e.attrs.id,isDragging:!1,displayBehavior:"normal"};return i}).filter(e=>null!==e)},[t,n]),l=(0,M.CG)(aT.ZD,(e,t)=>e2()(e,t)),s=l.map(e=>{let t=r.find(t=>t.cardId===e.cardId);if(!t)return null;let i={...e};return i}).filter(e=>null!==e),o=(0,M.CG)(aT.Ae);return{isDragging:o,cards:o?s:r,editorContent:t,selection:i,isLoaded:n}};var aP=i(66028);let aD=e=>({backgroundColor:e?"gray.700":"gray.200",activeButtonColor:e?"gray.50":"trueblue.500",inactiveButtonColor:e?"gray.50":"gray.900",closeButtonColorScheme:e?"gray":"blackAlpha"}),aR=e=>{let{onClose:t,isDark:i,viewPreference:n,setViewPreference:r}=e,l="list"===n,{activeButtonColor:a,inactiveButtonColor:d,backgroundColor:c,closeButtonColorScheme:p}=aD(i),g=(0,eG.z$)(),f=(0,j.useCallback)(e=>()=>{r(e),null==g||g.track(eG.AA.FILMSTRIP_TOGGLE_VIEW,{view:e})},[g,r]);return(0,s.jsxs)(o.k,{p:"8px",pb:"2px",children:[(0,s.jsxs)(ex.U,{spacing:0,bg:c,p:.5,borderRadius:"md",children:[(0,s.jsx)(ep.kH,{label:"Filmstrip view",children:(0,s.jsx)(eh.z,{size:"xs",variant:l?"ghost":"plain",color:l?d:a,onClick:f("film"),"data-testid":"filmstrip-view-button",children:(0,s.jsx)(ex.U,{children:(0,s.jsx)(x.G,{icon:u.CjD})})})}),(0,s.jsx)(ep.kH,{label:"List view",children:(0,s.jsx)(eh.z,{size:"xs",variant:l?"plain":"ghost",color:l?a:d,onClick:f("list"),"data-testid":"list-view-button",children:(0,s.jsx)(ex.U,{children:(0,s.jsx)(x.G,{icon:u.Zrf})})})})]}),(0,s.jsx)(ep.kH,{label:(0,s.jsx)(h.cC,{id:"C8DFL7"}),shortcut:"Mod+\\",children:(0,s.jsx)(I.h,{variant:"ghost","aria-label":m.ag._({id:"C8DFL7"}),"data-testid":"close-filmstrip-button",colorScheme:p,isRound:!0,size:"xs",icon:(0,s.jsx)(x.G,{icon:u.g82}),outlineOffset:"0px",ml:"auto",onClick:e=>{e.stopPropagation(),t()},onMouseDown:aP.br})})]})};var aN=i(73208),aG=i(65895),az=i(38564),aM=i(56143),aL=i(43818),aF=i(50381),aU=i.n(aF),aW=i(9850),aH=i.n(aW),aV=i(86323),aB=i(50105),aK=i(33169),aq=i(87008),aY=i(38322);let aZ=(e,t)=>{let i=az.Gk.getState(e.state).undoManager,n=i.undoStack[i.undoStack.length-1];n&&n.meta.set("filmstripState",t)},aJ=e=>{let t=(0,M.CG)(a_.wg),i=(0,M.CG)(a_.zq),n=(0,M.TL)(),r=(0,iJ.p)(),l=(0,j.useCallback)((i,n,l)=>{var o;if(!e)return;let a=(0,eW.Lz)(e,t);if(!a.length)return;let d=tR.HY.from(a),c=(0,aq.G8)(d,e.schema);if(!c){r({title:(0,s.jsx)(h.cC,{id:"fFgBN7",values:{errorMessage:n}}),status:"error",duration:3e3,position:"top"});return}null===(o=document.getSelection())||void 0===o||o.removeAllRanges(),aU()(c,{format:"text/html"});let u=aB.Z.getState(e.state);u&&!l&&u.clearCutData(),r({title:(0,s.jsx)(h.cC,{id:"8p/xVT",values:{0:a.length,1:i.one,2:i.other}}),status:"success",duration:3e3,position:"top"})},[e,t,r]),o=(0,j.useCallback)(()=>{l({one:"Copied card.",other:"Copied ".concat(t.length," cards.")},"Error copying card.",!1)},[l,t]),d=(0,j.useCallback)(function(){let i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!e)return;let r=(0,a_.ym)((0,M.bh)().getState());n((0,a_.jf)()),e.commands.deleteCardsById(t,i),aZ(e,r)},[n,e,t]),c=(0,j.useCallback)(()=>{if(!e||0===t.length)return;let i="";if(1===t.length){let n=(0,eW.Bw)(e,t[0]);n&&(i=(0,aL.getCardTitle)(n.node.toJSON())||"")}d();let n=i?'"'.concat(i,'"'):m.ag._({id:"FyJPFh"}),l=r({title:(0,s.jsxs)(ex.U,{children:[(0,s.jsx)(a.x,{noOfLines:1,children:(0,s.jsx)(h.cC,{id:"OJTPnC",values:{displayTitle:n,0:t.length,1:t.length}})}),(0,s.jsx)(nF.r,{textDecoration:"underline",onClick:()=>{(0,aM.Yw)(e.state),r.close(l)},children:(0,s.jsx)(h.cC,{id:"9uI/rE"})})]}),status:"info",duration:3e3,position:"top"})},[d,e,t,r]),u=(0,j.useCallback)(()=>{0!==t.length&&(l({one:"Cut card.",other:"Cut ".concat(t.length," cards")},"Error cutting card.",!0),d(!0))},[d,l,t]),x=(0,j.useCallback)(()=>{if(!e||0===t.length)return;let l=(0,eW.Lz)(e,t);if(l.length){let t=(0,eW.Bw)(e,i),o=t?t.pos+t.node.nodeSize:e.state.doc.content.size-1,a=l.map(e=>(0,eI.hs)(aH()(e.toJSON()))),d=a.map(e=>(0,aK.Zs)(e)),c=(0,a_.ym)((0,M.bh)().getState());e.chain().insertContentAt(o,d,{updateSelection:!1}).command(e=>{let{tr:t}=e,i=(0,aY.t)(t.doc.resolve(o));return i&&(t=t.setSelection(i)),!0}).scrollIntoView().run(),aZ(e,c),n((0,a_.xi)({beforeCardId:null==t?void 0:t.node.attrs.id,cardCount:d.length})),r({title:(0,s.jsx)(h.cC,{id:"ClnFsQ",values:{0:l.length,1:l.length}}),status:"success",duration:3e3,position:"top"})}},[n,e,i,r,t]),p=(0,j.useCallback)(()=>{if(!e)return;let t=(0,a_.zq)((0,M.bh)().getState()),i=(0,eW.Bw)(e,t);if(!i)return;let{pos:r}=i,l=e.view.state.doc.nodeAt(r);if(!l){console.error("[Filmstrip] Cannot append card. Node unknown");return}let s=r+l.nodeSize,o=aV.e1.blankCard;(0,aV.ZT)({key:"blankCard",nodeName:"card"},sf.fe.FILMSTRIP_CARD_MENU);let a=(0,a_.ym)((0,M.bh)().getState());e.chain().insertContentAt(s,(0,aK.Zs)(o),{updateSelection:!1}).command(e=>{let{tr:t}=e,i=(0,aY.t)(t.doc.resolve(s));return i&&(t=t.setSelection(i)),!0}).scrollIntoView().run(),aZ(e,a),n((0,a_.xi)({beforeCardId:null==i?void 0:i.node.attrs.id,cardCount:1}))},[n,e]);return{handleAddCard:p,handleCopy:o,handleDelete:c,handleCut:u,handleDuplicate:x}},aX=e=>{let{children:t,icon:i,onClick:n,shouldHide:r=!1,...l}=e;return r?null:(0,s.jsx)(n5.s,{icon:i,onClick:n,...l,children:t})},aQ=(0,j.memo)(e=>{let{isDark:t}=e;return(0,s.jsxs)(d.xu,{as:"span",className:"fa-layers fa-fw",children:[(0,s.jsx)(x.G,{fixedWidth:!0,icon:u.lCX}),(0,s.jsx)(x.G,{icon:iR.diR,transform:"shrink-4 right-6 down-4",color:"var(--menu-bg, white)"}),(0,s.jsx)(x.G,{icon:iR.diR,transform:"shrink-7 right-6 down-4"}),(0,s.jsx)(x.G,{icon:iR.r8p,color:t?"var(--chakra-colors-gray-800)":"var(--chakra-colors-gray-100)",transform:"shrink-10 right-6 down-4"})]})});aQ.displayName="AddCardIcon";let a$=(e,t)=>{if(0===e.length||!t)return null;if(1===e.length){let i=(0,eW.Bw)(t,e[0]);if(!i)return null;{let e=(0,oc.getCardTitle)(i.node.toJSON());return e||"Untitled card"}}return"Multiple cards selected"},a0=(0,j.forwardRef)((e,t)=>{let{editor:i,isOpen:n,onClose:r,readOnly:l,clearPositioning:o,rootStyles:d,isDark:c}=e,m=(0,M.CG)(L.yx),p=(0,iJ.p)(),{handleCopy:g,handleDelete:f,handleCut:v,handleDuplicate:C,handleAddCard:b}=aJ(i),y=(0,M.CG)(a_.wg),k=1===y.length,w=(0,j.useMemo)(()=>k?(0,ev.gq)({cardId:y[0],docId:null==m?void 0:m.id,isPresentMode:!1}):"",[null==m?void 0:m.id,k,y]),{onCopy:E}=(0,iX.V)(w),S=(0,j.useCallback)(()=>{E(),p({title:(0,s.jsx)(h.cC,{id:"h5GS+N"}),status:"success",duration:3e3,position:"top"})},[E,p]),I=(0,aG.K)(),_=(0,j.useMemo)(()=>a$(y,i),[i,y]),A=(0,j.useMemo)(()=>c?{"--menu-bg":"var(--chakra-colors-gray-900)","&:focus":{"--menu-bg":"var(--chakra-colors-gray-800)"}}:{},[c]);return(0,s.jsx)(ir.v,{isOpen:n,onClose:r,children:(0,s.jsxs)(is.q,{className:"filmstrip-card-menu",onContextMenu:e=>{e.preventDefault()},zIndex:"popover",ref:t,rootProps:{style:d},w:"260px",overflowY:"auto",onTransitionEnd:()=>{n||o()},children:[_&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.x,{pl:3,color:c?"gray.400":"gray.600",noOfLines:1,"data-testid":"filmstrip-card-menu-card-title",children:_}),(0,s.jsx)(n2.R,{})]}),(0,s.jsx)(aX,{"data-testid":"filmstrip-card-menu-item-cut",shouldHide:l,command:(0,ep.cE)("Mod+X"),icon:(0,s.jsx)(x.G,{fixedWidth:!0,icon:u.EQg}),onClick:v,children:(0,s.jsx)(h.cC,{id:"cCd8Bs"})}),(0,s.jsx)(aX,{"data-testid":"filmstrip-card-menu-item-copy",shouldHide:l,command:(0,ep.cE)("Mod+C"),icon:(0,s.jsx)(x.G,{fixedWidth:!0,icon:u.kZ_}),onClick:g,children:(0,s.jsx)(h.cC,{id:"he3ygx"})}),(0,s.jsx)(aX,{"data-testid":"filmstrip-card-menu-item-duplicate",shouldHide:l,command:(0,ep.cE)("Mod+D"),icon:(0,s.jsx)(x.G,{fixedWidth:!0,icon:u.WM4}),onClick:C,children:(0,s.jsx)(h.cC,{id:"euc6Ns"})}),(0,s.jsx)(aX,{"data-testid":"filmstrip-card-menu-item-add-card",shouldHide:l,icon:(0,s.jsx)(aQ,{isDark:c}),onClick:b,sx:A,children:(0,s.jsx)(h.cC,{id:"90n2YU"})}),!l&&(0,s.jsx)(n2.R,{}),(0,s.jsx)(aX,{"data-testid":"filmstrip-card-menu-item-copy-link",shouldHide:!k,icon:(0,s.jsx)(aN.x,{isLocked:!I,isDark:c}),onClick:S,children:(0,s.jsx)(h.cC,{id:"F0YmUY"})}),(0,s.jsx)(aX,{"data-testid":"filmstrip-card-menu-item-delete",color:c?"red.300":"red.500",icon:(0,s.jsx)(x.G,{icon:u.XAH,fixedWidth:!0}),onClick:f,shouldHide:l,children:(0,s.jsx)(h.cC,{id:"cnGeoo"})})]})})});a0.displayName="FilmstripCardMenuComponent";let a1=(0,j.memo)(a0);var a2=i(15151),a5=i(56253);let a4=(0,s6.E)(d.xu),a3=e=>{let{isEditorFocused:t,isFilmstripSelected:i,shouldHide:n,cardId:r,isDraggingCard:l,index:d}=e;return(0,s.jsxs)(o.k,{boxShadow:i?"var(--fs-item-selected-box-shadow)":t?"var(--fs-item-focused-box-shadow)":"var(--fs-item-box-shadow)",transitionProperty:"common",transitionDuration:"normal",borderRadius:"sm",overflow:"hidden",display:n?"none":void 0,children:[(0,s.jsx)(a9,{cardId:r}),(0,s.jsx)(s7.M,{children:!n&&!l&&(0,s.jsx)(a4,{position:"absolute",exit:{opacity:0},transition:{duration:.2},bottom:1,left:1,px:1.5,borderRadius:"md",boxShadow:"base",borderWidth:"1px",borderColor:"var(--fs-item-card-number-border-color)",bg:"var(--fs-item-card-number-background-color)",color:"var(--fs-item-card-number-color)",fontWeight:600,fontSize:"xs",children:(0,s.jsx)(a.x,{children:d})},d)})]})},a9=e=>{let{cardId:t}=e,{navItemPreviewRefMap:i}=aE(),n=(0,M.CG)(L.Pu),r=(0,a2.J)(n,!1);return(0,s.jsx)(o.k,{className:"filmstrip-nav-item-wrapper",sx:tF.n,css:{"--editor-font-size":"calc(var(--editor-width) / ".concat(a5.DB,")"),"--thumbnail-min-height":"calc(var(--editor-width) * 0.4)"},justifyContent:"center",overflow:"hidden",pointerEvents:"none",bg:"gray.100",minH:"var(--thumbnail-min-height)",maxH:"calc(var(--editor-width) * 1.5)",w:"var(--editor-width)",children:(0,s.jsx)("div",{className:"ProseMirror",children:(0,s.jsx)(o.k,{className:"doc-content-wrapper",direction:"column",align:"center",sx:r,children:(0,s.jsx)("div",{style:{width:"100%"},ref:e=>{e&&(i[t]=e)}})})})})},a6=e=>{let{cardId:t,index:i,isEditorFocused:n,isFilmstripSelected:r}=e,{title:l}=(0,e4.T)({cardId:t});return(0,s.jsxs)(o.k,{className:"filmstrip-nav-item-wrapper",w:"var(--editor-width)",justifyContent:"flex-start",fontSize:"xs",borderRadius:"sm",boxShadow:r?"var(--fs-text-item-selected-box-shadow)":n?"var(--fs-item-focused-box-shadow)":"var(--fs-item-box-shadow)",color:r?"trueblue.500":void 0,transitionProperty:"common",transitionDuration:"normal",_hover:{".filmstrip-text-item-number":{display:"none"},".filmstrip-text-drag-handle":{display:"block"}},children:[(0,s.jsxs)(o.k,{alignItems:"center",bg:r?"trueblue.100":"var(--fs-text-item-card-number-bg-color)",transitionProperty:"common",transitionDuration:"normal",children:[(0,s.jsx)(d.xu,{className:"filmstrip-text-item-number",w:6,fontSize:i>=1e3?"0.6rem":void 0,textAlign:"center",overflow:"hidden",whiteSpace:"nowrap",children:i}),(0,s.jsx)(d.xu,{className:"filmstrip-text-drag-handle",display:"none",textAlign:"center",w:6,fontSize:"md",_hover:{cursor:"grab"},children:(0,s.jsx)(x.G,{icon:u.Okg})})]}),(0,s.jsx)(o.k,{"data-testid":"filmstrip-text-item-title",p:2,pl:"4px",flex:1,bg:r?"trueblue.50":"var(--fs-text-item-bg-color)",alignItems:"center",overflow:"hidden",transitionProperty:"common",transitionDuration:"normal",children:(0,s.jsx)(a.x,{noOfLines:1,children:l||"Untitled"})})]})},a7=e=>{let{filmstripItemRef:t,cardId:i,isFilmstripSelected:n,currentFocusedCard:r,editor:l,isAnimating:s}=e,o=(0,eU.As)("filmstrip"),a=(0,M.CG)(a_.DM);(0,j.useEffect)(()=>{t.current&&i===r&&((null==l?void 0:l.isFocused)&&!s?o.scrollElementIntoView({element:t.current,offsetFromTop:120}):n&&i===a&&requestAnimationFrame(()=>{if(!t.current||!o.scroller)return;let e=o.scroller.getBoundingClientRect(),i=t.current.getBoundingClientRect(),n=i.top,r=i.bottom,l=i.height,s=0,a=t.current.closest(".reorder-item");if(a instanceof HTMLElement&&(s=a.offsetTop),r>=e.bottom){let e=o.scroller,t=s+l,i=Math.max(0,t-e.clientHeight+4);o.scrollTo({top:i})}else n<=e.top&&o.scrollTo({top:s})}))},[i,r,l,a,n,o,t,s])},a8=()=>{let e=(0,en.i)({lg:100,xl:125,"2xl":150})||100,t=(0,M.CG)(a_.K5),i=null!==t?t:e;return{previewWidth:i,width:i+40,fontSize:i/a5.DB}},de=(0,s6.E)(o.k),dt=e=>{let{card:t,index:i,isFirst:n,isEditorFocused:r,currentFocusedCard:l,isFilmstripSelected:o,readOnly:c,shouldHide:u,isDragInProgress:x,numberOfCardsDragging:h,onContextClick:m,editor:p,isAnimating:g,showTextOnly:f}=e,{cardId:v,isDragging:C}=t,b=(0,j.useRef)(null);a7({filmstripItemRef:b,cardId:v,isFilmstripSelected:o,currentFocusedCard:l,editor:p,isAnimating:g});let y=(0,M.TL)(),{previewWidth:k}=a8(),w=(0,j.useCallback)(e=>{if(!v)return;let t=e.shiftKey,i=!t&&(e.metaKey||e.ctrlKey);if(t&&!c)y((0,a_.YC)({id:v,currentFocusedCard:l}));else if(i&&!c)y((0,a_.sY)({id:v}));else{if(x)return;y((0,a_.Ti)({id:v})),y((0,L.Qx)({attached:!1})),p&&(0,ik.YS)({cardId:v,editor:p})}},[v,c,y,l,x,p]);return(0,s.jsxs)(d.xu,{className:"filmstrip-item",ref:b,pos:"relative",pt:f?void 0:1,mt:f?1.5:n?void 0:1,onClick:w,onContextMenu:m,cursor:"pointer",userSelect:"none",transitionProperty:"common",transitionDuration:"normal",display:u?"none":void 0,"data-filmstrip-selected":o,"data-filmstrip-view":f?"list":"filmstrip",css:{"--editor-width":"".concat(k,"px")},children:[f&&(0,s.jsx)(a6,{cardId:v,index:i,isFilmstripSelected:o,isEditorFocused:r}),(0,s.jsx)(a3,{shouldHide:f,cardId:v,index:i,isDraggingCard:C,isFilmstripSelected:o,isEditorFocused:r}),(0,s.jsx)(s7.M,{children:h&&(0,s.jsx)(d.xu,{position:"absolute",bottom:0,left:0,transform:"translate(-50%, 50%)",children:(0,s.jsx)(de,{initial:{scale:.5,opacity:0},exit:{scale:.5,opacity:0},animate:{scale:1,opacity:1},h:5,minW:5,px:1,borderRadius:"full",bg:"trueblue.300",color:"white",fontSize:"xs",fontWeight:600,boxShadow:"sm",justify:"center",align:"center",children:(0,s.jsx)(a.x,{children:h})},"badge-number")})})]})};var di=i(28316),dn=i(91073);let dr=(0,j.memo)(e=>{let{content:t,theme:i}=e,[n,r]=(0,j.useState)(!1);return((0,j.useEffect)(()=>{requestAnimationFrame(()=>{r(!0)})},[]),n)?(0,s.jsx)(tF.m,{theme:i,content:t,isThumbnail:!0,portalComponent:dl}):null}),dl=e=>{let{renderers:t}=e,{navItemPreviewRefMap:i}=aE();return(0,s.jsx)(s.Fragment,{children:Object.entries(t).map(e=>{let[t,n]=e,r=n.props.node;if("document"===r.type.name)return null;let l=(0,dn.KH)(r)?i[r.attrs.id]:null;return di.createPortal(n.reactElement,l||n.element,t)})})};dr.displayName="FilmstripPreviewEditor";var ds=i(33522);let da=(0,j.memo)(e=>{let{onClose:t,isDark:i,isResizing:n,setIsResizing:r}=e,{previewWidth:l}=a8(),a=(0,j.useRef)(null),c=(0,j.useRef)(l),u=(0,j.useRef)(null),x=(0,M.TL)(),h=(0,j.useCallback)(e=>{if(e.preventDefault(),!a.current||!c.current||!u.current)return;let{width:i,x:n}=a.current,r=e.clientX-n,l=i+r;if(l<=30){t();return}let s=at()(i+r,90,200);s!==c.current&&(c.current=s,u.current.innerHTML="\n          .filmstrip-nav-item-wrapper {\n            --editor-width: ".concat(s,"px;\n          }"))},[t]),m=(0,ds.Z_)(h,30),p=(0,j.useCallback)(e=>{e.preventDefault(),a.current={x:e.clientX,width:c.current},r(!0);let t=()=>{a.current=null,u.current&&(u.current.innerHTML=""),x((0,a_.lh)({width:c.current})),document.removeEventListener("mousemove",m),document.removeEventListener("mouseup",t),requestAnimationFrame(()=>{r(!1)})};document.addEventListener("mousemove",m),document.addEventListener("mouseup",t)},[x,r,m]);return(0,s.jsxs)(o.k,{className:"filmstrip-resizer",css:{"--resizer-width":"24px","--resizer-offset":"4px","--drag-handle-width":"4px"},pos:"absolute",top:0,bottom:0,right:"calc(var(--resizer-width) * -1 + var(--resizer-offset))",opacity:0,w:"var(--resizer-width)",bg:i?"whiteAlpha.200":"blackAlpha.200",h:"100%",transitionProperty:"common",transitionDuration:"normal",transitionTimingFunction:"ease",justify:"center",alignItems:"center",borderTopEndRadius:"md",borderBottomEndRadius:"md",boxShadow:"md",_hover:{cursor:"ew-resize"},onMouseDown:p,zIndex:10,children:[(0,s.jsx)("style",{ref:u}),(0,s.jsx)(d.xu,{position:"relative",left:"calc(var(--resizer-offset) - (var(--drag-handle-width) / 2))",bg:"white",borderRadius:"full",w:"var(--drag-handle-width)",h:"40px",opacity:n?1:.6,transitionProperty:"common",transitionDuration:"normal"})]})});da.displayName="FilmstripResizer";let dd=e=>({"--fs-item-border-color":e?"var(--chakra-colors-whiteAlpha-300)":"var(--chakra-colors-gray-200)","--fs-text-item-selected-border-color":"var(--chakra-colors-trueblue-100)","--fs-item-box-shadow":"0 0 0 1px var(--fs-item-border-color)","--fs-item-focused-box-shadow":"0 0 0 2px var(--chakra-ring-color)","--fs-item-selected-box-shadow":"0 0 0 2px var(--chakra-colors-trueblue-300)","--fs-text-item-selected-box-shadow":"0 0 0 1px var(--fs-text-item-selected-border-color)","--fs-item-card-number-border-color":e?"var(--chakra-colors-gray-800)":"var(--chakra-colors-gray-200)","--fs-item-selected-text-color":e?"var(--chakra-colors-trueblue-200)":"var(--chakra-colors-trueblue-500)","--fs-item-card-number-color":e?"var(--chakra-colors-gray-100)":"var(--chakra-colors-gray-800)","--fs-item-card-number-background-color":e?"var(--chakra-colors-gradient-dark)":"var(--chakra-colors-gradient-light)","--fs-text-item-bg-color":e?"var(--chakra-colors-gray-800)":"var(--chakra-colors-gray-100)","--fs-text-item-card-number-bg-color":e?"var(--chakra-colors-gray-700)":"var(--chakra-colors-gray-200)"}),dc=(e,t)=>{if(!e||!t)return{id:null,pos:null};let{$from:i,from:n,to:r}=e,l=null,s=null;return i.doc.nodesBetween(n,r,(e,t)=>{let n=i.doc.resolve(t).depth;return!(!l&&(0,eW.KH)(e))||1!==n||(l=e.attrs.id,s=t,!1)}),{id:l,pos:s}},du=()=>{var e;return!!(null===(e=document.activeElement)||void 0===e?void 0:e.closest(ab))},dx=()=>{let e=(0,j.useRef)(null),[t,i]=(0,j.useState)(!1),[n,r]=(0,j.useState)([0,0]),[l,s]=(0,j.useState)("bottom"),o=(0,M.TL)(),a=(0,j.useCallback)(()=>{i(!1)},[]),d=(0,j.useCallback)(()=>{r([0,0]),s("bottom")},[]),c=(0,j.useCallback)(e=>{i(!0),r(e)},[]),u=(0,j.useCallback)(t=>i=>{var n;i.preventDefault(),o((0,a_.uu)({id:t})),c([i.clientX,i.clientY]);let r=null===(n=e.current)||void 0===n?void 0:n.offsetHeight;if(null==r)return;let l=window.innerHeight<i.clientY+r,a=i.clientY<r;l&&!a?s("top"):l&&a?s("center"):s("bottom")},[o,e,c]),x=(0,j.useMemo)(()=>{var t;let i=n[1],r=null===(t=e.current)||void 0===t?void 0:t.offsetHeight,s=r?window.innerHeight-(i+r+8):void 0,o="center"===l&&s?"translateY(".concat(s,"px)"):"top"===l?"translateY(-100%)":void 0;return{left:n[0],top:n[1],transform:o,transformOrigin:"top"}},[l,n]);return{menuRef:e,isFilmstripCardMenuOpen:t,onFilmstripCardMenuClose:a,handleContextMenu:u,menuRootStyles:x,clearPositioning:d}},dh=eE()(e8.YS,200),dm=e=>{let{isFocused:t,readOnly:i,firstFocusedCardId:n,editor:r,isDragging:l}=e,{handleCopy:s,handleDelete:o,handleCut:a,handleDuplicate:d}=aJ(r),c=(0,M.TL)(),u=(0,M.qr)();(0,j.useEffect)(()=>eQ.F7.on("keydown","FILMSTRIP",e=>{if(!t)return!1;switch(e.key){case"Escape":if(l)return c((0,aT.vL)()),!0;return!1;case"Backspace":case"Delete":if(!i)return o(),!0;return!1;case"a":case"A":if(!i&&(e.ctrlKey||e.metaKey))return e.preventDefault(),c((0,a_.td)({currentFocusedCard:n})),!0;return!1;case"c":case"C":if(!i&&(e.ctrlKey||e.metaKey))return s(),!0;return!1;case"d":case"D":if(!i&&(e.ctrlKey||e.metaKey))return e.preventDefault(),d(),!0;return!1;case"x":case"X":if(!i&&(e.ctrlKey||e.metaKey))return a(),!0;return!1;case"ArrowDown":{c((0,a_.ut)({direction:"down",withShift:!i&&e.shiftKey,currentFocusedCard:n}));let t=(0,a_.wg)(u.getState()),l=t[0];return!e.shiftKey&&r&&l&&(dh({cardId:l,editor:r}),c((0,L.Qx)({attached:!1}))),!0}case"ArrowUp":{c((0,a_.ut)({direction:"up",withShift:!i&&e.shiftKey,currentFocusedCard:n}));let t=(0,a_.wg)(u.getState()),l=t[0];return!e.shiftKey&&r&&l&&(dh({cardId:l,editor:r}),c((0,L.Qx)({attached:!1}))),!0}default:return!1}}),[c,n,t,l,o,s,d,a,i,r,u])};var dp=i(3402);let dg=e=>{let t=(0,M.qr)(),i=(0,iJ.p)(),n=(0,M.TL)();(0,j.useEffect)(()=>{let r=r=>{var l;let o=t.getState();if(!e||!du()||!(0,L.hN)(o))return;let a=null===(l=r.clipboardData)||void 0===l?void 0:l.getData("text/html");if(!a)return;let{content:d}=(0,dp.T)(a,e.schema),c=d.content.filter(e=>(0,dn.KH)(e));if(c.length){let t=(0,eW.Bw)(e,(0,a_.zq)(o)),l=t?t.pos+t.node.nodeSize:e.state.doc.content.size-1,a=c.map(e=>(0,eI.hs)(aH()(e.toJSON()))),d=a.map(e=>(0,aK.Zs)(e)),u=(0,a_.ym)((0,M.bh)().getState());e.chain().insertContentAt(l,d,{updateSelection:!1}).command(e=>{let{tr:t}=e;t.setMeta("annotationEvent",{type:"filmstrip-paste",insertPos:l});let i=(0,aY.t)(t.doc.resolve(l));return i&&(t=t.setSelection(i)),!0}).scrollIntoView().run(),r.preventDefault(),aZ(e,u),n((0,a_.xi)({beforeCardId:null==t?void 0:t.node.attrs.id,cardCount:d.length})),i({title:(0,s.jsx)(h.cC,{id:"3viq5b",values:{0:c.length,1:c.length}}),status:"success",duration:3e3,position:"top"})}};return document.addEventListener("paste",r),()=>{document.removeEventListener("paste",r)}},[n,e,t,i])};var dj=i(30453);let df=()=>{let e=(0,dj.o)(),t=(0,j.useRef)(null),i=(0,j.useRef)(),n=(0,j.useRef)(),r=(0,j.useRef)(),l=(0,j.useCallback)(e=>{if(!r.current)return;let t=dC(r.current),l=e.target;if(!t||!l||void 0===i.current||void 0===n.current)return;let s=l.scrollTop-i.current;t.y=n.current-s},[]),s=(0,j.useCallback)((e,i)=>{let n=t.current;if(!n)return;let r=n.getBoundingClientRect(),l=i.point.y,s=e.target;if(!(s instanceof Element))return;let o=s.closest("[draggable]"),a=null==o?void 0:o.parentElement;a&&(l<r.top+25&&(o!==a.firstElementChild||n.scrollTop>0)?n.scrollTop-=5:l>r.bottom-25&&(o!==a.lastElementChild||n.scrollTop<n.scrollHeight)&&(n.scrollTop+=5))},[]),o=(0,j.useCallback)(()=>{let l=t.current,s=dv(e);if(!l||!s)return;r.current=s,i.current=l.scrollTop;let o=dC(s);o&&(n.current=o.y)},[e]),a=(0,j.useCallback)(()=>{i.current=void 0,n.current=void 0,r.current=void 0},[]);return{scrollerRef:t,onScroll:l,dragControls:e,onDrag:s,onDragStart:o,onDragEnd:a}},dv=e=>{try{return Array.from(e.componentControls).find(e=>e.isDragging)}catch(e){console.error("[caught] findDraggingElementControls",e);return}},dC=e=>{try{return e.panSession.history[0]}catch(e){console.error("[caught] getDraggingElementStartPoint",e);return}},db=(0,s6.E)(o.k),dy=(0,s6.E)(d.xu),dk="data-".concat(iM.dh),dw=e=>({initial:{x:-e},animate:{x:0,transition:af},exit:{x:-e,transition:av}}),dE=e=>{let{onClose:t,editor:i,readOnly:n}=e,[r,l]=(0,j.useState)(!1),[a,c]=(0,F.I)(U.H.filmstripViewPreference,"film"),u=(0,j.useRef)(null),{cards:x,isDragging:h,editorContent:m,selection:p,isLoaded:g}=aO(i),{id:f}=(0,j.useMemo)(()=>dc(p,i),[i,p]),v=(0,M.TL)(),C=(0,M.CG)(a_.wg),b=(0,M.CG)(aT.pe),y=(0,M.CG)(aT.u9),k=(0,M.CG)(aT.K3),[w,E]=(0,j.useState)(!1),{menuRef:S,isFilmstripCardMenuOpen:I,onFilmstripCardMenuClose:_,clearPositioning:A,handleContextMenu:T,menuRootStyles:O}=dx(),P=(0,j.useCallback)(()=>{if(_(),r){var e;null===(e=u.current)||void 0===e||e.focus()}},[r,_]),{scrollerRef:D,onScroll:R,dragControls:N,onDrag:G,onDragStart:z,onDragEnd:W}=df(),H=(0,j.useCallback)(e=>()=>{if(E(!0),z(),u.current){let e=u.current.getBoundingClientRect().height;u.current.style.height="".concat(e,"px")}let t=C.includes(e)?C:[e];v((0,a_.WF)({selectedCardIdsToDrag:t})),v((0,aT.CA)({cardIds:x.map(e=>e.cardId),leaderCardId:e,selectedCardIds:t}))},[x,v,C,z]),V=(0,j.useCallback)(()=>{i&&(v((0,aT.vL)()),i.commands.rearrangeCardsById(x.map(e=>e.cardId),y),W())},[x,v,i,y,W]),B=(0,j.useCallback)(()=>{u.current&&(u.current.style.height="auto"),E(!1)},[]);dg(i),dm({isFocused:r,readOnly:n,firstFocusedCardId:f,editor:i,isDragging:h}),(0,aS.O)({ref:u,handler(e){S.current&&S.current.contains(e.target)||(I&&_(),v((0,a_.Mt)()))}});let K=(0,M.CG)(L.Pu),q=(0,eu.ff)("whiteAlpha.600","whiteAlpha.100"),Y=(0,eu.ff)("#F9FAFBDD","gray.900"),Z=(0,eu.ff)("gray.800","gray.200"),J=(0,eu.ff)("blackAlpha.400","whiteAlpha.500"),{colorMode:X}=(0,eu.If)(),Q="dark"===X,$=(0,j.useMemo)(()=>dd(Q),[Q]),[ee,et]=(0,j.useState)(!1),{width:ei}=a8(),en=dw(ei),er=(0,j.useMemo)(()=>{let e=y.length;return h&&e>1?e:null},[h,y.length]),[el,es]=(0,j.useState)(!1),eo=(0,eU.As)("filmstrip");return(0,j.useEffect)(()=>{eo.setScrollSelector(ak)},[eo]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(o.k,{pointerEvents:"none",position:"absolute",direction:"column",left:2,top:14,bottom:2,justifyContent:"center",color:Z,children:[i&&g&&(0,s.jsx)(dr,{content:m,theme:K}),(0,s.jsxs)(d.xu,{pos:"relative",pointerEvents:"auto",_hover:{".filmstrip-resizer":{opacity:el?0:1}},maxHeight:"100%",children:[(0,s.jsxs)(db,{ref:u,"data-guider-highlight":"filmstrip",className:aC,[dk]:!0,pos:"relative",direction:"column",zIndex:11,...en,onAnimationStart:()=>{es(!0)},onAnimationComplete:()=>{es(!1)},tabIndex:0,_focus:{outline:"none"},onFocus:()=>{l(!0),null==i||i.commands.blur()},onBlur:e=>{var t,i;u.current&&(null===(t=u.current)||void 0===t?void 0:t.contains(e.relatedTarget))||(null===(i=S.current)||void 0===i?void 0:i.contains(e.relatedTarget))||l(!1)},borderRadius:"md",bg:Y,borderWidth:"1px",borderColor:q,shadow:"lg",backdropFilter:"blur(20px)",maxHeight:"100%",alignSelf:"flex-start",children:[(0,s.jsx)(aR,{isDark:Q,onClose:t,viewPreference:a,setViewPreference:c}),(0,s.jsx)(dy,{className:ay,layoutScroll:!0,overflowY:"auto",position:"relative",sx:{"&::-webkit-scrollbar":{opacity:1,width:"5px"},"&::-webkit-scrollbar-track":{opacity:0,width:"5px"},"&::-webkit-scrollbar-thumb":{background:J,borderRadius:"full"},...$},ref:D,onScroll:R,p:"8px",pt:0,children:(0,s.jsx)(aI.t.Group,{onReorder:e=>{let t=e.map(e=>e.cardId);v((0,aT.k)({reorderedCardIds:t}))},values:x,axis:"y",children:i&&g&&x.map((e,t)=>{let{cardId:r,displayBehavior:l}=e,o=C.includes(r),d=k===r;return(0,s.jsx)(aI.t.Item,{drag:!n&&"y",value:e,onDragStart:H(r),onDragEnd:V,onDragTransitionEnd:B,className:"reorder-item",dragControls:N,transition:{layout:{duration:ee?0:void 0}},onDrag:G,style:{position:"relative",listStyle:"none"},children:(0,s.jsx)(dt,{readOnly:n,editor:i,card:e,index:h&&void 0!==b[r]?b[r]:t+1,isFirst:0===t,shouldHide:"hidden"===l,isDragInProgress:w,isEditorFocused:f===r&&i.isFocused,isFilmstripSelected:!!o,currentFocusedCard:f,numberOfCardsDragging:d?er:null,onContextClick:T(r),isAnimating:el,showTextOnly:"list"===a})},r)})})})]}),(0,s.jsx)(da,{onClose:t,isDark:Q,isResizing:ee,setIsResizing:et})]})]}),i&&(0,s.jsx)(a1,{ref:S,editor:i,readOnly:n,isOpen:I,onClose:P,clearPositioning:A,rootStyles:O,isDark:Q})]})},dS=()=>{let e=(0,M.TL)(),t=(0,M.CG)(a_.GX),i=(0,en.i)({base:!1,lg:!0})||!1,[n,r]=(0,j.useState)(!1),[l,s]=(0,j.useState)(!1),o=(0,j.useCallback)(()=>{e((0,a_.dQ)({isOpen:!1})),e((0,a_.Mt)()),s(!0)},[e]),a=(0,j.useCallback)(()=>{i||r(!0),e((0,a_.dQ)({isOpen:!0}))},[i,e]),d=!i&&n;return(0,j.useEffect)(()=>{let t=!i&&!n,r=i&&!l;t?e((0,a_.dQ)({isOpen:!1})):r&&e((0,a_.dQ)({isOpen:!0}))},[e,i,n,l]),{onClose:o,onOpen:a,isOpen:t&&(i||!i&&d)}},dI=(0,s6.E)(eh.z),d_=(0,j.memo)(()=>{let{editor:e}=(0,ta._i)(),{isOpen:t,onClose:i,onOpen:n}=dS(),r=(0,j.useRef)({navItemPreviewRefMap:{}}),l=(0,iM.Br)("edit"),a=(0,M.CG)(L.hN),d=(0,eT.Yy)(),[c,m]=(0,j.useState)(!1),p=(0,j.useCallback)(()=>{m(!0),setTimeout(()=>{n()}),setTimeout(()=>{m(!1)},750)},[n]);return(0,j.useEffect)(()=>eQ.F7.on("keydown","FILMSTRIP",e=>!!(0,ij.ZP)("Mod+\\")(e)&&(t?i():p(),!0)),[t,i,p]),(0,s.jsx)(aw.Provider,{value:r.current,children:(0,s.jsx)(ep.Wk,{isDark:d,children:(0,s.jsx)(s7.M,{children:t?(0,s.jsx)(dE,{onClose:i,editor:e,readOnly:!l||!a},"filmstrip"):(0,s.jsx)(ep.kH,{placement:"top-end",label:(0,s.jsx)(h.cC,{id:"7ShgZt"}),isDisabled:c,shortcut:"Mod+\\",children:(0,s.jsxs)(dI,{initial:{opacity:0},animate:{opacity:1,transition:av},exit:{opacity:0,transition:af},zIndex:11,css:{"--trigger-height":"var(--chakra-sizes-14)"},tabIndex:-1,position:"fixed",left:2,top:"calc(50% - (var(--trigger-height) / 2) + var(--chakra-sizes-5))",borderRadius:"xl","data-guider-highlight":"filmstrip",h:"var(--trigger-height)",w:8,onClick:p,children:[(0,s.jsx)(aj.TX,{children:(0,s.jsx)(h.cC,{id:"7ShgZt"})}),c?(0,s.jsx)(o.k,{children:(0,s.jsx)(tu.$,{size:"sm"})}):(0,s.jsx)(x.G,{icon:u.CjD})]},"filmstrip-opener")})})})})});d_.displayName="Filmstrip";var dA=i(94207),dT=i(26900),dO=i(56256);let dP=e=>{let{isOpen:t,onClose:i,onSaveSuccess:n,docId:r}=e,l=(0,iJ.p)(),o=(0,j.useRef)(null),[a,d]=(0,j.useState)(""),[c,{loading:u}]=(0,v.D1_)(),x=()=>{c({variables:{id:r,title:a}}).then(()=>{d(()=>""),n()}).catch(e=>{console.error(e),l({title:(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(h.cC,{id:"AToAqe",values:{0:e.message}})}),position:"top",status:"error"})})};return(0,s.jsxs)(n9.u_,{returnFocusOnClose:!1,onClose:i,closeOnOverlayClick:!0,isOpen:t,initialFocusRef:o,children:[(0,s.jsx)(t_.Z,{}),(0,s.jsxs)(n6.h,{children:[(0,s.jsx)(n7.x,{children:(0,s.jsx)(h.cC,{id:"kq/0Sg",values:{GAMMA_ARTIFACT_PROPER_NOUN:K.Yc}})}),(0,s.jsx)(tT.o,{}),(0,s.jsx)(tO.f,{children:(0,s.jsx)(sp.I,{ref:o,value:a,required:!0,placeholder:(0,l0.$)(),onChange:e=>d(e.target.value),onKeyDown:e=>{"Enter"===e.key&&x()}})}),(0,s.jsx)(tP.m,{children:(0,s.jsx)(tc.K,{spacing:2,direction:"row",align:"center",children:(0,s.jsx)(eh.z,{isLoading:u,isDisabled:u||!a||!a.length,onClick:()=>{x()},children:(0,s.jsx)(h.cC,{id:"tfDRzk"})})})})]})]})},dD=(0,j.memo)(e=>{let{doc:t}=e,i=(0,j.useCallback)(()=>l5.T.emit("openSharePanel",{view:"invite"}),[]),{isOpen:n,onClose:r,onOpen:l}=(0,t1.M)({id:"analyticsModalDisclosure"}),{isOpen:a,onOpen:d,onClose:c}=(0,t1.M)({id:"titleModalDisclosure"}),p=(0,eG.z$)(),{user:g}=(0,eY.SE)(),f=(0,eY.py)("manage",t)&&!!g,v=(0,j.useCallback)(()=>{t&&(t.title&&""!==t.title?i():d())},[t,i,d]),C=(0,j.useCallback)(e=>()=>{null==p||p.track(eG.AA.DOC_ANALYTICS_VIEWED,{docId:null==t?void 0:t.id,source:e,type:"full"}),l()},[p,null==t?void 0:t.id,l]);return f&&t?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(o.k,{children:(0,s.jsx)(ep.kH,{closeOnMouseDown:!1,closeOnClick:!1,label:(0,s.jsx)(h.cC,{id:"YaUqUV"}),children:(0,s.jsx)(dO.r,{"data-guider-highlight":"view-analytics-button","aria-label":m.ag._({id:"YaUqUV"}),onMouseDown:aP.br,onClick:C("toolbar_analytics_block"),icon:(0,s.jsx)(x.G,{icon:u.Ma4})})})}),a&&(0,s.jsx)(dP,{onClose:c,isOpen:a,onSaveSuccess:()=>{c(),i()},docId:null==t?void 0:t.id}),n&&(0,s.jsx)(lW,{doc:t,onSharePanelOpen:v,onAnalyticsPanelClose:r,isAnalyticsPanelOpen:n,mode:"full"})]}):null});var dR=i(58905),dN=i(75230),dG=i(64951),dz=i(25215),dM=i(58450),dL=i(41421),dF=i(7628),dU=i(7e4);let dW=(0,s6.E)(o.k),dH=e=>{let{doc:t}=e;return(0,s.jsx)(dW,{initial:{opacity:1},animate:{opacity:1},exit:{opacity:0},children:(0,s.jsx)(s7.M,{initial:!1,children:(0,s.jsx)(dY,{doc:t})})})},dV=(0,j.memo)(e=>{let{doc:t}=e,{editor:i}=(0,ta._i)(),{isConnected:n}=(0,v.$gs)(),r=(0,iJ.p)(),l=(0,j.useRef)(null),o=(0,j.useRef)(null),[a,{loading:c}]=(0,v.D1_)(),[u,x]=(0,j.useState)(null),[p,g]=(0,j.useState)(!1),[f,C]=(0,j.useState)(!1),b=(0,eY.py)("edit",t),y=b?300:500,k=(0,j.useCallback)(()=>{if(!i)return"";let[e]=(0,eM.N2)(i.state.doc,eW.KH);if(!e)return"";let t=(0,oc.getCardTitle)(e.node.toJSON());return t||""},[i]);(0,j.useEffect)(()=>{!t||p||c||(x(t.title||""),C(!!t.titleEdited))},[t,p,c]);let w=()=>{l.current.style.width=o.current.offsetWidth+0+"px"},E=(0,eu.ff)("gray.800","gray.200");return(0,s.jsx)(ep.kH,{label:b?n?(0,s.jsx)(h.cC,{id:"2wxgft"}):(0,s.jsx)(h.cC,{id:"Cb+Bgk"}):null,"aria-label":m.ag._({id:"2wxgft"}),children:(0,s.jsxs)(dR.C,{value:u||"",placeholder:u||k(),isDisabled:c||!b||!n,isPreviewFocusable:b,maxW:y,width:"100%",fontWeight:"normal",onCancel:()=>{w(),g(!1)},onFocus:()=>{w(),t&&!c&&g(!0)},onChange:e=>{w(),p&&(x(e),C(!!e))},onSubmit:()=>{if(!t||c)return;g(!1);let e=u||k();a({variables:{id:t.id,title:e,titleEdited:f}}).catch(e=>{console.error(e),r({title:(0,s.jsx)(h.cC,{id:"AToAqe",values:{0:e.message}}),position:"top",status:"error"})})},children:[(0,s.jsx)(dN.w,{px:1,py:.5,display:p?"inline":"block",overflowX:"hidden",textOverflow:"ellipsis",color:f?E:"inherit"}),(0,s.jsx)(dG.V,{ref:l,px:1,py:.5,color:f?E:"inherit",maxW:y,_focus:{outline:"none",shadow:"0 0 0 2px rgb(66 153 225 / 60%)"}}),(0,s.jsx)(d.xu,{ref:o,as:"span",display:"inline-block",position:"absolute",left:"-9999px",opacity:0,zIndex:-1,minW:"180px",px:1,dangerouslySetInnerHTML:{__html:nc().sanitize((u||"").replace(/\s/g,"&nbsp;"))}})]})})});dV.displayName="EditableDocTitle";let dB=e=>{let{cardId:t,isEllipsis:i,value:n,onClick:r}=e,l=(0,e4.c)(t);if(i)return(0,s.jsx)(x.G,{icon:u.cNd});if(!t&&!n)return null;let o=n||(null==l?void 0:l.title)||"";return(0,s.jsx)(a.x,{noOfLines:1,onClick:r,maxW:180,fontWeight:"normal",children:o})},dK=e=>{let{isPresentModeFlat:t}=e;return e=>{let i=(0,L.gh)(e),n=(0,L.i2)(e)||"",r=(0,L.X9)(e),l=r.parents[n]||[];if("DOC_VIEW"===i||t)return[{isHome:!0},{isDocTitle:!0}];let s=l[0],o=l[l.length-1];return[{isHome:!0},l.length>1?{cardId:s}:null,l.length>2?{isEllipsis:!0}:null,l.length>0?{cardId:o}:null,{cardId:n}]}},dq=()=>{let e=(0,e7.ye)("presentModeFlat"),t=(0,M.CG)(dK({isPresentModeFlat:e}),(e,t)=>JSON.stringify(e)===JSON.stringify(t));return t},dY=(0,j.memo)(e=>{let{doc:t}=e,i=dq(),[n]=(0,dU.X)(U.H.lastHomeUrl,"/"),r=(0,e7.ye)("offline"),{user:l}=(0,eY.SE)(),{isConnected:c}=(0,v.$gs)(),{confirmNavigation:p}=(0,ta._i)(),{push:g}=(0,eg.useRouter)(),j=(0,en.i)({base:"xs",sm:"sm"}),f=(0,eu.ff)("gray.500","gray.400"),C=(0,eu.ff)("gray.800","gray.100");return(0,s.jsxs)(ex.U,{spacing:0,as:eh.z,textAlign:"left",px:0,_hover:{color:C},h:8,bg:"transparent",boxShadow:"none",border:"none",children:[(0,s.jsx)(dz.a,{display:"flex",alignItems:"center",whiteSpace:"nowrap",size:j,spacing:["4px","8px"],separator:(0,s.jsx)(d.xu,{color:"gray.300",mt:["0.2rem","0.125rem"],children:(0,s.jsx)(x.G,{icon:u._tD})}),children:i.map((e,r)=>{if(!e)return null;let o=r===i.length-1,{cardId:a,isEllipsis:d,isDocTitle:c,isHome:h,value:m}=e,j=h?"home":d?"ellipsis":a||m||r;if(h&&!l)return null;let v={as:iC(),href:n||"/",colorScheme:"gray",fontWeight:"normal","data-testid":"toolbar-home-link"};return(0,s.jsx)(dM.g,{children:(0,s.jsx)(dW,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},children:(0,s.jsx)(dL.A,{isCurrentPage:o,pointerEvents:o&&!c?"none":"inherit",color:o?f:"inherit",...h?{...v}:{},children:c?(0,s.jsx)(dV,{doc:t}):h?(0,s.jsx)(nF.r,{href:v.href,onClick:e=>{let t=!e.shiftKey&&(e.metaKey||e.ctrlKey);t||(e.preventDefault(),p().then(()=>{g(v.href)}))},mr:1,children:(0,s.jsx)(x.G,{size:"1x",icon:u.J9Y})}):(0,s.jsx)(dB,{cardId:a,value:m,isEllipsis:d,onClick:()=>{a&&(0,dF.D)({cardId:a,method:"push"})}})})},j)},j)})}),!c&&(0,s.jsx)(ep.kH,{label:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.x,{mr:2,children:(0,s.jsx)(h.cC,{id:"ysdDIA"})}),r&&(0,s.jsx)(a.x,{color:"gray.300",children:(0,s.jsx)(h.cC,{id:"+QNhGE"})})]}),"aria-label":m.ag._({id:"IcHxhR"}),children:(0,s.jsx)(o.k,{color:"gray.300",alignItems:"center",pr:3,children:(0,s.jsx)(x.G,{icon:u.bKP})})})]})});dY.displayName="BreadcrumbGroup";var dZ=i(82642),dJ=i(62453),dX=i(93274),dQ=i(28957);let d$=()=>{let{user:e,anonymousUser:t}=(0,eY.SE)(),i=(0,f.I0)(),n=(0,iJ.p)(),{editor:r}=(0,ta._i)(),{collaborators:d,followers:c}=(0,f.v9)((0,L._h)((null==e?void 0:e.id)||t.id));oY({editor:r,collaborators:d,user:e});let u=(0,f.v9)(L.Ok),x=(0,f.v9)(L.e0),p=(0,f.v9)(L.yn),g=(0,f.v9)(L.gs),v=(0,f.v9)(L.JA);(0,j.useEffect)(()=>{u.forEach(e=>{n({duration:2e3,position:"bottom",render:function(){return(0,s.jsxs)(o.k,{bg:"gray.50",p:3,px:6,align:"center",borderRadius:"md",shadow:"md",children:[(0,s.jsx)(r5.q,{size:"sm",src:e.profileImageUrl,border:"solid 2px ".concat(e.color),color:r_()(e.color).isDark()?"white":"black",bg:e.color,ignoreFallback:!0}),(0,s.jsx)(a.x,{ml:2,children:(0,s.jsx)(h.cC,{id:"DSaSKH",values:{0:e.name}})})]})}})})},[u,n]),(0,j.useEffect)(()=>{let e=!p&&g&&!v;if(!r||!e)return;n.closeAll();let t=n({id:"detached-toast",render:()=>(0,s.jsxs)(o.k,{bg:"gray.50",p:3,px:6,m:4,justify:"flex-end",align:"center",borderRadius:"md",shadow:"md",children:[(0,s.jsx)(a.x,{size:"sm",mr:6,children:(0,s.jsx)(h.cC,{id:"PjodLp"})}),(0,s.jsxs)(em.h,{size:"sm",alignItems:"center",children:[(0,s.jsx)(eh.z,{onClick:()=>{i((0,L.Qx)({attached:!0}))},variant:"solid",children:(0,s.jsx)(h.cC,{id:"f/C2ic"})}),(0,s.jsx)(ep.kH,{label:(0,s.jsx)(h.cC,{id:"5JWVnj"}),children:(0,s.jsx)(I.h,{isRound:!0,variant:"ghost",size:"xs","aria-label":m.ag._({id:"5JWVnj"}),icon:(0,s.jsx)(dZ.T,{}),onClick:()=>{i((0,L.Qx)({attached:!1,following:null}))}})})]})]}),position:"bottom",duration:null});return()=>{n.close(t)}},[r,p,g,v,n,i]),(0,j.useEffect)(()=>{g||!r||r.isDestroyed||i((0,L.Qx)({following:null}))},[r,g,i]);let C=(0,en.i)({base:4,md:6,xl:8})||6,b=C/(c.length?2:1),y=C/(d.length?2:1);return(0,s.jsx)(o.k,{children:(0,s.jsxs)(ex.U,{divider:(0,s.jsx)(dJ.c,{borderColor:"gray.200"}),children:[c.length&&(0,s.jsx)(d0,{type:l.FOLLOWERS,collaborators:c,max:y,isEveryone:0===d.length,localCollaborator:x,localIsAttached:p}),d.length&&(0,s.jsx)(d0,{type:l.COLLABORATORS,collaborators:d,max:b,isEveryone:0===c.length,localCollaborator:x,localIsAttached:p})]})})};(r=l||(l={})).FOLLOWERS="FOLLOWERS",r.COLLABORATORS="COLLABORATORS";let d0=e=>{let{collaborators:t,localCollaborator:i,localIsAttached:n,type:r,max:d,isEveryone:c}=e,u=oq(),x=r===l.FOLLOWERS,p=t.length>d,g=p?t.slice(0,d-1):t,j=p?t.length-d+1:0,f=e=>{let{localIsFollowing:t,collaborator:i}=e;x||u({localIsFollowing:t,localIsAttached:n,collaborator:i})};return(0,s.jsx)(dQ.S,{children:(0,s.jsxs)(dX.H,{size:"sm",spacing:x?-2:0,children:[x&&(0,s.jsx)(d1,{isEveryone:c}),g.map((e,t)=>{var r;let l=(null==i?void 0:null===(r=i.memoState)||void 0===r?void 0:r.following)===e.sessionId,d=!!e.idleSince,c=!x&&(p||g.length-1!==t);return(0,s.jsx)(ep.Vw,{ignoreFallback:!0,name:e.name,label:(0,s.jsxs)(o.k,{direction:"column",justify:"center",align:"center",children:[(0,s.jsx)(a.x,{children:e.name}),(0,s.jsx)(a.x,{fontSize:"xs",children:x?(0,s.jsx)(h.cC,{id:"iRohzP"}):l&&n?(0,s.jsx)(h.cC,{id:"1QTvS5"}):(0,s.jsx)(h.cC,{id:"2Ldadb"})})]}),pointerEvents:d?"none":"auto",opacity:d?.4:1,transitionProperty:"common",transitionDuration:"normal",src:e.profileImageUrl,border:"solid 2px ".concat(e.color),nubbin:l&&n,bg:e.color,shadow:"base",color:r_()(e.color).isDark()?"white":"black",cursor:x?"":"pointer",boxProps:c?{marginEnd:-2}:{},onClick:()=>f({localIsFollowing:l,collaborator:e})},e.sessionId)}),j>0&&(0,s.jsxs)(ep.Z9,{tooltipLabel:m.ag._({id:"25VyZX"}),onClick:e=>{var n;let r=t.find(t=>t.id===e.id),l=!!(r&&(null==i?void 0:null===(n=i.memoState)||void 0===n?void 0:n.following)===r.sessionId);f({localIsFollowing:l,collaborator:r})},avatars:t,count:j,disabled:x,children:[(0,s.jsx)(a.x,{px:2,children:x?(0,s.jsx)(h.cC,{id:"vliZud",values:{0:t.length}}):(0,s.jsx)(h.cC,{id:"sC4bhw",values:{0:t.length}})}),!x&&(0,s.jsx)(a.x,{px:2,fontSize:"sm",color:"gray.500",children:(0,s.jsx)(h.cC,{id:"miJbY4"})}),(0,s.jsx)(n2.R,{})]})]})})},d1=e=>{let{isEveryone:t}=e,[i,n]=(0,j.useState)(!1),[r,l]=(0,j.useState)(!1),[o,a]=(0,j.useState)(!1);return((0,j.useEffect)(()=>{!i&&t&&(l(!0),n(!0),setTimeout(()=>{l(!1)},3e3))},[t,i]),t)?(0,s.jsx)(d.xu,{fontSize:"sm",color:"",px:2,mr:2,children:(0,s.jsx)(ep.kH,{label:(0,s.jsx)(h.cC,{id:"w7dTyp"}),isOpen:o||r,children:(0,s.jsx)(d.xu,{mr:2,px:1,bg:"green.300",color:"green.900",borderRadius:"full",onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),children:(0,s.jsx)(x.G,{icon:u.Mdf})})})}):(0,s.jsx)(d.xu,{fontSize:"sm",color:"gray.700",pr:4,children:(0,s.jsx)(x.G,{icon:u.Mdf})})};var d2=i(46164),d5=i(43970);let d4=(0,s6.E)(d.xu),d3=e=>{let{commentFeedItems:t,editor:i,doc:n,user:r}=e;return i&&r?(0,s.jsx)(tc.K,{p:2,children:(0,s.jsx)(s7.M,{initial:!1,children:t.map(e=>(0,s.jsx)(d4,{layout:!0,initial:{opacity:0,scale:.85},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.85},bg:"gray.100",borderColor:"gray.200",borderWidth:"1px",borderRadius:"md",shadow:"sm",children:(0,s.jsx)(d5.q,{comment:e,editor:i,selfUser:r,docId:n.id,userCanComment:!1,instanceType:"notification"},e.id)},e.id))})}):null};var d9=i(38140),d6=i(14274);let d7=e=>!!e.comment&&null!==e.timeout,d8=e=>{let{user:t,docId:i,docComments:n=[],pauseExiration:r=!1,duration:l=5e3}=e,s=(0,iJ.p)(),o=null==t?void 0:t.id,a=(0,j.useMemo)(()=>{if(!o)return null;let e=new d9.default(d6.v.KNOCK_PUBLIC_KEY);return e.authenticate(o),e},[o]),[d,c]=(0,j.useState)({}),u=(0,j.useRef)(!0),x=(0,j.useRef)(r);x.current=r,(0,j.useEffect)(()=>()=>{u.current=!1},[]);let h=(0,j.useCallback)(()=>c({}),[]),m=(0,j.useCallback)(e=>{c(t=>Object.entries(t).reduce((t,i)=>{let[n,r]=i,l=!0===e?-1===r.timeout:n===e;return l||(t[n]=r),t},{}))},[]);return(0,j.useEffect)(()=>{r||m(!0)},[m,r]),(0,j.useEffect)(()=>{Object.entries(d).forEach(e=>{let[t,{entry:i,timeout:r}]=e;if(null===r){let e=i.data.commentId,r=null==n?void 0:n.find(t=>t.id===e);if(r){let e=setTimeout(()=>{u.current&&(x.current?c(e=>{let i={...e};return i[t].timeout=-1,i}):m(t))},l);c(n=>({...n,[t]:{entry:i,comment:r,timeout:e}}))}}})},[d,n,l,m]),(0,j.useEffect)(()=>{if(!a||!i)return;let e=a.feeds.initialize(d6.v.KNOCK_FEED_ID,{source:"new-comment",status:"unseen"}),t=e.listenForUpdates();e.on("messages.new",t=>{let{entries:n}=t,[r]=n;r.data.docId===i&&(c(e=>({...e,[r.id]:{entry:r,timeout:null}})),e.markAsSeen(r).then(()=>{console.debug("New notification marked as seen")}).catch(e=>{console.error("Unable to mark notification as seen",e)}))});let n=v.C9N.on("status",e=>{let{isConnected:t}=e,i=a.client();t?i.connectSocket():i.disconnectSocket()});return()=>{n(),t()}},[i,s,a]),{reset:h,comments:Object.values(d).filter(d7).map(e=>e.comment)}},ce=e=>{var t;let{toggleCommentsPanel:i,isCommentsPanelOpen:n,doc:r,mode:l}=e,{user:o}=(0,eY.SE)(),{editor:a}=(0,ta._i)(),[d,c]=(0,tr.XI)(),{comments:h,reset:m}=d8({user:o,docId:null==r?void 0:r.id,docComments:null==r?void 0:r.comments,pauseExiration:c}),p=!!(a&&r&&r.comments);(0,j.useEffect)(()=>{if(!p)return;let{commentId:e}=(0,ev.sY)();e&&t4.pw.emit(t4.TI.OPEN_POPUP_COMMENT,{commentId:e,highlightComment:!0})},[p]),(0,j.useEffect)(()=>{(n||l===eV.q.SLIDE_VIEW)&&m()},[n,m,l]);let g=!!h.length&&!n&&l!==eV.q.SLIDE_VIEW,f=(null==r?void 0:null===(t=r.comments)||void 0===t?void 0:t.filter(e=>e.status===v.Ux9.Open).length)||0;return(0,s.jsxs)(E.J,{isLazy:!0,lazyBehavior:"keepMounted",returnFocusOnClose:!1,isOpen:g,placement:"bottom",children:[(0,s.jsx)(S.x,{children:(0,s.jsx)(dO.h,{onMouseDown:aP.br,onClick:i,icon:(0,s.jsx)(x.G,{icon:u.Mzg}),isActive:n,"aria-label":n?"Hide comments":"Show comments",borderRadius:5,children:f})}),(0,s.jsx)(nJ.h,{children:r&&(0,s.jsxs)(_.y,{bg:"white",shadow:"lg",border:"none",ref:d,children:[(0,s.jsx)(d2.Q,{bg:"white"}),(0,s.jsx)(d3,{editor:a,user:o,commentFeedItems:h,doc:r})]})})]})},ct=()=>(0,s.jsx)(o.k,{children:(0,s.jsx)(ep.kH,{closeOnMouseDown:!1,closeOnClick:!1,label:(0,s.jsx)(h.cC,{id:"EVnzPs"}),children:(0,s.jsx)(dO.r,{"data-guider-highlight":"design-partner-button","aria-label":"Edit with AI",colorScheme:"trueblue",variant:"plain",onClick:()=>{iB.T.emit("toggle",{})},icon:(0,s.jsx)(x.G,{icon:u.JyM})})})}),ci=(0,s6.E)(d.xu),cn=()=>{let e=(0,M.CG)(L.WI),t=(0,M.CG)(L.yn);return(0,s.jsx)(s7.M,{initial:!1,children:e&&t&&(0,s.jsx)(ci,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},position:"absolute",pointerEvents:"none",borderTop:"solid ".concat(4,"px ").concat(e.color),top:0,left:0,bottom:0,right:0,height:"var(--100vh)"})})},cr=e=>{let{doc:t,editorWrapperEl:i,scrollingParentSelector:n}=e;return(0,s.jsxs)(ir.v,{placement:"bottom-end",modifiers:[{name:"flip",enabled:!0,options:{fallbackPlacements:["left"]}}],children:[(0,s.jsx)(il.j,{as:dO.r,borderRadius:"md",icon:(0,s.jsx)(x.G,{icon:u.cNd}),onMouseDown:aP.br,"data-testid":"doc-toolbar-menu-button"}),(0,s.jsx)(nJ.h,{children:t&&(0,s.jsx)(oE,{doc:t,scrollingParentSelector:n,editorWrapperEl:i})})]})},cl=e=>{let{docId:t,enabled:i,enterSlideView:n}=e,r=(0,M.CG)(L.e0),l=(0,j.useRef)(null),s=(0,iJ.p)();(0,j.useEffect)(()=>{!i&&l.current&&l.current.close()},[i]),(0,j.useEffect)(()=>{let e=()=>{var e;null===(e=l.current)||void 0===e||e.close()};return window.addEventListener("beforeunload",e),()=>{var t;window.removeEventListener("beforeunload",e),null===(t=l.current)||void 0===t||t.close()}},[]);let o=(0,j.useCallback)(()=>{if(!t||!(null==r?void 0:r.sessionId))return;let e=(0,ev.C3)({docId:t,sessionId:r.sessionId}),i=window.open(e,"present-view","popup,left=0,top=0,width=720,height=580");i?l.current=i:(s({title:"Failed to open presenter view.",description:"Please allow popups for this site and try again.",status:"error",position:"top",duration:5e3}),console.error("[usePresenterViewToggle] Failed to open presenter view")),n({fullscreen:!1})},[t,n,null==r?void 0:r.sessionId,s]);return{handlePresentViewClick:o}};var cs=i(73235),co=i(21979);function ca(){let e=(0,cs._)(["\n    0% { transform: scale(1.0); filter: brightness(1.0);  }\n    3% { transform: scale(1.0); filter: brightness(1.0);  }\n    8% {  transform: scale(0.90); filter: brightness(1.30);  }\n    18% { transform: scale(1.05); filter: brightness(1.0); }\n    30% { transform: scale(1.0); filter: brightness(1.0); }\n  "]);return ca=function(){return e},e}let cd=e=>({followOnStart:!0,followingId:e}),cc=e=>{switch(e){case"edit":return m.ag._({id:"UZN1cZ"});case"comment":return m.ag._({id:"jFTs0A"});case"view":return m.ag._({id:"Ya6CJ0"});default:return m.ag._({id:"Txd1qM"})}},cu=e=>{var t,i;let{isOpen:n,onClose:r,accessLinkUrl:l,onPlayClick:o}=e,{user:c}=(0,eY.SE)(),{replace:u}=(0,eg.useRouter)(),p=cd(null==c?void 0:c.id),[g,f]=(0,j.useState)(p),v=(0,ev.eo)(l,g),{user:C,color:b}=(0,eY.SE)(),y=(0,M.CG)(tk.yx),k=null==y?void 0:null===(i=y.accessLinks)||void 0===i?void 0:null===(t=i[0])||void 0===t?void 0:t.permission,w=(0,s9.F4)(ca());return(0,s.jsx)(ep.Wk,{isDark:!1,children:(0,s.jsxs)(n9.u_,{isOpen:n,onClose:r,size:"lg",children:[(0,s.jsx)(t_.Z,{}),(0,s.jsxs)(n6.h,{children:[(0,s.jsx)(n7.x,{children:(0,s.jsx)(h.cC,{id:"88XnIQ"})}),(0,s.jsx)(tT.o,{}),(0,s.jsx)(rg.i,{}),(0,s.jsx)(tO.f,{pt:"6",children:(0,s.jsxs)(tc.K,{spacing:"4",children:[(0,s.jsx)(a.x,{children:(0,s.jsx)(h.cC,{id:"oYTLJe",values:{GAMMA_ARTIFACT_PROPER_NOUN:K.Yc,0:cc(k)},components:{0:(0,s.jsx)(a.x,{as:"span",fontWeight:"bold",borderBottom:"1px dashed",borderColor:"gray.400",display:"inline-block"}),1:(0,s.jsx)(ep.kH,{label:m.ag._({id:"8LnpqL"}),placement:"top"})}})}),(0,s.jsx)(d.xu,{mb:"2",children:(0,s.jsx)(co.I,{url:v,variant:"solid"})}),(0,s.jsxs)(iS.b,{children:[(0,s.jsx)(rb.z,{}),(0,s.jsxs)(ex.U,{flexBasis:"100%",alignItems:"top",children:[(0,s.jsx)(a.x,{fontSize:"sm",width:"100%",children:(0,s.jsx)(h.cC,{id:"EApNIe"})}),(0,s.jsxs)(d.xu,{position:"relative",textShadow:"sm",children:[(0,s.jsx)(r5.q,{animation:"".concat(w," 2s infinite ease-out"),name:null==C?void 0:C.displayName,src:null==C?void 0:C.profileImageUrl,size:"md",border:"solid 3px ".concat(b.value),shadow:"lg"}),(0,s.jsx)(d.xu,{position:"absolute",top:"1.75rem",left:"1.75rem",outline:"0 0 2px rgba(255,255,255,1.0)",sx:{path:{stroke:"white",strokeWidth:48}},color:"black",children:(0,s.jsx)(x.G,{icon:iR.qaO,fixedWidth:!0})})]})]})]})]})}),(0,s.jsx)(tP.m,{children:(0,s.jsxs)(em.h,{children:[(0,s.jsx)(eh.z,{variant:"ghost",colorScheme:"gray",onClick:()=>{r()},children:(0,s.jsx)(h.cC,{id:"DPfwMq"})}),(0,s.jsx)(eh.z,{variant:"solid",onClick:()=>{r(),o(),u(v,v,{shallow:!0})},leftIcon:(0,s.jsx)(x.G,{icon:iR.zc}),children:(0,s.jsx)(h.cC,{id:"tbDuNX"})})]})})]})]})})},cx=e=>{var t,i,n,r;let{doc:l,docEditorType:c,isStaticEditor:p,enterSlideView:g,exitSlideView:f,setExitedFullscreenByClick:v,isFullscreen:C,enterFullscreen:b,exitFullscreen:y,shouldHide:k}=e,{onOpen:w,onClose:E,isOpen:S}=(0,t1.M)({id:"meetModal"}),{user:I}=(0,eY.SE)(),_=(0,M.CG)(L.gh),A=(0,j.useRef)(_);(0,j.useEffect)(()=>{A.current=_},[_]);let{shortcutLabel:T,shortcutIcon:O,shortcutKeys:P,buttonLabel:D}=rt()[_],R=null==l?void 0:null===(i=l.accessLinks)||void 0===i?void 0:null===(t=i[0])||void 0===t?void 0:t.url,N=!!(null==l?void 0:null===(r=l.accessLinks)||void 0===r?void 0:null===(n=r[0])||void 0===n?void 0:n.permission),G=(0,eY.py)("comment",l||void 0),z=(0,eY.py)("manage",l||void 0),F=!p&&I&&R&&z,U=(0,e7.ye)("cardNotes"),W=_===eV.q.SLIDE_VIEW,H=_===eV.q.DOC_VIEW,V=U&&G&&c!==to.Z.PUBLIC_STATIC,{handlePresentViewClick:B}=cl({docId:null==l?void 0:l.id,enabled:U&&W,enterSlideView:g}),K=(0,e7.ye)("presentFullScreen"),q=(0,M.CG)(L.e_),Y="present"===q.primaryAction?"solid":"plain";return(0,s.jsxs)(o.k,{display:k?"none":"flex",children:[(0,s.jsxs)(em.h,{isAttached:!0,size:"sm","data-guider-highlight":"present-button-group","data-editor-mode":W?"slide":"doc",children:[(0,s.jsx)(ep.kH,{closeOnMouseDown:!1,closeOnClick:!1,label:T,shortcut:P,children:(0,s.jsx)(dO.h,{fontWeight:"normal",size:"sm",variant:Y,onClick:()=>{W?f():g({fullscreen:K})},onMouseDown:aP.br,icon:(0,s.jsx)(x.G,{icon:O}),"data-present-button":!0,children:D})}),(0,s.jsxs)(ir.v,{children:[(0,s.jsx)(il.j,{variant:Y,as:dO.r,icon:(0,s.jsx)(x.G,{icon:u.ptq})}),(0,s.jsx)(nJ.h,{children:(0,s.jsxs)(is.q,{zIndex:"popover",children:[H&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(n4.k,{title:m.ag._({id:"tbDuNX"}),children:[V&&(0,s.jsx)(n5.s,{icon:(0,s.jsx)(x.G,{icon:u.s0r,fixedWidth:!0}),onClick:B,children:(0,s.jsxs)(tc.K,{spacing:"0",children:[(0,s.jsx)(a.x,{children:(0,s.jsx)(h.cC,{id:"T+GUKl"})}),(0,s.jsx)(a.x,{fontSize:"sm",color:"gray.600",children:(0,s.jsx)(h.cC,{id:"ACelDx"})})]})}),V&&(0,s.jsx)(n2.R,{}),(0,s.jsx)(n5.s,{icon:(0,s.jsx)(x.G,{icon:u.Rkb,fixedWidth:!0}),command:(0,ep.cE)("Mod+Enter"),onClick:()=>g({fullscreen:!1}),children:(0,s.jsx)(h.cC,{id:"LRFe2O"})}),(0,s.jsx)(n5.s,{icon:(0,s.jsx)(x.G,{icon:u.tc$,fixedWidth:!0}),command:(0,ep.cE)("Mod+Shift+Enter"),onClick:()=>g({fullscreen:!0}),children:(0,s.jsx)(h.cC,{id:"OwIqiD"})})]}),F&&(0,s.jsx)(n2.R,{})]}),W&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n5.s,{icon:(0,s.jsx)(x.G,{icon:iR.Bg$,fixedWidth:!0}),command:(0,ep.cE)("Esc"),onClick:f,children:(0,s.jsx)(h.cC,{id:"5Rfo7J"})}),(V||F)&&(0,s.jsx)(n2.R,{}),V&&(0,s.jsx)(n5.s,{icon:(0,s.jsx)(x.G,{icon:u.s0r,fixedWidth:!0}),onClick:B,children:(0,s.jsxs)(tc.K,{spacing:"0",children:[(0,s.jsx)(a.x,{children:(0,s.jsx)(h.cC,{id:"T+GUKl"})}),(0,s.jsx)(a.x,{fontSize:"sm",color:"gray.600",children:(0,s.jsx)(h.cC,{id:"ACelDx"})})]})})]}),F&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ep.kH,{isDisabled:N,label:(0,s.jsx)(h.cC,{id:"zk6wKo"}),children:(0,s.jsx)(d.xu,{children:(0,s.jsx)(n5.s,{onClick:()=>{var e;(null==l?void 0:null===(e=l.accessLinks)||void 0===e?void 0:e[0].permission)&&w()},isDisabled:!N,icon:(0,s.jsx)(x.G,{icon:u.ASo,fixedWidth:!0}),children:(0,s.jsx)(tc.K,{spacing:"0",children:(0,s.jsx)(h.cC,{id:"z7gRub",components:{0:(0,s.jsx)(a.x,{}),1:(0,s.jsx)(a.x,{fontSize:"sm",color:"gray.600"})}})})})})}),(0,s.jsx)(cu,{isOpen:S,onClose:E,accessLinkUrl:R,onPlayClick:()=>{g({fullscreen:!1})}})]})]})})]})]}),W&&(0,s.jsx)(o.k,{ml:W?2:0,children:(0,s.jsx)(ep.kH,{label:C?"Exit full screen":"Enter full screen",children:(0,s.jsx)(dO.r,{"aria-label":C?"Exit full screen":"Enter full screen",borderRadius:"md",icon:(0,s.jsx)(x.G,{icon:C?u.Qj4:u.TL5}),onClick:C?()=>{v(!0),y()}:b})})})]})},ch=e=>{let{doc:t}=e,{replace:i}=(0,eg.useRouter)(),n=(0,M.CG)(eS.lH),r=null==t?void 0:t.id,l=(0,eA.D5)({site:n,docId:r}),{publishDoc:c,publishSite:p,isPublishing:g}=i4({doc:t,site:n,path:l}),{statusText:f,detailText:v,lastPublishedTime:C,needsPublish:b,publishEnabled:y}=n0(g),k=n&&(0,eA.jl)(t,n),w=(0,j.useCallback)(()=>{if(!r)return;let e=(0,ev.yQ)({docId:r,preview:!0});i(e,void 0,{shallow:!0})},[r,i]);return n?(0,s.jsx)(o.k,{children:(0,s.jsxs)(em.h,{isAttached:!0,size:"sm",children:[(0,s.jsx)(ep.kH,{closeOnMouseDown:!1,closeOnClick:!1,isDisabled:!y,label:b&&!g?(0,s.jsxs)(tc.K,{children:[f,(0,s.jsx)(a.x,{color:"gray.400",children:(0,s.jsx)(h.cC,{id:"FmP7uY"})})]}):(0,s.jsx)(h.cC,{id:"o+bOqE"}),children:(0,s.jsx)(dO.h,{fontWeight:"normal",size:"sm",variant:"solid",onClick:p,onMouseDown:aP.br,isDisabled:!y,isLoading:g,icon:b?(0,s.jsx)(x.G,{icon:u.A$k}):(0,s.jsx)(x.G,{icon:u.LEp}),"data-publish-button":!0,children:b?(0,s.jsx)(h.cC,{id:"EEYbdt"}):(0,s.jsx)(h.cC,{id:"u3wRF+"})})}),(0,s.jsxs)(ir.v,{children:[(0,s.jsx)(il.j,{variant:"solid",as:dO.r,isDisabled:!y,icon:(0,s.jsx)(x.G,{icon:u.ptq})}),(0,s.jsx)(nJ.h,{children:(0,s.jsxs)(is.q,{zIndex:"popover",maxW:"360px",children:[(0,s.jsxs)(tc.K,{w:"100%",p:2,direction:"column",spacing:.5,children:[(0,s.jsx)(a.x,{fontSize:"sm",children:f}),v&&(0,s.jsx)(a.x,{fontSize:"xs",color:"gray.500",children:v}),C&&(null==t?void 0:t.site)&&(0,s.jsxs)(ex.U,{mx:2,mt:2,children:[(0,s.jsx)(a.x,{fontSize:"xs",color:"gray.500",children:k?C:(0,s.jsx)(h.cC,{id:"0bSVwO"})}),k&&(0,s.jsx)(l3,{site:t.site,path:(0,eA.fJ)(l)})]})]}),(0,s.jsx)(n2.R,{}),(0,s.jsxs)(n4.k,{title:m.ag._({id:"EEYbdt"}),children:[(0,s.jsxs)(n5.s,{icon:(0,s.jsx)(x.G,{icon:u.A$k,fixedWidth:!0}),onClick:p,alignItems:"baseline",children:[(0,s.jsx)(h.cC,{id:"1EeNDU"}),(0,s.jsx)(a.x,{fontSize:"xs",color:"gray.500",children:(0,s.jsx)(h.cC,{id:"TG5c7I"})})]}),(0,s.jsxs)(n5.s,{icon:(0,s.jsx)(x.G,{icon:u.PQh,fixedWidth:!0}),onClick:c,alignItems:"baseline",children:[(0,s.jsx)(h.cC,{id:"jNnwuI"}),(0,s.jsx)(a.x,{fontSize:"xs",color:"gray.500",children:(0,s.jsx)(h.cC,{id:"+s7ng3"})})]})]}),(0,s.jsx)(n2.R,{}),(0,s.jsx)(n4.k,{title:m.ag._({id:"rdUucN"}),children:(0,s.jsx)(ep.kH,{label:(0,s.jsx)(h.cC,{id:"aChIoL"}),children:(0,s.jsx)(d.xu,{children:(0,s.jsx)(n5.s,{onClick:w,icon:(0,s.jsx)(x.G,{icon:iR.sl_,fixedWidth:!0}),alignItems:"baseline",children:(0,s.jsx)(tc.K,{spacing:"0",children:(0,s.jsx)(h.cC,{id:"Y5Jq49",components:{0:(0,s.jsx)(a.x,{}),1:(0,s.jsx)(a.x,{fontSize:"xs",color:"gray.500"})}})})})})})})]})})]})]})}):null};var cm=i(8347),cp=i(60740),cg=i(16710),cj=i(62549);let cf=e=>{var t,i;let{doc:n,showAnalytics:r=!0,showSharePublic:l=!0,showEmbed:o=!0,showButton:c=!0}=e,{isOpen:u,onClose:x,onOpen:m}=(0,t1.M)({id:"analyticsModalDisclosure"}),{isSharePanelOpen:p,onSharePanelOpen:g,onSharePanelClose:f,view:v,setView:C}=(0,cp.y)(),{user:b,currentWorkspace:y}=(0,eY.SE)(),{editor:k}=(0,ta._i)(),w=(0,eY.py)("view",n),E=(0,eY.py)("edit",n),S=(0,eY.py)("manage",n),I=(0,eG.z$)();(0,j.useEffect)(()=>l5.T.on("openSharePanel",e=>{let{view:t}=e;g(),C(t)}),[g,C]);let _=(0,j.useCallback)(()=>{null==I||I.track(eG.AA.DOC_ANALYTICS_VIEWED,{docId:null==n?void 0:n.id,source:"share_panel",type:S?"full":"personal"}),m()},[I,S,null==n?void 0:n.id,m]);if(!w||!b||!n)return null;let A=n.collaborators||[],T=n.channels||[],O=(0,cj.Hs)([...A].sort((e,t)=>e.user.id===b.id?-1:t.user.id===b.id?1:0).map(e=>e.user.id===b.id?"You":e.user.displayName||"").concat(n.orgAccess?T.map(e=>{let{name:t}=e;return t||""}):[])),P=(0,cg.h_)(n,b),D=P?(0,cg.Xp)()[P]:null,R=(0,cg.Gi)(n,y);return null===D?(console.error("[SharePanel] Unknown VisibilityValue for doc",n),null):(0,s.jsxs)(s.Fragment,{children:[c&&(0,s.jsx)(ep.kH,{label:(0,s.jsxs)(s.Fragment,{children:[R&&(0,s.jsx)(a.x,{fontWeight:"bold",children:(0,s.jsx)(h.cC,{id:"OS9x6e",values:{GAMMA_ARTIFACT_PROPER_NOUN:K.Yc}})}),D.title(null==n?void 0:null===(t=n.organization)||void 0===t?void 0:t.name)?(0,s.jsx)(a.x,{children:D.title(null==n?void 0:null===(i=n.organization)||void 0===i?void 0:i.name)}):null,(0,s.jsx)(a.x,{fontSize:"xs",children:D.subtitle?D.subtitle(O||""):""})]}),children:(0,s.jsx)("span",{children:(0,s.jsx)(dO.h,{"data-guider-highlight":"share-button",onMouseDown:aP.br,icon:(0,s.jsx)(d.xu,{children:(0,s.jsx)(cm.aA,{visibility:D,isFromOtherOrg:R})}),isDisabled:!E,onClick:g,children:(0,s.jsx)(h.cC,{id:"Z8lGw6"})})})}),(0,s.jsx)(cm.WQ,{doc:n,editor:k,isSharePanelOpen:p,onSharePanelOpen:g,onSharePanelClose:f,onAnalyticsPanelOpen:_,view:v,setView:C,showAnalytics:r,showSharePublic:l,showEmbed:o}),u&&(0,s.jsx)(lW,{doc:n,onSharePanelOpen:g,onAnalyticsPanelClose:x,isAnalyticsPanelOpen:u,mode:S?"full":"personal"})]})},cv=(0,s6.E)(o.k),cC=e=>(0,s.jsx)(cv,{initial:{opacity:1},animate:{opacity:1},exit:{opacity:0},children:(0,s.jsx)(s7.M,{initial:!1,children:(0,s.jsx)(cy,{...e})})}),cb=["home","siteTitle","pageSwitcher"],cy=(0,j.memo)(e=>{let{doc:t,isPagesPanelOpen:i,togglePagesPanel:n,pagesPanelEnabled:r=!1}=e,[l]=(0,dU.X)(U.H.lastHomeUrl,"/"),c=(0,e7.ye)("offline"),p=(0,M.CG)(eS.lH),{user:g}=(0,eY.SE)(),{isConnected:j}=(0,v.$gs)(),{confirmNavigation:f}=(0,ta._i)(),{push:C}=(0,eg.useRouter)(),b=(0,en.i)({base:"xs",sm:"sm"}),y=(0,eu.ff)("gray.700","gray.300"),k=(0,eu.ff)("gray.500","gray.400"),w=(0,eu.ff)("gray.700","gray.100"),E={base:"140px",sm:"220px",xl:"300px"};return(0,s.jsxs)(ex.U,{spacing:0,as:eh.z,bg:"transparent",boxShadow:"none",border:"none",textAlign:"left",px:0,h:8,_hover:{color:w},_active:{boxShadow:"none"},children:[(0,s.jsx)(dz.a,{display:"flex",alignItems:"center",whiteSpace:"nowrap",size:b,spacing:["4px","8px"],variant:"plainButton",separator:(0,s.jsx)(d.xu,{color:"gray.300",mt:["0.2rem","0.125rem"],children:(0,s.jsx)(x.G,{icon:u._tD})}),children:cb.map((e,o)=>{if(!e)return null;if("siteTitle"===e){if(!t||!t.site||!r)return null;let e=null==p?void 0:p.routes.length;if(e&&1===e)return null}let d=o===cb.length-1,c="home"===e,h="siteTitle"===e;if(c&&!g)return null;let j={as:iC(),href:l||"/",colorScheme:"gray",fontWeight:"normal","data-testid":"toolbar-home-link"};return(0,s.jsx)(dM.g,{isCurrentPage:!1,children:(0,s.jsx)(cv,{initial:{opacity:0,scale:0},animate:{opacity:1,scale:1},exit:{opacity:0,scale:0},children:(0,s.jsx)(dL.A,{_hover:{cursor:h?"default":"pointer"},color:d?k:y,...c?{...j}:{},children:c?(0,s.jsx)(nF.r,{as:dO.h,ml:-2,mr:-1,href:j.href,onClick:e=>{let t=!e.shiftKey&&(e.metaKey||e.ctrlKey);t||(e.preventDefault(),f().then(()=>{C(j.href)}))},children:(0,s.jsx)(x.G,{size:"1x",icon:u.J9Y})}):h?(0,s.jsx)(a.x,{noOfLines:1,maxW:E,fontWeight:"normal",display:"block",children:null==p?void 0:p.name}):(0,s.jsxs)(ex.U,{spacing:0,children:[(0,s.jsx)(dV,{doc:t}),r&&(0,s.jsx)(dO.r,{size:"sm",variant:"ghost",onClick:()=>{null==n||n()},"aria-label":m.ag._({id:"TRfYMF"}),icon:(0,s.jsx)(x.G,{size:"1x",icon:i?u.onQ:u.gc2}),minW:0,px:2})]})})},e)},e)})}),!j&&(0,s.jsx)(ep.kH,{label:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(a.x,{mr:2,children:(0,s.jsx)(h.cC,{id:"ysdDIA"})}),c&&(0,s.jsx)(a.x,{color:"gray.300",children:(0,s.jsx)(h.cC,{id:"+QNhGE"})})]}),"aria-label":m.ag._({id:"IcHxhR"}),children:(0,s.jsx)(o.k,{color:"gray.300",alignItems:"center",pr:3,children:(0,s.jsx)(x.G,{icon:u.bKP})})})]})});cy.displayName="PageBreadcrumbGroup";let ck=e=>{let{spotlightingByBlock:t}=e,{editor:i}=(0,ta._i)(),n=(0,j.useCallback)(()=>{t?null==i||i.commands.turnOffSpotlight():null==i||i.commands.spotlightNextBlock()},[i,t]);return(0,s.jsx)(o.k,{children:(0,s.jsx)(ep.kH,{closeOnMouseDown:!1,closeOnClick:!1,label:(0,s.jsxs)(a.x,{whiteSpace:"nowrap",children:[t?"Turn off spotlight":"Turn on spotlight",(0,s.jsx)(a.x,{as:"span",display:"inline",color:"gray.400",ml:2,children:"S"})]}),children:(0,s.jsx)(dO.h,{colorScheme:"trueblue",variant:t?"solid":"plain",onClick:e=>{n(),e.target.blur()},icon:(0,s.jsx)(x.G,{icon:u.QMW}),children:"Spotlight"})})})};var cw=i(56745),cE=i(86963),cS=i(52394),cI=i(28664);let c_=(0,j.memo)(e=>{let{isOpen:t,onClose:i,openThemeEditor:n,openThemeEditorWithDefaultTheme:r,setDocTheme:l}=e,o=(0,M.CG)(L.Pu),a=(0,j.useCallback)(()=>{t4.pw.emit(t4.TI.OPEN_PAGE_SETUP,"background"),null==i||i()},[i]);return(0,s.jsx)(ep.Wk,{isDark:!1,children:(0,s.jsxs)(tI.d,{returnFocusOnClose:!1,isOpen:t,placement:"right",onClose:i,size:"md",children:[(0,s.jsx)(t_.Z,{background:"none"}),(0,s.jsxs)(tA.s,{"data-testid":"doc-theme-drawer","data-doc-theme-drawer":!0,motionProps:{variants:{enter:{x:"0%",transition:{duration:.2}},exit:{x:"100%",transition:{duration:.1}}}},children:[(0,s.jsx)(n7.x,{pb:4,children:(0,s.jsx)(cI.v,{title:(0,s.jsx)(h.cC,{id:"FEr96N"}),openThemeEditorWithDefaultTheme:r,showDrawerCloseButton:!0,currentTheme:o})}),(0,s.jsx)(tO.f,{overflowX:"hidden","data-theme-picker-scroll-container":!0,children:(0,s.jsx)(cS.t,{currentTheme:o,openBackgroundPanel:a,setTheme:l,openThemeEditor:n,openThemeEditorWithDefaultTheme:r})})]})]})})});c_.displayName="DocThemeDrawer";let cA=(0,j.memo)(()=>{var e;let t=(0,iJ.p)(),[i]=(0,v.Iyu)(),n=(0,M.CG)(eS.$U),{docId:r,getCollaborativeEditorInstance:l}=(0,ta._i)(),{isOpen:a,onOpen:d,onClose:c}=(0,t1.M)({id:"themeEditor"}),{isOpen:u,onOpen:x,onClose:m}=(0,t1.M)({id:"themeStyleDrawer"}),p=null===(e=l())||void 0===e?void 0:e.state.doc.toJSON(),g=(0,M.CG)(L.Pu),[f,C]=(0,cE.g)(),b=l(),{openThemeEditor:y,openThemeEditorWithDefaultTheme:k}=(0,eT.LW)(b,d,C),w=(0,eG.z$)(),{updateDocThemeWithAccentImages:E}=(0,eT.vi)({docId:r,editor:b}),S=(0,j.useCallback)(e=>{n&&e.id!==g.id&&i({variables:{input:{siteId:n,themeId:e.id}},update:(t,i)=>{let{data:r}=i,l=t.readFragment({id:"Theme:".concat(e.id),fragment:v.ASj,fragmentName:"DefaultThemeFields"});t.updateQuery({query:v.BYL,variables:{id:n}},e=>e&&e.site&&l?{...e,site:{...e.site,...null==r?void 0:r.updateSite,theme:l}}:e)}}).then(()=>{})},[n,g.id,i]),I=(0,j.useCallback)(e=>{e.id!==g.id&&E(e.id).then(()=>{null==w||w.track(eG.AA.DOC_THEME_UPDATED,{doc_id:r,theme_id:e.id})}).catch(e=>{console.error(e),t({title:(0,s.jsx)(h.cC,{id:"Fulf8b",values:{0:e.message}}),position:"top",status:"error"})})},[w,g.id,r,t,E]),_=(0,j.useCallback)(e=>n?S(e):I(e),[n,I,S]);return(0,j.useEffect)(()=>{let e=l5.T.on("toggleThemeBlock",x),t=t4.pw.on(t4.TI.OPEN_THEME_DRAWER,x);return()=>{e(),t()}},[x]),(0,s.jsxs)(o.k,{children:[(0,s.jsx)(c_,{isOpen:u&&!a,onClose:m,openThemeEditor:y,openThemeEditorWithDefaultTheme:k,setDocTheme:_}),(0,s.jsx)(cw.z,{isOpen:a,onClose:c,state:f,dispatch:C,docContent:p,onThemeCreated:I,disableDrawerTransition:!0})]})}),cT=(0,j.memo)(()=>{let{isConnected:e}=(0,v.$gs)();return(0,s.jsx)(ep.kH,{label:e?(0,s.jsx)(h.cC,{id:"JkEyR8"}):(0,s.jsx)(h.cC,{id:"GvC+mL",components:{0:(0,s.jsx)(a.x,{}),1:(0,s.jsx)(a.x,{color:"gray.300"})}}),"aria-label":m.ag._({id:"JkEyR8"}),children:(0,s.jsx)(d.xu,{children:(0,s.jsx)(dO.h,{"data-guider-highlight":"toolbar-theme-button",onClick:()=>{l5.T.emit("toggleThemeBlock",!0)},isDisabled:!e,icon:(0,s.jsx)(x.G,{icon:u.q2v}),"data-testid":"toolbar-theme-button",children:(0,s.jsx)(h.cC,{id:"FEr96N"})})})})});cT.displayName="ThemeToolbarButton";let cO=()=>(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(cA,{}),(0,s.jsx)(cT,{})]});cA.displayName="ThemeDrawers";let cP=[.5,.8,.9,1,1.1,1.2,1.5,2],cD=e=>"".concat((100*e).toFixed(0),"%"),cR=()=>{let e=(0,e7.ye)("presentZoom"),{editor:t}=(0,ta._i)(),i=(0,eG.z$)(),n=(0,f.I0)(),r=(0,M.CG)(L.SU),l=(0,j.useCallback)(e=>{n((0,L.Ic)({zoomLevel:e})),n((0,L.fT)({enabled:!1})),null==i||i.track(eG.AA.DOC_ZOOMED,{direction:"set",level:e})},[n,i]),o=(0,j.useCallback)(()=>{n((0,L.fT)({enabled:!0}))},[n]),d=(0,j.useCallback)(()=>{let e=Math.min(ai.v4,r+.1);n((0,L.Ic)({zoomLevel:e})),n((0,L.fT)({enabled:!1})),null==i||i.track(eG.AA.DOC_ZOOMED,{direction:"in",level:e})},[n,i,r]),c=(0,j.useCallback)(()=>{let e=Math.max(ai.Ou,r-.1);n((0,L.Ic)({zoomLevel:e})),n((0,L.fT)({enabled:!1})),null==i||i.track(eG.AA.DOC_ZOOMED,{direction:"in",level:e})},[n,i,r]),p=(0,j.useCallback)(()=>{let e=ai.aX;n((0,L.Ic)({zoomLevel:e})),n((0,L.fT)({enabled:!1})),null==i||i.track(eG.AA.DOC_ZOOMED,{direction:"reset",level:e})},[n,i]),g=(0,M.CG)(rn.C),v=(0,o2.rJ)();return((0,j.useEffect)(()=>{if(e)return ej.F7.on("keydown","PRESENT_BLOCK",e=>{let i=e.target instanceof HTMLElement&&(0,eH.Hx)(e.target);return!(g||!t||(0,oB.KB)(t))&&!i&&((0,ij.ZP)("=")(e)?(d(),e.preventDefault(),!0):(0,ij.ZP)("-")(e)?(c(),e.preventDefault(),!0):(0,ij.ZP)("0")(e)?(p(),e.preventDefault(),!0):!!(0,ij.ZP)("9")(e)&&(o(),e.preventDefault(),!0))})},[g,e,t,d,c,p,o]),e)?(0,s.jsxs)(em.h,{spacing:"0",size:"sm",variant:"ghost",isAttached:!0,borderWidth:"1px",borderRadius:"md",children:[(0,s.jsx)(ep.kH,{closeOnMouseDown:!1,closeOnClick:!1,shortcut:"-",label:m.ag._({id:"FjkaiT"}),children:(0,s.jsx)(I.h,{"aria-label":m.ag._({id:"FjkaiT"}),fontWeight:"normal",onClick:c,icon:(0,s.jsx)(x.G,{icon:u.Kl4})})}),(0,s.jsxs)(ir.v,{closeOnSelect:!0,children:[(0,s.jsx)(ep.kH,{label:m.ag._({id:"VZ3UQG"}),children:(0,s.jsx)(il.j,{minW:20,as:eh.z,variant:"ghost",fontWeight:"400",size:"sm",rightIcon:(0,s.jsx)(x.G,{icon:u.ptq}),children:v?(0,s.jsx)(h.cC,{id:"R9Khdg"}):cD(r)})}),(0,s.jsxs)(is.q,{maxW:"220px",children:[(0,s.jsx)(io._,{value:v?"auto":r.toString(),type:"radio",children:(0,s.jsx)(ia.i,{value:"auto",onClick:o,children:(0,s.jsxs)(ex.U,{children:[(0,s.jsxs)(a.x,{children:[(0,s.jsx)(h.cC,{id:"R9Khdg"})," ",(0,s.jsx)(a.x,{as:"span",color:"gray.500",children:(0,s.jsx)(h.cC,{id:"P9Cyl9"})})]}),(0,s.jsx)(nX.L,{}),(0,s.jsx)(a.x,{as:"span",opacity:"0.6",children:"9"})]})})}),(0,s.jsx)(n2.R,{}),(0,s.jsx)(io._,{value:v?"auto":r.toString(),type:"radio",children:cP.map(e=>(0,s.jsx)(ia.i,{value:(e/100).toString(),onClick:()=>{l(e)},children:(0,s.jsxs)(ex.U,{children:[(0,s.jsx)(a.x,{children:cD(e)}),(0,s.jsx)(nX.L,{}),e===ai.aX&&(0,s.jsx)(a.x,{as:"span",opacity:"0.6",children:"0"})]})},e))})]})]}),(0,s.jsx)(ep.kH,{closeOnMouseDown:!1,closeOnClick:!1,shortcut:"+",label:m.ag._({id:"AWOSPo"}),children:(0,s.jsx)(I.h,{fontWeight:"normal","aria-label":m.ag._({id:"AWOSPo"}),onClick:d,icon:(0,s.jsx)(x.G,{icon:u.r8p})})})]}):null},cN=(0,j.memo)(function(e){let{scrollingParentSelector:t,toggleCommentsPanel:n,isCommentsPanelOpen:r,isPagesPanelOpen:l,togglePagesPanel:a,editorWrapperEl:d,docEditorType:c,isDark:u}=e,[x]=(0,dA.a)(["(max-width: 840px)","(min-width: 841px)"]),h=(0,en.i)({base:!0,lg:!1}),m=(0,ev.LQ)(window.location.href),p=(0,M.CG)(L.gh),g=(0,M.CG)(tk.yx),f=(0,M.CG)(eS.lH),{editor:v}=(0,ta._i)(),C=(0,eY.py)("comment",g),b=(0,ek.O1)(),y=(0,ek.lP)(),{enabled:k}=(0,dT.g)(v),w=(0,eA.Vr)(f),E="SLIDE_VIEW"!==p,S=(0,M.CG)(L.hN),I=c!==to.Z.COLLABORATIVE,_=(0,M.CG)(L.Tf),A=(0,M.CG)((0,J.SL)("left")),T=(0,M.CG)((0,J.SL)("right")),O=(0,e7.ye)("aiChat"),{enterSlideView:P,exitSlideView:D,setExitedFullscreenByClick:R,isFullscreen:N,enterFullscreen:G,exitFullscreen:F}=rm({editorWrapperEl:d,scrollingParentSelector:t});window.exportToPptx=async e=>{if(!v)return;let{exportToPptx:t}=await Promise.all([i.e(9775),i.e(5743),i.e(2966)]).then(i.bind(i,42648));return t(v,e)};let U=z((0,j.useCallback)(e=>{let t=W.current;if(!t)return!1;let i=t.querySelector("[data-active]")||t.querySelector('[aria-expanded="true"]')||A||T;return!!i||e.clientY<100},[A,T]),!_),W=(0,j.useRef)(null),H=!_||_&&U,V=!(0,ef.s2)()&&!m;return v?(0,s.jsx)(ep.Wk,{isDark:u,children:(0,s.jsxs)(o.k,{"data-editor-toolbar":!0,ref:W,bg:u?"gray.900":"white",borderBottomWidth:"1px",borderBottomColor:u?"whiteAlpha.100":"blackAlpha.100",zIndex:tw.S.toolbar,left:0,right:0,py:1.5,alignItems:"center",p:2,pr:6,transform:H?void 0:"translateY(-100%)",pointerEvents:"none",sx:{"&:focus-within":{marginTop:0},"> *":{pointerEvents:"auto"},"> #toolbar-spacer":{pointerEvents:"none"}},transitionProperty:"transform",transitionDuration:"normal",transitionTimingFunction:"ease-in-out","data-print-hidden":!0,children:[(0,s.jsx)(cn,{}),(0,s.jsx)(ex.U,{children:f?(0,s.jsx)(cC,{doc:g,pagesPanelEnabled:b,isPagesPanelOpen:l,togglePagesPanel:a}):(0,s.jsx)(dH,{doc:g})}),(0,s.jsx)(nX.L,{pointerEvents:"none",id:"toolbar-spacer"}),(0,s.jsxs)(ex.U,{children:[!x&&(0,s.jsx)(d$,{}),!x&&!E&&(0,s.jsx)(cR,{}),!x&&!E&&(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(ck,{spotlightingByBlock:k})}),!x&&!I&&S&&y&&(0,s.jsx)(cO,{}),!I&&(0,s.jsx)(cf,{doc:g,showButton:!x}),V&&!w&&(0,s.jsx)(cx,{doc:g,isStaticEditor:I,editorWrapperEl:d,scrollingParentSelector:t,enterSlideView:P,exitSlideView:D,setExitedFullscreenByClick:R,isFullscreen:N,enterFullscreen:G,exitFullscreen:F,shouldHide:x,docEditorType:c}),V&&w&&b&&(0,s.jsx)(ch,{doc:g}),!I&&C&&(0,s.jsx)(ce,{doc:g,mode:p,isCommentsPanelOpen:r,toggleCommentsPanel:n}),!x&&h&&!I&&S&&O&&(0,s.jsx)(ct,{}),!x&&!I&&!w&&(0,s.jsx)(dD,{doc:g}),!x&&!I&&(0,s.jsx)(cr,{doc:g,editorWrapperEl:d,scrollingParentSelector:t}),(0,s.jsx)(o.k,{children:(0,s.jsx)(tN.DY,{showRing:!0})})]})]})}):null});var cG=i(35503),cz=i(59322);let cM=(0,ij.ZP)("mod+S"),cL=(0,ij.ZP)("mod+shift+O"),cF=()=>{let e=(0,iJ.p)();(0,j.useEffect)(()=>{let t=t=>{cM(t)&&(t.preventDefault(),e.isActive("save_toast")||e({id:"save_toast",title:(0,s.jsx)(h.cC,{id:"4ebE67"}),status:"success",duration:5e3,isClosable:!0}))},i=(0,eH.B$)({requiredCookie:"cardCollapseDebug=true"});return window.addEventListener("keydown",t),()=>{null==i||i(),window.removeEventListener("keydown",t)}},[e])},cU=()=>{let e=(0,M.qr)(),t=(0,M.TL)(),{editor:i}=(0,ta._i)();(0,j.useEffect)(()=>{if(!i)return;let n=n=>{if(!cL(n))return;n.preventDefault();let r=e.getState(),{cardIdMap:l,cardIds:s,memoState:{expandedCards:o}}=r.TipTap,a=(0,L.i2)(r),{total:d,expanded:c,cardIds:u}=s.reduce((e,t)=>{let i=!0===o[t],n=l.parents[t]||[],r=n.length>0,s=!a||n.includes(a);return r&&s&&(e.cardIds.push(t),e.total++,e.expanded+=i?1:0),e},{total:0,expanded:0,cardIds:[]});t((0,L.bj)({disable:!0})),setTimeout(()=>{t((0,L.bj)({disable:!1}))},100);let x=d===c;cW(i,100,!x),(0,rl.Nn)(u,x)};return window.addEventListener("keydown",n),()=>{window.removeEventListener("keydown",n)}},[t,e,i])},cW=(e,t,i)=>{let n;let r=(0,eU.cC)("editor");for(let t=200;t>0;t-=25){var l;let i;let s=(0,oB.Je)(e,r.scrollSelector,t);(null===(l=s.pos)||void 0===l?void 0:l.pos)&&(e.state.doc.nodeAt(s.pos.pos)?i=s.pos.pos:e.state.doc.nodeAt(s.pos.inside)&&(i=s.pos.inside),i&&(!n||i>n)&&(n=i))}if(!n){console.warn("[pinPageDuringAnimation] No result for getTopCenterIshNode");return}let s=cH(e,n,i);if(!s){console.warn("[pinPageDuringAnimation] No element for getElementToPin");return}(0,eH.wO)({element:s,requiredCookie:"cardCollapseDebug=true"});let o=+new Date,a=r.scroller.scrollTop,d=(0,eH.LY)(s,r.scrollSelector),c=a-d,u=c<0?0:Math.max(c+200,0),x=()=>{if(!s)return;let e=(0,eH.LY)(s,r.scrollSelector);r.scroller.scroll({top:a+(e-d-u)});let i=+new Date-o;i<t&&requestAnimationFrame(x)};x()},cH=(e,t,i)=>{let n=e.state.doc.resolve(t),r=e.state.doc.nodeAt(t),l=(0,oB.Sh)(e,t);if(!r){console.warn("[getElementToPin] nodeAt null for $pos",n);return}let s=(0,oB.nv)(n,()=>!0).reverse();for(s.push({start:n.start(n.depth+1),pos:t,depth:n.depth,node:r});s.length;){let t=s.shift();if(!t)continue;let n=(0,eW.KH)(t.node),r=(0,cG.SA)(t.node),o=(0,cz.CU)(t.node),a=n||t.node.isAtom?t.pos:t.start;l=(0,oB.Sh)(e,a);let d=!i&&n&&t.depth>2;if(d||r||o)break}for(;(null==l?void 0:l.offsetParent)===null&&l.parentElement;)l=l.parentElement;return l};var cV=i(95993),cB=i(39486),cK=i(9449),cq=i(22537),cY=i(1010),cZ=i(52906),cJ=i(42505),cX=i(6501),cQ=i(13793);class c$ extends cV.GJ{constructor(e){super({transform:async(t,i)=>{var n;if("data"!==t.event){i.enqueue(t);return}let{content:r}=t.data,l=r.attrs.id,s=r.content.find(e=>"cardAccentLayoutItem"===e.type);s&&(!s.attrs.background||(null===(n=s.attrs.background)||void 0===n?void 0:n.type)===cQ.E.NONE)&&(s.attrs.background=(0,cX.Bv)(e,l),(0,cX.Tm)(r)),i.enqueue(t)}})}}var c0=i(50775),c1=i(97253),c2=i(90775);class c5 extends cV.GJ{async loadImage(e){let{editor:t,loadImageId:i,loadImageParams:n,cardIndex:r,cardId:l,node:s,theme:o,interactionId:a}=e,d=await (0,c0.B)({loadImageId:i,loadImageParams:n,context:{docId:t.gammaDocId,workspaceId:t.gammaOrgId,interactionId:a}});if(this.streamingCardIndex===r){this.loadedImageAttrs[i]=(0,c1.j6)(s,d),"cardAccentLayoutItem"===s.type.name&&"error"===d.loadImageStatus&&(this.loadedImageAttrs[i]={...s.attrs,background:(0,cX.Bv)(o,l)});return}requestAnimationFrame(()=>{(0,cJ.tf)({editor:t,loadImageId:i,newAttrs:d,node:s,theme:o,cardId:l})})}constructor({editor:e,theme:t,interactionId:i}){let n=async(n,r)=>{if("data"!==n.event){r.enqueue(n);return}let{index:l,id:s}=n.data;this.streamingCardIndex=l,(0,c2.N)(n.data.content,n=>{var r;if("text"===n.type)return;let o=tR.NB.fromJSON(e.schema,{type:n.type,attrs:n.attrs}),a=(0,c1.XU)(o);if(!a||"queued"!==a.loadImageStatus||!a.loadImageId||!a.loadImageParams)return;let{loadImageId:d,loadImageParams:c}=a;this.imageAttrs[d]||(this.imageAttrs[d]=o.attrs),this.loadImagePromises[d]||(this.loadImagePromises[d]=this.loadImage({editor:e,loadImageId:d,loadImageParams:c,cardIndex:l,cardId:s,theme:t,node:o,interactionId:i})),n.attrs=null!==(r=this.loadedImageAttrs[d])&&void 0!==r?r:this.imageAttrs[d]}),n.data.cardComplete&&this.streamingCardIndex++,r.enqueue(n)};super({transform:n}),this.streamingCardIndex=0,this.imageAttrs={},this.loadedImageAttrs={},this.loadImagePromises={}}}var c4=i(91760);let c3=function(e,t,i){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;if(0===t.length)throw Error("Cannot have empty path");let r=[...t],l={...e},s=l,o=0;for(;t.length>0;){if(!s.content)throw Error("Can't surround a node with children");let e=r.shift();if(0===r.length){let t=s.content.slice(0,e);t.push(i),s.content=t;break}if(o<n){let t=s.content.slice(0);t.splice(e,1,{...t[e]}),s.content=t,s=s.content[e]}else{let t=s.content.slice(0,e+1);t.splice(e,1,{...t[e]}),s.content=t,s=s.content[e]}o++}return l};class c9 extends cV.GJ{constructor(e){let t=async(t,i)=>{if("done"===t.event||"cancel"===t.event){i.enqueue(t);return}let n=(0,M.bh)(),r=null;for(let l of function* e(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if("text"===t.type){let e=t.text.split(" ");for(let t=0;t<e.length;t++){let l={type:"text",text:e.slice(0,t+1).join(" ")};yield c3(n,r,l,i)}return}if(!t.content){yield c3(n,r,t,i);return}let l=0;for(let s of t.content){let t=[...r,l];for(let r of e(s,i,n,t))yield r;l++}}(t.data.content,1)){if(!l)continue;r&&i.enqueue(r),r={id:t.id,event:"data",data:{...t.data,content:l,cardComplete:!1}};let s=(0,i0.qn)(e)(n.getState());await c6(s)}r&&i.enqueue({...r,data:{...r.data,cardComplete:!0}})};super({transform:t}),this.index=0,this.startTime=performance.now()}}let c6=e=>new Promise(t=>c4.iK(t,e));var c7=i(7144),c8=i(98991);let ue=e=>{let{enabled:t,type:i}=e,n=(0,c8.As)(i),r=(0,j.useRef)(!0);(0,j.useEffect)(()=>{if(!t)return;let e=n.scroller;if(!e)return;let i=()=>{n.isAtBottom(40)?r.current=!0:r.current=!1},l=()=>{r.current=!1};return e.addEventListener("wheel",i,{passive:!0}),e.addEventListener("touchend",i,{passive:!0}),e.addEventListener("touchstart",l,{passive:!0}),e.addEventListener("touchmove",l,{passive:!0}),()=>{e.removeEventListener("wheel",i),e.removeEventListener("touchend",i),e.removeEventListener("touchstart",l),e.removeEventListener("touchmove",l)}},[n,t]);let l=(0,j.useCallback)(()=>{if(r.current){var e;null===(e=n.scroller)||void 0===e||e.scrollTo({top:n.scroller.scrollHeight,behavior:"auto"})}},[n]),s=(0,ds.Z_)(l,100);return s};var ut=i(87148),ui=i(16268);let un="[CONTENT_FILTER]",ur=()=>(0,s.jsxs)(iS.b,{status:"error",variant:"solid",children:[(0,s.jsx)(rb.z,{}),(0,s.jsx)(i_.X,{children:(0,s.jsxs)(tc.K,{children:[(0,s.jsx)("strong",{children:(0,s.jsx)(h.cC,{id:"7g5s/N"})}),(0,s.jsx)(a.x,{children:(0,s.jsx)(h.cC,{id:"Xp43Ei"})})]})})]}),ul=()=>(0,s.jsxs)(iS.b,{variant:"light",children:[(0,s.jsx)(tu.$,{size:"sm",mr:2}),(0,s.jsxs)(i_.X,{children:[(0,s.jsx)("strong",{children:(0,s.jsx)(h.cC,{id:"n2cF1o"})})," ",(0,s.jsx)(h.cC,{id:"BFGwQA"})]})]}),us=e=>{let{editor:t,content:i,cardId:n,cardIndex:r,cardComplete:l}=e,s=(0,eM.N2)(t.state.doc,e=>(0,dn.KH)(e))[0],o=(0,eM.N2)(t.state.doc,e=>(0,dn.KH)(e)&&e.attrs.id===n)[0];if(!s)throw Error("Doc does not have a first card");let a=o?{from:o.pos,to:o.pos+o.node.nodeSize}:0===r?{from:s.pos,to:s.pos+s.node.nodeSize}:t.state.doc.nodeSize-3;try{if(t.commands.insertContentAt(a,i,{updateSelection:0===r}),l&&0===r){let e=(0,aY.t)(t.state.doc.resolve(s.pos));e&&t.commands.command(t=>{let{tr:i}=t;return i.setSelection(e),!0})}}catch(e){console.warn("[useCreateFromStream] ERROR updating card"),console.warn(e)}},uo=e=>{let{docId:t,store:i,generateInfo:n,editor:r,lazyImages:l}=e;if(!n.lastEventId||!n.streamId||!n.interactionId){console.error("Trying to resume stream for doc (id=".concat(t,") without lastEventId or streamId or interactionId"),{lastEventId:n.lastEventId,streamId:n.streamId,interactionId:n.interactionId});return}cq.a.trackRequestSent(i,{interface:"wizard",streaming:!0,interactionId:n.interactionId,isResuming:!0});let{stream:s}=(0,cK.pM)({interactionId:n.interactionId,lastEventId:n.lastEventId,streamId:n.streamId,retries:3});return(0,cB.Nl)({stream:s,docId:t,interactionId:n.interactionId,lastCompletedCardId:n.lastCompletedCardId,lastCompletedCardIndex:n.lastCompletedCardIndex,options:{lazyImages:l,imageOptions:n.imageOptions,docFormatKey:(0,ut.hx)((0,ut.VA)(r)).key},store:i})},ua=(e,t)=>{let i=(0,M.CG)(L.Pu),n=(0,M.qr)(),r=(0,M.TL)(),l=(0,M.CG)(L.KV),s=(0,e7.ye)("streamResumingEnabled"),o=(0,e7.ye)("generatorLazyImages"),a=(0,j.useRef)(!1),{isStreaming:d,onStreamData:c,onStreamDone:u,onStreamError:x,onStreamStart:h,onAbortStream:m}=ud({docId:e}),p=ue({enabled:d,type:"editor"}),g=(0,j.useCallback)(async r=>{let l,s;if(!t)return;h({editor:t});let o=uc({streamResponse:r,editor:t,store:n,theme:i,docId:e}),d=o.getReader();try{for(;!(l=await d.read()).done;)if(l.value){if(a.current){console.log("[AIStream] has aborted -- no longer reading stream");break}s=l.value,"data"===s.event&&(c({value:s.data,editor:t,streamResponse:r}),p())}}catch(e){x({err:e,streamResponse:r,editor:t});return}a.current||(s&&"done"!==s.event&&console.error('[AIStream] incomplete stream: last message received is not `event="done"`',{lastMessage:s}),u({editor:t,streamResponse:r}))},[e,t,c,u,x,h,p,n,i]);(0,Y.v)(()=>{if(!t||!l||d||!e)return;let i=(0,i0.oH)(e)(n.getState()),r=(0,i0.nl)(n.getState());if(i){"running"===i.status&&g(i);return}if(!s||r)return;let{generateInfo:a,generateStatus:c}=(0,ut.VA)(t);if("streaming"!==c){let i=new URLSearchParams(window.location.search);if(i.get("restream")){let i={interactionId:a.interactionId,streamId:a.streamId},r=uo({docId:e,generateInfo:{...i,lastEventId:"0",lastCompletedCardId:null,imageOptions:a.imageOptions||{provider:"aiGenerated"},lastCompletedCardIndex:null},editor:t,store:n,lazyImages:o});r&&g(r)}return}let u=(0,L.yx)(n.getState()),x=(null==u?void 0:u.createdTime)&&Date.now()-new Date(u.createdTime).getTime()>36e5;if(x){t.commands.updateAttributesAtPos(0,{generateStatus:"done"});return}let h=uo({docId:e,generateInfo:a,editor:t,store:n,lazyImages:o});h&&g(h)},[e,t,n,l,h,x,c,u,s,g,d,o],[t,l]),(0,j.useEffect)(()=>()=>{let i=(0,i0.oH)(e)(n.getState());t&&i&&"running"===i.status&&(a.current=!0,m({editor:t,streamResponse:i}))},[r,e,m,t,n])},ud=e=>{let{docId:t}=e,i=(0,iJ.p)(),n=(0,M.TL)(),r=(0,M.qr)(),l=(0,e7.ye)("aiWizardUploadImages"),[o,a]=(0,j.useState)(!1),d=(0,e7.ye)("debugLogging"),c=(0,j.useRef)(null);(0,j.useEffect)(()=>()=>{c.current&&(i.close(c.current),c.current=null)},[i]);let u=(0,j.useCallback)(()=>{c.current||(c.current=i({id:"ai-generating-toast",isClosable:!1,render:()=>ul(),position:"top",duration:null}))},[i]),x=(0,j.useCallback)(e=>{let{editor:t}=e;t&&(a(!0),t.commands.setAIGenerationRunning(!0),u())},[u]),m=(0,j.useCallback)(e=>{let{editor:t,value:i,streamResponse:n}=e;if(!n||!t)return;let{id:r,cardComplete:s,index:o,content:a}=i;us({editor:t,content:a,cardId:r,cardIndex:o,cardComplete:s}),s&&l&&(0,cJ.g1)({editor:t,cardId:r})},[l]),p=(0,j.useCallback)(e=>{var t,l,o;let{editor:u,streamResponse:x}=e;if(!u||!x)return;let m=x.id,p=(0,ut.hx)((0,ut.VA)(u)),{generateInfo:g}=(0,ut.VA)(u);a(!1),u.commands.setAIGenerationRunning(!1),u.commands.updateAttributesAtPos(0,{generateStatus:"done"});let j=(0,cZ.NV)(),f=j.debugInfo();d&&console.log("[AIStream] ImageStore DEBUG",{imageStore:j,debug:f}),(0,cZ.Uu)(),n((0,i0.G0)({id:m,status:"complete"}));let v=(0,ui.R)(u),C=new TextEncoder().encode(JSON.stringify(u.state.doc.toJSON())),b=v?v/C.byteLength:void 0;cq.a.trackStreamComplete(r,m,{imageProvider:null===(t=g.imageOptions)||void 0===t?void 0:t.provider,numImageSearches:f.requests.length,imageSearches:f.requests,ydocToJsonRatio:b});let y=(0,L.yx)(r.getState());y&&(null===(l=y.docGenerateInput)||void 0===l?void 0:l.id)?(0,c7.d)((null===(o=g.imageOptions)||void 0===o?void 0:o.provider)==="aiGenerated"?"generateV2WithImages":"generateV2",y.organization,m):(0,c7.d)("wizardCreation",null==y?void 0:y.organization,m),c.current&&i.update(c.current,{title:(0,s.jsx)(h.cC,{id:"2/LpWt",values:{0:p.generationLabel||p.label}}),status:"success",position:"top",duration:3e3,isClosable:!0})},[n,d,r,i]),g=(0,j.useCallback)(e=>{let{err:l,editor:o,streamResponse:u}=e,x=u.id,{errorMessage:m,errorCode:p}=(0,cY.uS)(l);console.error("StreamError: ",{interactionId:x,errorMessage:m,errorCode:p,stack:l.stack}),d&&console.log("StreamError: (".concat(p,") - ").concat(m),l.stack),a(!1),o.commands.setAIGenerationRunning(!1),o.commands.updateAttributesAtPos(0,{generateStatus:"done"}),(0,cZ.Uu)(),n((0,i0.G0)({id:x,status:"error"}));let g=(0,i0.Sn)(x)(r.getState());if(g){let{latency:e,...i}=g;(0,nj.pQ)({...i,errorName:"StreamError",errorMessage:m,errorCode:p,outputMessage:"",latency:e||performance.now()-i.startTime,isResuming:u.isResuming,docId:t})}c.current&&(m===un?i.update(c.current,{render:ur,position:"top",duration:null,isClosable:!0}):i.update(c.current,{title:(0,s.jsx)(h.cC,{id:"sbsGk/"}),status:"error",position:"top",duration:null,isClosable:!0}))},[n,t,d,r,i]),f=(0,j.useCallback)(e=>{let{editor:t,streamResponse:i}=e,l=i.id;a(!1),t.commands.setAIGenerationRunning(!1),cq.a.trackStreamAbort(r,{interactionId:l,abortReason:"leave-editor"}),n((0,i0.Of)({id:l}))},[n,r]);return{isStreaming:o,onStreamStart:x,onStreamData:m,onStreamError:g,onStreamDone:p,onAbortStream:f}},uc=e=>{let{streamResponse:t,editor:i,store:n,docId:r,theme:l}=e,{id:s,stream:o}=t,a=!0;return o.pipeThrough(new c$(l)).pipeThrough(new c9(t.id)).pipeThrough(new c5({editor:i,theme:l,interactionId:s})).pipeThrough(new cV.GJ({transform(e,t){if("done"===e.event&&"content_filter"===e.finishReason){t.error(Error(un));return}t.enqueue(e)}})).pipeThrough((0,cB.c1)(e=>{a&&"data"===e.event&&(cq.a.trackStreamStart(n,{interactionId:s,docId:r}),t.isResuming&&(i.commands.deleteCardsAfter(t.lastCompletedCardId||null),t.lastCompletedCardId&&(console.log("[AIStream] refetchLazyImages",t.lastCompletedCardId),(0,cJ.JZ)({editor:i,lastCompletedCardId:t.lastCompletedCardId,theme:l}))),a=!1),"data"===e.event&&e.data.cardComplete&&i.commands.updateNestedAttributesAtPos(0,{generateInfo:{lastEventId:e.id,lastCompletedCardId:e.data.id,lastCompletedCardIndex:e.data.index}})}))},uu="doc_archived_warning",ux=(e,t)=>{let i=(0,iJ.p)(),[n]=(0,v.iX9)(),[r]=(0,v.sJX)(),l=null==e?void 0:e.site;(0,j.useEffect)(()=>()=>{i.close(uu)},[]),(0,j.useEffect)(()=>{if(l&&!l.archived){i.close(uu);return}!e||e.site||e.archived||i.close(uu)});let o=(0,j.useCallback)(async()=>{if((null==l?void 0:l.id)&&await r({variables:{id:l.id},optimisticResponse:{unarchiveSite:{id:l.id,__typename:"Site"}}}),!(null==e?void 0:e.id))return;let t={id:e.id};await n({variables:t,optimisticResponse:{unarchiveDoc:{...t,archived:!1,__typename:"Doc"}}}),i({title:(0,s.jsx)(h.cC,{id:"o8va6N"}),status:"success",position:"top",isClosable:!0,duration:5e3})},[null==e?void 0:e.id,i,null==l?void 0:l.id,n,r]);(0,j.useEffect)(()=>{e&&t===to.Z.COLLABORATIVE&&((null==l?void 0:l.archived)||(null==e?void 0:e.archived))&&!i.isActive(uu)&&i({id:uu,title:(0,s.jsxs)(a.x,{"data-testid":"trash-confirmation-toast",children:[(0,s.jsx)(h.cC,{id:"fkHPZu"})," ",(0,s.jsx)(nF.r,{textDecoration:"underline",onClick:o,children:(0,s.jsx)(h.cC,{id:"7wfwc0"})})]}),status:"warning",position:"top",isClosable:!1,duration:null})},[e,t,o,l,i,n])},uh=()=>{let e=(0,e7.ye)("filmstrip"),t=(0,M.CG)(tk.fh),i=(0,iM.Br)("comment"),n=(0,M.CG)(L.gh),r=(0,M.CG)((0,J.SL)("left")),l=(0,M.CG)(eC.Lw);return e&&t===to.Z.COLLABORATIVE&&i&&n===eV.q.DOC_VIEW&&!(0,ef.s2)()&&!r&&!l};var um=i(85e3),up=i(60265);let ug=()=>{let e=X(),t=Q(),i=uj(),n=(0,en.i)({base:!1,lg:!0,[i?"3xl":"2xl"]:!1}),r=(0,M.CG)(L.Hl),l=(0,M.CG)(a_.GX),s=uh(),o=(0,um.k)(),a=(0,l7.S)({base:"0px",[up.K0]:ix.bk})||"0px",{width:d}=a8(),c=(0,j.useMemo)(()=>({"--doc-padding-left":l&&s&&n?"".concat(d,"px"):"0px","--doc-padding-right":r?a:o?"60px":"0px","--present-padding-left":"".concat(e,"px"),"--present-padding-right":"".concat(t,"px"),"--comment-slide-margin":a}),[d,l,e,r,t,o,n,a,s]);return c},uj=()=>{let{editor:e}=(0,ta._i)(),{defaultContentWidth:t}=(0,M.CG)(L.US);if("lg"===t)return!0;if(!e)return!1;let{doc:i}=e.state;return(0,oB.Jn)(i.firstChild.content).some(e=>(0,dn.KH)(e)&&"lg"===e.attrs.container.width)};var uf=i(85679),uv=i(82655),uC=i(44663),ub=i(27902);let uy=e=>{let{launchIntercomUI:t}=e;return function(e){let{onClose:i}=e;return(0,s.jsxs)(o.k,{p:4,color:"white",bg:"yellow.500",borderRadius:"md",alignItems:"center",position:"relative",children:[(0,s.jsx)(eZ.P,{size:"sm",onClick:i,position:"absolute",insetEnd:1,top:1}),(0,s.jsx)(x.G,{icon:uv.xHz,size:"2x"}),(0,s.jsxs)(o.k,{direction:"column",ml:3,children:[(0,s.jsx)(d.xu,{children:(0,s.jsx)(a.x,{lineHeight:6,fontSize:"sm",children:(0,s.jsx)(h.cC,{id:"4YARE9",values:{GAMMA_ARTIFACT_PROPER_NOUN:K.Yc},components:{0:(0,s.jsx)("b",{})}})})}),(0,s.jsx)(a.x,{lineHeight:6,fontSize:"sm",pt:2,children:(0,s.jsx)(h.cC,{id:"Enj8Kw",values:{GAMMA_ARTIFACT_PROPER_NOUN:K.Yc},components:{0:(0,s.jsx)(eh.z,{as:nF.r,variant:"link",textDecoration:"underline",fontSize:"sm",onClick:()=>{t()},colorScheme:"white"})}})})]})]})}},uk="no-snapshot-warning",uw=(e,t)=>{let i=(0,uC.G)(),n=(0,iJ.p)(),r=(0,ub.z$)(),l=null==e?void 0:e.id,s=t===to.Z.COLLABORATIVE&&(null==e?void 0:e.currentSnapshotId)===null;(0,j.useEffect)(()=>{!s||n.isActive(uk)||(n({id:uk,render:uy({launchIntercomUI:i}),duration:null,position:"top",isClosable:!0}),null==r||r.track(eG.xW.NO_CURRENT_SNAPSHOT,{docId:l}))},[r,l,i,s,n])},uE=e=>{let t=(0,M.TL)(),i=(0,M.CG)(a_.GX),n=(0,j.useRef)(!1);(0,j.useEffect)(()=>{!e||n.current||i||(n.current=!0,t((0,a_.dQ)({isOpen:!0})))},[t,i,e])},uS=e=>{let{togglePagesPanel:t,isPagesPanelOpen:i}=e,n=(0,M.TL)(),r=(0,M.qr)(),{asPath:l}=(0,eg.useRouter)(),s=(0,M.CG)(eC.tv),o=(0,j.useRef)(i),a=(0,eA.BZ)(l),d=(0,j.useRef)(t);d.current=t,(0,ri.r)(()=>{let e=(0,J.SL)("left")(r.getState()),t=d.current;a&&e?(t({override:"closed",disableTransition:!1}),o.current=!0):a||t({override:o.current?"open":"closed",disableTransition:!1})},[a]),(0,j.useEffect)(()=>{let e=a?(0,ef.s2)()?"mobile":s||"desktop":null;n((0,eC.Tj)({previewSize:e}))},[n,a,s])};var uI=i(56675);let u_=e=>{let t=(0,uI.x)(),i=(0,M.CG)((0,sj.cn)(e));(0,j.useEffect)(()=>{i&&t.cache.updateQuery({query:i5.yE1,variables:{id:e}},e=>{if(!(null==e?void 0:e.doc))return e;let t=e.doc;return t.titleEdited?e:{doc:{...t,title:i}}})},[i,t,e])};var uA=i(56400);let uT=(e,t)=>{let{isUnauthorized:i}=(0,t3._)();(0,eG.If)(n=>{!0!==i&&void 0!==i&&(n.track(eG.AA.DOC_VIEWED,{doc_id:e}),t===to.Z.EXAMPLE_STATIC&&n.track(eG.AA.EXAMPLE_VIEWED,{doc_id:e}))},[e,t,i]),(0,uA.d)();let n=(0,e7.ye)("realUserMetrics"),r=t===to.Z.COLLABORATIVE&&n,l=(0,e7.ye)("rumKeystrokeSampleRate");(0,rr.lh)(r,l)},uO=e=>{let t=(0,f.I0)(),i=(0,eG.z$)();(0,j.useEffect)(()=>{let n;let r=()=>{let r=(0,M.bh)().getState();n=(0,L.Q5)(r),(0,rl.I7)(e),t((0,L.lx)({isEditingDisabled:!0})),null==i||i.trackDocEvent(eG.AA.DOC_PRINTED)},l=()=>{t((0,L.lx)({isEditingDisabled:!1})),t((0,L.xn)({expandedCardsMap:n}))};return window.addEventListener("beforeprint",r),window.addEventListener("afterprint",l),()=>{window.removeEventListener("beforeprint",r),window.removeEventListener("afterprint",l)}},[t,e,i])},uP="doc-root",uD=e=>{let{isConnected:t}=e;return(0,s.jsx)(o.k,{flex:1,alignItems:"center",justifyContent:"center",color:"gray.500",fontSize:"2xl",children:t?(0,s.jsx)(h.cC,{id:"svObPT",values:{GAMMA_ARTIFACT_PROPER_NOUN:K.Yc}}):(0,s.jsxs)(o.k,{m:8,alignItems:"center",direction:"row",children:[(0,s.jsx)(x.G,{icon:u.bKP,size:"4x"}),(0,s.jsx)(a.x,{ml:8,children:(0,s.jsx)(h.cC,{id:"qercPA",values:{GAMMA_ARTIFACT_PROPER_NOUN:K.Yc},components:{0:(0,s.jsx)("strong",{})}})})]})})},uR=e=>{let{doc:t,user:i,docEditorType:n}=e,r=(0,C.$m)(t,i),l=(0,f.v9)(L.gh),o=n===to.Z.COLLABORATIVE&&!r,a=o&&l===eV.q.SLIDE_VIEW,d=n===to.Z.COLLABORATIVE&&!i;return d?(0,s.jsx)(nK.m,{docWorkspace:null==t?void 0:t.organization}):a?(0,s.jsx)(B,{}):o?(0,s.jsx)(k.C,{showTourReplay:!0}):null},uN=(0,ta.eT)(e=>{let{docEditorType:t}=e,i=(0,M.TL)(),{docId:n,isUnauthorized:r,setCollaborativeEditorInstance:l,editor:a}=(0,ta._i)(),u=(0,M.CG)(tk.yx),x=(0,M.CG)(eS.lH),h=(0,M.CG)(eS.$U);(0,eY.py)("comment",u);let p=(0,ek.O1)(),{isConnected:k}=(0,v.$gs)(),w=(0,tS.mb)(null==u?void 0:u.id,h),[E,S]=(0,j.useState)(null),I=(0,M.CG)(eC.tv),_=null!==I,A=(0,f.v9)(L.gh),{user:T}=(0,eY.SE)();(0,b.F3)(),ux(u,t),uw(u,t),ua(n,E===n?a:void 0),u_(n),uT(n,t),e_(a,t===to.Z.COLLABORATIVE),(0,uf.j)(),cF();let{editorAnimationsClass:O,editorAnimationsCSSVars:P}=(0,eP.k)({editor:a,scrollingParentSelector:".".concat(uP),disabledOverride:_});cU(),oK(a,".".concat(uP)),o$(a),ts(),uO(a),(0,C.DD)(u,t===to.Z.COLLABORATIVE);let D=(0,j.useRef)(null),R=(0,eT.Yy)(),N=(0,j.useMemo)(()=>(0,eD.vu)(R),[R]),G=uh();uE(G),console.debug("%c[DocEditorComponent] RENDER - ".concat(n),"background-color: gold");let{togglePanel:z,isPanelOpen:F}=$(oV,p),{togglePanel:U,isPanelOpen:W}=$(ig),{togglePanel:H,isPanelOpen:V}=$(iZ);iY({toggleDesignPartnerPanel:H,isDesignPartnerPanelOpen:V,editor:a});let{togglePanel:B,isPanelOpen:K}=$(tt);tn({toggleCardNotesPanel:B,isCardNotesPanelOpen:K,editor:a}),(0,j.useEffect)(()=>()=>{i((0,J.qo)()),i((0,eS.mc)())},[i]),uS({togglePagesPanel:z,isPagesPanelOpen:F});let Y=(0,eA.Vr)(x)&&(null==x?void 0:x.navEnabled)&&!_&&A!==eV.q.SLIDE_VIEW,X=!!(x&&!_&&x.routes.length>1&&a);(0,tr.vm)(()=>{X&&z({override:"open",disableTransition:!1})},[z,X],[X]),(0,j.useEffect)(()=>{A===eV.q.SLIDE_VIEW&&z({override:"closed",disableTransition:!0})},[A,z]);let Q=(0,j.useCallback)(()=>!!(a&&a.state.selection.empty),[a]),{leftPanelLifecycle:et,rightPanelLifecycle:ei,globalPanelLifecycle:en}=ee(),er=(0,q.dU)(null==u?void 0:u.organization),el=(0,y.U)(null==u?void 0:u.title,er),es=m.ag._({id:"X6YCwz"}),eo=m.ag._({id:"abr3hR"}),ea=ug(),eu=(0,j.useMemo)(()=>{let e=Y?{"--doc-padding-top":eR.ik}:void 0;return{...N,...ea,...e}},[N,ea,Y]),ex=(null==u?void 0:u.archived)||(null==x?void 0:x.archived)||_;return(0,s.jsx)(tS.DN.Provider,{value:w,children:(0,s.jsxs)(o.k,{direction:"column",h:"100%",children:[(0,s.jsx)("style",{id:"editorStyleOverride",children:"body {overflow: hidden;}"}),(0,s.jsx)(g(),{children:(0,s.jsx)("title",{children:el})}),(0,s.jsx)(t2,{doc:u,editor:a}),(0,s.jsx)(ey.H9,{isEnabledFn:Q}),_&&h?(0,s.jsx)(eb,{docId:n}):(0,s.jsx)(cN,{isDark:R,scrollingParentSelector:".".concat(uP),editorWrapperEl:D.current,docEditorType:t,isPagesPanelOpen:F,togglePagesPanel:z,isCommentsPanelOpen:W,toggleCommentsPanel:U}),r?(0,s.jsx)(uD,{isConnected:k}):(0,s.jsxs)(o.k,{id:"doc-main",direction:"row",w:"100%",h:"calc(100% - ".concat(49,"px)"),sx:{"--editor-padding-top":"".concat(49,"px")},"data-testid":"doc-editor-root",ref:D,children:[(0,s.jsx)(ec,{panelLifecycle:et}),(0,s.jsx)(o.k,{flex:"1",direction:"column",position:"relative",minWidth:"0",h:"100%",children:(0,s.jsxs)(d.xu,{flex:"1",overflowY:"auto",overflowX:"hidden",pos:"relative",minWidth:"0",h:"100%",className:(0,c.cx)(uP,O,V&&"design-partner-panel-open"),style:{"--ai-editing-label":"'".concat(es,"'"),"--ai-generating-label":"'".concat(eo,"'"),...P},sx:eu,children:[_&&(0,s.jsx)(tb,{loading:n!==E,docId:n,editor:a,previewSize:I},"".concat(n,"__preview-editor")),t===to.Z.PUBLIC_STATIC?(0,s.jsx)(oX,{docId:n,snapshotId:null==u?void 0:u.currentSnapshotId,scrollingParentSelector:".".concat(uP),onCreate:l}):t===to.Z.EXAMPLE_STATIC?(0,s.jsx)(nZ,{docId:n,snapshotId:null==u?void 0:u.currentSnapshotId,scrollingParentSelector:".".concat(uP),onCreate:l}):(0,s.jsxs)(Z.Mn.Provider,{value:en,children:[(0,s.jsx)(eO.Ge,{doc:u,docId:n,readOnly:ex,hideForPreview:_,onCreate:e=>{l(e),S(e.gammaDocId),e.on("destroy",()=>{S(null)})},scrollingParentSelector:".".concat(uP),animationsExtensionEnabled:!0},"".concat(n,"__collaborative-editor")),a&&(0,s.jsx)(eq,{editor:a})]}),Y&&(0,s.jsx)(tE,{}),!_&&(0,s.jsx)(nz,{editor:a},n),(0,s.jsx)(ag,{editor:a})]})}),(0,s.jsx)(ed,{panelLifecycle:ei}),(0,s.jsx)(eN.a,{editorId:"main",children:(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(uR,{doc:u,user:T,docEditorType:t}),G&&(0,s.jsx)(d_,{})]})})]})]})})});var uG=i(69251),uz=i(11881),uM=i(53596);let uL=e=>{let{theme:t,onClick:i,isChecked:n,index:r,startIndex:l}=e;return(0,s.jsxs)(d.xu,{gridColumnStart:r+1-l,display:l>r?"none":"block",gridRow:1,as:uz.f,p:2,transition:"all 0.2s ease-in-out",bgColor:n?"trueblue.100":"linen.50",textAlign:"left",tabIndex:0,borderRadius:"md",transitionProperty:"common",transitionDuration:"normal",_focus:{boxShadow:n?void 0:"outline"},outline:"none",onClick:i,_hover:{bgColor:n?"trueblue.100":"gray.100"},onKeyDown:e=>{("Enter"===e.key||" "===e.key)&&i()},"data-theme-id":t.id,"data-testid":n?"current-theme-preview":void 0,cursor:"pointer",children:[(0,s.jsx)(uM.n,{theme:t}),(0,s.jsxs)(tc.K,{direction:"row",spacing:1,pt:1,children:[n&&(0,s.jsx)(tY.n,{w:3,h:"auto",mr:1,color:"trueblue.700"}),(0,s.jsx)(a.x,{fontSize:"sm",noOfLines:1,"data-testid":"theme-name",color:n?"trueblue.700":void 0,children:t.name})]})]})};uL.displayName="DemoDocThemePreview";let uF="linen.50",uU=e=>{let{templateTheme:t,setTheme:n,currentThemeId:r}=e,l=(0,f.v9)(L.gh),a=l===eV.q.SLIDE_VIEW,[d,c]=(0,j.useState)([]),[m,p]=(0,j.useState)(!1),[g,v]=(0,j.useState)(0),C=(0,en.i)({base:3,md:4,lg:5})||3;(0,j.useEffect)(()=>{i.e(4392).then(i.bind(i,44392)).then(e=>{c(e.GLOBAL_THEMES)})},[]);let b=[...t?[t]:[],...d.filter(e=>e.id!==(null==t?void 0:t.id))],y=(0,j.useCallback)(e=>{1===e?v(e=>e+1):v(e=>e-1)},[]);return a?(0,s.jsx)(s.Fragment,{}):(0,s.jsx)(nJ.h,{children:(0,s.jsxs)(o.k,{w:"100%",position:"absolute",bottom:0,left:0,bgColor:uF,zIndex:"sticky",direction:"column",borderTop:"3px solid var(--chakra-colors-trueblue-500)",minH:12,p:2,justifyContent:"center",children:[(0,s.jsx)(o.k,{alignItems:"flex-end",justify:"flex-end",children:(0,s.jsx)(eh.z,{variant:"ghost",size:"sm",rightIcon:(0,s.jsx)(x.G,{icon:m?u.gc2:u.onQ}),onClick:()=>p(e=>!e),children:m?(0,s.jsx)(h.cC,{id:"yz7wBu"}):(0,s.jsx)(h.cC,{id:"x6tIe+"})})}),(0,s.jsx)(o.k,{justify:"flex-start",align:"flex-start",bgColor:uF,w:"100%",children:m&&(0,s.jsxs)(tc.K,{direction:"row",align:"center",justify:"center",w:"100%",children:[(0,s.jsx)(I.h,{"aria-label":"Left",onClick:()=>y(-1),variant:"ghost",isDisabled:0===g,icon:(0,s.jsx)(x.G,{icon:u.EyR})}),(0,s.jsx)(uG.r,{w:"100%",flex:1,overflow:"hidden",padding:2,transition:"all 0.2s ease-in-out",templateColumns:["repeat(".concat(C,", calc(100% / ").concat(C," - 1em))")],gap:"0 1em",bgColor:uF,children:b.map((e,t)=>(0,s.jsx)(uL,{index:t,startIndex:g,isChecked:e.id===r,theme:e,onClick:()=>{n(e)}},e.id))}),(0,s.jsx)(I.h,{"aria-label":"Right",variant:"ghost",isDisabled:g+C>b.length,onClick:()=>y(1),icon:(0,s.jsx)(x.G,{icon:u.yOZ})})]})})]})})};var uW=i(89833),uH=i(34303);let uV=[{description:(0,s.jsx)(h.cC,{id:"gtWy3j"}),shortcut:["←","→"]},{description:(0,s.jsx)(h.cC,{id:"UCxK2S"}),shortcut:["↑","↓"]},{description:(0,s.jsx)(h.cC,{id:"IkakN2"}),shortcut:"Esc"},{description:(0,s.jsx)(h.cC,{id:"CgmvBu"}),shortcut:"S"},{description:(0,s.jsx)(h.cC,{id:"rEj/lx"}),shortcut:"Enter"},{description:(0,s.jsx)(h.cC,{id:"dQU33K"}),shortcut:"Mod+Shift+O"},{description:(0,s.jsx)(h.cC,{id:"K0Oq/D"}),shortcut:"R"}],uB=e=>{let{editorWrapperEl:t,scrollingParentSelector:i}=e,{enterSlideView:n,exitSlideView:r,setExitedFullscreenByClick:l,isFullscreen:o,enterFullscreen:a,exitFullscreen:d}=rm({editorWrapperEl:t,scrollingParentSelector:i}),c=(0,M.CG)(L.gh),p=(0,j.useRef)(c);return(0,j.useEffect)(()=>{p.current=c},[c]),(0,s.jsxs)(ex.U,{children:[(0,s.jsxs)(em.h,{isAttached:!0,size:"sm",children:[(0,s.jsx)(ep.kH,{label:c===eV.q.DOC_VIEW?(0,s.jsx)(h.cC,{id:"ek5OwP",values:{GAMMA_ARTIFACT_PROPER_NOUN:K.Yc}}):(0,s.jsx)(h.cC,{id:"43JI0J",values:{GAMMA_ARTIFACT_PROPER_NOUN:K.Yc}}),children:(0,s.jsx)(eh.z,{variant:c===eV.q.DOC_VIEW?"solid":"plain",cursor:c===eV.q.SLIDE_VIEW?"pointer":"auto",onClick:()=>{c===eV.q.SLIDE_VIEW&&r()},leftIcon:(0,s.jsx)(x.G,{icon:u.cwv}),children:(0,s.jsx)(h.cC,{id:"7Zdnlq"})})}),(0,s.jsx)(ep.kH,{label:c===eV.q.SLIDE_VIEW?(0,s.jsx)(h.cC,{id:"Zfr5aa",values:{GAMMA_ARTIFACT_PROPER_NOUN:K.Yc}}):(0,s.jsx)(h.cC,{id:"rK6Cev",values:{GAMMA_ARTIFACT_PROPER_NOUN:K.Yc}}),children:(0,s.jsx)(eh.z,{variant:c===eV.q.SLIDE_VIEW?"solid":"plain",cursor:c===eV.q.DOC_VIEW?"pointer":"auto",onClick:()=>{c===eV.q.DOC_VIEW&&n({fullscreen:!1})},leftIcon:(0,s.jsx)(x.G,{icon:u.bgy}),children:(0,s.jsx)(h.cC,{id:"FOoDGS"})})})]}),c===eV.q.SLIDE_VIEW&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(rg.i,{orientation:"vertical"}),(0,s.jsx)(ep.kH,{label:o?(0,s.jsx)(h.cC,{id:"IkOhTI"}):(0,s.jsx)(h.cC,{id:"q8ARHN"}),children:(0,s.jsx)(I.h,{size:"sm","aria-label":o?m.ag._({id:"IkOhTI"}):m.ag._({id:"q8ARHN"}),borderRadius:"md",icon:(0,s.jsx)(x.G,{icon:o?u.Qj4:u.TL5}),onClick:o?()=>{l(!0),d()}:a})}),(0,s.jsxs)(E.J,{children:[(0,s.jsx)(S.x,{children:(0,s.jsx)(eh.z,{size:"sm",variant:"plain",fontWeight:"normal",children:(0,s.jsx)(h.cC,{id:"77Emn0"})})}),(0,s.jsxs)(_.y,{border:"1px solid #eee !important",children:[(0,s.jsx)(d2.Q,{}),(0,s.jsx)(uW.u,{}),(0,s.jsx)(A.b,{children:(0,s.jsx)(uH.A,{list:uV})})]})]})]})]})},uK=(0,j.memo)(function(e){let{scrollingParentSelector:t,editorWrapperEl:i}=e;(0,M.CG)(tk.yx);let n=(0,j.useRef)(null);return(0,s.jsx)(o.k,{ref:n,bg:"white",borderBottom:"3px solid var(--chakra-colors-trueblue-600)",position:"absolute",zIndex:"overlay",top:0,left:0,right:0,p:2,alignItems:"flex-start",justifyContent:"flex-start",pr:6,children:(0,s.jsx)(o.k,{direction:"column",w:"100%",children:(0,s.jsx)(uB,{editorWrapperEl:i,scrollingParentSelector:t})})})});var uq=i(5689),uY=i(91148);let uZ=e=>{let{toggleToCPanel:t,initializeToCPanel:i,isToCPanelOpen:n}=e,{breakpoints:{xl:r}}=(0,uY.F)(),l=(0,M.CG)(L.gh),[s,o]=(0,j.useState)(l!==eV.q.SLIDE_VIEW),[a,d]=(0,j.useState)(!1),c=(0,f.I0)();(0,tr.vm)(()=>{i()},[r,t,i,c],[]),(0,tr.vm)(()=>{l===eV.q.SLIDE_VIEW?(o(n),t({disableTransition:!1,override:"closed"})):a&&l===eV.q.DOC_VIEW&&t({disableTransition:!1,override:s?"open":"closed"})},[t,n,s,l,a],[l])},uJ="doc-root",uX=(0,ta.eT)(e=>{var t;let{docEditorType:i=to.Z.COLLABORATIVE}=e,{docId:n,setCollaborativeEditorInstance:r,editor:l}=(0,ta._i)(),a=(0,M.CG)(tk.yx);uT(n,i),(0,uf.j)(),cF(),cU(),oK(l,".".concat(uJ)),o$(l),ts(),uO(l),(0,C.DD)(a,i===to.Z.COLLABORATIVE);let c=(0,j.useRef)(null),u=null==a?void 0:a.theme,[x,h]=(0,j.useState)(()=>u),m=(0,M.TL)(),p=(0,j.useRef)(!1),{data:f}=(0,v.EDv)({variables:{docId:n,snapshotId:null==a?void 0:a.currentSnapshotId},skip:!(null==a?void 0:a.currentSnapshotId)}),b=null==f?void 0:null===(t=f.snapshot)||void 0===t?void 0:t.content.default;console.debug("%c[DemoDocEditorComponent] RENDER - ".concat(n),"background-color: gold"),(0,j.useEffect)(()=>{u&&!p.current&&(h(u),p.current=!0)},[u]),(0,j.useEffect)(()=>{if(!l)return;let e=null==x?void 0:x.config.accentBackgrounds;if(!e||0===e.length){b&&l.commands.setContent(b);return}l.commands.updateThemeAccentImages(e)},[l,x,b]);let{togglePanel:y,isPanelOpen:k,initPanel:w}=$(uq.Q);uZ({toggleToCPanel:y,isToCPanelOpen:k,initializeToCPanel:w}),(0,j.useEffect)(()=>()=>{m((0,J.qo)())},[m]);let{leftPanelLifecycle:E,globalPanelLifecycle:S}=ee();return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("style",{id:"editorStyleOverride",children:"body {overflow: hidden;}"}),(0,s.jsx)(g(),{children:(0,s.jsxs)("title",{children:["".concat(a?(0,l0.$)(a.title)+" | ":""),"Gamma"]})}),(0,s.jsxs)(o.k,{id:"doc-main",direction:"row",w:"100%",h:"100%","data-testid":"doc-editor-root",ref:c,children:[(0,s.jsx)(ec,{panelLifecycle:E}),(0,s.jsxs)(o.k,{flex:"1",direction:"column",position:"relative",minWidth:"0",h:"100%",children:[l&&(0,s.jsx)(uK,{scrollingParentSelector:".".concat(uJ),editorWrapperEl:c.current,setTheme:h,currentThemeId:(null==x?void 0:x.id)||(null==u?void 0:u.id),templateTheme:u}),(0,s.jsxs)(d.xu,{flex:"1",overflowY:"auto",overflowX:"hidden",minWidth:"0",h:"100%",className:uJ,children:[(0,s.jsx)(oX,{docId:n,snapshotId:null==a?void 0:a.currentSnapshotId,scrollingParentSelector:".".concat(uJ),onCreate:r,theme:x,hideMadeWithGammaBadge:!0}),(0,s.jsx)(ag,{editor:l,showNavigationControls:!0})]})]}),(0,s.jsx)(uU,{setTheme:h,currentThemeId:(null==x?void 0:x.id)||(null==u?void 0:u.id),templateTheme:u})]})]})});var uQ=i(73077);let u$="body",u0=e=>{let t=(0,c8.As)(e),[i,n]=(0,j.useState)("up");return(0,j.useEffect)(()=>{let e=document.querySelector(t.scrollSelector);if(!e)return;let i=(null==e?void 0:e.scrollTop)||0,r=e=>Math.abs(e-i)>0,l=e=>{let t=e>i&&!(i>0&&0===e)&&!(e>0&&0===i);return t},s=()=>{let t=(null==e?void 0:e.scrollTop)||0;if(r(t)){let e=l(t)?"down":"up";n(e),i=t>0?t:0}},o=D()(()=>window.requestAnimationFrame(s),500,{leading:!0});return null==e||e.addEventListener("scroll",o),()=>null==e?void 0:e.removeEventListener("scroll",o)},[t.scrollSelector]),i};var u1=i(62685),u2=i(1887);let u5=e=>{let t=(0,M.CG)(L.e_),i=(0,M.TL)(),n=(0,j.useCallback)(e=>{i((0,L.Qt)({docAttrs:{format:e}}))},[i]);return(0,s.jsx)(em.h,{size:"sm",isAttached:!0,my:2,children:u2.n.map(e=>(0,s.jsx)(eh.z,{isActive:e.key===t.key,onClick:()=>n(e.key),children:ic()(e.label)},e.key))})},u4=(0,j.memo)(()=>(0,s.jsx)(d.xu,{w:"100%",h:"1px",bg:"gray.200",my:2,mx:-2,_first:{display:"none"},_last:{display:"none"}}));u4.displayName="MenuDivider";let u3=(0,j.memo)(e=>{let{icon:t,children:i,...n}=e;return(0,s.jsx)(d.xu,{as:"button",w:"100%",textAlign:"left",px:2,py:2,fontWeight:"500",color:"gray.700",transition:"all 0.2s",_hover:{bg:"gray.100"},_focus:{outline:"none"},_active:{bg:"gray.200"},borderRadius:"md",...n,children:(0,s.jsxs)(ex.U,{children:[t&&(0,s.jsx)(d.xu,{children:t}),(0,s.jsx)(d.xu,{children:i})]})})});u3.displayName="MenuItem";let u9=e=>{var t,i;let{isOpen:n,onClose:r,doc:l,editingEnabled:d}=e,{user:c}=(0,eY.SE)(),{isConnected:m}=(0,v.$gs)(),p=(0,nU.e)(),{editor:g}=(0,ta._i)(),f=(0,l0.$)(null==l?void 0:l.title),C=(null==l?void 0:l.createdTime)&&(0,lQ.Z)((0,l$.Z)(l.createdTime),"PPP"),b=null==l?void 0:l.id,{isOpen:y,onClose:k,onOpen:w}=(0,t1.M)({id:"analyticsPanelDisclosure"}),[E]=(0,v.LT4)(),[S]=(0,v.iX9)(),I=(0,eG.z$)(),_=(0,eY.py)("manage",l)&&!!c,A=(0,eY.py)("manage",l)&&!!c,T=!!(c&&0!==c.workspaceMemberships.length),O=(0,e7.ye)("docFormats"),P=(0,j.useCallback)(async()=>{if(!g)return;let e=g.getJSON();await p({docId:b,initialContent:e,source:"editor_toolbar_doc_menu_duplicate",newWindow:!1}),r()},[b,p,g,r]),D=(0,j.useCallback)(()=>{null==I||I.track(eG.AA.DOC_ANALYTICS_VIEWED,{docId:b,source:"toolbar_doc_menu",type:"personal"}),w()},[I,b,w]),R=(0,j.useCallback)(e=>()=>{if(!b)return;let t={id:b};e?E({variables:t,optimisticResponse:{archiveDoc:{...t,archived:e,__typename:"Doc"}}}):S({variables:t,optimisticResponse:{unarchiveDoc:{...t,archived:e,__typename:"Doc"}}})},[E,b,S]);return(0,s.jsxs)(s.Fragment,{children:[l&&(0,s.jsx)(ep.Aj,{isOpen:n,onClose:r,children:(0,s.jsxs)(o.k,{w:"100%",h:n?"100%":void 0,direction:"column",children:[(0,s.jsxs)(ex.U,{align:"flex-start",p:6,children:[(0,s.jsxs)(tc.K,{spacing:0,children:[(0,s.jsx)(a.x,{fontSize:"2xl",fontWeight:"bold",letterSpacing:"tight",noOfLines:6,children:f}),(0,s.jsx)(a.x,{fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,s.jsx)(h.cC,{id:"jlWdji",values:{createdTime:C}})}),(0,s.jsx)(ep.kH,{label:null==l?void 0:null===(t=l.createdBy)||void 0===t?void 0:t.email,children:(0,s.jsx)(a.x,{display:"inline-block",fontSize:"sm",color:"gray.500",noOfLines:1,children:(0,s.jsx)(h.cC,{id:"t490IT",values:{0:null==l?void 0:null===(i=l.createdBy)||void 0===i?void 0:i.displayName}})})})]}),(0,s.jsx)(nX.L,{}),(0,s.jsx)(eZ.P,{mt:-2,onClick:e=>{e.stopPropagation(),r()}})]}),(0,s.jsxs)(tc.K,{p:3,pt:0,children:[O&&(0,s.jsx)(u5,{}),(0,s.jsx)(u4,{}),A&&(0,s.jsx)(u3,{icon:(0,s.jsx)(x.G,{icon:u.nNP,fixedWidth:!0}),onClick:()=>{r(),l5.T.emit("openSharePanel",{view:"invite"})},children:(0,s.jsx)(h.cC,{id:"iyga2M"})}),d&&(0,s.jsx)(u3,{icon:(0,s.jsx)(x.G,{icon:u.q2v,fixedWidth:!0}),onClick:()=>{r(),l5.T.emit("toggleThemeBlock",!0)},"data-testid":"mobile-theme-button",children:(0,s.jsx)(h.cC,{id:"W15e8B"})}),(0,s.jsx)(u4,{}),m&&(0,s.jsxs)(s.Fragment,{children:[!!c&&A&&(0,s.jsx)(u3,{icon:(0,s.jsx)(x.G,{icon:u.Ma4,fixedWidth:!0}),onClick:()=>{r(),D()},children:(0,s.jsx)(h.cC,{id:"qcxxQS"})}),T&&(0,s.jsx)(u3,{icon:(0,s.jsx)(x.G,{icon:u.kZ_,fixedWidth:!0}),onClick:P,children:(0,s.jsx)(h.cC,{id:"euc6Ns"})}),_&&(0,s.jsx)(u3,{icon:(0,s.jsx)(x.G,{icon:u.kwI,fixedWidth:!0}),onClick:()=>{r(),l5.T.emit("openSharePanel",{view:"export"})},children:(0,s.jsx)(h.cC,{id:"U8WPSi"})}),(0,s.jsx)(u3,{icon:(0,s.jsx)(x.G,{icon:u.gr5,fixedWidth:!0}),onClick:()=>{r(),l5.T.emit("openPageSetup","cards")},children:(0,s.jsx)(h.cC,{id:"Kx2GmY"})}),A&&(0,s.jsx)(u4,{}),A?l.archived?(0,s.jsx)(u3,{icon:(0,s.jsx)(x.G,{icon:u.ZeM,fixedWidth:!0}),onClick:R(!1),children:(0,s.jsx)(h.cC,{id:"yKu/3Y"})}):(0,s.jsx)(u3,{"data-testid":"doc-menu-trash-button",color:"red.500",icon:(0,s.jsx)(x.G,{icon:u.XAH,fixedWidth:!0}),onClick:R(!0),children:(0,s.jsx)(h.cC,{id:"1C/Yjq"})}):null]})]})]})}),l&&y&&(0,s.jsx)(lW,{doc:l,isAnalyticsPanelOpen:y,onAnalyticsPanelClose:k,mode:"full"}),d&&(0,s.jsx)(sT,{editor:g}),d&&(0,s.jsx)(cA,{})]})},u6=e=>{var t,i,n;let{doc:r,editor:l,commentsEnabled:o,editingEnabled:d,onCommentFeedOpen:c,onTocOpen:h}=e,[m]=(0,dU.X)(U.H.lastHomeUrl,"/"),{user:p}=(0,eY.SE)(),g=(0,eY.py)("manage",r),C=(null==r?void 0:null===(t=r.comments)||void 0===t?void 0:t.filter(e=>e.status===v.Ux9.Open).length)||0,b=u0("editor"),y=(0,f.v9)(L.Pu),k=(0,u1.Jh)(y),E=null!==(i=y.config.bodyColor)&&void 0!==i?i:(0,tz.wj)(y)?"white":"gray.800",S=null!==(n=y.accentColor)&&void 0!==n?n:(0,tz.wj)(y)?"trueblue.300":"trueblue.700",_=(0,j.useCallback)(()=>{l&&l.commands.undo()},[l]),{isOpen:A,onOpen:T,onClose:O}=(0,w.q)();return r?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(u9,{doc:r,isOpen:A,onClose:O,editingEnabled:d}),(0,s.jsxs)(ex.U,{p:1,px:2,bg:"gray.50",shadow:"lg",position:"sticky",top:0,transitionProperty:"common",transitionDuration:"normal",transform:"up"==b?"translate(0px,0px)":"translate(0px,-100%)",opacity:"up"==b?1:0,zIndex:"sticky",sx:{...(0,u1.Oj)(k,y,!0),border:"none",filter:"none",borderRadius:0},color:E,children:[p&&(0,s.jsx)(iC(),{href:m,passHref:!0,legacyBehavior:!0,children:(0,s.jsx)(I.h,{as:nF.r,"aria-label":"Home",color:E,_hover:{bg:"transparent",color:S},icon:(0,s.jsx)(x.G,{icon:u.J9Y,size:"1x"}),variant:"ghost"})}),(0,s.jsx)(a.x,{flex:1,fontSize:"sm",noOfLines:1,ml:2,color:E,children:null==r?void 0:r.title}),(0,s.jsxs)(em.h,{variant:"ghost",children:[o&&(0,s.jsx)(eh.z,{color:E,_hover:{bg:"transparent",color:S},fontSize:"sm",onClick:c,leftIcon:(0,s.jsx)(x.G,{icon:u.Mzg}),children:C}),d&&(0,s.jsx)(I.h,{color:E,"aria-label":"Undo",onClick:_,_hover:{bg:"transparent",color:S},icon:(0,s.jsx)(x.G,{icon:u.X7o})}),!d&&(0,s.jsx)(I.h,{color:E,"aria-label":"Open table of contents",_hover:{bg:"transparent",color:S},onClick:h,icon:(0,s.jsx)(x.G,{icon:u.xiG})}),(g||d)&&(0,s.jsx)(I.h,{color:E,"aria-label":"Open toolbar",_hover:{bg:"transparent",color:S},onClick:T,icon:(0,s.jsx)(x.G,{icon:u.S6C})})]})]})]}):null},u7=e=>{let{doc:t,docEditorType:i,commentsEnabled:n=!0}=e,{docId:r,setCollaborativeEditorInstance:l,editor:a}=(0,ta._i)(),{isOpen:d,onOpen:c,onClose:u}=(0,w.q)({id:"mobile-comment-feed-panel-drawer"}),{isOpen:x,onOpen:h,onClose:m}=(0,w.q)({id:"mobile-toc-drawer"}),[p,g]=(0,j.useState)(null);console.debug("%c[MobileEditorWrapper] RENDER - ".concat(r),"background-color: gold");let f=(0,e7.ye)("mobileEditing"),v=(0,eY.py)("edit",t),C=f&&v;return(0,s.jsxs)(o.k,{ref:(0,j.useCallback)(e=>g(e),[]),direction:"column",flex:1,children:[(0,s.jsx)(u6,{doc:t,editor:a,onCommentFeedOpen:c,commentsEnabled:!C&&n,editingEnabled:C,onTocOpen:h}),i===to.Z.PUBLIC_STATIC?(0,s.jsx)(oX,{docId:r,snapshotId:null==t?void 0:t.currentSnapshotId,scrollingParentSelector:u$,onCreate:l}):i===to.Z.EXAMPLE_STATIC?(0,s.jsx)(nZ,{docId:r,snapshotId:null==t?void 0:t.currentSnapshotId,scrollingParentSelector:u$,onCreate:l}):(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eO.Ge,{doc:t,docId:r,readOnly:!C,onCreate:l,scrollingParentSelector:u$}),a&&(0,s.jsx)(eq,{editor:a})]}),n&&d&&(0,s.jsx)(ep.Aj,{isOpen:d,onClose:u,drawerProps:{autoFocus:!1},children:(0,s.jsx)(ip,{onClose:u,editor:a})}),x&&(0,s.jsx)(ep.Aj,{isOpen:x,onClose:m,children:(0,s.jsx)(uQ.o,{rootElement:p,handleClose:m})}),(0,s.jsx)(cf,{doc:t,showButton:!1}),(0,s.jsx)(eN.a,{children:(0,s.jsx)(nz,{editor:a})})]})},u8=(0,ta.eT)(e=>{let{docEditorType:t}=e,{docId:i,isUnauthorized:n,editor:r}=(0,ta._i)();uT(i,t),ua(i,r),(0,uf.j)();let l=(0,j.useRef)(null),a=(0,M.CG)(tk.yx);console.debug("%c[MobileDocViewerComponent] RENDER - ".concat(i),"background-color: gold");let d=t===to.Z.COLLABORATIVE;return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(g(),{children:[(0,s.jsxs)("title",{children:["".concat(a?(0,l0.$)(a.title)+" | ":""),"Gamma"]}),(0,s.jsx)("meta",{name:"viewport",content:"width=device-width, user-scalable=no"})]}),(0,s.jsx)(s9.xB,{styles:{html:{overflowX:"hidden"},body:{overflow:"hidden scroll",WebkitOverflowScrolling:"touch"}}}),n?(0,s.jsxs)(o.k,{flex:1,alignItems:"center",justifyContent:"center",color:"gray.500",fontSize:"2xl",p:6,textAlign:"center",children:["It looks like you don't have access to this"," ",K.Yc,"."]}):(0,s.jsx)(o.k,{id:"doc-main",direction:"column",w:"100%",h:"100%","data-testid":"doc-editor-root",ref:l,flex:"1",children:(0,s.jsx)(u7,{doc:a,docEditorType:t,commentsEnabled:d})})]})})},55274:function(e,t,i){"use strict";i.d(t,{AA:function(){return u},DN:function(){return d},mb:function(){return c}});var n=i(5632),r=i(2784),l=i(91994),s=i(47968),o=i(78462),a=i(18412);let d=(0,r.createContext)({openPageSetup:(e,t)=>{},openSiteSettings:e=>{},openSharePanel:(e,t)=>{}}),c=(e,t)=>{let{push:i}=(0,n.useRouter)(),d=(0,l.qr)();return(0,r.useMemo)(()=>({openPageSetup:async(n,r)=>{if(!t)return;let l=()=>a.T.emit("openPageSetup",r);if(n!==e){let e=(0,o.yQ)({docId:n});await i(e);let t=d.subscribe(()=>{(0,s.ke)(d.getState())===n&&(l(),t())})}else l()},openSiteSettings:e=>{a.T.emit("openSiteSettings",e)},openSharePanel:async(t,n)=>{let r=()=>a.T.emit("openSharePanel",n);if(t!==e){let e=(0,o.yQ)({docId:t});await i(e);let n=d.subscribe(()=>{(0,s.ke)(d.getState())===t&&(r(),n())})}else r()}}),[e,i,t,d])},u=()=>(0,r.useContext)(d)},7e4:function(e,t,i){"use strict";i.d(t,{X:function(){return l}});var n=i(2784),r=i(18733);function l(e,t){let[i,l]=(0,n.useState)(()=>{try{let i=r.Q.getItem(e);if(null===i)return t;return JSON.parse(i)}catch(e){return console.error("[useSessionStorage.getItem] Error getting sessionStorage item",e),t}}),s=(0,n.useCallback)(t=>{try{r.Q.setItem(e,JSON.stringify(t)),l(t)}catch(e){console.error("[useSessionStorage.setItem] Error setting sessionStorage item",e)}},[e]);return[i,s]}},62376:function(){},6991:function(){},76298:function(){},4466:function(){},43839:function(){},2517:function(){}},function(e){e.O(0,[9774,7662,8433,2182,2812,8774,6694,4078,3273,9025,5333,4424,8707,146,3661,3016,116,2545,9808,5112,3693,931,2808,4328,205,8271,6527,2252,1537,6656,2681,8794,9718,4001,6390,887,2285,5641,9070,2888,179],function(){return e(e.s=12589)}),_N_E=e.O()}]);
//# sourceMappingURL=[docId]-818621772a834598.js.map